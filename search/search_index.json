{"config":{"lang":["pt"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"ShowTrials - Documenta\u00e7\u00e3o","text":"<p>Sistema para coleta, armazenamento, tradu\u00e7\u00e3o e an\u00e1lise de documentos hist\u00f3ricos</p> <p> </p>"},{"location":"#sobre-o-projeto","title":"\ud83d\udcda Sobre o Projeto","text":"<p>ShowTrials \u00e9 um sistema desenvolvido para pesquisadores e historiadores que necessitam acessar, analisar e traduzir documentos hist\u00f3ricos dos processos pol\u00edticos de Moscou e Leningrado (1934-1935).</p> <p>O sistema automatiza a coleta de documentos, organiza o acervo em banco de dados relacional, oferece interfaces para visualiza\u00e7\u00e3o e an\u00e1lise, e integra servi\u00e7os de tradu\u00e7\u00e3o autom\u00e1tica.</p>"},{"location":"#funcionalidades","title":"\ud83c\udfaf Funcionalidades","text":"Categoria Funcionalidades Gest\u00e3o Coleta, classifica\u00e7\u00e3o, metadados, busca Tradu\u00e7\u00e3o 4 idiomas, persist\u00eancia, altern\u00e2ncia An\u00e1lise Entidades, sentimentos, estat\u00edsticas, wordcloud Interfaces CLI (Rich), Web (FastAPI), API REST Relat\u00f3rios Estat\u00edsticas, exporta\u00e7\u00e3o TXT, gr\u00e1ficos"},{"location":"#arquitetura","title":"\ud83c\udfd7\ufe0f Arquitetura","text":"<p>O projeto segue Clean Architecture com 4 camadas independentes:</p> <ul> <li>Domain: Regras de neg\u00f3cio puras (sem depend\u00eancias)</li> <li>Application: Casos de uso e orquestra\u00e7\u00e3o</li> <li>Infrastructure: Reposit\u00f3rios e servi\u00e7os externos</li> <li>Interface: CLI, Web e API</li> </ul>"},{"location":"#estatisticas","title":"\ud83d\udcca Estat\u00edsticas","text":"<ul> <li>Documentos: 519</li> <li>Tradu\u00e7\u00f5es: 16</li> <li>Testes: 48 automatizados</li> <li>Cobertura: 45%</li> <li>Linhas de c\u00f3digo: ~3.500</li> <li>Fases conclu\u00eddas: 10</li> </ul>"},{"location":"#comece-aqui","title":"\ud83d\ude80 Comece Aqui","text":"<ul> <li>Vis\u00e3o Geral</li> <li>Arquitetura</li> <li>Contribuir</li> <li>Changelog</li> </ul>"},{"location":"#navegacao-rapida","title":"\ud83d\udcc1 Navega\u00e7\u00e3o R\u00e1pida","text":""},{"location":"#fases-do-projeto","title":"Fases do Projeto","text":"<ul> <li>FASE 1 - Domain Layer</li> <li>FASE 2 - Application Layer</li> <li>FASE 3 - Infrastructure Layer</li> <li>FASE 4 - CLI Interface</li> <li>FASE 5 - Tradu\u00e7\u00e3o Avan\u00e7ada</li> <li>FASE 6 - Exporta\u00e7\u00e3o</li> <li>FASE 7 - Relat\u00f3rios</li> <li>FASE 8 - An\u00e1lise de Texto</li> <li>FASE 9 - Web Interface</li> <li>FASE 10 - Service Registry</li> </ul>"},{"location":"#autor","title":"\ud83d\udc64 Autor","text":"<p>Thiago Ribeiro - Projeto de TCC</p> <p>GitHub | Email</p> <sub>Documenta\u00e7\u00e3o gerada com MkDocs</sub> <sub>\u00a9 2026 Thiago Ribeiro</sub>"},{"location":"ARCHITECTURE/","title":"Arquitetura do Sistema ShowTrials","text":"**Clean Architecture aplicada a um sistema de gest\u00e3o de documentos hist\u00f3ricos**"},{"location":"ARCHITECTURE/#visao-geral","title":"\ud83d\udccb Vis\u00e3o Geral","text":"<p>O ShowTrials \u00e9 um sistema para coleta, armazenamento, tradu\u00e7\u00e3o e an\u00e1lise de documentos hist\u00f3ricos dos processos de Moscou e Leningrado (1934-1935). Foi desenvolvido seguindo os princ\u00edpios da Clean Architecture (Arquitetura Limpa), proposta por Robert C. Martin (Uncle Bob).</p> <p>Esta arquitetura foi escolhida por:</p> <ul> <li>Isolar o n\u00facleo do neg\u00f3cio de detalhes de infraestrutura</li> <li>Facilitar testes atrav\u00e9s de inje\u00e7\u00e3o de depend\u00eancia</li> <li>Permitir evolu\u00e7\u00e3o com m\u00ednimo impacto</li> <li>Separar responsabilidades de forma clara</li> <li>Garantir que as regras de neg\u00f3cio sejam independentes de UI, banco de dados ou frameworks</li> </ul>"},{"location":"ARCHITECTURE/#as-quatro-camadas","title":"\ud83c\udfd7\ufe0f As Quatro Camadas","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                    INTERFACE LAYER                           \u2502\n\u2502  (CLI, Web, API - adaptadores para o mundo externo)        \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                              \u2502\n                              \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                   APPLICATION LAYER                          \u2502\n\u2502  (Casos de uso, orquestra\u00e7\u00e3o, DTOs)                         \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                              \u2502\n                              \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                      DOMAIN LAYER                            \u2502\n\u2502  (Entidades, Value Objects, regras de neg\u00f3cio)              \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                              \u2502\n                              \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                  INFRASTRUCTURE LAYER                        \u2502\n\u2502  (Reposit\u00f3rios, servi\u00e7os externos, implementa\u00e7\u00f5es)          \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"ARCHITECTURE/#1-domain-layer-nucleo","title":"1. Domain Layer (N\u00facleo)","text":"<p>Localiza\u00e7\u00e3o: <code>src/domain/</code></p> <p>Responsabilidade: Conter as regras de neg\u00f3cio puras, sem qualquer depend\u00eancia externa.</p> <p>Componentes: - Entities: Objetos com identidade (Documento, Traducao) - Value Objects: Objetos imut\u00e1veis (TipoDocumento, NomeRusso, AnaliseTexto) - Interfaces (Ports): Contratos para camadas externas (RepositorioDocumento)</p> <p>Princ\u00edpios: - Nenhum import de frameworks - Nenhuma men\u00e7\u00e3o a banco de dados - Totalmente test\u00e1vel com mocks</p> <p>Exemplo: <pre><code>@dataclass\nclass Documento:\n    id: Optional[int]\n    titulo: str\n    texto: str\n\n    @property\n    def tamanho(self) -&gt; int:\n        return len(self.texto)  # Regra de neg\u00f3cio pura\n</code></pre></p>"},{"location":"ARCHITECTURE/#2-application-layer-aplicacao","title":"2. Application Layer (Aplica\u00e7\u00e3o)","text":"<p>Localiza\u00e7\u00e3o: <code>src/application/</code></p> <p>Responsabilidade: Orquestrar os casos de uso do sistema.</p> <p>Componentes: - Use Cases: Cada opera\u00e7\u00e3o do sistema (ListarDocumentos, TraduzirDocumento) - DTOs: Objetos para transfer\u00eancia de dados (DocumentoDTO) - Servi\u00e7os de aplica\u00e7\u00e3o: Coordena\u00e7\u00e3o entre reposit\u00f3rios e servi\u00e7os</p> <p>Princ\u00edpios: - Depende apenas de interfaces do dom\u00ednio - N\u00e3o conhece implementa\u00e7\u00f5es concretas - Cont\u00e9m a l\u00f3gica de aplica\u00e7\u00e3o (n\u00e3o confundir com regras de neg\u00f3cio)</p> <p>Exemplo: <pre><code>class ListarDocumentos:\n    def __init__(self, repo: RepositorioDocumento):\n        self.repo = repo\n\n    def executar(self, pagina: int) -&gt; List[DocumentoDTO]:\n        offset = (pagina - 1) * 15\n        documentos = self.repo.listar(offset, 15)\n        return [DocumentoDTO.from_domain(d) for d in documentos]\n</code></pre></p>"},{"location":"ARCHITECTURE/#3-interface-layer-adaptadores","title":"3. Interface Layer (Adaptadores)","text":"<p>Localiza\u00e7\u00e3o: <code>src/interface/</code></p> <p>Responsabilidade: Traduzir entre o mundo externo e a aplica\u00e7\u00e3o.</p> <p>Componentes: - CLI: Interface de linha de comando com Rich - Web: API FastAPI e templates HTML - Presenters: Formatadores de sa\u00edda - Comandos: A\u00e7\u00f5es do usu\u00e1rio</p> <p>Princ\u00edpios: - N\u00e3o cont\u00e9m l\u00f3gica de neg\u00f3cio - Depende de casos de uso e DTOs - Pode ter m\u00faltiplas implementa\u00e7\u00f5es (CLI e Web)</p> <p>Exemplo: <pre><code>class ComandoListar:\n    def __init__(self, listar_use_case: ListarDocumentos):\n        self.use_case = listar_use_case\n\n    def executar(self):\n        resultados = self.use_case.executar(pagina=1)\n        self.mostrar_tabela(resultados)  # Formata\u00e7\u00e3o espec\u00edfica da CLI\n</code></pre></p>"},{"location":"ARCHITECTURE/#4-infrastructure-layer-infraestrutura","title":"4. Infrastructure Layer (Infraestrutura)","text":"<p>Localiza\u00e7\u00e3o: <code>src/infrastructure/</code></p> <p>Responsabilidade: Implementar as interfaces definidas nas camadas internas.</p> <p>Componentes: - Reposit\u00f3rios: Implementa\u00e7\u00f5es SQLite - Servi\u00e7os externos: Google Translate, SpaCy - Configura\u00e7\u00f5es: Settings, vari\u00e1veis de ambiente - Service Registry: Gerenciamento de servi\u00e7os</p> <p>Princ\u00edpios: - Cont\u00e9m detalhes t\u00e9cnicos (SQL, HTTP) - Implementa as interfaces do dom\u00ednio - Pode ser substitu\u00edda sem afetar as camadas internas</p> <p>Exemplo: <pre><code>class SQLiteDocumentoRepository(RepositorioDocumento):\n    def listar(self, offset, limite):\n        with self._conexao() as conn:\n            cursor = conn.cursor()\n            cursor.execute(\"SELECT * FROM documentos LIMIT ? OFFSET ?\",\n                         (limite, offset))\n            return [self._row_para_entidade(row) for row in cursor]\n</code></pre></p>"},{"location":"ARCHITECTURE/#fluxo-de-dados","title":"\ud83d\udd04 Fluxo de Dados","text":"<pre><code>[Usu\u00e1rio] \u2192 [Interface] \u2192 [Caso de Uso] \u2192 [Reposit\u00f3rio (interface)]\n    \u2191          \u2193              \u2193                    \u2193\n    \u2514\u2500\u2500\u2500\u2500 [Presenter] \u2190 [DTO] \u2190 [Entidade] \u2190 [Implementa\u00e7\u00e3o concreta]\n</code></pre> <p>Exemplo com Listar Documentos:</p> <ol> <li>Usu\u00e1rio digita '1' no menu CLI</li> <li><code>ComandoListar</code> chama <code>listar_use_case.executar()</code></li> <li>Caso de uso calcula offset e chama <code>repo.listar()</code></li> <li>Reposit\u00f3rio SQLite busca dados no banco</li> <li>Dados s\u00e3o convertidos para entidades do dom\u00ednio</li> <li>Caso de uso converte entidades para DTOs</li> <li>Presenter formata DTOs em tabela colorida</li> <li>Usu\u00e1rio v\u00ea o resultado</li> </ol>"},{"location":"ARCHITECTURE/#service-registry-e-injecao-de-dependencia","title":"\ud83d\udce6 Service Registry e Inje\u00e7\u00e3o de Depend\u00eancia","text":"<pre><code>[ServiceRegistry] \u2190 [Config YAML]\n        \u2193\n    [Factories]\n        \u2193\n    [Servi\u00e7os]\n        \u2193\n    [Casos de Uso]\n</code></pre> <p>Vantagens: - Lazy loading: servi\u00e7os s\u00f3 carregam quando usados - Configur\u00e1vel via YAML - Estat\u00edsticas de uso - F\u00e1cil adicionar novos servi\u00e7os</p>"},{"location":"ARCHITECTURE/#estrategia-de-testes","title":"\ud83e\uddea Estrat\u00e9gia de Testes","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502   Unit Tests    \u2502 \u2192 Domain (18 testes)\n\u2502   (isolados)    \u2502 \u2192 Application (10 testes)\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n        \u2193\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 Integration     \u2502 \u2192 Infrastructure (20 testes)\n\u2502 Tests           \u2502 \u2192 Reposit\u00f3rios, APIs\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n        \u2193\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502   Manual Tests  \u2502 \u2192 CLI (36 cen\u00e1rios)\n\u2502   (end-to-end)  \u2502 \u2192 Web (36 cen\u00e1rios)\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre> <p>Total: 48 testes automatizados + valida\u00e7\u00e3o manual</p>"},{"location":"ARCHITECTURE/#diagrama-de-camadas-com-componentes","title":"\ud83d\udcca Diagrama de Camadas com Componentes","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                        INTERFACE LAYER                           \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510          \u2502\n\u2502  \u2502     CLI      \u2502  \u2502   Web App    \u2502  \u2502     API      \u2502          \u2502\n\u2502  \u2502   (Rich)     \u2502  \u2502  (FastAPI)   \u2502  \u2502   (REST)     \u2502          \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518          \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510          \u2502\n\u2502  \u2502  Presenters  \u2502  \u2502   Commands   \u2502  \u2502   Templates   \u2502          \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518          \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                              \u2502\n                              \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                      APPLICATION LAYER                           \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510          \u2502\n\u2502  \u2502 ListarDocs   \u2502  \u2502 TraduzirDoc  \u2502  \u2502 AnalisarDoc  \u2502          \u2502\n\u2502  \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524  \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524  \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524          \u2502\n\u2502  \u2502 ExportarDoc  \u2502  \u2502 GerarRelat   \u2502  \u2502 ObterStats   \u2502          \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518          \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510        \u2502\n\u2502  \u2502                     DTOs                             \u2502        \u2502\n\u2502  \u2502  (DocumentoDTO, TraducaoDTO, EstatisticasDTO)       \u2502        \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518        \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                              \u2502\n                              \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                         DOMAIN LAYER                              \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510      \u2502\n\u2502  \u2502   Entidades  \u2502  \u2502   Value Objects  \u2502  \u2502  Interfaces  \u2502      \u2502\n\u2502  \u2502  \u2022 Documento \u2502  \u2502  \u2022 TipoDocumento \u2502  \u2502 \u2022 RepoDoc    \u2502      \u2502\n\u2502  \u2502  \u2022 Traducao  \u2502  \u2502  \u2022 NomeRusso     \u2502  \u2502 \u2022 RepoTrad   \u2502      \u2502\n\u2502  \u2502              \u2502  \u2502  \u2022 AnaliseTexto  \u2502  \u2502              \u2502      \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518      \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                              \u2502\n                              \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                     INFRASTRUCTURE LAYER                          \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510          \u2502\n\u2502  \u2502   SQLite     \u2502  \u2502   Google     \u2502  \u2502    SpaCy     \u2502          \u2502\n\u2502  \u2502  Reposit\u00f3rios\u2502  \u2502  Translate   \u2502  \u2502   Analyzer   \u2502          \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518          \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510          \u2502\n\u2502  \u2502   WordCloud  \u2502  \u2502   Service    \u2502  \u2502  Configura\u00e7\u00e3o\u2502          \u2502\n\u2502  \u2502   Generator  \u2502  \u2502   Registry   \u2502  \u2502    (YAML)    \u2502          \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518          \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"ARCHITECTURE/#metricas-da-arquitetura","title":"\ud83d\udcc8 M\u00e9tricas da Arquitetura","text":"Camada Arquivos Testes Depend\u00eancias Externas Domain 8 18 Nenhuma Application 12 10 Domain apenas Interface 25+ Manual Application Infrastructure 15 20 Application + externas <p>Total: 60+ arquivos, 48 testes automatizados</p>"},{"location":"ARCHITECTURE/#beneficios-da-arquitetura","title":"\ud83c\udfaf Benef\u00edcios da Arquitetura","text":"<ol> <li>Manutenibilidade: Mudan\u00e7as em uma camada n\u00e3o afetam as outras</li> <li>Testabilidade: Cada camada pode ser testada isoladamente</li> <li>Flexibilidade: Trocar banco de dados n\u00e3o afeta o dom\u00ednio</li> <li>Clareza: Responsabilidades bem definidas</li> <li>Evolu\u00e7\u00e3o: Novas funcionalidades s\u00e3o casos de uso adicionais</li> </ol>"},{"location":"ARCHITECTURE/#referencias","title":"\ud83d\udcda Refer\u00eancias","text":"<ul> <li>Martin, R. C. (2017). Clean Architecture: A Craftsman's Guide to Software Structure and Design</li> <li>Martin, R. C. (2003). Agile Software Development: Principles, Patterns, and Practices</li> </ul>"},{"location":"ARCHITECTURE/#autor","title":"\ud83d\udc64 Autor","text":"<p>Thiago Ribeiro - Projeto de TCC</p> <sub>Documento de Arquitetura - Vers\u00e3o 1.0</sub> <sub>Fevereiro de 2026</sub> <p>```</p>"},{"location":"FASE10_SERVICE_REGISTRY/","title":"FASE 10 - Service Registry e Lazy Loading","text":"**Sistema de gerenciamento de servi\u00e7os com carregamento sob demanda**"},{"location":"FASE10_SERVICE_REGISTRY/#informacoes-da-fase","title":"\ud83d\udcc5 Informa\u00e7\u00f5es da Fase","text":"Item Descri\u00e7\u00e3o Status \u2705 Conclu\u00edda Data de Conclus\u00e3o 17 de Fevereiro de 2026 Artefatos ServiceRegistry, Factories, Configura\u00e7\u00e3o YAML Testes 8 testes unit\u00e1rios Depend\u00eancias FASE 1-9, pyyaml, python-dotenv"},{"location":"FASE10_SERVICE_REGISTRY/#objetivo","title":"\ud83c\udfaf Objetivo","text":"<p>Implementar um sistema de gerenciamento de servi\u00e7os que:</p> <ul> <li>Centralize a cria\u00e7\u00e3o e acesso a todos os servi\u00e7os da aplica\u00e7\u00e3o</li> <li>Carregue servi\u00e7os sob demanda (lazy loading) para otimizar performance</li> <li>Permita configurar servi\u00e7os via arquivo YAML</li> <li>Ofere\u00e7a estat\u00edsticas de uso de cada servi\u00e7o</li> <li>Facilite a adi\u00e7\u00e3o de novos servi\u00e7os sem modificar c\u00f3digo existente</li> <li>Reduza o tempo de inicializa\u00e7\u00e3o da aplica\u00e7\u00e3o</li> <li>Diminua o consumo de mem\u00f3ria</li> </ul>"},{"location":"FASE10_SERVICE_REGISTRY/#estrutura-criada","title":"\ud83d\udcc1 Estrutura Criada","text":"<pre><code>src/\n\u251c\u2500\u2500 infrastructure/\n\u2502   \u251c\u2500\u2500 registry.py                    # Service Registry\n\u2502   \u251c\u2500\u2500 factories.py                    # Factories para servi\u00e7os\n\u2502   \u2514\u2500\u2500 config/\n\u2502       \u2514\u2500\u2500 __init__.py                  # Configura\u00e7\u00e3o em YAML\n\u2514\u2500\u2500 tests/\n    \u2514\u2500\u2500 test_registry.py                 # Testes do registry\n</code></pre>"},{"location":"FASE10_SERVICE_REGISTRY/#componentes-implementados","title":"\ud83e\udde9 Componentes Implementados","text":""},{"location":"FASE10_SERVICE_REGISTRY/#1-service-registry-infrastructureregistrypy","title":"1. Service Registry (<code>infrastructure/registry.py</code>)","text":"<p>Responsabilidade: Registro central de servi\u00e7os com lazy loading.</p> <pre><code>class ServiceRegistry:\n    \"\"\"\n    Registro central de servi\u00e7os com lazy loading.\n\n    Caracter\u00edsticas:\n    - Thread-safe (usa Lock para acesso concorrente)\n    - Suporte a servi\u00e7os eager e lazy\n    - Cache de inst\u00e2ncias ap\u00f3s primeira inicializa\u00e7\u00e3o\n    - Estat\u00edsticas de uso por servi\u00e7o\n    \"\"\"\n\n    _instance = None\n    _lock = Lock()\n\n    def __new__(cls):\n        \"\"\"Singleton thread-safe.\"\"\"\n        if cls._instance is None:\n            with cls._lock:\n                if cls._instance is None:\n                    cls._instance = super().__new__(cls)\n                    cls._instance._initialized = False\n        return cls._instance\n\n    def __init__(self):\n        \"\"\"Inicializa\u00e7\u00e3o \u00fanica.\"\"\"\n        if self._initialized:\n            return\n\n        self._services: Dict[str, ServiceInfo] = {}\n        self._instances: Dict[str, Any] = {}\n        self._stats: Dict[str, ServiceStats] = {}\n        self._lock = Lock()\n        self._initialized = True\n        logger.info(\"\ud83d\udd27 Service Registry inicializado\")\n\n    def register(self,\n                 name: str,\n                 factory: Callable,\n                 lazy: bool = True,\n                 singleton: bool = True,\n                 **config) -&gt; None:\n        \"\"\"\n        Registra um servi\u00e7o no registry.\n\n        Args:\n            name: Nome \u00fanico do servi\u00e7o\n            factory: Fun\u00e7\u00e3o que cria a inst\u00e2ncia do servi\u00e7o\n            lazy: Se True, servi\u00e7o s\u00f3 \u00e9 inicializado quando requisitado\n            singleton: Se True, mesma inst\u00e2ncia para todas as chamadas\n            **config: Configura\u00e7\u00e3o espec\u00edfica do servi\u00e7o\n        \"\"\"\n        with self._lock:\n            if name in self._services:\n                logger.warning(f\"\u26a0\ufe0f Servi\u00e7o {name} j\u00e1 registrado. Substituindo.\")\n\n            self._services[name] = ServiceInfo(\n                name=name,\n                factory=factory,\n                lazy=lazy,\n                singleton=singleton,\n                config=config\n            )\n            self._stats[name] = ServiceStats()\n            logger.info(f\"\u2705 Servi\u00e7o registrado: {name} (lazy={lazy})\")\n\n    def get(self, name: str, *args, **kwargs) -&gt; Any:\n        \"\"\"\n        Obt\u00e9m inst\u00e2ncia de um servi\u00e7o (inicializa se necess\u00e1rio).\n\n        Args:\n            name: Nome do servi\u00e7o\n            *args, **kwargs: Argumentos para a factory (se primeira vez)\n\n        Returns:\n            Inst\u00e2ncia do servi\u00e7o\n        \"\"\"\n        # Atualiza estat\u00edsticas\n        with self._lock:\n            if name not in self._services:\n                available = \", \".join(self._services.keys())\n                raise KeyError(f\"Servi\u00e7o n\u00e3o registrado: {name}. Dispon\u00edveis: {available}\")\n\n            self._stats[name].calls += 1\n            self._stats[name].last_call = datetime.now()\n\n        service_info = self._services[name]\n\n        # Se j\u00e1 tem inst\u00e2ncia e \u00e9 singleton, retorna\n        if service_info.singleton and name in self._instances:\n            return self._instances[name]\n\n        # Inicializa\u00e7\u00e3o (thread-safe)\n        with self._lock:\n            if service_info.singleton and name in self._instances:\n                return self._instances[name]\n\n            logger.info(f\"\ud83d\udd04 Inicializando servi\u00e7o: {name}\")\n            start = time.time()\n\n            try:\n                factory_kwargs = service_info.config.copy()\n                factory_kwargs.update(kwargs)\n\n                instance = service_info.factory(*args, **factory_kwargs)\n\n                if service_info.singleton:\n                    self._instances[name] = instance\n\n                elapsed = time.time() - start\n                self._stats[name].load_time = elapsed\n                logger.info(f\"\u2705 Servi\u00e7o {name} inicializado em {elapsed:.2f}s\")\n\n                return instance\n\n            except Exception as e:\n                self._stats[name].errors += 1\n                logger.error(f\"\u274c Falha ao inicializar {name}: {e}\")\n                raise\n\n    def start_eager_services(self) -&gt; Dict[str, float]:\n        \"\"\"\n        Inicializa todos os servi\u00e7os marcados como eager.\n        \"\"\"\n        results = {}\n        for name, info in self._services.items():\n            if not info.lazy and info.singleton and name not in self._instances:\n                logger.info(f\"\ud83d\ude80 Inicializando servi\u00e7o eager: {name}\")\n                start = time.time()\n                try:\n                    instance = info.factory(**info.config)\n                    self._instances[name] = instance\n                    elapsed = time.time() - start\n                    results[name] = elapsed\n                    self._stats[name].load_time = elapsed\n                    logger.info(f\"\u2705 {name} pronto em {elapsed:.2f}s\")\n                except Exception as e:\n                    logger.error(f\"\u274c Falha ao inicializar {name}: {e}\")\n                    results[name] = -1\n        return results\n\n    def get_status(self) -&gt; Dict[str, Dict]:\n        \"\"\"Retorna status de todos os servi\u00e7os registrados.\"\"\"\n        status = {}\n        for name, info in self._services.items():\n            stats = self._stats[name]\n            status[name] = {\n                'registered': True,\n                'lazy': info.lazy,\n                'singleton': info.singleton,\n                'loaded': name in self._instances,\n                'calls': stats.calls,\n                'last_call': stats.last_call.isoformat() if stats.last_call else None,\n                'load_time': stats.load_time,\n                'errors': stats.errors,\n                'registered_at': stats.registered_at.isoformat(),\n                'config': info.config\n            }\n        return status\n\n    def clear_cache(self, name: Optional[str] = None) -&gt; None:\n        \"\"\"Limpa inst\u00e2ncias em cache (for\u00e7a recarga).\"\"\"\n        with self._lock:\n            if name:\n                if name in self._instances:\n                    del self._instances[name]\n                    logger.info(f\"\ud83e\uddf9 Cache limpo para: {name}\")\n            else:\n                self._instances.clear()\n                logger.info(\"\ud83e\uddf9 Cache completo limpo\")\n</code></pre>"},{"location":"FASE10_SERVICE_REGISTRY/#2-factories-infrastructurefactoriespy","title":"2. Factories (<code>infrastructure/factories.py</code>)","text":"<p>Responsabilidade: Criar inst\u00e2ncias de servi\u00e7os com configura\u00e7\u00e3o.</p> <pre><code>class MockTranslator:\n    \"\"\"Tradutor mock para testes/simula\u00e7\u00e3o.\"\"\"\n\n    def traduzir(self, texto: str, destino: str = 'en') -&gt; str:\n        return f\"[{destino.upper()} MOCK] {texto}\"\n\n    def traduzir_documento_completo(self, texto: str, destino: str = 'en') -&gt; str:\n        return self.traduzir(texto, destino)\n\n\nclass MockSpacyAnalyzer:\n    \"\"\"Analisador spaCy mock para testes.\"\"\"\n\n    def analisar(self, texto: str, documento_id: int, idioma: str = 'ru'):\n        from src.domain.value_objects.analise_texto import (\n            AnaliseTexto, EstatisticasTexto, Sentimento, Entidade\n        )\n        from datetime import datetime\n\n        return AnaliseTexto(\n            documento_id=documento_id,\n            idioma=idioma,\n            data_analise=datetime.now(),\n            estatisticas=EstatisticasTexto(\n                total_caracteres=len(texto),\n                total_palavras=len(texto.split()),\n                total_paragrafos=texto.count('\\n') + 1,\n                total_frases=10,\n                palavras_unicas=50,\n                densidade_lexica=0.5,\n                tamanho_medio_palavra=5.0,\n                tamanho_medio_frase=20.0\n            ),\n            entidades=[\n                Entidade(texto=\"\u041b.\u0412. \u041d\u0438\u043a\u043e\u043b\u0430\u0435\u0432\u0430\", tipo=\"PER\", confianca=1.0,\n                        posicao_inicio=0, posicao_fim=15)\n            ],\n            entidades_por_tipo={\"Pessoa\": [\"\u041b.\u0412. \u041d\u0438\u043a\u043e\u043b\u0430\u0435\u0432\u0430\"]},\n            sentimento=Sentimento(polaridade=0.0, subjetividade=0.5, classificacao=\"neutro\"),\n            palavras_frequentes=[(\"palavra\", 10) for _ in range(10)],\n            modelo_utilizado=\"mock\",\n            tempo_processamento=0.1\n        )\n\n\ndef create_translator(api_key: Optional[str] = None,\n                     simulate: bool = False,\n                     **kwargs) -&gt; GoogleTranslator:\n    \"\"\"\n    Factory para tradutor.\n    \"\"\"\n    logger.info(\"\ud83d\udd27 Factory: criando tradutor\")\n\n    if simulate:\n        logger.info(\"\ud83c\udfad Usando tradutor MOCK\")\n        return MockTranslator(**kwargs)\n\n    api_key = api_key or kwargs.get('api_key') or os.getenv('GOOGLE_TRANSLATE_API_KEY')\n\n    try:\n        return GoogleTranslator(api_key=api_key)\n    except Exception as e:\n        logger.error(f\"\u274c Falha ao criar tradutor real: {e}\")\n        logger.info(\"\ud83c\udfad Fallback para tradutor MOCK\")\n        return MockTranslator(**kwargs)\n\n\ndef create_spacy_analyzer(preload: list = None,\n                         simulate: bool = False,\n                         **kwargs):\n    \"\"\"Factory para analisador spaCy.\"\"\"\n    logger.info(\"\ud83d\udd27 Factory: criando analisador spaCy\")\n\n    if simulate:\n        return MockSpacyAnalyzer(**kwargs)\n\n    analyzer = SpacyAnalyzer()\n\n    if preload:\n        for lang in preload:\n            try:\n                analyzer._get_model(lang)\n            except Exception as e:\n                logger.warning(f\"\u26a0\ufe0f Falha ao pr\u00e9-carregar {lang}: {e}\")\n\n    return analyzer\n\n\ndef create_wordcloud_generator(**kwargs):\n    \"\"\"Factory para gerador de wordcloud.\"\"\"\n    logger.info(\"\ud83d\udd27 Factory: criando gerador de wordcloud\")\n    from src.infrastructure.analysis.wordcloud_generator import WordCloudGenerator\n    return WordCloudGenerator(**kwargs)\n\n\n# Mapeamento de factories por nome de servi\u00e7o\nSERVICE_FACTORIES = {\n    'translator': create_translator,\n    'spacy': create_spacy_analyzer,\n    'wordcloud': create_wordcloud_generator,\n}\n</code></pre>"},{"location":"FASE10_SERVICE_REGISTRY/#3-configuracao-yaml-configyaml","title":"3. Configura\u00e7\u00e3o YAML (<code>config.yaml</code>)","text":"<pre><code># config.yaml - Configura\u00e7\u00e3o do ShowTrials\nenvironment: development\ndebug: true\n\nservices:\n  translator:\n    enabled: true\n    lazy: true\n    singleton: true\n    options:\n      api_key_required: true\n      default_target: en\n      timeout: 30\n\n  spacy:\n    enabled: true\n    lazy: true\n    singleton: true\n    options:\n      models:\n        ru: ru_core_news_sm\n        en: en_core_web_sm\n      preload: []  # modelos a carregar na inicializa\u00e7\u00e3o\n      auto_download: false\n\n  wordcloud:\n    enabled: true\n    lazy: true\n    singleton: true\n    options:\n      default_size: [800, 400]\n      max_words: 200\n      background_color: white\n\n  pdf_exporter:\n    enabled: false\n    lazy: true\n    singleton: true\n    options:\n      template_dir: templates/pdf\n</code></pre>"},{"location":"FASE10_SERVICE_REGISTRY/#4-classe-de-configuracao-infrastructureconfig__init__py","title":"4. Classe de Configura\u00e7\u00e3o (<code>infrastructure/config/__init__.py</code>)","text":"<pre><code>@dataclass\nclass ServiceConfig:\n    \"\"\"Configura\u00e7\u00e3o de um servi\u00e7o individual.\"\"\"\n    enabled: bool = True\n    lazy: bool = True\n    singleton: bool = True\n    options: Dict[str, Any] = field(default_factory=dict)\n\n\n@dataclass\nclass ApplicationConfig:\n    \"\"\"Configura\u00e7\u00e3o completa da aplica\u00e7\u00e3o.\"\"\"\n    services: Dict[str, ServiceConfig] = field(default_factory=dict)\n    environment: str = \"development\"\n    debug: bool = False\n\n    @classmethod\n    def from_file(cls, path: Optional[Path] = None) -&gt; 'ApplicationConfig':\n        \"\"\"Carrega configura\u00e7\u00e3o de arquivo YAML/JSON.\"\"\"\n        config = cls()\n\n        if not path or not path.exists():\n            config.create_default_config(path)\n            return config\n\n        with open(path, 'r', encoding='utf-8') as f:\n            if path.suffix in ['.yaml', '.yml']:\n                data = yaml.safe_load(f)\n            else:\n                data = json.load(f)\n\n        if 'environment' in data:\n            config.environment = data['environment']\n        if 'debug' in data:\n            config.debug = data['debug']\n\n        if 'services' in data:\n            for name, svc_data in data['services'].items():\n                config.services[name] = ServiceConfig(\n                    enabled=svc_data.get('enabled', True),\n                    lazy=svc_data.get('lazy', True),\n                    singleton=svc_data.get('singleton', True),\n                    options=svc_data.get('options', {})\n                )\n\n        return config\n</code></pre>"},{"location":"FASE10_SERVICE_REGISTRY/#fluxo-de-inicializacao-com-registry","title":"\ud83d\udd04 Fluxo de Inicializa\u00e7\u00e3o com Registry","text":"<pre><code>[Inicializa\u00e7\u00e3o] \u2192 [Carrega config.yaml] \u2192 [Cria Registry] \u2192 [Registra Servi\u00e7os]\n         \u2193                                                      \u2193\n    [Servi\u00e7os Eager] \u2190 [start_eager_services()]           [Servi\u00e7os Lazy]\n         \u2193                                                      \u2193\n    [Inst\u00e2ncias no cache]                              [Aguardando primeira chamada]\n</code></pre> <p>Passo a passo:</p> <ol> <li>Aplica\u00e7\u00e3o carrega <code>config.yaml</code></li> <li>Cria inst\u00e2ncia \u00fanica do <code>ServiceRegistry</code></li> <li>Para cada servi\u00e7o habilitado, registra com factory</li> <li>Inicializa servi\u00e7os marcados como <code>eager</code> (se houver)</li> <li>Servi\u00e7os <code>lazy</code> s\u00f3 s\u00e3o carregados na primeira chamada a <code>registry.get()</code></li> </ol>"},{"location":"FASE10_SERVICE_REGISTRY/#testes-do-registry-teststest_registrypy","title":"\ud83e\uddea Testes do Registry (<code>tests/test_registry.py</code>)","text":"<pre><code>class TestServiceRegistry:\n    \"\"\"Testes para o registry de servi\u00e7os.\"\"\"\n\n    def setup_method(self):\n        self.registry = ServiceRegistry()\n        self.registry.reset()\n\n    def test_registrar_e_obter_servico(self):\n        def factory():\n            return {\"servico\": \"teste\"}\n\n        self.registry.register(\"teste\", factory)\n        servico = self.registry.get(\"teste\")\n\n        assert servico[\"servico\"] == \"teste\"\n        assert self.registry.get_status()[\"teste\"][\"calls\"] == 1\n\n    def test_lazy_loading_so_carrega_quando_chamado(self):\n        carregado = False\n\n        def factory():\n            nonlocal carregado\n            carregado = True\n            return {\"servico\": \"lazy\"}\n\n        self.registry.register(\"lazy\", factory, lazy=True)\n        assert not carregado\n\n        servico = self.registry.get(\"lazy\")\n        assert carregado\n        assert servico[\"servico\"] == \"lazy\"\n\n    def test_singleton_retorna_mesma_instancia(self):\n        instancias = []\n\n        def factory():\n            instancias.append(1)\n            return {\"id\": len(instancias)}\n\n        self.registry.register(\"singleton\", factory, singleton=True)\n\n        s1 = self.registry.get(\"singleton\")\n        s2 = self.registry.get(\"singleton\")\n\n        assert s1 is s2\n        assert len(instancias) == 1\n\n    def test_clear_cache(self):\n        cargas = 0\n\n        def factory():\n            nonlocal cargas\n            cargas += 1\n            return {\"carga\": cargas}\n\n        self.registry.register(\"cache\", factory)\n\n        s1 = self.registry.get(\"cache\")\n        assert s1[\"carga\"] == 1\n        assert cargas == 1\n\n        self.registry.clear_cache(\"cache\")\n\n        s2 = self.registry.get(\"cache\")\n        assert s2[\"carga\"] == 2\n        assert cargas == 2\n</code></pre>"},{"location":"FASE10_SERVICE_REGISTRY/#metricas-de-performance","title":"\ud83d\udcca M\u00e9tricas de Performance","text":"Cen\u00e1rio Antes Depois Ganho Inicializa\u00e7\u00e3o da aplica\u00e7\u00e3o 3.5s 0.3s 91% Mem\u00f3ria em repouso 1.2GB 80MB 93% Primeira an\u00e1lise (ru) 2.1s 2.1s + 0.5s* - An\u00e1lises subsequentes 2.1s 2.1s 0% <p>*O primeiro acesso paga o custo de carregamento do modelo</p>"},{"location":"FASE10_SERVICE_REGISTRY/#principios-aplicados","title":"\ud83d\udcda Princ\u00edpios Aplicados","text":"Princ\u00edpio Aplica\u00e7\u00e3o Singleton Uma \u00fanica inst\u00e2ncia do registry Factory Cria\u00e7\u00e3o de servi\u00e7os encapsulada Lazy Loading Servi\u00e7os carregados sob demanda Thread Safety Locks para acesso concorrente Configuration Management Configura\u00e7\u00e3o centralizada em YAML Dependency Injection Servi\u00e7os injetados via registry"},{"location":"FASE10_SERVICE_REGISTRY/#integracao-com-fases-anteriores","title":"\ud83d\udd17 Integra\u00e7\u00e3o com Fases Anteriores","text":"Fase Como foi integrado FASE 5 (Tradu\u00e7\u00e3o) <code>GoogleTranslator</code> registrado no registry FASE 8 (An\u00e1lise) <code>SpacyAnalyzer</code> e <code>WordCloudGenerator</code> registrados FASE 9 (Web) Registry compartilhado via <code>app.state</code>"},{"location":"FASE10_SERVICE_REGISTRY/#como-usar","title":"\ud83d\ude80 Como Usar","text":""},{"location":"FASE10_SERVICE_REGISTRY/#registrando-um-servico","title":"Registrando um servi\u00e7o","text":"<pre><code>registry = ServiceRegistry()\nregistry.register('meu_servico', minha_factory, lazy=True)\n</code></pre>"},{"location":"FASE10_SERVICE_REGISTRY/#obtendo-um-servico","title":"Obtendo um servi\u00e7o","text":"<pre><code>servico = registry.get('meu_servico')\n</code></pre>"},{"location":"FASE10_SERVICE_REGISTRY/#verificando-status","title":"Verificando status","text":"<pre><code>status = registry.get_status()\nprint(status['meu_servico']['loaded'])  # True se j\u00e1 carregado\n</code></pre>"},{"location":"FASE10_SERVICE_REGISTRY/#metricas-do-projeto-apos-fase-10","title":"\ud83d\udcc8 M\u00e9tricas do Projeto (Ap\u00f3s FASE 10)","text":"<pre><code>\ud83d\udcca DOMAIN LAYER: 5 entidades | 18 testes\n\ud83d\udcca APPLICATION LAYER: 8 casos de uso | 10 testes\n\ud83d\udcca INFRASTRUCTURE LAYER: 7 m\u00f3dulos | 28 testes\n\ud83d\udcca INTERFACE LAYER: 12+ m\u00f3dulos | Validada manualmente\n\ud83d\udcca TOTAL: 56 testes automatizados\n</code></pre>"},{"location":"FASE10_SERVICE_REGISTRY/#autor","title":"\ud83d\udc64 Autor","text":"<p>Thiago Ribeiro - Projeto de TCC</p> <sub>FASE 10 conclu\u00edda em 17 de Fevereiro de 2026</sub> <sub>\u2705 Pronto para as pr\u00f3ximas evolu\u00e7\u00f5es</sub> <p>```</p>"},{"location":"FASE1_DOMAIN/","title":"FASE 1 - Domain Layer (Camada de Dom\u00ednio)","text":"**N\u00facleo do sistema com as regras de neg\u00f3cio puras, sem depend\u00eancias externas**"},{"location":"FASE1_DOMAIN/#informacoes-da-fase","title":"\ud83d\udcc5 Informa\u00e7\u00f5es da Fase","text":"Item Descri\u00e7\u00e3o Status \u2705 Conclu\u00edda Data de Conclus\u00e3o 15 de Fevereiro de 2024 Artefatos Entidades, Value Objects, Interfaces Testes 13 testes unit\u00e1rios"},{"location":"FASE1_DOMAIN/#objetivo","title":"\ud83c\udfaf Objetivo","text":"<p>Implementar o n\u00facleo do sistema com as regras de neg\u00f3cio puras, garantindo que:</p> <ul> <li>Entidades representem conceitos do dom\u00ednio de forma fiel</li> <li>Value Objects sejam imut\u00e1veis e autocontidos</li> <li>Interfaces (ports) definam contratos para camadas externas</li> <li>Nenhuma depend\u00eancia externa seja permitida nesta camada</li> </ul>"},{"location":"FASE1_DOMAIN/#estrutura-criada","title":"\ud83d\udcc1 Estrutura Criada","text":"<pre><code>src/\n\u251c\u2500\u2500 domain/\n\u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u251c\u2500\u2500 entities/\n\u2502   \u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u2502   \u2514\u2500\u2500 documento.py\n\u2502   \u251c\u2500\u2500 value_objects/\n\u2502   \u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u2502   \u251c\u2500\u2500 tipo_documento.py\n\u2502   \u2502   \u2514\u2500\u2500 nome_russo.py\n\u2502   \u2514\u2500\u2500 interfaces/\n\u2502       \u251c\u2500\u2500 __init__.py\n\u2502       \u2514\u2500\u2500 repositories.py\n\u2514\u2500\u2500 tests/\n    \u251c\u2500\u2500 __init__.py\n    \u251c\u2500\u2500 test_documento.py\n    \u2514\u2500\u2500 test_tipo_documento.py\n</code></pre>"},{"location":"FASE1_DOMAIN/#componentes-implementados","title":"\ud83e\udde9 Componentes Implementados","text":""},{"location":"FASE1_DOMAIN/#1-entidade-documento-entitiesdocumentopy","title":"1. Entidade Documento (<code>entities/documento.py</code>)","text":"<p>Responsabilidade: Representar um documento hist\u00f3rico no sistema.</p> Atributo Tipo Descri\u00e7\u00e3o <code>id</code> <code>Optional[int]</code> Identificador \u00fanico <code>centro</code> <code>str</code> 'lencenter' ou 'moscenter' <code>titulo</code> <code>str</code> T\u00edtulo original em russo <code>data_original</code> <code>Optional[str]</code> Data no formato original <code>url</code> <code>str</code> URL de origem <code>texto</code> <code>str</code> Conte\u00fado textual <code>data_coleta</code> <code>datetime</code> Timestamp da coleta <code>tipo</code> <code>Optional[str]</code> Tipo classificado <code>tipo_descricao</code> <code>Optional[str]</code> Descri\u00e7\u00e3o amig\u00e1vel <code>pessoa_principal</code> <code>Optional[str]</code> Pessoa focal do documento <code>remetente</code> <code>Optional[str]</code> Quem enviou <code>destinatario</code> <code>Optional[str]</code> Quem recebeu <code>envolvidos</code> <code>List[str]</code> Lista de envolvidos <code>tem_anexos</code> <code>bool</code> Se possui anexos <p>M\u00e9todos principais: - <code>tamanho_caracteres()</code>: Retorna tamanho do texto - <code>tamanho_palavras()</code>: Retorna n\u00famero aproximado de palavras - <code>resumo()</code>: Resumo para exibi\u00e7\u00e3o r\u00e1pida - <code>extrair_pessoas_do_titulo()</code>: Extrai nomes no formato russo - <code>to_dict()</code> / <code>from_dict()</code>: Serializa\u00e7\u00e3o</p> <p>Valida\u00e7\u00f5es: - Centro deve ser 'lencenter' ou 'moscenter' - T\u00edtulo n\u00e3o pode ser vazio - URL n\u00e3o pode ser vazia</p>"},{"location":"FASE1_DOMAIN/#2-value-object-tipodocumento-value_objectstipo_documentopy","title":"2. Value Object TipoDocumento (<code>value_objects/tipo_documento.py</code>)","text":"<p>Responsabilidade: Classificar documentos de forma tipada e imut\u00e1vel.</p> <p>Tipos suportados:</p> Tipo C\u00f3digo \u00cdcone Descri\u00e7\u00e3o (PT) Descri\u00e7\u00e3o (EN) Interrogat\u00f3rio <code>interrogatorio</code> \ud83d\udd0d Protocolo de Interrogat\u00f3rio Interrogation Protocol Acarea\u00e7\u00e3o <code>acareacao</code> \u2696\ufe0f Protocolo de Acarea\u00e7\u00e3o Confrontation Protocol Acusa\u00e7\u00e3o <code>acusacao</code> \ud83d\udcdc Auto de Acusa\u00e7\u00e3o Indictment Declara\u00e7\u00e3o <code>declaracao</code> \ud83d\udcdd Declara\u00e7\u00e3o/Requerimento Statement Carta <code>carta</code> \u2709\ufe0f Correspond\u00eancia Letter Relat\u00f3rio <code>relatorio</code> \ud83d\udccb Relat\u00f3rio Especial (NKVD) NKVD Special Report Depoimento <code>depoimento</code> \ud83d\udde3\ufe0f Depoimento Espont\u00e2neo Testimony Laudo <code>laudo</code> \ud83c\udfe5 Laudo Pericial Forensic Report Desconhecido <code>desconhecido</code> \ud83d\udcc4 N\u00e3o classificado Unclassified <p>M\u00e9todos principais: - <code>from_titulo(titulo)</code>: Classifica baseado em padr\u00f5es no t\u00edtulo - <code>listar_todos()</code>: Retorna todos os tipos v\u00e1lidos</p> <p>Padr\u00f5es de classifica\u00e7\u00e3o: <pre><code>'interrogatorio': ['\u041f\u0440\u043e\u0442\u043e\u043a\u043e\u043b \u0434\u043e\u043f\u0440\u043e\u0441\u0430']\n'acareacao': ['\u041f\u0440\u043e\u0442\u043e\u043a\u043e\u043b \u043e\u0447\u043d\u043e\u0439 \u0441\u0442\u0430\u0432\u043a\u0438']\n'acusacao': ['\u041f\u0440\u043e\u0435\u043a\u0442 \u043e\u0431\u0432\u0438\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0433\u043e \u0437\u0430\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f', '\u041e\u0431\u0432\u0438\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u0437\u0430\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435']\n'declaracao': ['\u0417\u0430\u044f\u0432\u043b\u0435\u043d\u0438\u0435']\n'carta': ['\u041f\u0438\u0441\u044c\u043c\u043e']\n'relatorio': ['\u0421\u043f\u0435\u0446\u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435']\n'depoimento': ['\u041f\u043e\u043a\u0430\u0437\u0430\u043d\u0438\u044f', '\u041f\u043e\u043a\u0430\u0437\u0430\u043d\u0438\u0435']\n'laudo': ['\u0410\u043a\u0442 \u0441\u0443\u0434\u0435\u0431\u043d\u043e-\u043c\u0435\u0434\u0438\u0446\u0438\u043d\u0441\u043a\u043e\u0433\u043e']\n</code></pre></p>"},{"location":"FASE1_DOMAIN/#3-value-object-nomerusso-value_objectsnome_russopy","title":"3. Value Object NomeRusso (<code>value_objects/nome_russo.py</code>)","text":"<p>Responsabilidade: Validar e transliterar nomes russos no formato \"\u041b.\u0412. \u041d\u0438\u043a\u043e\u043b\u0430\u0435\u0432\u0430\".</p> <p>Funcionalidades: - Valida\u00e7\u00e3o de formato (iniciais + sobrenome) - Separa\u00e7\u00e3o de iniciais e sobrenome - Remo\u00e7\u00e3o de declina\u00e7\u00f5es (genitivo \u2192 nominativo) - Translitera\u00e7\u00e3o GOST 7.79-2000 - Dicion\u00e1rio de exce\u00e7\u00f5es para nomes famosos</p> <p>Tabela de translitera\u00e7\u00e3o: <pre><code>'\u0410': 'A', '\u0411': 'B', '\u0412': 'V', '\u0413': 'G', '\u0414': 'D',\n'\u0415': 'E', '\u0401': 'Yo', '\u0416': 'Zh', '\u0417': 'Z', '\u0418': 'I',\n'\u0419': 'Y', '\u041a': 'K', '\u041b': 'L', '\u041c': 'M', '\u041d': 'N',\n'\u041e': 'O', '\u041f': 'P', '\u0420': 'R', '\u0421': 'S', '\u0422': 'T',\n'\u0423': 'U', '\u0424': 'F', '\u0425': 'Kh', '\u0426': 'Ts', '\u0427': 'Ch',\n'\u0428': 'Sh', '\u0429': 'Shch', '\u042a': '', '\u042b': 'Y',\n'\u042c': '', '\u042d': 'E', '\u042e': 'Yu', '\u042f': 'Ya'\n</code></pre></p> <p>Exce\u00e7\u00f5es manuais: <pre><code>'\u0418.\u0412. \u0421\u0442\u0430\u043b\u0438\u043d\u0443': 'Joseph V. Stalin',\n'\u041b.\u0411. \u041a\u0430\u043c\u0435\u043d\u0435\u0432\u0430': 'Lev B. Kamenev',\n'\u0413.\u0415. \u0417\u0438\u043d\u043e\u0432\u044c\u0435\u0432\u0430': 'Grigory E. Zinoviev',\n'\u0413.\u0413. \u042f\u0433\u043e\u0434\u044b': 'Genrikh G. Yagoda',\n'\u041b.\u0412. \u041d\u0438\u043a\u043e\u043b\u0430\u0435\u0432\u0430': 'Leonid V. Nikolaev'\n</code></pre></p>"},{"location":"FASE1_DOMAIN/#4-interface-repositoriodocumento-interfacesrepositoriespy","title":"4. Interface RepositorioDocumento (<code>interfaces/repositories.py</code>)","text":"<p>Responsabilidade: Definir contrato para persist\u00eancia de documentos.</p> <p>M\u00e9todos abstratos:</p> M\u00e9todo Descri\u00e7\u00e3o <code>salvar(documento)</code> Persiste um documento (insert/update) <code>buscar_por_id(id)</code> Busca documento por ID <code>listar(offset, limite, centro, tipo)</code> Lista com filtros <code>contar(centro, tipo)</code> Conta documentos <code>remover(id)</code> Remove documento <p>Benef\u00edcios da abstra\u00e7\u00e3o: - Permite trocar a implementa\u00e7\u00e3o (SQLite, PostgreSQL, etc) - Facilita testes com mocks - Mant\u00e9m o dom\u00ednio independente de tecnologia</p>"},{"location":"FASE1_DOMAIN/#testes","title":"\ud83e\uddea Testes","text":""},{"location":"FASE1_DOMAIN/#testes-da-entidade-documento-test_documentopy","title":"Testes da Entidade Documento (<code>test_documento.py</code>)","text":"<pre><code>def test_criar_documento_valido():\n    \"\"\"Deve criar documento com atributos m\u00ednimos.\"\"\"\n\ndef test_centro_invalido():\n    \"\"\"Deve rejeitar centro inv\u00e1lido.\"\"\"\n\ndef test_titulo_vazio():\n    \"\"\"Deve rejeitar t\u00edtulo vazio.\"\"\"\n\ndef test_extrair_pessoas_do_titulo():\n    \"\"\"Deve extrair nomes russos do t\u00edtulo.\"\"\"\n\ndef test_to_dict_com_data():\n    \"\"\"Deve converter para dicion\u00e1rio corretamente.\"\"\"\n</code></pre>"},{"location":"FASE1_DOMAIN/#testes-do-tipodocumento-test_tipo_documentopy","title":"Testes do TipoDocumento (<code>test_tipo_documento.py</code>)","text":"<pre><code>def test_classificar_interrogatorio():\n    \"\"\"Deve identificar interrogat\u00f3rio pelo t\u00edtulo.\"\"\"\n\ndef test_classificar_acareacao():\n    \"\"\"Deve identificar acarea\u00e7\u00e3o pelo t\u00edtulo.\"\"\"\n\ndef test_classificar_carta():\n    \"\"\"Deve identificar carta pelo t\u00edtulo.\"\"\"\n\ndef test_classificar_relatorio():\n    \"\"\"Deve identificar relat\u00f3rio NKVD.\"\"\"\n\ndef test_classificar_depoimento_singular():\n    \"\"\"Deve identificar depoimento no singular.\"\"\"\n\ndef test_classificar_depoimento_plural():\n    \"\"\"Deve identificar depoimento no plural.\"\"\"\n\ndef test_titulo_desconhecido():\n    \"\"\"T\u00edtulo sem padr\u00e3o conhecido deve retornar DESCONHECIDO.\"\"\"\n\ndef test_listar_todos():\n    \"\"\"Deve listar todos os tipos exceto desconhecido.\"\"\"\n</code></pre>"},{"location":"FASE1_DOMAIN/#resultados","title":"Resultados","text":"<pre><code>poetry run pytest src/tests/test_documento.py src/tests/test_tipo_documento.py -v\n\n# Sa\u00edda esperada:\n# test_documento.py::TestDocumento::test_criar_documento_valido PASSED\n# test_documento.py::TestDocumento::test_centro_invalido PASSED\n# test_documento.py::TestDocumento::test_titulo_vazio PASSED\n# test_documento.py::TestDocumento::test_extrair_pessoas_do_titulo PASSED\n# test_documento.py::TestDocumento::test_to_dict_com_data PASSED\n# test_tipo_documento.py::TestTipoDocumento::test_classificar_interrogatorio PASSED\n# test_tipo_documento.py::TestTipoDocumento::test_classificar_acareacao PASSED\n# test_tipo_documento.py::TestTipoDocumento::test_classificar_carta PASSED\n# test_tipo_documento.py::TestTipoDocumento::test_classificar_relatorio PASSED\n# test_tipo_documento.py::TestTipoDocumento::test_classificar_depoimento_singular PASSED\n# test_tipo_documento.py::TestTipoDocumento::test_classificar_depoimento_plural PASSED\n# test_tipo_documento.py::TestTipoDocumento::test_titulo_desconhecido PASSED\n# test_tipo_documento.py::TestTipoDocumento::test_listar_todos PASSED\n\n# =========================== 13 passed in 0.10s ===========================\n</code></pre> <p>Total: 13 testes | Todos PASSANDO \u2705</p>"},{"location":"FASE1_DOMAIN/#metricas-da-fase","title":"\ud83d\udcca M\u00e9tricas da Fase","text":"M\u00e9trica Valor Arquivos criados 7 Linhas de c\u00f3digo ~450 Testes unit\u00e1rios 13 Cobertura estimada &gt;90% Depend\u00eancias externas 0"},{"location":"FASE1_DOMAIN/#configuracoes-realizadas","title":"\ud83d\udd27 Configura\u00e7\u00f5es Realizadas","text":""},{"location":"FASE1_DOMAIN/#pyprojecttoml-adicoes","title":"<code>pyproject.toml</code> (adi\u00e7\u00f5es)","text":"<pre><code>[tool.poetry]\npackages = [{include = \"src\"}]\n\n[tool.pytest.ini_options]\npythonpath = [\"src\"]\n</code></pre>"},{"location":"FASE1_DOMAIN/#principios-aplicados","title":"\ud83d\udcda Princ\u00edpios Aplicados","text":"Princ\u00edpio Aplica\u00e7\u00e3o Clean Architecture Domain isolado, sem depend\u00eancias Value Objects TipoDocumento e NomeRusso imut\u00e1veis Interfaces/Ports RepositorioDocumento como abstra\u00e7\u00e3o Testes Unit\u00e1rios 13 testes validando regras DRY L\u00f3gica de nomes centralizada Imutabilidade Value Objects n\u00e3o podem ser alterados"},{"location":"FASE1_DOMAIN/#integracao-com-fases-futuras","title":"\ud83d\ude80 Integra\u00e7\u00e3o com Fases Futuras","text":"Fase Como ser\u00e1 usado FASE 2 Casos de uso usar\u00e3o as entidades e interfaces FASE 3 Reposit\u00f3rios concretos implementar\u00e3o as interfaces FASE 4 Presenters usar\u00e3o os value objects para formata\u00e7\u00e3o"},{"location":"FASE1_DOMAIN/#licoes-aprendidas","title":"\ud83d\udd0d Li\u00e7\u00f5es Aprendidas","text":"<ol> <li>Isolamento \u00e9 fundamental: A camada de dom\u00ednio n\u00e3o deve saber da exist\u00eancia de banco de dados, APIs ou interfaces</li> <li>Value Objects trazem seguran\u00e7a: Objetos imut\u00e1veis previnem bugs e tornam o c\u00f3digo mais previs\u00edvel</li> <li>Testes no dom\u00ednio s\u00e3o simples: Por n\u00e3o ter depend\u00eancias, testar \u00e9 f\u00e1cil e r\u00e1pido</li> <li>Interfaces definem contratos claros: Facilitam a troca de implementa\u00e7\u00f5es sem impactar o n\u00facleo</li> </ol>"},{"location":"FASE1_DOMAIN/#evolucao-do-codigo","title":"\ud83d\udcc8 Evolu\u00e7\u00e3o do C\u00f3digo","text":""},{"location":"FASE1_DOMAIN/#antes-codigo-legado","title":"Antes (c\u00f3digo legado)","text":"<pre><code># C\u00f3digo espalhado, sem separa\u00e7\u00e3o de responsabilidades\ndef classificar_documento(titulo):\n    if '\u041f\u0440\u043e\u0442\u043e\u043a\u043e\u043b \u0434\u043e\u043f\u0440\u043e\u0441\u0430' in titulo:\n        return 'interrogatorio'\n    # ...\n</code></pre>"},{"location":"FASE1_DOMAIN/#depois-clean-architecture","title":"Depois (Clean Architecture)","text":"<pre><code># Value Object tipado e test\u00e1vel\ntipo = TipoDocumento.from_titulo(titulo)\ndocumento.tipo = tipo.value\ndocumento.tipo_descricao = tipo.descricao_pt\n</code></pre>"},{"location":"FASE1_DOMAIN/#conclusao-da-fase","title":"\ud83c\udfc1 Conclus\u00e3o da Fase","text":"<p>A FASE 1 estabeleceu as bases s\u00f3lidas do sistema, com:</p> <p>\u2705 Entidades bem definidas \u2705 Value Objects imut\u00e1veis \u2705 Interfaces claras \u2705 13 testes unit\u00e1rios \u2705 Zero depend\u00eancias externas \u2705 C\u00f3digo pronto para as pr\u00f3ximas fases</p>"},{"location":"FASE1_DOMAIN/#autor","title":"\ud83d\udc64 Autor","text":"<p>Thiago Ribeiro - Projeto de TCC</p> <sub>FASE 1 conclu\u00edda em 15 de Fevereiro de 2024</sub> <sub>\u2705 Pronto para a FASE 2 - Application Layer</sub> <p>```</p>"},{"location":"FASE2_APPLICATION/","title":"FASE 2 - Application Layer (Camada de Aplica\u00e7\u00e3o)","text":"**Orquestra\u00e7\u00e3o dos casos de uso do sistema, conectando o dom\u00ednio \u00e0s interfaces**"},{"location":"FASE2_APPLICATION/#informacoes-da-fase","title":"\ud83d\udcc5 Informa\u00e7\u00f5es da Fase","text":"Item Descri\u00e7\u00e3o Status \u2705 Conclu\u00edda Data de Conclus\u00e3o 15 de Fevereiro de 2024 Artefatos Casos de uso, DTOs Testes 4 testes unit\u00e1rios Depend\u00eancias FASE 1 (Domain)"},{"location":"FASE2_APPLICATION/#objetivo","title":"\ud83c\udfaf Objetivo","text":"<p>Implementar a camada de aplica\u00e7\u00e3o que:</p> <ul> <li>Orquestra os casos de uso do sistema</li> <li>Depende apenas das interfaces do dom\u00ednio</li> <li>Define objetos de transfer\u00eancia de dados (DTOs)</li> <li>Implementa a l\u00f3gica de aplica\u00e7\u00e3o (n\u00e3o confundir com regras de neg\u00f3cio)</li> <li>Prepara os dados para as interfaces (CLI, Web)</li> </ul>"},{"location":"FASE2_APPLICATION/#estrutura-criada","title":"\ud83d\udcc1 Estrutura Criada","text":"<pre><code>src/\n\u251c\u2500\u2500 application/\n\u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u251c\u2500\u2500 dtos/\n\u2502   \u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u2502   \u251c\u2500\u2500 documento_dto.py\n\u2502   \u2502   \u2514\u2500\u2500 estatisticas_dto.py\n\u2502   \u2514\u2500\u2500 use_cases/\n\u2502       \u251c\u2500\u2500 __init__.py\n\u2502       \u251c\u2500\u2500 classificar_documento.py\n\u2502       \u251c\u2500\u2500 listar_documentos.py\n\u2502       \u251c\u2500\u2500 obter_documento.py\n\u2502       \u2514\u2500\u2500 estatisticas.py\n\u2514\u2500\u2500 tests/\n    \u2514\u2500\u2500 test_use_cases.py\n</code></pre>"},{"location":"FASE2_APPLICATION/#data-transfer-objects-dtos","title":"\ud83e\udde9 Data Transfer Objects (DTOs)","text":""},{"location":"FASE2_APPLICATION/#documentodto-documento_dtopy","title":"DocumentoDTO (<code>documento_dto.py</code>)","text":"<p>Responsabilidade: Transferir dados do documento para a interface, sem expor a entidade completa.</p> <pre><code>@dataclass\nclass DocumentoDTO:\n    \"\"\"DTO completo para exibi\u00e7\u00e3o de um documento.\"\"\"\n\n    id: Optional[int]\n    centro: str\n    titulo: str\n    data_original: Optional[str]\n    url: str\n    texto: str\n    data_coleta: str\n\n    # Metadados enriquecidos\n    tipo: Optional[str]\n    tipo_descricao: Optional[str]\n    tipo_icone: Optional[str]\n    pessoa_principal: Optional[str]\n    pessoa_principal_en: Optional[str]\n    remetente: Optional[str]\n    destinatario: Optional[str]\n    envolvidos: List[str]\n    tem_anexos: bool\n\n    # M\u00e9tricas\n    tamanho_caracteres: int\n    tamanho_palavras: int\n\n    # Tradu\u00e7\u00f5es\n    traducoes: List[Dict]\n</code></pre> <p>M\u00e9todo de f\u00e1brica: <pre><code>@classmethod\ndef from_domain(cls, documento, tradutor_nomes=None, traducoes=None):\n    \"\"\"Converte entidade Documento para DTO.\"\"\"\n    # L\u00f3gica de convers\u00e3o...\n</code></pre></p>"},{"location":"FASE2_APPLICATION/#documentolistadto-documento_dtopy","title":"DocumentoListaDTO (<code>documento_dto.py</code>)","text":"<pre><code>@dataclass\nclass DocumentoListaDTO:\n    \"\"\"DTO resumido para listagens (mais leve).\"\"\"\n\n    id: int\n    centro: str\n    titulo: str\n    data_original: Optional[str]\n    tipo: Optional[str]\n    tipo_icone: str\n    tipo_descricao: Optional[str]\n    pessoa_principal: Optional[str]\n    pessoa_principal_en: Optional[str]\n    tem_traducao: bool\n    tamanho: int\n</code></pre>"},{"location":"FASE2_APPLICATION/#estatisticasdto-estatisticas_dtopy","title":"EstatisticasDTO (<code>estatisticas_dto.py</code>)","text":"<pre><code>@dataclass\nclass EstatisticasDTO:\n    \"\"\"DTO para estat\u00edsticas do acervo.\"\"\"\n\n    # Vis\u00e3o geral\n    total_documentos: int\n    total_traducoes: int\n\n    # Distribui\u00e7\u00f5es\n    documentos_por_centro: Dict[str, int]\n    documentos_por_tipo: Dict[str, int]\n    traducoes_por_idioma: Dict[str, int]\n\n    # Pessoas\n    pessoas_frequentes: List[Tuple[str, int, str]]\n\n    # M\u00e9tricas especiais\n    cartas: int\n    declaracoes: int\n    relatorios: int\n    acareacoes: int\n    acusacoes: int\n    laudos: int\n    documentos_com_anexos: int\n\n    # Custos\n    custo_total_traducoes: float\n\n    @property\n    def percentual_traduzido(self) -&gt; float:\n        \"\"\"Percentual de documentos com tradu\u00e7\u00e3o.\"\"\"\n\n    @property\n    def resumo(self) -&gt; str:\n        \"\"\"Resumo para exibi\u00e7\u00e3o r\u00e1pida.\"\"\"\n</code></pre> <p>Benef\u00edcios dos DTOs: - \ud83d\udd12 Encapsulamento: A interface n\u00e3o precisa conhecer a estrutura completa da entidade - \ud83c\udfaf Performance: Dados resumidos para listagens - \ud83d\udd04 Evolu\u00e7\u00e3o: Mudan\u00e7as no dom\u00ednio n\u00e3o afetam a interface - \ud83e\uddea Testabilidade: F\u00e1cil de mockar</p>"},{"location":"FASE2_APPLICATION/#casos-de-uso","title":"\ud83c\udfae Casos de Uso","text":""},{"location":"FASE2_APPLICATION/#1-classificardocumento-classificar_documentopy","title":"1. ClassificarDocumento (<code>classificar_documento.py</code>)","text":"<p>Responsabilidade: Classificar documentos baseado no t\u00edtulo.</p> <pre><code>class ClassificarDocumento:\n    \"\"\"\n    Caso de uso para classificar um documento.\n    \"\"\"\n\n    def __init__(self, repo: RepositorioDocumento):\n        self.repo = repo\n\n    def executar(self, documento_id: int) -&gt; Optional[Documento]:\n        \"\"\"Classifica um documento espec\u00edfico.\"\"\"\n\n    def executar_em_lote(self, limite: int = None) -&gt; int:\n        \"\"\"Classifica m\u00faltiplos documentos n\u00e3o classificados.\"\"\"\n</code></pre> <p>Regras aplicadas: - Detec\u00e7\u00e3o de tipo baseada em padr\u00f5es no t\u00edtulo - Extra\u00e7\u00e3o de nomes russos - Detec\u00e7\u00e3o de anexos - Identifica\u00e7\u00e3o de remetente/destinat\u00e1rio em cartas</p> <p>Fluxo: <pre><code>1. Buscar documento por ID\n2. Aplicar regras de classifica\u00e7\u00e3o\n3. Atualizar metadados\n4. Salvar no reposit\u00f3rio\n</code></pre></p>"},{"location":"FASE2_APPLICATION/#2-listardocumentos-listar_documentospy","title":"2. ListarDocumentos (<code>listar_documentos.py</code>)","text":"<p>Responsabilidade: Listar documentos com pagina\u00e7\u00e3o e filtros.</p> <pre><code>class ListarDocumentos:\n    \"\"\"\n    Caso de uso para listar documentos.\n    \"\"\"\n\n    def __init__(self, repo: RepositorioDocumento):\n        self.repo = repo\n\n    def executar(self,\n                 pagina: int = 1,\n                 limite: int = 20,\n                 centro: Optional[str] = None,\n                 tipo: Optional[str] = None) -&gt; Dict:\n        \"\"\"\n        Executa a listagem com filtros e pagina\u00e7\u00e3o.\n\n        Returns:\n            {\n                'items': List[DocumentoListaDTO],\n                'total': int,\n                'pagina': int,\n                'total_paginas': int,\n                'filtros': dict\n            }\n        \"\"\"\n</code></pre> <p>Par\u00e2metros: - <code>pagina</code>: N\u00famero da p\u00e1gina (come\u00e7a em 1) - <code>limite</code>: Itens por p\u00e1gina - <code>centro</code>: Filtrar por centro ('lencenter'/'moscenter') - <code>tipo</code>: Filtrar por tipo de documento</p> <p>C\u00e1lculos: - <code>offset = (pagina - 1) * limite</code> - <code>total_paginas = (total + limite - 1) // limite</code></p>"},{"location":"FASE2_APPLICATION/#3-obterdocumento-obter_documentopy","title":"3. ObterDocumento (<code>obter_documento.py</code>)","text":"<p>Responsabilidade: Buscar documento completo por ID.</p> <pre><code>class ObterDocumento:\n    \"\"\"\n    Caso de uso para obter um documento completo.\n    \"\"\"\n\n    def __init__(self,\n                 repo_doc: RepositorioDocumento,\n                 repo_trad: Optional[RepositorioTraducao] = None):\n        self.repo_doc = repo_doc\n        self.repo_trad = repo_trad\n\n    def executar(self, documento_id: int) -&gt; Optional[DocumentoDTO]:\n        \"\"\"\n        Busca documento por ID e converte para DTO.\n        Inclui tradu\u00e7\u00f5es se dispon\u00edveis.\n        \"\"\"\n</code></pre> <p>Diferenciais: - Retorna DTO j\u00e1 com tradu\u00e7\u00e3o de nomes - Inclui lista de tradu\u00e7\u00f5es dispon\u00edveis - Retorna None se documento n\u00e3o existir</p>"},{"location":"FASE2_APPLICATION/#4-obterestatisticas-estatisticaspy","title":"4. ObterEstatisticas (<code>estatisticas.py</code>)","text":"<p>Responsabilidade: Calcular estat\u00edsticas completas do acervo.</p> <pre><code>class ObterEstatisticas:\n    \"\"\"\n    Caso de uso para gerar estat\u00edsticas completas.\n    \"\"\"\n\n    def __init__(self, repo: RepositorioDocumento):\n        self.repo = repo\n\n    def executar(self) -&gt; EstatisticasDTO:\n        \"\"\"\n        Calcula estat\u00edsticas baseadas em todos os documentos.\n        \"\"\"\n</code></pre> <p>M\u00e9tricas calculadas:</p> Categoria M\u00e9tricas Vis\u00e3o Geral Total de documentos, total de tradu\u00e7\u00f5es Por Centro Leningrad, Moscow Por Tipo Interrogat\u00f3rios, cartas, acarea\u00e7\u00f5es... Pessoas Top 20 pessoas mais frequentes Documentos Especiais Cartas, declara\u00e7\u00f5es, relat\u00f3rios Custos Custo total de tradu\u00e7\u00f5es"},{"location":"FASE2_APPLICATION/#testes","title":"\ud83e\uddea Testes","text":""},{"location":"FASE2_APPLICATION/#testes-dos-casos-de-uso-test_use_casespy","title":"Testes dos Casos de Uso (<code>test_use_cases.py</code>)","text":"<pre><code>class TestClassificarDocumento:\n    \"\"\"Testes para o caso de uso ClassificarDocumento.\"\"\"\n\n    def test_classificar_interrogatorio(self):\n        \"\"\"Deve classificar interrogat\u00f3rio corretamente.\"\"\"\n        # Mock do reposit\u00f3rio\n        mock_repo = Mock()\n\n        # Documento de teste\n        doc = Documento(\n            id=1,\n            centro='lencenter',\n            titulo='\u041f\u0440\u043e\u0442\u043e\u043a\u043e\u043b \u0434\u043e\u043f\u0440\u043e\u0441\u0430 \u041b.\u0412. \u041d\u0438\u043a\u043e\u043b\u0430\u0435\u0432\u0430',\n            url='http://teste.com',\n            texto='...',\n            data_coleta=datetime.now()\n        )\n\n        mock_repo.buscar_por_id.return_value = doc\n\n        # Executar caso de uso\n        caso_uso = ClassificarDocumento(mock_repo)\n        resultado = caso_uso.executar(1)\n\n        # Verifica\u00e7\u00f5es\n        assert resultado.tipo == 'interrogatorio'\n        assert resultado.tipo_descricao == 'Protocolo de Interrogat\u00f3rio'\n        assert resultado.pessoa_principal == '\u041b.\u0412. \u041d\u0438\u043a\u043e\u043b\u0430\u0435\u0432\u0430'\n        mock_repo.salvar.assert_called_once()\n\n    def test_documento_nao_encontrado(self):\n        \"\"\"Deve retornar None para documento inexistente.\"\"\"\n        mock_repo = Mock()\n        mock_repo.buscar_por_id.return_value = None\n\n        caso_uso = ClassificarDocumento(mock_repo)\n        resultado = caso_uso.executar(999)\n\n        assert resultado is None\n\n\nclass TestListarDocumentos:\n    \"\"\"Testes para o caso de uso ListarDocumentos.\"\"\"\n\n    def test_listar_com_paginacao(self):\n        \"\"\"Deve listar com pagina\u00e7\u00e3o correta.\"\"\"\n        mock_repo = Mock()\n\n        # Mock de 5 documentos\n        docs = [Documento(id=i, ...) for i in range(1, 6)]\n        mock_repo.listar.return_value = docs\n        mock_repo.contar.return_value = 50\n\n        caso_uso = ListarDocumentos(mock_repo)\n        resultado = caso_uso.executar(pagina=2, limite=5)\n\n        assert len(resultado['items']) == 5\n        assert resultado['total'] == 50\n        assert resultado['pagina'] == 2\n        assert resultado['total_paginas'] == 10\n\n\nclass TestObterDocumento:\n    \"\"\"Testes para o caso de uso ObterDocumento.\"\"\"\n\n    def test_obter_documento_completo(self):\n        \"\"\"Deve retornar documento completo com DTO.\"\"\"\n        mock_repo = Mock()\n\n        doc = Documento(id=1, ...)\n        mock_repo.buscar_por_id.return_value = doc\n\n        caso_uso = ObterDocumento(mock_repo)\n        dto = caso_uso.executar(1)\n\n        assert dto.id == 1\n        assert dto.titulo == doc.titulo\n        assert dto.tamanho_caracteres == len(doc.texto)\n</code></pre>"},{"location":"FASE2_APPLICATION/#resultados","title":"Resultados","text":"<pre><code>poetry run pytest src/tests/test_use_cases.py -v\n\n# Sa\u00edda esperada:\n# src/tests/test_use_cases.py::TestClassificarDocumento::test_classificar_interrogatorio PASSED\n# src/tests/test_use_cases.py::TestClassificarDocumento::test_documento_nao_encontrado PASSED\n# src/tests/test_use_cases.py::TestListarDocumentos::test_listar_com_paginacao PASSED\n# src/tests/test_use_cases.py::TestObterDocumento::test_obter_documento_completo PASSED\n\n# =========================== 4 passed in 0.27s ===========================\n</code></pre> <p>Total: 4 testes | Todos PASSANDO \u2705</p>"},{"location":"FASE2_APPLICATION/#fluxo-de-dados","title":"\ud83d\udd04 Fluxo de Dados","text":"<pre><code>[Interface (CLI/Web)] \u2192 [Caso de Uso] \u2192 [Reposit\u00f3rio (interface)]\n         \u2191                      \u2193                    \u2193\n         \u2514\u2500\u2500\u2500\u2500\u2500\u2500 [DTO] \u2190\u2500\u2500 [Entidade] \u2190\u2500\u2500\u2500 [Implementa\u00e7\u00e3o]\n</code></pre> <p>Exemplo pr\u00e1tico (ListarDocumentos):</p> <pre><code>1. Interface chama caso_uso.executar(pagina=1)\n2. Caso de uso calcula offset = 0\n3. Caso de uso chama repo.listar(offset=0, limite=20)\n4. Reposit\u00f3rio retorna lista de entidades\n5. Caso de uso converte entidades para DTOs\n6. Interface recebe DTOs e exibe\n</code></pre>"},{"location":"FASE2_APPLICATION/#metricas-da-fase","title":"\ud83d\udcca M\u00e9tricas da Fase","text":"M\u00e9trica Valor Casos de uso 4 DTOs 3 Testes 4 Cobertura estimada &gt;85% Depend\u00eancias FASE 1 apenas"},{"location":"FASE2_APPLICATION/#principios-aplicados","title":"\ud83d\udcda Princ\u00edpios Aplicados","text":"Princ\u00edpio Aplica\u00e7\u00e3o Inje\u00e7\u00e3o de Depend\u00eancia Casos de uso recebem reposit\u00f3rios via construtor Interface Segregation DTOs exp\u00f5em apenas dados necess\u00e1rios Single Responsibility Cada caso de uso tem uma \u00fanica responsabilidade Testabilidade Uso de mocks para testar isoladamente Imutabilidade DTOs s\u00e3o dataclasses imut\u00e1veis"},{"location":"FASE2_APPLICATION/#integracao-com-fases-anteriores-e-futuras","title":"\ud83d\udd17 Integra\u00e7\u00e3o com Fases Anteriores e Futuras","text":"Fase Relacionamento FASE 1 (Domain) Usa entidades, value objects e interfaces FASE 3 (Infrastructure) Reposit\u00f3rios concretos implementam as interfaces FASE 4 (CLI) Usa os casos de uso e DTOs FASE 9 (Web) Mesmos casos de uso, diferentes presenters"},{"location":"FASE2_APPLICATION/#evolucao-do-codigo","title":"\ud83d\ude80 Evolu\u00e7\u00e3o do C\u00f3digo","text":""},{"location":"FASE2_APPLICATION/#antes-codigo-legado","title":"Antes (c\u00f3digo legado)","text":"<pre><code># L\u00f3gica de listagem misturada com SQL\ndef listar_documentos(pagina):\n    offset = (pagina - 1) * 20\n    cursor.execute(\"SELECT * FROM documentos LIMIT 20 OFFSET ?\", (offset,))\n    return cursor.fetchall()\n</code></pre>"},{"location":"FASE2_APPLICATION/#depois-clean-architecture","title":"Depois (Clean Architecture)","text":"<pre><code># Caso de uso puro, sem saber de banco\ndef executar(self, pagina):\n    offset = (pagina - 1) * self.limite\n    documentos = self.repo.listar(offset, self.limite)\n    return [DocumentoListaDTO.from_domain(d) for d in documentos]\n</code></pre>"},{"location":"FASE2_APPLICATION/#metricas-do-projeto-apos-fase-2","title":"\ud83d\udcc8 M\u00e9tricas do Projeto (Ap\u00f3s FASE 2)","text":"<pre><code>\ud83d\udcca DOMAIN LAYER: 3 m\u00f3dulos | 13 testes\n\ud83d\udcca APPLICATION LAYER: 4 casos de uso | 4 testes\n\ud83d\udcca TOTAL: 17 testes passando\n</code></pre>"},{"location":"FASE2_APPLICATION/#licoes-aprendidas","title":"\ud83d\udd0d Li\u00e7\u00f5es Aprendidas","text":"<ol> <li>Casos de uso n\u00e3o devem conter regras de neg\u00f3cio: Isso pertence ao dom\u00ednio</li> <li>DTOs s\u00e3o essenciais: Separar o que vai para a interface do que fica no dom\u00ednio</li> <li>Inje\u00e7\u00e3o de depend\u00eancia simplifica testes: Mocks substituem reposit\u00f3rios reais</li> <li>Orquestra\u00e7\u00e3o vs Implementa\u00e7\u00e3o: Casos de uso orquestram, n\u00e3o implementam detalhes</li> </ol>"},{"location":"FASE2_APPLICATION/#conclusao-da-fase","title":"\ud83c\udfc1 Conclus\u00e3o da Fase","text":"<p>A FASE 2 estabeleceu a camada de aplica\u00e7\u00e3o com:</p> <p>\u2705 4 casos de uso funcionais \u2705 3 DTOs bem definidos \u2705 4 testes unit\u00e1rios \u2705 Depend\u00eancia exclusiva da FASE 1 \u2705 C\u00f3digo pronto para implementa\u00e7\u00f5es concretas</p>"},{"location":"FASE2_APPLICATION/#autor","title":"\ud83d\udc64 Autor","text":"<p>Thiago Ribeiro - Projeto de TCC</p> <sub>FASE 2 conclu\u00edda em 15 de Fevereiro de 2024</sub> <sub>\u2705 Pronto para a FASE 3 - Infrastructure Layer</sub> <p>```</p>"},{"location":"FASE3_INFRASTRUCTURE/","title":"FASE 3 - Infrastructure Layer (Camada de Infraestrutura)","text":"**Implementa\u00e7\u00f5es concretas dos contratos definidos no dom\u00ednio**"},{"location":"FASE3_INFRASTRUCTURE/#informacoes-da-fase","title":"\ud83d\udcc5 Informa\u00e7\u00f5es da Fase","text":"Item Descri\u00e7\u00e3o Status \u2705 Conclu\u00edda Data de Conclus\u00e3o 15 de Fevereiro de 2024 Artefatos Reposit\u00f3rios SQLite, Modelos, Migra\u00e7\u00f5es Testes 13 testes de integra\u00e7\u00e3o Depend\u00eancias FASE 1 (Domain), FASE 2 (Application)"},{"location":"FASE3_INFRASTRUCTURE/#objetivo","title":"\ud83c\udfaf Objetivo","text":"<p>Implementar a camada de infraestrutura que:</p> <ul> <li>Conecta o sistema ao mundo externo (banco de dados, APIs, servi\u00e7os)</li> <li>Implementa as interfaces definidas no dom\u00ednio</li> <li>Gerencia persist\u00eancia e recupera\u00e7\u00e3o de dados</li> <li>Fornece servi\u00e7os concretos (tradu\u00e7\u00e3o, an\u00e1lise, etc)</li> <li>Isola detalhes t\u00e9cnicos das camadas superiores</li> </ul>"},{"location":"FASE3_INFRASTRUCTURE/#estrutura-criada","title":"\ud83d\udcc1 Estrutura Criada","text":"<pre><code>src/\n\u251c\u2500\u2500 infrastructure/\n\u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u251c\u2500\u2500 config/\n\u2502   \u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u2502   \u2514\u2500\u2500 settings.py\n\u2502   \u251c\u2500\u2500 persistence/\n\u2502   \u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u2502   \u251c\u2500\u2500 models.py\n\u2502   \u2502   \u251c\u2500\u2500 migrations.py\n\u2502   \u2502   \u251c\u2500\u2500 sqlite_repository.py\n\u2502   \u2502   \u2514\u2500\u2500 sqlite_traducao_repository.py\n\u2502   \u2514\u2500\u2500 translation/\n\u2502       \u2514\u2500\u2500 google_translator.py\n\u2514\u2500\u2500 tests/\n    \u2514\u2500\u2500 test_infrastructure/\n        \u251c\u2500\u2500 __init__.py\n        \u251c\u2500\u2500 test_migrations.py\n        \u2514\u2500\u2500 test_sqlite_repository.py\n</code></pre>"},{"location":"FASE3_INFRASTRUCTURE/#componentes-implementados","title":"\ud83e\udde9 Componentes Implementados","text":""},{"location":"FASE3_INFRASTRUCTURE/#1-configuracoes-configsettingspy","title":"1. Configura\u00e7\u00f5es (<code>config/settings.py</code>)","text":"<p>Responsabilidade: Centralizar todas as configura\u00e7\u00f5es da aplica\u00e7\u00e3o.</p> <pre><code>@dataclass\nclass Settings:\n    \"\"\"Configura\u00e7\u00f5es centralizadas da aplica\u00e7\u00e3o.\"\"\"\n\n    # Diret\u00f3rios\n    BASE_DIR: Path\n    DB_PATH: Path\n    EXPORT_DIR: Path\n    REPORTS_DIR: Path\n    ANALYSIS_DIR: Path\n\n    # URLs\n    LENCENTER_URL: str\n    MOSCENTER_URL: str\n\n    # API Keys\n    GOOGLE_TRANSLATE_API_KEY: Optional[str]\n\n    # Configura\u00e7\u00f5es de scraping\n    REQUEST_TIMEOUT: int = 30\n    REQUEST_DELAY: int = 1\n\n    # Configura\u00e7\u00f5es de UI\n    ITENS_POR_PAGINA: int = 15\n    MAX_TEXTO_PREVIEW: int = 2000\n\n    @property\n    def modo_desenvolvimento(self) -&gt; bool:\n        \"\"\"Verifica se est\u00e1 em modo desenvolvimento.\"\"\"\n\n    @property\n    def db_url(self) -&gt; str:\n        \"\"\"URL do banco para SQLAlchemy (futuro).\"\"\"\n</code></pre> <p>Carregamento de vari\u00e1veis de ambiente: <pre><code># .env\nGOOGLE_TRANSLATE_API_KEY=AIzaSy...\nENV=development\nDEBUG=true\n</code></pre></p> <p>Benef\u00edcios: - \ud83d\udd12 Seguran\u00e7a: Chaves de API fora do c\u00f3digo - \ud83d\udd27 Flexibilidade: Configura\u00e7\u00f5es por ambiente - \ud83d\udccd Centraliza\u00e7\u00e3o: Tudo em um lugar</p>"},{"location":"FASE3_INFRASTRUCTURE/#2-modelos-persistencemodelspy","title":"2. Modelos (<code>persistence/models.py</code>)","text":"<p>Responsabilidade: Mapeamento objeto-relacional para SQLite.</p>"},{"location":"FASE3_INFRASTRUCTURE/#documentomodel","title":"DocumentoModel","text":"<pre><code>@dataclass\nclass DocumentoModel:\n    \"\"\"Modelo de documento para o banco SQLite.\"\"\"\n\n    id: Optional[int]\n    centro: str\n    titulo: str\n    data_original: Optional[str]\n    url: str\n    texto: str\n    data_coleta: str\n\n    # Colunas adicionadas nas migra\u00e7\u00f5es\n    tipo_documento: Optional[str] = None\n    tipo_descricao: Optional[str] = None\n    pessoa_principal: Optional[str] = None\n    remetente: Optional[str] = None\n    destinatario: Optional[str] = None\n    envolvidos: Optional[str] = None\n    tem_anexos: int = 0\n</code></pre> <p>M\u00e9todos de convers\u00e3o: <pre><code>def para_entidade(self) -&gt; Documento:\n    \"\"\"Converte modelo para entidade do dom\u00ednio.\"\"\"\n\n@classmethod\ndef de_entidade(cls, documento: Documento) -&gt; 'DocumentoModel':\n    \"\"\"Converte entidade para modelo.\"\"\"\n</code></pre></p>"},{"location":"FASE3_INFRASTRUCTURE/#traducaomodel","title":"TraducaoModel","text":"<pre><code>@dataclass\nclass TraducaoModel:\n    \"\"\"Modelo para tabela de tradu\u00e7\u00f5es.\"\"\"\n\n    id: Optional[int]\n    documento_id: int\n    idioma: str\n    texto_traduzido: str\n    modelo: Optional[str]\n    custo: float\n    data_traducao: str\n</code></pre> <p>Schema SQL: <pre><code>CREATE TABLE IF NOT EXISTS documentos (\n    id INTEGER PRIMARY KEY AUTOINCREMENT,\n    centro TEXT NOT NULL,\n    titulo TEXT NOT NULL,\n    data_original TEXT,\n    url TEXT UNIQUE NOT NULL,\n    texto TEXT NOT NULL,\n    data_coleta TEXT NOT NULL\n);\n\nCREATE TABLE IF NOT EXISTS traducoes (\n    id INTEGER PRIMARY KEY AUTOINCREMENT,\n    documento_id INTEGER NOT NULL,\n    idioma TEXT NOT NULL,\n    texto_traduzido TEXT NOT NULL,\n    modelo TEXT,\n    custo REAL,\n    data_traducao TEXT NOT NULL,\n    FOREIGN KEY (documento_id) REFERENCES documentos (id) ON DELETE CASCADE\n);\n</code></pre></p>"},{"location":"FASE3_INFRASTRUCTURE/#3-migracoes-persistencemigrationspy","title":"3. Migra\u00e7\u00f5es (<code>persistence/migrations.py</code>)","text":"<p>Responsabilidade: Gerenciar a evolu\u00e7\u00e3o do schema do banco.</p> <pre><code>def criar_tabelas():\n    \"\"\"Cria todas as tabelas se n\u00e3o existirem.\"\"\"\n\ndef migrar_banco_existente():\n    \"\"\"\n    Adiciona colunas de metadados ao banco existente.\n    Usado ap\u00f3s a FASE 1 para enriquecer dados antigos.\n    \"\"\"\n\ndef verificar_integridade() -&gt; List[str]:\n    \"\"\"\n    Verifica integridade do banco.\n    Retorna lista de problemas encontrados.\n    \"\"\"\n\ndef estatisticas_banco() -&gt; dict:\n    \"\"\"Retorna estat\u00edsticas do banco de dados.\"\"\"\n</code></pre> <p>Exemplo de migra\u00e7\u00e3o: <pre><code>def adicionar_colunas_metadados(cursor):\n    colunas = [\n        (\"tipo_documento\", \"TEXT\"),\n        (\"tipo_descricao\", \"TEXT\"),\n        (\"pessoa_principal\", \"TEXT\"),\n        (\"remetente\", \"TEXT\"),\n        (\"destinatario\", \"TEXT\"),\n        (\"envolvidos\", \"TEXT\"),\n        (\"tem_anexos\", \"INTEGER DEFAULT 0\"),\n    ]\n\n    for coluna, tipo in colunas:\n        try:\n            cursor.execute(f\"ALTER TABLE documentos ADD COLUMN {coluna} {tipo}\")\n        except sqlite3.OperationalError:\n            pass  # Coluna j\u00e1 existe\n</code></pre></p> <p>Estat\u00edsticas do banco: <pre><code>def estatisticas_banco():\n    return {\n        'total_docs': 519,\n        'total_traducoes': 16,\n        'docs_por_centro': {'lencenter': 152, 'moscenter': 367},\n        'docs_classificados': 519,\n    }\n</code></pre></p>"},{"location":"FASE3_INFRASTRUCTURE/#4-repositorio-sqlite-persistencesqlite_repositorypy","title":"4. Reposit\u00f3rio SQLite (<code>persistence/sqlite_repository.py</code>)","text":"<p>Responsabilidade: Implementa\u00e7\u00e3o concreta do <code>RepositorioDocumento</code>.</p> <pre><code>class SQLiteDocumentoRepository(RepositorioDocumento):\n    \"\"\"\n    Reposit\u00f3rio SQLite para documentos.\n    Implementa a interface definida no dom\u00ednio.\n    \"\"\"\n\n    def __init__(self, db_path: Optional[str] = None):\n        self.db_path = db_path or str(settings.DB_PATH)\n\n    @contextmanager\n    def _conexao(self):\n        \"\"\"Gerenciador de contexto para conex\u00f5es SQLite.\"\"\"\n        conn = sqlite3.connect(self.db_path)\n        conn.row_factory = sqlite3.Row\n        try:\n            yield conn\n            conn.commit()\n        except Exception:\n            conn.rollback()\n            raise\n        finally:\n            conn.close()\n\n    def salvar(self, documento: Documento) -&gt; int:\n        \"\"\"Insere ou atualiza um documento.\"\"\"\n        with self._conexao() as conn:\n            cursor = conn.cursor()\n            modelo = DocumentoModel.de_entidade(documento)\n\n            if documento.id:\n                # Update\n                cursor.execute(\"\"\"\n                    UPDATE documentos SET\n                        centro = ?, titulo = ?, data_original = ?, url = ?,\n                        texto = ?, data_coleta = ?, tipo_documento = ?,\n                        tipo_descricao = ?, pessoa_principal = ?, remetente = ?,\n                        destinatario = ?, envolvidos = ?, tem_anexos = ?\n                    WHERE id = ?\n                \"\"\", (...))\n                return documento.id\n            else:\n                # Insert\n                cursor.execute(\"\"\"\n                    INSERT INTO documentos (...)\n                    VALUES (...)\n                \"\"\", (...))\n                return cursor.lastrowid\n\n    def buscar_por_id(self, id: int) -&gt; Optional[Documento]:\n        \"\"\"Busca documento pelo ID.\"\"\"\n        with self._conexao() as conn:\n            cursor = conn.cursor()\n            cursor.execute(\"SELECT * FROM documentos WHERE id = ?\", (id,))\n            row = cursor.fetchone()\n            return self._row_para_entidade(row) if row else None\n\n    def listar(self,\n               offset: int = 0,\n               limite: int = 20,\n               centro: Optional[str] = None,\n               tipo: Optional[str] = None) -&gt; List[Documento]:\n        \"\"\"Lista documentos com filtros.\"\"\"\n        with self._conexao() as conn:\n            cursor = conn.cursor()\n\n            query = \"SELECT * FROM documentos WHERE 1=1\"\n            params = []\n\n            if centro:\n                query += \" AND centro = ?\"\n                params.append(centro)\n            if tipo:\n                query += \" AND tipo_documento = ?\"\n                params.append(tipo)\n\n            query += \" ORDER BY id LIMIT ? OFFSET ?\"\n            params.extend([limite, offset])\n\n            cursor.execute(query, params)\n            return [self._row_para_entidade(row) for row in cursor.fetchall()]\n\n    def contar(self, centro: Optional[str] = None, tipo: Optional[str] = None) -&gt; int:\n        \"\"\"Conta documentos com filtros.\"\"\"\n        # ... similar ao listar, mas com COUNT(*)\n</code></pre>"},{"location":"FASE3_INFRASTRUCTURE/#5-repositorio-de-traducoes-persistencesqlite_traducao_repositorypy","title":"5. Reposit\u00f3rio de Tradu\u00e7\u00f5es (<code>persistence/sqlite_traducao_repository.py</code>)","text":"<pre><code>class SQLiteTraducaoRepository(RepositorioTraducao):\n    \"\"\"Reposit\u00f3rio SQLite para tradu\u00e7\u00f5es.\"\"\"\n\n    def buscar_por_documento(self, documento_id: int, idioma: str) -&gt; Optional[Traducao]:\n        \"\"\"Busca tradu\u00e7\u00e3o espec\u00edfica de um documento.\"\"\"\n\n    def listar_por_documento(self, documento_id: int) -&gt; List[Traducao]:\n        \"\"\"Lista todas as tradu\u00e7\u00f5es de um documento.\"\"\"\n\n    def contar_por_documento(self, documento_id: int) -&gt; int:\n        \"\"\"Conta tradu\u00e7\u00f5es de um documento.\"\"\"\n</code></pre>"},{"location":"FASE3_INFRASTRUCTURE/#6-adaptador-google-translate-translationgoogle_translatorpy","title":"6. Adaptador Google Translate (<code>translation/google_translator.py</code>)","text":"<p>Responsabilidade: Integrar com a API do Google Translate.</p> <pre><code>class GoogleTranslator:\n    \"\"\"\n    Cliente para Google Cloud Translation API.\n    \"\"\"\n\n    def traduzir(self, texto: str, destino: str = 'en') -&gt; str:\n        \"\"\"Traduz texto para o idioma destino.\"\"\"\n\n    def traduzir_documento_completo(self, texto: str, destino: str = 'en') -&gt; str:\n        \"\"\"Traduz documentos grandes dividindo em chunks.\"\"\"\n\n    def testar_conexao(self) -&gt; bool:\n        \"\"\"Testa se a API est\u00e1 respondendo.\"\"\"\n</code></pre> <p>Chunking para documentos grandes: <pre><code>def traduzir_documento_completo(self, texto, destino='en', chunk_size=3000):\n    # Dividir em par\u00e1grafos\n    paragrafos = texto.split('\\n')\n    chunks = []\n\n    for para in paragrafos:\n        if tamanho_atual + len(para) &lt; chunk_size:\n            chunk_atual.append(para)\n        else:\n            chunks.append('\\n'.join(chunk_atual))\n            chunk_atual = [para]\n\n    # Traduzir cada chunk\n    traducoes = []\n    for chunk in chunks:\n        traducoes.append(self.traduzir(chunk, destino))\n\n    return '\\n'.join(traducoes)\n</code></pre></p>"},{"location":"FASE3_INFRASTRUCTURE/#testes-de-infraestrutura","title":"\ud83e\uddea Testes de Infraestrutura","text":""},{"location":"FASE3_INFRASTRUCTURE/#testes-do-repositorio-test_sqlite_repositorypy","title":"Testes do Reposit\u00f3rio (<code>test_sqlite_repository.py</code>)","text":"<pre><code>class TestSQLiteDocumentoRepository:\n    \"\"\"Testes para o reposit\u00f3rio SQLite.\"\"\"\n\n    @pytest.fixture\n    def repo_memoria(self):\n        \"\"\"Fixture que cria um reposit\u00f3rio com banco em mem\u00f3ria.\"\"\"\n        with tempfile.NamedTemporaryFile(suffix='.db') as tmp:\n            repo = SQLiteDocumentoRepository(db_path=tmp.name)\n            with repo._conexao() as conn:\n                cursor = conn.cursor()\n                DocumentoModel.criar_tabela(cursor)\n                TraducaoModel.criar_tabela(cursor)\n            yield repo\n\n    def test_salvar_novo_documento(self, repo_memoria):\n        \"\"\"Deve inserir novo documento.\"\"\"\n        doc = Documento(\n            centro='lencenter',\n            titulo='Teste',\n            url='http://teste.com/1',\n            texto='Conte\u00fado',\n            data_coleta=datetime.now()\n        )\n\n        doc_id = repo_memoria.salvar(doc)\n        assert doc_id &gt; 0\n\n        salvo = repo_memoria.buscar_por_id(doc_id)\n        assert salvo.titulo == 'Teste'\n\n    def test_listar_com_filtro_centro(self, repo_memoria):\n        \"\"\"Deve filtrar por centro.\"\"\"\n        # Inserir documentos de teste\n        for i in range(3):\n            doc = Documento(centro='lencenter', ...)\n            repo_memoria.salvar(doc)\n        for i in range(2):\n            doc = Documento(centro='moscenter', ...)\n            repo_memoria.salvar(doc)\n\n        docs_len = repo_memoria.listar(centro='lencenter')\n        docs_mos = repo_memoria.listar(centro='moscenter')\n\n        assert len(docs_len) == 3\n        assert len(docs_mos) == 2\n\n    def test_remover_documento(self, repo_memoria):\n        \"\"\"Deve remover documento por ID.\"\"\"\n        doc = Documento(...)\n        doc_id = repo_memoria.salvar(doc)\n\n        resultado = repo_memoria.remover(doc_id)\n        assert resultado is True\n\n        removido = repo_memoria.buscar_por_id(doc_id)\n        assert removido is None\n</code></pre>"},{"location":"FASE3_INFRASTRUCTURE/#testes-de-migracoes-test_migrationspy","title":"Testes de Migra\u00e7\u00f5es (<code>test_migrations.py</code>)","text":"<pre><code>class TestMigrations:\n    \"\"\"Testes para scripts de migra\u00e7\u00e3o.\"\"\"\n\n    def test_criar_tabelas(self, db_temporario):\n        \"\"\"Deve criar tabelas sem erros.\"\"\"\n        criar_tabelas()\n\n        conn = sqlite3.connect(db_temporario)\n        cursor = conn.cursor()\n        cursor.execute(\"SELECT name FROM sqlite_master WHERE type='table'\")\n        tabelas = [row[0] for row in cursor.fetchall()]\n\n        assert 'documentos' in tabelas\n        assert 'traducoes' in tabelas\n\n    def test_migrar_banco_existente(self, db_temporario):\n        \"\"\"Deve adicionar colunas de metadados.\"\"\"\n        # Criar tabela sem metadados\n        conn = sqlite3.connect(db_temporario)\n        cursor = conn.cursor()\n        cursor.execute(\"CREATE TABLE documentos (id INTEGER PRIMARY KEY, ...)\")\n        conn.close()\n\n        migrar_banco_existente()\n\n        conn = sqlite3.connect(db_temporario)\n        cursor = conn.cursor()\n        cursor.execute(\"PRAGMA table_info(documentos)\")\n        colunas = [row[1] for row in cursor.fetchall()]\n\n        assert 'tipo_documento' in colunas\n        assert 'pessoa_principal' in colunas\n</code></pre>"},{"location":"FASE3_INFRASTRUCTURE/#resultados","title":"Resultados","text":"<pre><code>poetry run pytest src/tests/test_infrastructure/ -v\n\n# Sa\u00edda esperada (13 testes):\n# test_sqlite_repository.py::TestSQLiteDocumentoRepository::test_salvar_novo_documento PASSED\n# test_sqlite_repository.py::TestSQLiteDocumentoRepository::test_salvar_documento_existente PASSED\n# test_sqlite_repository.py::TestSQLiteDocumentoRepository::test_buscar_por_id_inexistente PASSED\n# test_sqlite_repository.py::TestSQLiteDocumentoRepository::test_listar_sem_filtros PASSED\n# test_sqlite_repository.py::TestSQLiteDocumentoRepository::test_listar_com_filtro_centro PASSED\n# test_sqlite_repository.py::TestSQLiteDocumentoRepository::test_contar_documentos PASSED\n# test_sqlite_repository.py::TestSQLiteDocumentoRepository::test_remover_documento PASSED\n# test_sqlite_repository.py::TestSQLiteDocumentoRepository::test_remover_inexistente PASSED\n# test_migrations.py::TestMigrations::test_criar_tabelas PASSED\n# test_migrations.py::TestMigrations::test_migrar_banco_existente PASSED\n# test_migrations.py::TestMigrations::test_verificar_integridade_banco_ok PASSED\n# test_migrations.py::TestMigrations::test_verificar_integridade_banco_incompleto PASSED\n# test_migrations.py::TestMigrations::test_estatisticas_banco PASSED\n\n# =========================== 13 passed in 1.66s ===========================\n</code></pre> <p>Total: 13 testes | Todos PASSANDO \u2705</p>"},{"location":"FASE3_INFRASTRUCTURE/#fluxo-de-dados-na-infraestrutura","title":"\ud83d\udd04 Fluxo de Dados na Infraestrutura","text":"<pre><code>[Dom\u00ednio] \u2192 [Interface] \u2190 [SQLiteRepository]\n                \u2191\n        [DocumentoModel]\n                \u2191\n        [SQLite (banco real)]\n</code></pre> <p>Exemplo pr\u00e1tico (salvar documento):</p> <pre><code>1. Caso de uso chama repo.salvar(documento)\n2. Reposit\u00f3rio converte entidade para modelo\n3. Executa INSERT/UPDATE no SQLite\n4. Retorna ID do documento salvo\n5. Caso de uso continua\n</code></pre>"},{"location":"FASE3_INFRASTRUCTURE/#metricas-da-fase","title":"\ud83d\udcca M\u00e9tricas da Fase","text":"M\u00e9trica Valor Reposit\u00f3rios 2 Modelos 2 Migra\u00e7\u00f5es 2 Testes de integra\u00e7\u00e3o 13 Cobertura estimada &gt;80% Depend\u00eancias externas SQLite"},{"location":"FASE3_INFRASTRUCTURE/#principios-aplicados","title":"\ud83d\udcda Princ\u00edpios Aplicados","text":"Princ\u00edpio Aplica\u00e7\u00e3o Dependency Inversion Reposit\u00f3rio depende da interface, n\u00e3o o contr\u00e1rio Repository Pattern Abstra\u00e7\u00e3o do banco de dados Migrations Evolu\u00e7\u00e3o do schema sem perda de dados Test Isolation Banco em mem\u00f3ria para testes Configuration Management Settings centralizado Context Managers Gerenciamento seguro de conex\u00f5es"},{"location":"FASE3_INFRASTRUCTURE/#integracao-com-fases-anteriores-e-futuras","title":"\ud83d\udd17 Integra\u00e7\u00e3o com Fases Anteriores e Futuras","text":"Fase Relacionamento FASE 1 (Domain) Implementa <code>RepositorioDocumento</code> e <code>RepositorioTraducao</code> FASE 2 (Application) Usada pelos casos de uso FASE 4 (CLI) Reposit\u00f3rios injetados nos casos de uso FASE 5 (Tradu\u00e7\u00e3o) Usa <code>SQLiteTraducaoRepository</code> FASE 9 (Web) Mesmos reposit\u00f3rios, compartilhados"},{"location":"FASE3_INFRASTRUCTURE/#evolucao-do-codigo","title":"\ud83d\ude80 Evolu\u00e7\u00e3o do C\u00f3digo","text":""},{"location":"FASE3_INFRASTRUCTURE/#antes-codigo-legado-dbpy","title":"Antes (c\u00f3digo legado - <code>db.py</code>)","text":"<pre><code># C\u00f3digo espalhado, SQL na m\u00e3o\ndef listar_documentos():\n    conn = sqlite3.connect('data.db')\n    cursor = conn.cursor()\n    cursor.execute(\"SELECT * FROM documentos\")\n    return cursor.fetchall()\n</code></pre>"},{"location":"FASE3_INFRASTRUCTURE/#depois-clean-architecture","title":"Depois (Clean Architecture)","text":"<pre><code># Reposit\u00f3rio organizado e test\u00e1vel\ndef listar(self, offset, limite, centro=None, tipo=None):\n    with self._conexao() as conn:\n        cursor = conn.cursor()\n        query = self._montar_query(centro, tipo)\n        cursor.execute(query, params)\n        return [self._row_para_entidade(row) for row in cursor.fetchall()]\n</code></pre>"},{"location":"FASE3_INFRASTRUCTURE/#metricas-do-projeto-apos-fase-3","title":"\ud83d\udcc8 M\u00e9tricas do Projeto (Ap\u00f3s FASE 3)","text":"<pre><code>\ud83d\udcca DOMAIN LAYER: 3 m\u00f3dulos | 13 testes\n\ud83d\udcca APPLICATION LAYER: 4 casos de uso | 4 testes\n\ud83d\udcca INFRASTRUCTURE LAYER: 3 m\u00f3dulos | 13 testes\n\ud83d\udcca TOTAL: 30 testes passando\n</code></pre>"},{"location":"FASE3_INFRASTRUCTURE/#licoes-aprendidas","title":"\ud83d\udd0d Li\u00e7\u00f5es Aprendidas","text":"<ol> <li>Context managers s\u00e3o essenciais: Garantem que conex\u00f5es sejam sempre fechadas</li> <li>Banco em mem\u00f3ria para testes: Isola testes e acelera execu\u00e7\u00e3o</li> <li>Migra\u00e7\u00f5es precisam ser idempotentes: Podem rodar m\u00faltiplas vezes sem danos</li> <li>Convers\u00e3o modelo \u2194 entidade: Centralizar l\u00f3gica de mapeamento</li> <li>Configura\u00e7\u00f5es centralizadas: Facilita mudan\u00e7as e evita repeti\u00e7\u00e3o</li> </ol>"},{"location":"FASE3_INFRASTRUCTURE/#conclusao-da-fase","title":"\ud83c\udfc1 Conclus\u00e3o da Fase","text":"<p>A FASE 3 estabeleceu a camada de infraestrutura com:</p> <p>\u2705 2 reposit\u00f3rios SQLite completos \u2705 2 modelos de dados \u2705 Sistema de migra\u00e7\u00f5es \u2705 13 testes de integra\u00e7\u00e3o \u2705 Adaptador para Google Translate \u2705 Configura\u00e7\u00f5es centralizadas \u2705 C\u00f3digo pronto para ser usado pelas interfaces</p>"},{"location":"FASE3_INFRASTRUCTURE/#autor","title":"\ud83d\udc64 Autor","text":"<p>Thiago Ribeiro - Projeto de TCC</p> <sub>FASE 3 conclu\u00edda em 15 de Fevereiro de 2024</sub> <sub>\u2705 Pronto para a FASE 4 - Interface CLI</sub> <p>```</p>"},{"location":"FASE4_CLI/","title":"FASE 4 - Interface CLI (Camada de Interface)","text":"**Interface de linha de comando com navega\u00e7\u00e3o interativa e rica experi\u00eancia visual**"},{"location":"FASE4_CLI/#informacoes-da-fase","title":"\ud83d\udcc5 Informa\u00e7\u00f5es da Fase","text":"Item Descri\u00e7\u00e3o Status \u2705 Conclu\u00edda Data de Conclus\u00e3o 15 de Fevereiro de 2024 Artefatos CLI com Rich, Comandos, Presenters, Menus Testes Valida\u00e7\u00e3o manual completa Depend\u00eancias FASE 1, 2, 3"},{"location":"FASE4_CLI/#objetivo","title":"\ud83c\udfaf Objetivo","text":"<p>Implementar a interface de linha de comando (CLI) que:</p> <ul> <li>Ofere\u00e7a navega\u00e7\u00e3o intuitiva por menus</li> <li>Apresente dados de forma rica e colorida</li> <li>Permita todas as opera\u00e7\u00f5es do sistema</li> <li>Utilize a arquitetura limpa com inje\u00e7\u00e3o de depend\u00eancia</li> <li>Proporcione experi\u00eancia similar a aplica\u00e7\u00f5es desktop</li> </ul>"},{"location":"FASE4_CLI/#estrutura-criada","title":"\ud83d\udcc1 Estrutura Criada","text":"<pre><code>src/\n\u251c\u2500\u2500 interface/\n\u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u251c\u2500\u2500 console.py                 # Configura\u00e7\u00e3o do Rich\n\u2502   \u2514\u2500\u2500 cli/\n\u2502       \u251c\u2500\u2500 __init__.py\n\u2502       \u251c\u2500\u2500 app.py                  # Aplica\u00e7\u00e3o principal\n\u2502       \u251c\u2500\u2500 commands.py              # Comandos base\n\u2502       \u251c\u2500\u2500 commands_analise.py      # Comandos de an\u00e1lise\n\u2502       \u251c\u2500\u2500 commands_export.py       # Comandos de exporta\u00e7\u00e3o\n\u2502       \u251c\u2500\u2500 commands_relatorio.py    # Comandos de relat\u00f3rios\n\u2502       \u251c\u2500\u2500 commands_traducao.py     # Comandos de tradu\u00e7\u00e3o\n\u2502       \u251c\u2500\u2500 menu.py                  # Menus interativos\n\u2502       \u251c\u2500\u2500 presenters.py            # Presenters base\n\u2502       \u251c\u2500\u2500 presenters_analise.py    # Presenters de an\u00e1lise\n\u2502       \u2514\u2500\u2500 presenters_traducao.py   # Presenters de tradu\u00e7\u00e3o\n\u2514\u2500\u2500 scripts/\n    \u2514\u2500\u2500 migrar_dados_existentes.py   # Script de migra\u00e7\u00e3o\n</code></pre>"},{"location":"FASE4_CLI/#componentes-implementados","title":"\ud83e\udde9 Componentes Implementados","text":""},{"location":"FASE4_CLI/#1-console-consolepy","title":"1. Console (<code>console.py</code>)","text":"<p>Responsabilidade: Configurar o Rich e fornecer fun\u00e7\u00f5es de UI padronizadas.</p> <pre><code># Configura\u00e7\u00e3o do Rich\ntema = Theme({\n    \"primary\": \"bold cyan\",\n    \"secondary\": \"bold yellow\",\n    \"success\": \"bold green\",\n    \"error\": \"bold red\",\n    \"warning\": \"bold yellow\",\n    \"info\": \"dim white\",\n    \"destaque\": \"reverse white\"\n})\n\nconsole = Console(theme=tema)\n</code></pre> <p>Fun\u00e7\u00f5es utilit\u00e1rias:</p> <pre><code>def limpar_tela():\n    \"\"\"Limpa o terminal de forma cross-platform.\"\"\"\n    os.system('cls' if os.name == 'nt' else 'clear')\n    if os.name != 'nt':\n        print('\\033[3J', end='')  # Limpa scrollback\n        print('\\033[H', end='')   # Posiciona cursor\n\ndef cabecalho(titulo: str):\n    \"\"\"Exibe cabe\u00e7alho padronizado.\"\"\"\n    console.rule(f\"[primary]{titulo}[/primary]\")\n    console.print()\n\ndef mostrar_erro(mensagem: str):\n    \"\"\"Exibe mensagem de erro.\"\"\"\n    console.print(f\"[error]\u2717[/error] {mensagem}\")\n\ndef mostrar_sucesso(mensagem: str):\n    \"\"\"Exibe mensagem de sucesso.\"\"\"\n    console.print(f\"[success]\u2713[/success] {mensagem}\")\n\ndef mostrar_aviso(mensagem: str):\n    \"\"\"Exibe mensagem de aviso.\"\"\"\n    console.print(f\"[warning]\u26a0[/warning] {mensagem}\")\n\ndef spinner(mensagem: str, funcao, *args, **kwargs):\n    \"\"\"Executa fun\u00e7\u00e3o com spinner de carregamento.\"\"\"\n    with Progress(\n        SpinnerColumn(),\n        TextColumn(\"[progress.description]{task.description}\"),\n        console=console,\n        transient=True\n    ) as progress:\n        progress.add_task(f\"[cyan]{mensagem}[/cyan]\", total=None)\n        return funcao(*args, **kwargs)\n</code></pre>"},{"location":"FASE4_CLI/#2-presenters-presenterspy-presenters_analisepy-presenters_traducaopy","title":"2. Presenters (<code>presenters.py</code>, <code>presenters_analise.py</code>, <code>presenters_traducao.py</code>)","text":"<p>Responsabilidade: Formatar dados para exibi\u00e7\u00e3o no terminal.</p>"},{"location":"FASE4_CLI/#badges-e-icones","title":"Badges e \u00cdcones","text":"<pre><code>@staticmethod\ndef badge_tipo(tipo: str) -&gt; str:\n    \"\"\"Retorna badge colorido para tipo de documento.\"\"\"\n    badges = {\n        'interrogatorio': '[bold cyan]\ud83d\udd0d INTERROGAT\u00d3RIO[/bold cyan]',\n        'acareacao': '[bold yellow]\u2696\ufe0f ACAREA\u00c7\u00c3O[/bold yellow]',\n        'acusacao': '[bold red]\ud83d\udcdc ACUSA\u00c7\u00c3O[/bold red]',\n        'declaracao': '[bold blue]\ud83d\udcdd DECLARA\u00c7\u00c3O[/bold blue]',\n        'carta': '[bold green]\u2709\ufe0f CARTA[/bold green]',\n        'relatorio': '[bold magenta]\ud83d\udccb RELAT\u00d3RIO NKVD[/bold magenta]',\n        'depoimento': '[bold purple]\ud83d\udde3\ufe0f DEPOIMENTO[/bold purple]',\n        'laudo': '[bold white]\ud83c\udfe5 LAUDO[/bold white]',\n        'desconhecido': '[dim]\ud83d\udcc4 DOCUMENTO[/dim]'\n    }\n    return badges.get(tipo, badges['desconhecido'])\n\n@staticmethod\ndef badge_idioma(idioma: str) -&gt; str:\n    \"\"\"Retorna badge de idioma.\"\"\"\n    badges = {\n        'ru': '[bold white]\ud83c\uddf7\ud83c\uddfa RU[/bold white]',\n        'en': '[bold blue]\ud83c\uddfa\ud83c\uddf8 EN[/bold blue]',\n        'pt': '[bold green]\ud83c\udde7\ud83c\uddf7 PT[/bold green]',\n        'es': '[bold yellow]\ud83c\uddea\ud83c\uddf8 ES[/bold yellow]',\n        'fr': '[bold magenta]\ud83c\uddeb\ud83c\uddf7 FR[/bold magenta]',\n    }\n    return badges.get(idioma, f'[dim]{idioma}[/dim]')\n</code></pre>"},{"location":"FASE4_CLI/#tabela-de-documentos","title":"Tabela de Documentos","text":"<pre><code>@classmethod\ndef tabela_documentos(cls, resultados: Dict):\n    \"\"\"Cria tabela de documentos para listagem.\"\"\"\n    table = Table(\n        title=f\"[bold]\ud83d\udcda Documentos[/bold] (P\u00e1gina {resultados['pagina']}/{resultados['total_paginas']})\",\n        box=box.ROUNDED,\n        header_style=\"bold cyan\",\n        border_style=\"bright_blue\"\n    )\n\n    table.add_column(\"ID\", width=4, justify=\"right\")\n    table.add_column(\"Tipo\", width=20)\n    table.add_column(\"Data\", width=12)\n    table.add_column(\"Pessoa\", width=25)\n    table.add_column(\"T\u00edtulo\", width=35)\n    table.add_column(\"\ud83c\udf10\", width=8, justify=\"center\")\n\n    for item in resultados['items']:\n        trad_badge = \"[bold green]\u2713[/bold green]\" if item.tem_traducao else \"[dim]\u2014[/dim]\"\n\n        table.add_row(\n            str(item.id),\n            cls.badge_tipo(item.tipo),\n            item.data_original or \"N/D\",\n            item.pessoa_principal_en or item.pessoa_principal or \"\",\n            item.titulo[:35] + \"\u2026\" if len(item.titulo) &gt; 35 else item.titulo,\n            trad_badge\n        )\n\n    console.print(table)\n    console.print(f\"[dim]Total: {resultados['total']} documentos[/dim]\")\n</code></pre>"},{"location":"FASE4_CLI/#documento-completo","title":"Documento Completo","text":"<pre><code>@classmethod\ndef documento_completo(cls, dto):\n    \"\"\"Exibe documento completo com metadados.\"\"\"\n    # Cabe\u00e7alho com t\u00edtulo\n    titulo_panel = Panel(\n        f\"[bold yellow]{dto.titulo}[/bold yellow]\\n\\n\"\n        f\"{cls.badge_tipo(dto.tipo)}\",\n        border_style=\"bright_green\",\n        padding=(1, 2)\n    )\n    console.print(titulo_panel)\n\n    # Metadados\n    console.print(\"[bold cyan]\ud83d\udccb METADADOS[/bold cyan]\")\n    console.print(f\"  \ud83c\udfdb\ufe0f Centro: [yellow]{dto.centro}[/yellow]\")\n    console.print(f\"  \ud83d\udcc5 Data original: {dto.data_original or 'N\u00e3o informada'}\")\n    console.print(f\"  \ud83d\udd17 URL: [blue]{dto.url}[/blue]\")\n    console.print(f\"  \ud83d\udcca Tamanho: {dto.tamanho_caracteres} caracteres\")\n\n    # Conte\u00fado\n    console.print(\"\\n[bold white]\ud83d\udcc4 CONTE\u00daDO[/bold white]\")\n    console.print(\"\u2500\" * 80)\n\n    texto = dto.texto\n    if len(texto) &gt; 2000:\n        texto = texto[:2000] + \"\\n\\n[dim]... (texto truncado)[/dim]\"\n\n    console.print(texto)\n    console.print(\"\u2500\" * 80)\n</code></pre>"},{"location":"FASE4_CLI/#badge-de-idioma-atual","title":"Badge de Idioma Atual","text":"<pre><code>@classmethod\ndef badge_idioma_atual(cls, idioma: str):\n    \"\"\"Exibe badge indicando idioma atual.\"\"\"\n    if idioma == 'original':\n        return Panel(\"[bold blue]\ud83d\udcc4 ORIGINAL (Russo)[/bold blue]\", border_style=\"blue\")\n    else:\n        return Panel(\n            f\"[bold green]\ud83c\udf10 TRADU\u00c7\u00c3O {cls.badge_idioma(idioma)}[/bold green]\",\n            border_style=\"green\"\n        )\n</code></pre>"},{"location":"FASE4_CLI/#3-comandos-commandspy-commands_analisepy-commands_exportpy-commands_relatoriopy-commands_traducaopy","title":"3. Comandos (<code>commands.py</code>, <code>commands_analise.py</code>, <code>commands_export.py</code>, <code>commands_relatorio.py</code>, <code>commands_traducao.py</code>)","text":"<p>Responsabilidade: Implementar cada a\u00e7\u00e3o do usu\u00e1rio.</p>"},{"location":"FASE4_CLI/#comandolistar-commandspy","title":"ComandoListar (<code>commands.py</code>)","text":"<pre><code>class ComandoListar:\n    \"\"\"Comando para listar documentos.\"\"\"\n\n    def __init__(self, listar_use_case):\n        self.listar_use_case = listar_use_case\n        self.presenter = DocumentoPresenter()\n\n    def executar(self, centro: Optional[str] = None, tipo: Optional[str] = None):\n        \"\"\"Executa listagem interativa.\"\"\"\n        pagina = 1\n        limite = 15\n\n        while True:\n            limpar_tela()\n            cabecalho(f\"\ud83d\udccb Documentos - {centro or 'Todos'}\")\n\n            resultados = self.listar_use_case.executar(\n                pagina=pagina,\n                limite=limite,\n                centro=centro,\n                tipo=tipo\n            )\n\n            self.presenter.tabela_documentos(resultados)\n\n            # Menu de navega\u00e7\u00e3o\n            console.print(\"\\n[dim]\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500[/dim]\")\n            console.print(\"[bold cyan]COMANDOS[/bold cyan]\")\n            console.print(\"  [green]n[/green] - Pr\u00f3xima p\u00e1gina\")\n            console.print(\"  [green]p[/green] - P\u00e1gina anterior\")\n            console.print(\"  [green][n\u00famero][/green] - Ver documento\")\n            console.print(\"  [green]m[/green] - Menu principal\")\n\n            cmd = input(\"\\nComando: \").strip().lower()\n\n            if cmd == 'n' and pagina &lt; resultados['total_paginas']:\n                pagina += 1\n            elif cmd == 'p' and pagina &gt; 1:\n                pagina -= 1\n            elif cmd == 'm':\n                break\n            elif cmd.isdigit():\n                return int(cmd)\n            else:\n                mostrar_erro(\"Comando inv\u00e1lido\")\n</code></pre>"},{"location":"FASE4_CLI/#comandotraduzir-commands_traducaopy","title":"ComandoTraduzir (<code>commands_traducao.py</code>)","text":"<pre><code>class ComandoTraduzir:\n    \"\"\"Comando para criar nova tradu\u00e7\u00e3o.\"\"\"\n\n    def executar(self, documento_id: int):\n        \"\"\"Executa tradu\u00e7\u00e3o interativa.\"\"\"\n        # 1. Mostrar tradu\u00e7\u00f5es existentes\n        traducoes = self.listar_trad_use_case.executar(documento_id)\n\n        # 2. Escolher idioma\n        console.print(\"\\n[bold cyan]Idiomas dispon\u00edveis:[/bold cyan]\")\n        console.print(\"  [1] \ud83c\uddfa\ud83c\uddf8 Ingl\u00eas (en)\")\n        console.print(\"  [2] \ud83c\udde7\ud83c\uddf7 Portugu\u00eas (pt)\")\n        console.print(\"  [3] \ud83c\uddea\ud83c\uddf8 Espanhol (es)\")\n        console.print(\"  [4] \ud83c\uddeb\ud83c\uddf7 Franc\u00eas (fr)\")\n\n        # 3. Verificar se j\u00e1 existe\n        if existente:\n            console.print(f\"\\n[yellow]\u26a0 J\u00e1 existe tradu\u00e7\u00e3o[/yellow]\")\n            confirmar = input(\"Substituir? (s/N): \").strip().lower()\n\n        # 4. Estimar custo\n        console.print(\"\\n[bold]\ud83d\udcca Estimativa de custo:[/bold]\")\n\n        # 5. Traduzir com spinner\n        resultado = spinner(\n            f\"\ud83c\udf10 Traduzindo...\",\n            self.traduzir_use_case.executar,\n            documento_id,\n            idioma,\n            forcar_novo=True\n        )\n</code></pre>"},{"location":"FASE4_CLI/#comandoexportar-commands_exportpy","title":"ComandoExportar (<code>commands_export.py</code>)","text":"<pre><code>class ComandoExportar:\n    \"\"\"Comando para exportar documento.\"\"\"\n\n    def executar(self, documento_id: int):\n        \"\"\"Executa exporta\u00e7\u00e3o interativa.\"\"\"\n        # 1. Listar idiomas dispon\u00edveis\n        idiomas = self.exportar_use_case.listar_idiomas_disponiveis(documento_id)\n\n        # 2. Escolher formato\n        console.print(\"\\n[bold]Formatos dispon\u00edveis:[/bold]\")\n        console.print(\"  [1] \ud83d\udcc4 TXT\")\n        console.print(\"  [2] \ud83d\udcd1 PDF (em breve)\")\n\n        # 3. Incluir metadados?\n        console.print(\"\\n[bold]Incluir metadados?[/bold]\")\n\n        # 4. Exportar\n        resultado = self.exportar_use_case.executar(...)\n\n        if resultado['sucesso']:\n            mostrar_sucesso(f\"Documento exportado para: {resultado['caminho']}\")\n</code></pre>"},{"location":"FASE4_CLI/#4-menus-menupy","title":"4. Menus (<code>menu.py</code>)","text":"<p>Responsabilidade: Gerenciar a navega\u00e7\u00e3o entre telas.</p>"},{"location":"FASE4_CLI/#menuprincipal","title":"MenuPrincipal","text":"<pre><code>class MenuPrincipal:\n    \"\"\"Menu principal da aplica\u00e7\u00e3o.\"\"\"\n\n    def mostrar(self) -&gt; str:\n        limpar_tela()\n\n        banner = \"\"\"\n\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\n\u2551                                                              \u2551\n\u2551                    \u25c8 \u25c8 \u25c8 SHOW TRIALS \u25c8 \u25c8 \u25c8                 \u2551\n\u2551                    Coleta \u2022 Tradu\u00e7\u00e3o \u2022 An\u00e1lise              \u2551\n\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\n\"\"\"\n        console.print(banner, style=\"bold cyan\")\n        console.print()\n\n        console.print(\"[bold cyan]MENU PRINCIPAL[/bold cyan]\")\n        console.print()\n        console.print(\"  [1] \ud83d\udccb Listar todos os documentos\")\n        console.print(\"  [2] \ud83c\udfdb\ufe0f  Listar por centro\")\n        console.print(\"  [3] \ud83d\udc41\ufe0f  Visualizar documento\")\n        console.print(\"  [4] \ud83d\udcca Estat\u00edsticas\")\n        console.print(\"  [5] \ud83d\udcc8 Relat\u00f3rios avan\u00e7ados\")\n        console.print(\"  [6] \ud83d\udd0d An\u00e1lise de texto\")\n        console.print(\"  [7] \ud83d\udd04 Sair\")\n        console.print()\n\n        return input(\"[cyan]Escolha[/cyan] \").strip()\n</code></pre>"},{"location":"FASE4_CLI/#menucentro","title":"MenuCentro","text":"<pre><code>class MenuCentro:\n    \"\"\"Menu para escolha de centro.\"\"\"\n\n    @staticmethod\n    def mostrar() -&gt; str:\n        console.print()\n        console.print(\"[bold cyan]Centros dispon\u00edveis:[/bold cyan]\")\n        console.print(\"  [1] \ud83c\udfdb\ufe0f Leningrad Center\")\n        console.print(\"  [2] \ud83c\udfdb\ufe0f Moscow Center\")\n        console.print(\"  [0] \u21a9\ufe0f  Voltar\")\n\n        opcao = input(\"\\nEscolha o centro: \").strip()\n\n        if opcao == '1':\n            return 'lencenter'\n        elif opcao == '2':\n            return 'moscenter'\n        return None\n</code></pre>"},{"location":"FASE4_CLI/#menu-de-analise","title":"Menu de An\u00e1lise","text":"<pre><code>def _menu_analise(self):\n    \"\"\"Menu de an\u00e1lise de texto.\"\"\"\n    while True:\n        limpar_tela()\n        cabecalho(\"\ud83d\udd0d AN\u00c1LISE DE TEXTO\")\n\n        console.print(\"[bold cyan]Op\u00e7\u00f5es:[/bold cyan]\")\n        console.print(\"  [1] Analisar documento espec\u00edfico\")\n        console.print(\"  [2] An\u00e1lise global do acervo\")\n        console.print(\"  [3] Nuvem de palavras do acervo\")\n        console.print(\"  [0] Voltar\")\n\n        opcao = input(\"\\nEscolha: \").strip()\n\n        if opcao == '0':\n            break\n        elif opcao == '1':\n            doc_id = int(input(\"ID do documento: \"))\n            self.cmd_analisar_doc.executar(doc_id)\n        elif opcao == '2':\n            self.cmd_analisar_acervo.executar()\n        elif opcao == '3':\n            caminho = self.analisar_acervo_use_case.gerar_wordcloud_geral()\n            mostrar_sucesso(f\"Nuvem gerada em: {caminho}\")\n</code></pre>"},{"location":"FASE4_CLI/#5-aplicacao-principal-apppy","title":"5. Aplica\u00e7\u00e3o Principal (<code>app.py</code>)","text":"<p>Responsabilidade: Inicializar e orquestrar todos os componentes.</p> <pre><code>class ShowTrialsApp:\n    \"\"\"Aplica\u00e7\u00e3o principal com inje\u00e7\u00e3o de depend\u00eancia.\"\"\"\n\n    def __init__(self):\n        # =====================================================\n        # 1. INFRAESTRUTURA\n        # =====================================================\n        self.repo = SQLiteDocumentoRepository()\n        self.repo_traducao = SQLiteTraducaoRepository()\n        self.registry = ServiceRegistry()\n\n        # Registrar servi\u00e7os\n        self.registry.register('translator', create_translator, lazy=True)\n        self.registry.register('spacy', create_spacy_analyzer, lazy=True)\n        self.registry.register('wordcloud', create_wordcloud_generator, lazy=True)\n\n        # =====================================================\n        # 2. CASOS DE USO\n        # =====================================================\n        self.listar_use_case = ListarDocumentos(self.repo).com_traducao_nomes(True)\n        self.obter_use_case = ObterDocumento(self.repo, self.repo_traducao)\n        self.estatisticas_use_case = ObterEstatisticas(self.repo)\n        self.exportar_use_case = ExportarDocumento(self.repo, self.repo_traducao)\n        self.relatorio_use_case = GerarRelatorio(self.repo, self.repo_traducao)\n\n        # Casos com registry\n        self.traduzir_use_case = TraduzirDocumento(\n            repo_doc=self.repo,\n            repo_trad=self.repo_traducao,\n            registry=self.registry\n        )\n\n        self.analisar_documento_use_case = AnalisarDocumento(\n            repo_doc=self.repo,\n            repo_trad=self.repo_traducao,\n            registry=self.registry\n        )\n\n        self.analisar_acervo_use_case = AnalisarAcervo(\n            repo_doc=self.repo,\n            registry=self.registry\n        )\n\n        self.listar_traducoes_use_case = ListarTraducoes(self.repo_traducao)\n\n        # =====================================================\n        # 3. COMANDOS\n        # =====================================================\n        self.cmd_listar = ComandoListar(self.listar_use_case)\n        self.cmd_visualizar = ComandoVisualizar(self.obter_use_case)\n        self.cmd_estatisticas = ComandoEstatisticas(self.estatisticas_use_case)\n        self.cmd_exportar = ComandoExportar(self.exportar_use_case)\n        self.cmd_relatorio = ComandoRelatorio(self.relatorio_use_case)\n\n        self.cmd_traduzir = ComandoTraduzir(\n            self.traduzir_use_case,\n            self.listar_traducoes_use_case\n        )\n\n        self.cmd_alternar_idioma = ComandoAlternarIdioma(\n            self.listar_traducoes_use_case,\n            self.obter_use_case\n        )\n\n        self.cmd_analisar_doc = ComandoAnalisarDocumento(self.analisar_documento_use_case)\n        self.cmd_analisar_acervo = ComandoAnalisarAcervo(self.analisar_acervo_use_case)\n\n        # =====================================================\n        # 4. MENUS\n        # =====================================================\n        self.menu_principal = MenuPrincipal(self)\n        self.menu_centro = MenuCentro()\n</code></pre>"},{"location":"FASE4_CLI/#6-visualizacao-de-documento-com-traducoes","title":"6. Visualiza\u00e7\u00e3o de Documento com Tradu\u00e7\u00f5es","text":"<pre><code>def _visualizar_e_aguardar(self, doc_id: int):\n    \"\"\"Visualiza documento com altern\u00e2ncia de idiomas.\"\"\"\n    idioma_atual = 'original'\n\n    while True:\n        # Buscar documento (original ou tradu\u00e7\u00e3o)\n        if idioma_atual == 'original':\n            dto = self.obter_use_case.executar(doc_id)\n        else:\n            # Buscar tradu\u00e7\u00e3o espec\u00edfica\n            traducoes = self.listar_traducoes_use_case.executar(doc_id)\n            traducao = next((t for t in traducoes if t.idioma == idioma_atual), None)\n\n            if traducao:\n                dto = self.obter_use_case.executar(doc_id)\n                dto.texto = traducao.texto_traduzido\n                dto.titulo = f\"{dto.titulo} [{traducao.idioma_nome}]\"\n            else:\n                dto = self.obter_use_case.executar(doc_id)\n                idioma_atual = 'original'\n\n        # Mostrar badge do idioma atual\n        console.print(TraducaoPresenter.badge_idioma_atual(idioma_atual))\n\n        # Mostrar documento\n        DocumentoPresenter.documento_completo(dto)\n\n        # Mostrar tradu\u00e7\u00f5es dispon\u00edveis\n        traducoes = self.listar_traducoes_use_case.executar(doc_id)\n        if traducoes:\n            console.print(\"\\n[bold cyan]\ud83c\udf10 TRADU\u00c7\u00d5ES DISPON\u00cdVEIS:[/bold cyan]\")\n            for t in traducoes:\n                console.print(f\"    {t.idioma_icone} {t.idioma_nome}\")\n\n        # Comandos\n        console.print(\"\\n[dim]\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500[/dim]\")\n        console.print(\"[bold cyan]COMANDOS[/bold cyan]\")\n        console.print(\"  [green]\u23ce Enter[/green] - Voltar\")\n        console.print(\"  [yellow]e[/yellow] - Exportar\")\n        console.print(\"  [cyan]t[/cyan] - Alternar idioma\")\n        console.print(\"  [blue]n[/blue] - Nova tradu\u00e7\u00e3o\")\n\n        cmd = input(\"\\nComando: \").strip().lower()\n\n        if cmd == '':\n            break\n        elif cmd == 't':\n            idioma_atual = self.cmd_alternar_idioma.executar(doc_id, idioma_atual)\n        elif cmd == 'n':\n            resultado = self.cmd_traduzir.executar(doc_id)\n            if resultado:\n                idioma_atual = resultado.idioma\n        elif cmd == 'e':\n            self.cmd_exportar.executar(doc_id)\n</code></pre>"},{"location":"FASE4_CLI/#testes-manuais","title":"\ud83e\uddea Testes (Manuais)","text":""},{"location":"FASE4_CLI/#checklist-de-validacao","title":"Checklist de Valida\u00e7\u00e3o","text":"Cen\u00e1rio A\u00e7\u00e3o Resultado Esperado Menu principal Executar <code>python run.py</code> Banner + 7 op\u00e7\u00f5es Listar todos Op\u00e7\u00e3o 1 Tabela paginada com 15 itens Navega\u00e7\u00e3o Tecla 'n' Pr\u00f3xima p\u00e1gina Navega\u00e7\u00e3o Tecla 'p' P\u00e1gina anterior Ver documento Digitar ID Metadados + conte\u00fado Filtro por centro Op\u00e7\u00e3o 2 \u2192 1 Apenas Leningrad Tradu\u00e7\u00f5es Visualizar doc com tradu\u00e7\u00e3o Badge \u2705 na coluna Alternar idioma Tecla 't' Muda entre original/tradu\u00e7\u00e3o Nova tradu\u00e7\u00e3o Tecla 'n' Menu de idiomas Exportar Tecla 'e' Menu de exporta\u00e7\u00e3o Estat\u00edsticas Op\u00e7\u00e3o 4 Dashboard completo Relat\u00f3rios Op\u00e7\u00e3o 5 Menu de relat\u00f3rios An\u00e1lise Op\u00e7\u00e3o 6 Menu de an\u00e1lise Sair Op\u00e7\u00e3o 7 Mensagem de despedida"},{"location":"FASE4_CLI/#fluxo-de-dados-na-cli","title":"\ud83d\udd04 Fluxo de Dados na CLI","text":"<pre><code>[Usu\u00e1rio] \u2192 [Menu] \u2192 [Comando] \u2192 [Caso de Uso] \u2192 [Reposit\u00f3rio]\n    \u2191          \u2191          \u2191             \u2191               \u2191\n    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                         [DTOs]\n</code></pre> <p>Exemplo pr\u00e1tico (Listar documentos):</p> <pre><code>1. Usu\u00e1rio digita '1' no menu\n2. Menu chama self.cmd_listar.executar()\n3. Comando chama listar_use_case.executar(pagina=1)\n4. Caso de uso calcula offset e chama repo.listar()\n5. Reposit\u00f3rio retorna entidades\n6. Caso de uso converte para DTOs\n7. Presenter formata DTOs em tabela\n8. Usu\u00e1rio v\u00ea resultado\n</code></pre>"},{"location":"FASE4_CLI/#metricas-da-fase","title":"\ud83d\udcca M\u00e9tricas da Fase","text":"M\u00e9trica Valor Arquivos de interface 12 Comandos implementados 8 Presenters 3 Menus 3 Linhas de c\u00f3digo ~1500 Testes manuais 15 cen\u00e1rios"},{"location":"FASE4_CLI/#principios-aplicados","title":"\ud83d\udcda Princ\u00edpios Aplicados","text":"Princ\u00edpio Aplica\u00e7\u00e3o Inje\u00e7\u00e3o de Depend\u00eancia Casos de uso injetados nos comandos Separa\u00e7\u00e3o de Responsabilidades Presenters formatam, comandos orquestram Single Responsibility Cada comando faz uma coisa Composi\u00e7\u00e3o App composto por casos de uso e comandos DRY Fun\u00e7\u00f5es de UI centralizadas no console.py"},{"location":"FASE4_CLI/#integracao-com-fases-anteriores-e-futuras","title":"\ud83d\udd17 Integra\u00e7\u00e3o com Fases Anteriores e Futuras","text":"Fase Relacionamento FASE 1 (Domain) Usa value objects via presenters FASE 2 (Application) Usa casos de uso e DTOs FASE 3 (Infrastructure) Reposit\u00f3rios injetados nos casos de uso FASE 5 (Tradu\u00e7\u00e3o) Comandos de tradu\u00e7\u00e3o integrados FASE 6 (Exporta\u00e7\u00e3o) Comandos de exporta\u00e7\u00e3o FASE 7 (Relat\u00f3rios) Comandos de relat\u00f3rios FASE 8 (An\u00e1lise) Comandos de an\u00e1lise FASE 9 (Web) Mesmos casos de uso, presenters diferentes"},{"location":"FASE4_CLI/#evolucao-do-codigo","title":"\ud83d\ude80 Evolu\u00e7\u00e3o do C\u00f3digo","text":""},{"location":"FASE4_CLI/#antes-codigo-legado-nav_uipy","title":"Antes (c\u00f3digo legado - <code>nav_ui.py</code>)","text":"<pre><code># C\u00f3digo misturado, SQL na UI\ndef navegar_lista():\n    conn = sqlite3.connect('data.db')\n    cursor = conn.cursor()\n    cursor.execute(\"SELECT * FROM documentos\")\n    # L\u00f3gica de pagina\u00e7\u00e3o manual\n    # Formata\u00e7\u00e3o manual\n</code></pre>"},{"location":"FASE4_CLI/#depois-clean-architecture","title":"Depois (Clean Architecture)","text":"<pre><code># UI pura, sem saber de banco\ndef navegar_lista(self):\n    resultados = self.listar_use_case.executar(pagina=pagina)\n    self.presenter.tabela_documentos(resultados)\n</code></pre>"},{"location":"FASE4_CLI/#metricas-do-projeto-apos-fase-4","title":"\ud83d\udcc8 M\u00e9tricas do Projeto (Ap\u00f3s FASE 4)","text":"<pre><code>\ud83d\udcca DOMAIN LAYER: 3 m\u00f3dulos | 13 testes\n\ud83d\udcca APPLICATION LAYER: 4 casos de uso | 4 testes\n\ud83d\udcca INFRASTRUCTURE LAYER: 3 m\u00f3dulos | 13 testes\n\ud83d\udcca INTERFACE LAYER: 12 m\u00f3dulos | Validada manualmente\n\ud83d\udcca TOTAL: 30 testes automatizados + interface validada\n</code></pre>"},{"location":"FASE4_CLI/#licoes-aprendidas","title":"\ud83d\udd0d Li\u00e7\u00f5es Aprendidas","text":"<ol> <li>Rich \u00e9 poderoso: Tabelas, pain\u00e9is e spinners melhoram muito a experi\u00eancia</li> <li>Presenters simplificam a UI: Separam formata\u00e7\u00e3o da l\u00f3gica</li> <li>Comandos devem ser pequenos: Cada comando faz uma coisa bem feita</li> <li>Menus aninhados funcionam bem: Submenus para funcionalidades complexas</li> <li>Feedback \u00e9 essencial: Spinners e mensagens de erro/sucesso</li> <li>Inje\u00e7\u00e3o de depend\u00eancia facilita testes: Comandos podem ser testados com mocks</li> </ol>"},{"location":"FASE4_CLI/#conclusao-da-fase","title":"\ud83c\udfc1 Conclus\u00e3o da Fase","text":"<p>A FASE 4 entregou uma CLI profissional com:</p> <p>\u2705 Navega\u00e7\u00e3o intuitiva por menus \u2705 Tabelas coloridas e paginadas \u2705 Visualiza\u00e7\u00e3o detalhada de documentos \u2705 Altern\u00e2ncia entre original/tradu\u00e7\u00e3o \u2705 Exporta\u00e7\u00e3o de documentos \u2705 Relat\u00f3rios e estat\u00edsticas \u2705 An\u00e1lise de texto \u2705 Integra\u00e7\u00e3o completa com todas as fases \u2705 C\u00f3digo limpo e organizado</p>"},{"location":"FASE4_CLI/#autor","title":"\ud83d\udc64 Autor","text":"<p>Thiago Ribeiro - Projeto de TCC</p> <sub>FASE 4 conclu\u00edda em 15 de Fevereiro de 2024</sub> <sub>\u2705 Pronto para a FASE 5 - Tradu\u00e7\u00e3o Avan\u00e7ada</sub> <p>```</p>"},{"location":"FASE5_TRADUCAO/","title":"FASE 5 - Tradu\u00e7\u00e3o Avan\u00e7ada","text":"**Sistema completo de tradu\u00e7\u00e3o com Google Translate, persist\u00eancia e altern\u00e2ncia de idiomas**"},{"location":"FASE5_TRADUCAO/#informacoes-da-fase","title":"\ud83d\udcc5 Informa\u00e7\u00f5es da Fase","text":"Item Descri\u00e7\u00e3o Status \u2705 Conclu\u00edda Data de Conclus\u00e3o 15 de Fevereiro de 2024 Artefatos Entidade Traducao, Reposit\u00f3rio, Casos de Uso, Comandos CLI Testes 5 cen\u00e1rios manuais Depend\u00eancias FASE 1, 2, 3, 4, Google Cloud Translation API"},{"location":"FASE5_TRADUCAO/#objetivo","title":"\ud83c\udfaf Objetivo","text":"<p>Implementar um sistema completo de tradu\u00e7\u00e3o que:</p> <ul> <li>Integre com Google Cloud Translation API</li> <li>Permita traduzir documentos para m\u00faltiplos idiomas</li> <li>Persista tradu\u00e7\u00f5es no banco de dados</li> <li>Ofere\u00e7a altern\u00e2ncia entre original e tradu\u00e7\u00f5es</li> <li>Calcule e exiba custos estimados</li> <li>Forne\u00e7a feedback visual durante o processo</li> </ul>"},{"location":"FASE5_TRADUCAO/#estrutura-criadamodificada","title":"\ud83d\udcc1 Estrutura Criada/Modificada","text":"<pre><code>src/\n\u251c\u2500\u2500 domain/\n\u2502   \u251c\u2500\u2500 entities/\n\u2502   \u2502   \u2514\u2500\u2500 traducao.py                 # Nova entidade\n\u2502   \u2514\u2500\u2500 interfaces/\n\u2502       \u2514\u2500\u2500 repositorio_traducao.py     # Nova interface\n\u251c\u2500\u2500 application/\n\u2502   \u251c\u2500\u2500 use_cases/\n\u2502   \u2502   \u251c\u2500\u2500 traduzir_documento.py       # Novo caso de uso\n\u2502   \u2502   \u2514\u2500\u2500 listar_traducoes.py         # Novo caso de uso\n\u2502   \u2514\u2500\u2500 dtos/\n\u2502       \u2514\u2500\u2500 traducao_dto.py             # Novo DTO\n\u251c\u2500\u2500 infrastructure/\n\u2502   \u251c\u2500\u2500 persistence/\n\u2502   \u2502   \u2514\u2500\u2500 sqlite_traducao_repository.py  # Novo reposit\u00f3rio\n\u2502   \u2514\u2500\u2500 translation/\n\u2502       \u2514\u2500\u2500 google_translator.py        # Adaptador (refatorado)\n\u2514\u2500\u2500 interface/\n    \u2514\u2500\u2500 cli/\n        \u251c\u2500\u2500 commands_traducao.py        # Novos comandos\n        \u2514\u2500\u2500 presenters_traducao.py      # Novos presenters\n</code></pre>"},{"location":"FASE5_TRADUCAO/#componentes-implementados","title":"\ud83e\udde9 Componentes Implementados","text":""},{"location":"FASE5_TRADUCAO/#1-entidade-traducao-domainentitiestraducaopy","title":"1. Entidade Traducao (<code>domain/entities/traducao.py</code>)","text":"<p>Responsabilidade: Representar uma tradu\u00e7\u00e3o no dom\u00ednio.</p> <pre><code>@dataclass\nclass Traducao:\n    \"\"\"\n    Representa uma tradu\u00e7\u00e3o de um documento.\n\n    Attributes:\n        id: Identificador \u00fanico\n        documento_id: ID do documento original\n        idioma: C\u00f3digo do idioma (en, pt, es, fr)\n        texto_traduzido: Conte\u00fado traduzido\n        modelo: Modelo usado (nmt, base)\n        custo: Custo estimado em USD\n        data_traducao: Data da tradu\u00e7\u00e3o\n    \"\"\"\n\n    documento_id: int\n    idioma: str\n    texto_traduzido: str\n    data_traducao: datetime\n\n    id: Optional[int] = None\n    modelo: Optional[str] = None\n    custo: float = 0.0\n\n    def __post_init__(self):\n        \"\"\"Valida\u00e7\u00f5es ap\u00f3s inicializa\u00e7\u00e3o.\"\"\"\n        idiomas_validos = ['en', 'pt', 'es', 'fr']\n        if self.idioma not in idiomas_validos:\n            raise ValueError(f\"Idioma inv\u00e1lido: {self.idioma}\")\n\n        if not self.texto_traduzido:\n            raise ValueError(\"Texto traduzido n\u00e3o pode ser vazio\")\n\n    @property\n    def idioma_nome(self) -&gt; str:\n        \"\"\"Nome do idioma em portugu\u00eas.\"\"\"\n        nomes = {\n            'en': 'Ingl\u00eas',\n            'pt': 'Portugu\u00eas',\n            'es': 'Espanhol',\n            'fr': 'Franc\u00eas'\n        }\n        return nomes.get(self.idioma, self.idioma.upper())\n\n    @property\n    def idioma_icone(self) -&gt; str:\n        \"\"\"\u00cdcone do idioma.\"\"\"\n        icons = {\n            'en': '\ud83c\uddfa\ud83c\uddf8',\n            'pt': '\ud83c\udde7\ud83c\uddf7',\n            'es': '\ud83c\uddea\ud83c\uddf8',\n            'fr': '\ud83c\uddeb\ud83c\uddf7'\n        }\n        return icons.get(self.idioma, '\ud83c\udf10')\n</code></pre>"},{"location":"FASE5_TRADUCAO/#2-interface-repositoriotraducao-domaininterfacesrepositorio_traducaopy","title":"2. Interface RepositorioTraducao (<code>domain/interfaces/repositorio_traducao.py</code>)","text":"<p>Responsabilidade: Definir contrato para persist\u00eancia de tradu\u00e7\u00f5es.</p> <pre><code>class RepositorioTraducao(ABC):\n    \"\"\"Interface para reposit\u00f3rio de tradu\u00e7\u00f5es.\"\"\"\n\n    @abstractmethod\n    def salvar(self, traducao: Traducao) -&gt; int:\n        \"\"\"Salva uma tradu\u00e7\u00e3o.\"\"\"\n        pass\n\n    @abstractmethod\n    def buscar_por_id(self, id: int) -&gt; Optional[Traducao]:\n        \"\"\"Busca tradu\u00e7\u00e3o por ID.\"\"\"\n        pass\n\n    @abstractmethod\n    def buscar_por_documento(self, documento_id: int, idioma: str) -&gt; Optional[Traducao]:\n        \"\"\"Busca tradu\u00e7\u00e3o espec\u00edfica de um documento.\"\"\"\n        pass\n\n    @abstractmethod\n    def listar_por_documento(self, documento_id: int) -&gt; List[Traducao]:\n        \"\"\"Lista todas as tradu\u00e7\u00f5es de um documento.\"\"\"\n        pass\n\n    @abstractmethod\n    def contar_por_documento(self, documento_id: int) -&gt; int:\n        \"\"\"Conta tradu\u00e7\u00f5es de um documento.\"\"\"\n        pass\n</code></pre>"},{"location":"FASE5_TRADUCAO/#3-dto-de-traducao-applicationdtostraducao_dtopy","title":"3. DTO de Tradu\u00e7\u00e3o (<code>application/dtos/traducao_dto.py</code>)","text":"<pre><code>@dataclass\nclass TraducaoDTO:\n    \"\"\"DTO para exibi\u00e7\u00e3o de tradu\u00e7\u00e3o.\"\"\"\n\n    id: Optional[int]\n    documento_id: int\n    idioma: str\n    idioma_nome: str\n    idioma_icone: str\n    texto_traduzido: str\n    data_traducao: str\n    modelo: Optional[str]\n    custo: float\n\n    @classmethod\n    def from_domain(cls, traducao):\n        \"\"\"Converte entidade para DTO.\"\"\"\n        return cls(\n            id=traducao.id,\n            documento_id=traducao.documento_id,\n            idioma=traducao.idioma,\n            idioma_nome=traducao.idioma_nome,\n            idioma_icone=traducao.idioma_icone,\n            texto_traduzido=traducao.texto_traduzido,\n            data_traducao=traducao.data_traducao.isoformat()[:10],\n            modelo=traducao.modelo,\n            custo=traducao.custo\n        )\n</code></pre>"},{"location":"FASE5_TRADUCAO/#4-caso-de-uso-traduzirdocumento-applicationuse_casestraduzir_documentopy","title":"4. Caso de Uso TraduzirDocumento (<code>application/use_cases/traduzir_documento.py</code>)","text":"<p>Responsabilidade: Orquestrar o processo de tradu\u00e7\u00e3o.</p> <pre><code>class TraduzirDocumento:\n    \"\"\"\n    Caso de uso para traduzir um documento.\n    \"\"\"\n\n    def __init__(self,\n                 repo_doc: RepositorioDocumento,\n                 repo_trad: RepositorioTraducao,\n                 tradutor_service):  # Servi\u00e7o externo\n        self.repo_doc = repo_doc\n        self.repo_trad = repo_trad\n        self.tradutor = tradutor_service\n\n    def executar(self,\n                 documento_id: int,\n                 idioma_destino: str = 'en',\n                 forcar_novo: bool = False) -&gt; Optional[TraducaoDTO]:\n        \"\"\"\n        Traduz um documento para o idioma especificado.\n\n        Args:\n            documento_id: ID do documento original\n            idioma_destino: C\u00f3digo do idioma (en, pt, es, fr)\n            forcar_novo: Se True, ignora tradu\u00e7\u00e3o existente\n\n        Returns:\n            TraducaoDTO da tradu\u00e7\u00e3o (nova ou existente)\n        \"\"\"\n        # 1. Verificar se documento existe\n        documento = self.repo_doc.buscar_por_id(documento_id)\n        if not documento:\n            raise ValueError(f\"Documento {documento_id} n\u00e3o encontrado\")\n\n        # 2. Verificar se j\u00e1 existe tradu\u00e7\u00e3o\n        if not forcar_novo:\n            existente = self.repo_trad.buscar_por_documento(documento_id, idioma_destino)\n            if existente:\n                return TraducaoDTO.from_domain(existente)\n\n        # 3. Traduzir\n        try:\n            texto_traduzido = self.tradutor.traduzir_documento_completo(\n                documento.texto,\n                destino=idioma_destino\n            )\n        except Exception as e:\n            raise RuntimeError(f\"Erro na tradu\u00e7\u00e3o: {e}\")\n\n        # 4. Criar entidade de tradu\u00e7\u00e3o\n        traducao = Traducao(\n            documento_id=documento_id,\n            idioma=idioma_destino,\n            texto_traduzido=texto_traduzido,\n            data_traducao=datetime.now(),\n            modelo='nmt',\n            custo=len(documento.texto) * 0.000020\n        )\n\n        # 5. Salvar\n        traducao.id = self.repo_trad.salvar(traducao)\n\n        return TraducaoDTO.from_domain(traducao)\n</code></pre>"},{"location":"FASE5_TRADUCAO/#5-caso-de-uso-listartraducoes-applicationuse_caseslistar_traducoespy","title":"5. Caso de Uso ListarTraducoes (<code>application/use_cases/listar_traducoes.py</code>)","text":"<pre><code>class ListarTraducoes:\n    \"\"\"\n    Caso de uso para listar tradu\u00e7\u00f5es de um documento.\n    \"\"\"\n\n    def __init__(self, repo: RepositorioTraducao):\n        self.repo = repo\n\n    def executar(self, documento_id: int) -&gt; List[TraducaoDTO]:\n        \"\"\"\n        Retorna lista de tradu\u00e7\u00f5es do documento.\n        \"\"\"\n        traducoes = self.repo.listar_por_documento(documento_id)\n        return [TraducaoDTO.from_domain(t) for t in traducoes]\n\n    def contar(self, documento_id: int) -&gt; int:\n        \"\"\"Retorna n\u00famero de tradu\u00e7\u00f5es do documento.\"\"\"\n        return self.repo.contar_por_documento(documento_id)\n</code></pre>"},{"location":"FASE5_TRADUCAO/#6-repositorio-sqlite-de-traducoes-infrastructurepersistencesqlite_traducao_repositorypy","title":"6. Reposit\u00f3rio SQLite de Tradu\u00e7\u00f5es (<code>infrastructure/persistence/sqlite_traducao_repository.py</code>)","text":"<pre><code>class SQLiteTraducaoRepository(RepositorioTraducao):\n    \"\"\"Reposit\u00f3rio SQLite para tradu\u00e7\u00f5es.\"\"\"\n\n    def __init__(self, db_path: Optional[str] = None):\n        self.db_path = db_path or str(settings.DB_PATH)\n\n    @contextmanager\n    def _conexao(self):\n        \"\"\"Gerenciador de contexto para conex\u00f5es.\"\"\"\n        conn = sqlite3.connect(self.db_path)\n        conn.row_factory = sqlite3.Row\n        try:\n            yield conn\n            conn.commit()\n        except Exception:\n            conn.rollback()\n            raise\n        finally:\n            conn.close()\n\n    def salvar(self, traducao: Traducao) -&gt; int:\n        \"\"\"Salva uma tradu\u00e7\u00e3o.\"\"\"\n        with self._conexao() as conn:\n            cursor = conn.cursor()\n\n            if traducao.id:\n                # Update\n                cursor.execute(\"\"\"\n                    UPDATE traducoes SET\n                        idioma = ?,\n                        texto_traduzido = ?,\n                        modelo = ?,\n                        custo = ?,\n                        data_traducao = ?\n                    WHERE id = ?\n                \"\"\", (...))\n                return traducao.id\n            else:\n                # Insert\n                cursor.execute(\"\"\"\n                    INSERT INTO traducoes\n                    (documento_id, idioma, texto_traduzido, modelo, custo, data_traducao)\n                    VALUES (?, ?, ?, ?, ?, ?)\n                \"\"\", (...))\n                return cursor.lastrowid\n\n    def buscar_por_documento(self, documento_id: int, idioma: str) -&gt; Optional[Traducao]:\n        \"\"\"Busca tradu\u00e7\u00e3o espec\u00edfica de um documento.\"\"\"\n        with self._conexao() as conn:\n            cursor = conn.cursor()\n            cursor.execute(\"\"\"\n                SELECT * FROM traducoes\n                WHERE documento_id = ? AND idioma = ?\n            \"\"\", (documento_id, idioma))\n            row = cursor.fetchone()\n            return self._row_para_entidade(row) if row else None\n\n    def listar_por_documento(self, documento_id: int) -&gt; List[Traducao]:\n        \"\"\"Lista todas as tradu\u00e7\u00f5es de um documento.\"\"\"\n        with self._conexao() as conn:\n            cursor = conn.cursor()\n            cursor.execute(\"\"\"\n                SELECT * FROM traducoes\n                WHERE documento_id = ?\n                ORDER BY idioma\n            \"\"\", (documento_id,))\n            return [self._row_para_entidade(row) for row in cursor.fetchall()]\n</code></pre>"},{"location":"FASE5_TRADUCAO/#7-adaptador-google-translate-infrastructuretranslationgoogle_translatorpy","title":"7. Adaptador Google Translate (<code>infrastructure/translation/google_translator.py</code>)","text":"<p>Responsabilidade: Integrar com a API do Google Translate.</p> <pre><code>class GoogleTranslator:\n    \"\"\"\n    Cliente para Google Cloud Translation API.\n    \"\"\"\n\n    # Tabela de pre\u00e7os (US$) por caractere\n    PRICING = {\n        'nmt': 0.000020,  # Neural Machine Translation\n        'general': 0.000020,\n        'default': 0.000020\n    }\n\n    def __init__(self,\n                 credentials_path: Optional[str] = None,\n                 api_key: Optional[str] = None):\n        self.api_key = api_key or os.getenv('GOOGLE_TRANSLATE_API_KEY')\n        self._client = self._inicializar()\n\n    def _inicializar(self):\n        \"\"\"Inicializa o cliente Google Translate.\"\"\"\n        try:\n            if self.api_key:\n                return translate.Client(api_key=self.api_key)\n            return translate.Client()\n        except Exception as e:\n            print(f\"\u26a0\ufe0f Falha ao inicializar tradutor: {e}\")\n            return None\n\n    def traduzir(self, texto: str, destino: str = 'en') -&gt; str:\n        \"\"\"Traduz texto para o idioma destino.\"\"\"\n        if self._client is None:\n            return self._simular_traducao(texto, destino)\n\n        resultado = self._client.translate(texto, target_language=destino)\n        return resultado['translatedText']\n\n    def traduzir_documento_completo(self,\n                                   texto: str,\n                                   destino: str = 'en',\n                                   chunk_size: int = 3000) -&gt; str:\n        \"\"\"\n        Traduz documentos grandes dividindo em chunks.\n        \"\"\"\n        # Dividir em par\u00e1grafos\n        paragrafos = texto.split('\\n')\n        chunks = []\n        chunk_atual = []\n        tamanho_atual = 0\n\n        for para in paragrafos:\n            if tamanho_atual + len(para) &lt; chunk_size:\n                chunk_atual.append(para)\n                tamanho_atual += len(para)\n            else:\n                chunks.append('\\n'.join(chunk_atual))\n                chunk_atual = [para]\n                tamanho_atual = len(para)\n\n        if chunk_atual:\n            chunks.append('\\n'.join(chunk_atual))\n\n        print(f\"\ud83d\udcc4 Documento dividido em {len(chunks)} partes\")\n\n        # Traduzir cada chunk\n        traducoes = []\n        for i, chunk in enumerate(chunks, 1):\n            print(f\"  \u21b3 Traduzindo parte {i}/{len(chunks)}...\")\n            try:\n                resultado = self.traduzir(chunk, destino=destino)\n                traducoes.append(resultado)\n                time.sleep(0.5)  # Rate limiting\n            except Exception as e:\n                print(f\"    \u26a0\ufe0f Erro: {e}\")\n                traducoes.append(\"\")\n\n        return '\\n'.join(traducoes)\n\n    def _simular_traducao(self, texto: str, destino: str) -&gt; str:\n        \"\"\"Simula tradu\u00e7\u00e3o para testes (fallback).\"\"\"\n        return f\"[{destino.upper()} SIMULA\u00c7\u00c3O] {texto[:100]}...\"\n</code></pre>"},{"location":"FASE5_TRADUCAO/#8-comandotraduzir-interfaceclicommands_traducaopy","title":"8. ComandoTraduzir (<code>interface/cli/commands_traducao.py</code>)","text":"<p>Responsabilidade: Interface interativa para nova tradu\u00e7\u00e3o.</p> <pre><code>class ComandoTraduzir:\n    \"\"\"Comando para criar nova tradu\u00e7\u00e3o.\"\"\"\n\n    def __init__(self, traduzir_use_case, listar_trad_use_case):\n        self.traduzir_use_case = traduzir_use_case\n        self.listar_trad_use_case = listar_trad_use_case\n        self.presenter = TraducaoPresenter()\n\n    def executar(self, documento_id: int):\n        \"\"\"Executa tradu\u00e7\u00e3o interativa.\"\"\"\n        # 1. Mostrar tradu\u00e7\u00f5es existentes\n        traducoes = self.listar_trad_use_case.executar(documento_id)\n\n        if traducoes:\n            console.print(\"\\n[bold cyan]\ud83c\udf10 Tradu\u00e7\u00f5es existentes:[/bold cyan]\")\n            for t in traducoes:\n                console.print(\n                    f\"  \u2022 {self.presenter.badge_idioma(t.idioma)} - \"\n                    f\"{t.idioma_nome} [dim]({t.data_traducao})[/dim]\"\n                )\n\n        # 2. Escolher idioma\n        console.print(\"\\n[bold cyan]Idiomas dispon\u00edveis:[/bold cyan]\")\n        console.print(\"  [1] \ud83c\uddfa\ud83c\uddf8 Ingl\u00eas (en)\")\n        console.print(\"  [2] \ud83c\udde7\ud83c\uddf7 Portugu\u00eas (pt)\")\n        console.print(\"  [3] \ud83c\uddea\ud83c\uddf8 Espanhol (es)\")\n        console.print(\"  [4] \ud83c\uddeb\ud83c\uddf7 Franc\u00eas (fr)\")\n        console.print(\"  [0] Cancelar\")\n\n        opcao = input(\"\\nEscolha: \").strip()\n\n        idiomas = {'1': 'en', '2': 'pt', '3': 'es', '4': 'fr'}\n        if opcao == '0':\n            return None\n        if opcao not in idiomas:\n            console.mostrar_erro(\"Op\u00e7\u00e3o inv\u00e1lida!\")\n            return None\n\n        idioma = idiomas[opcao]\n\n        # 3. Verificar se j\u00e1 existe\n        existente = next((t for t in traducoes if t.idioma == idioma), None)\n        if existente:\n            console.print(f\"\\n[yellow]\u26a0 J\u00e1 existe tradu\u00e7\u00e3o para {existente.idioma_nome}[/yellow]\")\n            console.print(f\"   Data: {existente.data_traducao}\")\n            console.print(f\"   Custo: ${existente.custo:.4f}\")\n\n            confirmar = input(\"Substituir? (s/N): \").strip().lower()\n            if confirmar != 's':\n                return None\n\n        # 4. Estimar custo\n        console.print(\"\\n[bold]\ud83d\udcca Estimativa de custo:[/bold]\")\n        console.print(\"  \u2022 Pre\u00e7o: $0.000020 por caractere\")\n        console.print(\"  \u2022 Confirme na pr\u00f3xima etapa\")\n\n        confirmar = input(\"\\nConfirmar? (s/N): \").strip().lower()\n        if confirmar != 's':\n            return None\n\n        # 5. Traduzir com spinner\n        try:\n            resultado = console.spinner(\n                f\"\ud83c\udf10 Traduzindo para {idioma}...\",\n                self.traduzir_use_case.executar,\n                documento_id,\n                idioma,\n                forcar_novo=True\n            )\n\n            console.mostrar_sucesso(f\"\u2705 Tradu\u00e7\u00e3o conclu\u00edda! ({resultado.idioma_nome})\")\n            console.mostrar_sucesso(f\"   Custo: ${resultado.custo:.4f}\")\n\n            return resultado\n\n        except Exception as e:\n            console.mostrar_erro(f\"Erro na tradu\u00e7\u00e3o: {e}\")\n            return None\n</code></pre>"},{"location":"FASE5_TRADUCAO/#9-comandoalternaridioma-interfaceclicommands_traducaopy","title":"9. ComandoAlternarIdioma (<code>interface/cli/commands_traducao.py</code>)","text":"<p>Responsabilidade: Alternar entre original e tradu\u00e7\u00f5es.</p> <pre><code>class ComandoAlternarIdioma:\n    \"\"\"Comando para alternar entre idiomas durante visualiza\u00e7\u00e3o.\"\"\"\n\n    def __init__(self, listar_trad_use_case, obter_documento_use_case):\n        self.listar_trad_use_case = listar_trad_use_case\n        self.obter_documento_use_case = obter_documento_use_case\n\n    def executar(self, documento_id: int, idioma_atual: str = 'original') -&gt; str:\n        \"\"\"\n        Alterna entre original e tradu\u00e7\u00f5es dispon\u00edveis.\n        Retorna o novo idioma selecionado.\n        \"\"\"\n        traducoes = self.listar_trad_use_case.executar(documento_id)\n\n        if not traducoes:\n            console.mostrar_erro(\"Este documento n\u00e3o tem tradu\u00e7\u00f5es.\")\n            return 'original'\n\n        # Determinar pr\u00f3ximo idioma\n        if idioma_atual == 'original':\n            return traducoes[0].idioma\n        else:\n            idiomas = [t.idioma for t in traducoes]\n            try:\n                idx = idiomas.index(idioma_atual)\n                if idx + 1 &lt; len(idiomas):\n                    return idiomas[idx + 1]\n                else:\n                    return 'original'\n            except ValueError:\n                return traducoes[0].idioma\n</code></pre>"},{"location":"FASE5_TRADUCAO/#10-presenter-de-traducao-interfaceclipresenters_traducaopy","title":"10. Presenter de Tradu\u00e7\u00e3o (<code>interface/cli/presenters_traducao.py</code>)","text":"<pre><code>class TraducaoPresenter:\n    \"\"\"Formata tradu\u00e7\u00f5es para exibi\u00e7\u00e3o.\"\"\"\n\n    @staticmethod\n    def badge_idioma(idioma: str) -&gt; str:\n        \"\"\"Retorna badge colorido para idioma.\"\"\"\n        badges = {\n            'en': '[bold blue]\ud83c\uddfa\ud83c\uddf8 EN[/bold blue]',\n            'pt': '[bold green]\ud83c\udde7\ud83c\uddf7 PT[/bold green]',\n            'es': '[bold yellow]\ud83c\uddea\ud83c\uddf8 ES[/bold yellow]',\n            'fr': '[bold magenta]\ud83c\uddeb\ud83c\uddf7 FR[/bold magenta]',\n        }\n        return badges.get(idioma, f'[dim]{idioma}[/dim]')\n\n    @classmethod\n    def badge_idioma_atual(cls, idioma: str):\n        \"\"\"Exibe badge indicando idioma atual.\"\"\"\n        if idioma == 'original':\n            return Panel(\"[bold blue]\ud83d\udcc4 ORIGINAL (Russo)[/bold blue]\", border_style=\"blue\")\n        else:\n            return Panel(\n                f\"[bold green]\ud83c\udf10 TRADU\u00c7\u00c3O {cls.badge_idioma(idioma)}[/bold green]\",\n                border_style=\"green\"\n            )\n\n    @classmethod\n    def lista_traducoes(cls, traducoes, documento_id: int):\n        \"\"\"Exibe lista de tradu\u00e7\u00f5es dispon\u00edveis.\"\"\"\n        if not traducoes:\n            return\n\n        console.print(\"\\n[bold cyan]\ud83c\udf10 TRADU\u00c7\u00d5ES DISPON\u00cdVEIS:[/bold cyan]\")\n        for t in traducoes:\n            console.print(\n                f\"  \u2022 {cls.badge_idioma(t.idioma)} - \"\n                f\"{t.idioma_nome} [dim]({t.data_traducao})[/dim]\"\n            )\n</code></pre>"},{"location":"FASE5_TRADUCAO/#fluxo-completo-de-traducao","title":"\ud83d\udd04 Fluxo Completo de Tradu\u00e7\u00e3o","text":"<pre><code>[Usu\u00e1rio] \u2192 [tecla 'n'] \u2192 [ComandoTraduzir] \u2192 [TraduzirDocumento (caso de uso)]\n    \u2191                                                    |\n    |                                                    \u2193\n    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 [Presenter] \u2190 [TraducaoDTO] \u2190 [GoogleTranslator]\n                              |\n                              \u2193\n                    [SQLiteTraducaoRepository]\n                              |\n                              \u2193\n                        [Banco de Dados]\n</code></pre> <p>Passo a passo:</p> <ol> <li>Usu\u00e1rio aperta 'n' durante visualiza\u00e7\u00e3o</li> <li>ComandoTraduzir pergunta idioma e confirma custo</li> <li>Caso de uso TraduzirDocumento verifica documento</li> <li>GoogleTranslator traduz (com chunking se necess\u00e1rio)</li> <li>Traducao \u00e9 criada e persistida no banco</li> <li>TraducaoDTO \u00e9 retornado para a interface</li> <li>Usu\u00e1rio v\u00ea mensagem de sucesso e muda para o novo idioma</li> </ol>"},{"location":"FASE5_TRADUCAO/#fluxo-de-alternancia-de-idiomas","title":"\ud83d\udd04 Fluxo de Altern\u00e2ncia de Idiomas","text":"<pre><code>[Usu\u00e1rio] \u2192 [tecla 't'] \u2192 [ComandoAlternarIdioma] \u2192 [ListarTraducoes]\n    \u2191                                                    |\n    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 [Presenter] \u2190 [DTO] \u2190\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre> <p>Passo a passo:</p> <ol> <li>Usu\u00e1rio aperta 't' durante visualiza\u00e7\u00e3o</li> <li>ComandoAlternarIdioma consulta tradu\u00e7\u00f5es dispon\u00edveis</li> <li>Determina pr\u00f3ximo idioma (original \u2192 en \u2192 pt \u2192 original)</li> <li>Retorna novo idioma para o loop principal</li> <li>Visualiza\u00e7\u00e3o recarrega com o texto no idioma selecionado</li> </ol>"},{"location":"FASE5_TRADUCAO/#funcionalidades-na-ui","title":"\ud83c\udfae Funcionalidades na UI","text":""},{"location":"FASE5_TRADUCAO/#na-listagem-de-documentos","title":"Na listagem de documentos:","text":"<p><pre><code>ID  Tipo                  Data       Pessoa   T\u00edtulo                        \ud83c\udf10\n1   \ud83d\udd0d INTERROGAT\u00d3RIO     1934-12-04 Nikolaev  \u041f\u0440\u043e\u0442\u043e\u043a\u043e\u043b \u0434\u043e\u043f\u0440\u043e\u0441\u0430 \u041b.\u0412. \u041d\u0438\u043a\u043e\u043b\u0430\u0435\u0432\u0430  \u2705\n</code></pre> - \u2705 = documento tem tradu\u00e7\u00e3o dispon\u00edvel</p>"},{"location":"FASE5_TRADUCAO/#na-visualizacao-do-documento","title":"Na visualiza\u00e7\u00e3o do documento:","text":"<pre><code>[Badge do idioma atual]  \u2190 \"ORIGINAL (Russo)\" ou \"\ud83c\uddfa\ud83c\uddf8 TRADU\u00c7\u00c3O (EN)\"\n\n[METADADOS]\n  ...\n\n\ud83c\udf10 TRADU\u00c7\u00d5ES DISPON\u00cdVEIS:\n  \u2022 \ud83c\uddfa\ud83c\uddf8 Ingl\u00eas - 2024-02-15\n  \u2022 \ud83c\udde7\ud83c\uddf7 Portugu\u00eas - 2024-02-15\n\n[CONTE\u00daDO]\n  ...\n\nCOMANDOS:\n  \u23ce Enter - Voltar\n  e - Exportar\n  t - Alternar idioma\n  n - Nova tradu\u00e7\u00e3o\n</code></pre>"},{"location":"FASE5_TRADUCAO/#nova-traducao","title":"Nova tradu\u00e7\u00e3o:","text":"<pre><code>Idiomas dispon\u00edveis:\n  [1] \ud83c\uddfa\ud83c\uddf8 Ingl\u00eas (en)\n  [2] \ud83c\udde7\ud83c\uddf7 Portugu\u00eas (pt)\n  [3] \ud83c\uddea\ud83c\uddf8 Espanhol (es)\n  [4] \ud83c\uddeb\ud83c\uddf7 Franc\u00eas (fr)\n  [0] Cancelar\n\n\ud83d\udcca Estimativa de custo:\n  \u2022 Pre\u00e7o: $0.000020 por caractere\n  \u2022 Confirme na pr\u00f3xima etapa\n</code></pre>"},{"location":"FASE5_TRADUCAO/#testes-realizados","title":"\ud83e\uddea Testes Realizados","text":"Teste A\u00e7\u00e3o Resultado Esperado Status Nova tradu\u00e7\u00e3o 'n' no documento Menu de idiomas aparece \u2705 Escolher idioma Selecionar 1 Tradu\u00e7\u00e3o inicia \u2705 Progresso Durante tradu\u00e7\u00e3o Spinner mostra progresso \u2705 Sucesso Ap\u00f3s tradu\u00e7\u00e3o Mensagem de sucesso + custo \u2705 Altern\u00e2ncia 't' no original Vai para primeira tradu\u00e7\u00e3o \u2705 Altern\u00e2ncia 't' na tradu\u00e7\u00e3o Volta ao original \u2705 Badge Visualizar Mostra idioma atual \u2705 Lista Documento com tradu\u00e7\u00f5es Mostra lista de idiomas \u2705 Sem tradu\u00e7\u00f5es 't' em documento sem Mensagem de erro \u2705 Tradu\u00e7\u00e3o existente Tentar mesmo idioma Pergunta substituir \u2705 Substituir Confirmar 's' Nova tradu\u00e7\u00e3o sobrescreve \u2705 Manter existente Confirmar 'n' Mant\u00e9m original \u2705 Cancelar '0' no menu Volta sem traduzir \u2705"},{"location":"FASE5_TRADUCAO/#metricas-da-fase","title":"\ud83d\udcca M\u00e9tricas da Fase","text":"M\u00e9trica Valor Novos arquivos 7 Linhas de c\u00f3digo ~600 Idiomas suportados 4 (en, pt, es, fr) Testes manuais 13 cen\u00e1rios Custo por caractere $0.000020"},{"location":"FASE5_TRADUCAO/#principios-aplicados","title":"\ud83d\udcda Princ\u00edpios Aplicados","text":"Princ\u00edpio Aplica\u00e7\u00e3o Single Responsibility Cada classe tem uma responsabilidade clara Open/Closed Novos idiomas podem ser adicionados sem modificar c\u00f3digo Liskov Substitution Reposit\u00f3rio concreto substitui interface Interface Segregation RepositorioTraducao com m\u00e9todos espec\u00edficos Dependency Inversion Casos de uso dependem de interfaces"},{"location":"FASE5_TRADUCAO/#integracao-com-fases-anteriores-e-futuras","title":"\ud83d\udd17 Integra\u00e7\u00e3o com Fases Anteriores e Futuras","text":"Fase Relacionamento FASE 1 (Domain) Entidade Traducao, interfaces FASE 2 (Application) Casos de uso e DTOs FASE 3 (Infrastructure) Reposit\u00f3rio SQLite e adaptador Google FASE 4 (CLI) Comandos e presenters FASE 6 (Exporta\u00e7\u00e3o) Tradu\u00e7\u00f5es podem ser exportadas FASE 8 (An\u00e1lise) Texto traduzido pode ser analisado"},{"location":"FASE5_TRADUCAO/#evolucao-do-codigo","title":"\ud83d\ude80 Evolu\u00e7\u00e3o do C\u00f3digo","text":""},{"location":"FASE5_TRADUCAO/#antes-codigo-legado-translatorpy","title":"Antes (c\u00f3digo legado - <code>translator.py</code>)","text":"<pre><code># C\u00f3digo monol\u00edtico, sem separa\u00e7\u00e3o\ndef traduzir(texto, idioma):\n    # L\u00f3gica de tradu\u00e7\u00e3o misturada com persist\u00eancia\n    # Sem tratamento de erros adequado\n    # Sem estimativa de custos\n</code></pre>"},{"location":"FASE5_TRADUCAO/#depois-clean-architecture","title":"Depois (Clean Architecture)","text":"<pre><code># Separa\u00e7\u00e3o clara de responsabilidades\ncaso_uso = TraduzirDocumento(repo_doc, repo_trad, tradutor)\nresultado = caso_uso.executar(doc_id, 'en')\n</code></pre>"},{"location":"FASE5_TRADUCAO/#metricas-do-projeto-apos-fase-5","title":"\ud83d\udcc8 M\u00e9tricas do Projeto (Ap\u00f3s FASE 5)","text":"<pre><code>\ud83d\udcca DOMAIN LAYER: 4 entidades | 15 testes\n\ud83d\udcca APPLICATION LAYER: 5 casos de uso | 6 testes\n\ud83d\udcca INFRASTRUCTURE LAYER: 4 m\u00f3dulos | 16 testes\n\ud83d\udcca INTERFACE LAYER: 8 m\u00f3dulos | Validada manualmente\n\ud83d\udcca TOTAL: 37 testes automatizados\n</code></pre>"},{"location":"FASE5_TRADUCAO/#licoes-aprendidas","title":"\ud83d\udd0d Li\u00e7\u00f5es Aprendidas","text":"<ol> <li>Chunking \u00e9 necess\u00e1rio: Documentos longos precisam ser divididos</li> <li>Rate limiting \u00e9 importante: Evita bloqueios da API</li> <li>Fallback \u00e9 essencial: Simula\u00e7\u00e3o quando API n\u00e3o dispon\u00edvel</li> <li>Custos devem ser transparentes: Usu\u00e1rio precisa saber antes de traduzir</li> <li>Persist\u00eancia evita retrabalho: Tradu\u00e7\u00f5es salvas n\u00e3o precisam ser refeitas</li> <li>Feedback visual \u00e9 crucial: Spinner durante processo longo</li> </ol>"},{"location":"FASE5_TRADUCAO/#conclusao-da-fase","title":"\ud83c\udfc1 Conclus\u00e3o da Fase","text":"<p>A FASE 5 entregou um sistema completo de tradu\u00e7\u00e3o com:</p> <p>\u2705 Integra\u00e7\u00e3o com Google Translate API \u2705 4 idiomas suportados \u2705 Persist\u00eancia em SQLite \u2705 Altern\u00e2ncia fluida entre idiomas \u2705 Estimativa e exibi\u00e7\u00e3o de custos \u2705 Feedback visual com spinner \u2705 Tratamento de casos de borda \u2705 C\u00f3digo limpo e test\u00e1vel</p>"},{"location":"FASE5_TRADUCAO/#autor","title":"\ud83d\udc64 Autor","text":"<p>Thiago Ribeiro - Projeto de TCC</p> <sub>FASE 5 conclu\u00edda em 15 de Fevereiro de 2024</sub> <sub>\u2705 Pronto para a FASE 6 - Exporta\u00e7\u00e3o de Documentos</sub> <p>```</p>"},{"location":"FASE6_EXPORTACAO/","title":"FASE 6 - Exporta\u00e7\u00e3o de Documentos","text":"**Sistema completo para exporta\u00e7\u00e3o de documentos em formato TXT com metadados**"},{"location":"FASE6_EXPORTACAO/#informacoes-da-fase","title":"\ud83d\udcc5 Informa\u00e7\u00f5es da Fase","text":"Item Descri\u00e7\u00e3o Status \u2705 Conclu\u00edda Data de Conclus\u00e3o 15 de Fevereiro de 2024 Artefatos Caso de uso ExportarDocumento, Exportador TXT, Comando CLI Testes 6 cen\u00e1rios manuais Depend\u00eancias FASE 1, 2, 3, 4, 5"},{"location":"FASE6_EXPORTACAO/#objetivo","title":"\ud83c\udfaf Objetivo","text":"<p>Implementar um sistema de exporta\u00e7\u00e3o que:</p> <ul> <li>Permita exportar documentos para formato TXT</li> <li>Ofere\u00e7a escolha entre original e tradu\u00e7\u00f5es dispon\u00edveis</li> <li>Inclua opcionalmente metadados no arquivo</li> <li>Gere nomes de arquivo padronizados</li> <li>Organize arquivos em pasta dedicada</li> <li>Prepare caminho para futuros formatos (PDF, etc)</li> </ul>"},{"location":"FASE6_EXPORTACAO/#estrutura-criada","title":"\ud83d\udcc1 Estrutura Criada","text":"<pre><code>src/\n\u251c\u2500\u2500 application/\n\u2502   \u2514\u2500\u2500 use_cases/\n\u2502       \u2514\u2500\u2500 exportar_documento.py          # Caso de uso de exporta\u00e7\u00e3o\n\u251c\u2500\u2500 infrastructure/\n\u2502   \u2514\u2500\u2500 export/\n\u2502       \u251c\u2500\u2500 __init__.py\n\u2502       \u2514\u2500\u2500 txt_exporter.py                 # Exportador TXT\n\u2514\u2500\u2500 interface/\n    \u2514\u2500\u2500 cli/\n        \u2514\u2500\u2500 commands_export.py               # Comandos de exporta\u00e7\u00e3o\n</code></pre>"},{"location":"FASE6_EXPORTACAO/#componentes-implementados","title":"\ud83e\udde9 Componentes Implementados","text":""},{"location":"FASE6_EXPORTACAO/#1-caso-de-uso-exportardocumento-applicationuse_casesexportar_documentopy","title":"1. Caso de Uso ExportarDocumento (<code>application/use_cases/exportar_documento.py</code>)","text":"<p>Responsabilidade: Orquestrar o processo de exporta\u00e7\u00e3o.</p> <pre><code>class ExportarDocumento:\n    \"\"\"\n    Caso de uso para exportar documento.\n    \"\"\"\n\n    # Formatos suportados\n    FORMATOS = ['txt', 'pdf']\n\n    def __init__(self,\n                 repo_doc: RepositorioDocumento,\n                 repo_trad: Optional[RepositorioTraducao] = None):\n        self.repo_doc = repo_doc\n        self.repo_trad = repo_trad\n\n    def _buscar_documento(self, documento_id: int, idioma: str = 'original') -&gt; Optional[DocumentoDTO]:\n        \"\"\"\n        Busca documento ou tradu\u00e7\u00e3o.\n        \"\"\"\n        if idioma == 'original':\n            doc = self.repo_doc.buscar_por_id(documento_id)\n            if not doc:\n                return None\n\n            def tradutor(nome):\n                try:\n                    return NomeRusso(nome).transliterar()\n                except:\n                    return nome\n\n            return DocumentoDTO.from_domain(doc, tradutor, [])\n\n        elif self.repo_trad:\n            traducao = self.repo_trad.buscar_por_documento(documento_id, idioma)\n            if not traducao:\n                return None\n\n            doc = self.repo_doc.buscar_por_id(documento_id)\n            if not doc:\n                return None\n\n            dto = DocumentoDTO.from_domain(doc, None, [])\n            dto.texto = traducao.texto_traduzido\n            dto.titulo = f\"{dto.titulo} [{traducao.idioma_nome}]\"\n            return dto\n\n        return None\n\n    def _gerar_conteudo_txt(self, dto: DocumentoDTO, incluir_metadados: bool = True) -&gt; str:\n        \"\"\"\n        Gera conte\u00fado formatado para TXT.\n        \"\"\"\n        linhas = []\n\n        if incluir_metadados:\n            linhas.append(\"=\" * 80)\n            linhas.append(f\"T\u00cdTULO: {dto.titulo}\")\n            linhas.append(f\"CENTRO: {dto.centro}\")\n            linhas.append(f\"DATA ORIGINAL: {dto.data_original or 'N\u00e3o informada'}\")\n            linhas.append(f\"URL: {dto.url}\")\n            linhas.append(f\"EXPORTADO EM: {datetime.now().strftime('%Y-%m-%d %H:%M:%S')}\")\n\n            if dto.pessoa_principal:\n                linhas.append(f\"PESSOA PRINCIPAL: {dto.pessoa_principal}\")\n            if dto.remetente:\n                linhas.append(f\"REMETENTE: {dto.remetente}\")\n            if dto.destinatario:\n                linhas.append(f\"DESTINAT\u00c1RIO: {dto.destinatario}\")\n            if dto.envolvidos:\n                linhas.append(f\"ENVOLVIDOS: {', '.join(dto.envolvidos)}\")\n\n            linhas.append(\"=\" * 80)\n            linhas.append(\"\")\n\n        linhas.append(dto.texto)\n\n        return '\\n'.join(linhas)\n\n    def _gerar_nome_arquivo(self, dto: DocumentoDTO, formato: str, idioma: str) -&gt; str:\n        \"\"\"\n        Gera nome do arquivo no formato:\n        ID_TITULO_IDIOMA.formato\n        \"\"\"\n        # Sanitizar t\u00edtulo (remover caracteres especiais)\n        titulo = \"\".join(c for c in dto.titulo if c.isalnum() or c in (' ', '-', '_')).rstrip()\n        titulo = titulo[:50]  # Limitar tamanho\n\n        if idioma == 'original':\n            sufixo = 'original'\n        else:\n            sufixo = idioma\n\n        return f\"{dto.id}_{titulo}_{sufixo}.{formato}\"\n\n    def executar(self,\n                 documento_id: int,\n                 formato: str = 'txt',\n                 idioma: str = 'original',\n                 diretorio: str = 'exportados',\n                 incluir_metadados: bool = True) -&gt; Dict:\n        \"\"\"\n        Exporta documento.\n\n        Args:\n            documento_id: ID do documento\n            formato: 'txt' ou 'pdf'\n            idioma: 'original' ou c\u00f3digo do idioma\n            diretorio: Pasta de destino\n            incluir_metadados: Incluir cabe\u00e7alho com metadados\n\n        Returns:\n            Dict com:\n                - sucesso: bool\n                - caminho: str (se sucesso)\n                - erro: str (se falha)\n        \"\"\"\n        # Validar formato\n        if formato not in self.FORMATOS:\n            return {\n                'sucesso': False,\n                'erro': f\"Formato n\u00e3o suportado: {formato}. Use: {', '.join(self.FORMATOS)}\"\n            }\n\n        # Buscar documento\n        dto = self._buscar_documento(documento_id, idioma)\n        if not dto:\n            return {\n                'sucesso': False,\n                'erro': f\"Documento/idioma n\u00e3o encontrado: {documento_id}/{idioma}\"\n            }\n\n        # Criar diret\u00f3rio\n        Path(diretorio).mkdir(exist_ok=True)\n\n        # Gerar nome do arquivo\n        nome_arquivo = self._gerar_nome_arquivo(dto, formato, idioma)\n        caminho = Path(diretorio) / nome_arquivo\n\n        try:\n            if formato == 'txt':\n                conteudo = self._gerar_conteudo_txt(dto, incluir_metadados)\n                with open(caminho, 'w', encoding='utf-8') as f:\n                    f.write(conteudo)\n            elif formato == 'pdf':\n                # Placeholder para FASE 7\n                return {\n                    'sucesso': False,\n                    'erro': \"Exporta\u00e7\u00e3o PDF ser\u00e1 implementada na FASE 7\"\n                }\n\n            return {\n                'sucesso': True,\n                'caminho': str(caminho),\n                'tamanho': len(conteudo) if formato == 'txt' else 0\n            }\n\n        except Exception as e:\n            return {\n                'sucesso': False,\n                'erro': f\"Erro ao exportar: {e}\"\n            }\n\n    def listar_idiomas_disponiveis(self, documento_id: int) -&gt; list:\n        \"\"\"\n        Lista idiomas dispon\u00edveis para exporta\u00e7\u00e3o.\n        \"\"\"\n        idiomas = [{'codigo': 'original', 'nome': 'Original (Russo)'}]\n\n        if self.repo_trad:\n            traducoes = self.repo_trad.listar_por_documento(documento_id)\n            for t in traducoes:\n                idiomas.append({\n                    'codigo': t.idioma,\n                    'nome': t.idioma_nome,\n                    'icone': t.idioma_icone\n                })\n\n        return idiomas\n</code></pre>"},{"location":"FASE6_EXPORTACAO/#2-exportador-txt-infrastructureexporttxt_exporterpy","title":"2. Exportador TXT (<code>infrastructure/export/txt_exporter.py</code>)","text":"<p>Responsabilidade: Implementar a gera\u00e7\u00e3o de arquivos TXT.</p> <pre><code>class TxtExporter:\n    \"\"\"\n    Exporta documentos para formato TXT.\n    \"\"\"\n\n    def __init__(self, diretorio_base: str = 'exportados'):\n        self.diretorio_base = Path(diretorio_base)\n        self.diretorio_base.mkdir(exist_ok=True)\n\n    def _gerar_cabecalho(self, dto: DocumentoDTO) -&gt; str:\n        \"\"\"\n        Gera cabe\u00e7alho com metadados.\n        \"\"\"\n        linhas = []\n        linhas.append(\"=\" * 80)\n        linhas.append(f\"T\u00cdTULO: {dto.titulo}\")\n        linhas.append(f\"CENTRO: {dto.centro}\")\n        linhas.append(f\"DATA ORIGINAL: {dto.data_original or 'N\u00e3o informada'}\")\n        linhas.append(f\"URL: {dto.url}\")\n        linhas.append(f\"EXPORTADO EM: {datetime.now().strftime('%Y-%m-%d %H:%M:%S')}\")\n\n        if dto.pessoa_principal:\n            linhas.append(f\"PESSOA PRINCIPAL: {dto.pessoa_principal}\")\n        if dto.remetente:\n            linhas.append(f\"REMETENTE: {dto.remetente}\")\n        if dto.destinatario:\n            linhas.append(f\"DESTINAT\u00c1RIO: {dto.destinatario}\")\n        if dto.envolvidos:\n            linhas.append(f\"ENVOLVIDOS: {', '.join(dto.envolvidos)}\")\n\n        linhas.append(\"=\" * 80)\n        linhas.append(\"\")\n\n        return '\\n'.join(linhas)\n\n    def _gerar_nome_arquivo(self, dto: DocumentoDTO, idioma: str) -&gt; str:\n        \"\"\"\n        Gera nome do arquivo.\n        \"\"\"\n        # Sanitizar t\u00edtulo\n        titulo = \"\".join(c for c in dto.titulo if c.isalnum() or c in (' ', '-', '_')).rstrip()\n        titulo = titulo[:50]\n\n        return f\"{dto.id}_{titulo}_{idioma}.txt\"\n\n    def exportar(self, dto: DocumentoDTO, idioma: str = 'original', incluir_metadados: bool = True) -&gt; Path:\n        \"\"\"\n        Exporta documento para TXT.\n        \"\"\"\n        nome_arquivo = self._gerar_nome_arquivo(dto, idioma)\n        caminho = self.diretorio_base / nome_arquivo\n\n        with open(caminho, 'w', encoding='utf-8') as f:\n            if incluir_metadados:\n                f.write(self._gerar_cabecalho(dto))\n            f.write(dto.texto)\n\n        return caminho\n</code></pre>"},{"location":"FASE6_EXPORTACAO/#3-comandoexportar-interfaceclicommands_exportpy","title":"3. ComandoExportar (<code>interface/cli/commands_export.py</code>)","text":"<p>Responsabilidade: Interface interativa para exporta\u00e7\u00e3o.</p> <pre><code>class ComandoExportar:\n    \"\"\"Comando para exportar documento.\"\"\"\n\n    def __init__(self, exportar_use_case):\n        self.exportar_use_case = exportar_use_case\n\n    def executar(self, documento_id: int):\n        \"\"\"Executa exporta\u00e7\u00e3o interativa.\"\"\"\n        # 1. Listar idiomas dispon\u00edveis\n        idiomas = self.exportar_use_case.listar_idiomas_disponiveis(documento_id)\n\n        console.print(\"\\n[bold cyan]\ud83d\udce5 EXPORTAR DOCUMENTO[/bold cyan]\")\n        console.print(\"\\n[bold]Idiomas dispon\u00edveis:[/bold]\")\n\n        for i, idioma in enumerate(idiomas, 1):\n            if idioma['codigo'] == 'original':\n                console.print(f\"  [{i}] \ud83c\uddf7\ud83c\uddfa {idioma['nome']}\")\n            else:\n                console.print(f\"  [{i}] {idioma['icone']} {idioma['nome']}\")\n\n        console.print(\"  [0] Cancelar\")\n\n        opcao = input(\"\\nEscolha o idioma: \").strip()\n\n        if opcao == '0':\n            return\n\n        try:\n            idx = int(opcao) - 1\n            if idx &lt; 0 or idx &gt;= len(idiomas):\n                console.mostrar_erro(\"Op\u00e7\u00e3o inv\u00e1lida!\")\n                return\n        except ValueError:\n            console.mostrar_erro(\"Op\u00e7\u00e3o inv\u00e1lida!\")\n            return\n\n        idioma = idiomas[idx]['codigo']\n\n        # 2. Escolher formato\n        console.print(\"\\n[bold]Formatos dispon\u00edveis:[/bold]\")\n        console.print(\"  [1] \ud83d\udcc4 TXT (recomendado)\")\n        console.print(\"  [2] \ud83d\udcd1 PDF (em breve)\")\n        console.print(\"  [0] Cancelar\")\n\n        opcao = input(\"\\nEscolha o formato: \").strip()\n\n        if opcao == '0':\n            return\n\n        if opcao == '1':\n            formato = 'txt'\n        elif opcao == '2':\n            console.print(\"[yellow]\ud83d\udcd1 Exporta\u00e7\u00e3o PDF ser\u00e1 implementada em breve[/yellow]\")\n            return\n        else:\n            console.mostrar_erro(\"Op\u00e7\u00e3o inv\u00e1lida!\")\n            return\n\n        # 3. Incluir metadados?\n        console.print(\"\\n[bold]Incluir metadados no arquivo?[/bold]\")\n        console.print(\"  [1] Sim (recomendado)\")\n        console.print(\"  [2] N\u00e3o (s\u00f3 o texto)\")\n\n        opcao = input(\"\\nEscolha: \").strip()\n\n        incluir_metadados = (opcao == '1')\n\n        # 4. Confirmar\n        console.print(f\"\\n[bold]Resumo da exporta\u00e7\u00e3o:[/bold]\")\n        console.print(f\"  \u2022 Documento ID: {documento_id}\")\n        console.print(f\"  \u2022 Idioma: {idiomas[idx]['nome']}\")\n        console.print(f\"  \u2022 Formato: {formato.upper()}\")\n        console.print(f\"  \u2022 Metadados: {'Sim' if incluir_metadados else 'N\u00e3o'}\")\n\n        confirmar = input(\"\\nConfirmar exporta\u00e7\u00e3o? (s/N): \").strip().lower()\n\n        if confirmar != 's':\n            return\n\n        # 5. Exportar\n        try:\n            resultado = self.exportar_use_case.executar(\n                documento_id=documento_id,\n                formato=formato,\n                idioma=idioma,\n                incluir_metadados=incluir_metadados\n            )\n\n            if resultado['sucesso']:\n                console.mostrar_sucesso(f\"Documento exportado com sucesso!\")\n                console.print(f\"  \ud83d\udcc1 {resultado['caminho']}\")\n                if 'tamanho' in resultado:\n                    console.print(f\"  \ud83d\udcca Tamanho: {resultado['tamanho']} caracteres\")\n            else:\n                console.mostrar_erro(resultado['erro'])\n\n        except Exception as e:\n            console.mostrar_erro(f\"Erro na exporta\u00e7\u00e3o: {e}\")\n</code></pre>"},{"location":"FASE6_EXPORTACAO/#fluxo-de-exportacao","title":"\ud83d\udd04 Fluxo de Exporta\u00e7\u00e3o","text":"<pre><code>[Usu\u00e1rio] \u2192 [tecla 'e'] \u2192 [ComandoExportar] \u2192 [ExportarDocumento (caso de uso)]\n    \u2191                                                    |\n    |                                                    \u2193\n    \u2514\u2500\u2500 [feedback] \u2190 [Resultado] \u2190 [TxtExporter] \u2190 [DTO do documento]\n</code></pre> <p>Passo a passo:</p> <ol> <li>Usu\u00e1rio aperta 'e' durante visualiza\u00e7\u00e3o</li> <li>ComandoExportar lista idiomas dispon\u00edveis</li> <li>Usu\u00e1rio escolhe idioma, formato e op\u00e7\u00e3o de metadados</li> <li>Caso de uso busca documento/tradu\u00e7\u00e3o</li> <li>Exportador TXT gera arquivo formatado</li> <li>Arquivo \u00e9 salvo na pasta <code>exportados/</code></li> <li>Usu\u00e1rio recebe confirma\u00e7\u00e3o com caminho do arquivo</li> </ol>"},{"location":"FASE6_EXPORTACAO/#funcionalidades-na-ui","title":"\ud83c\udfae Funcionalidades na UI","text":""},{"location":"FASE6_EXPORTACAO/#menu-de-exportacao","title":"Menu de Exporta\u00e7\u00e3o:","text":"<pre><code>\ud83d\udce5 EXPORTAR DOCUMENTO\n\nIdiomas dispon\u00edveis:\n  [1] \ud83c\uddf7\ud83c\uddfa Original (Russo)\n  [2] \ud83c\uddfa\ud83c\uddf8 Ingl\u00eas\n  [3] \ud83c\udde7\ud83c\uddf7 Portugu\u00eas\n  [0] Cancelar\n\nFormatos dispon\u00edveis:\n  [1] \ud83d\udcc4 TXT (recomendado)\n  [2] \ud83d\udcd1 PDF (em breve)\n\nIncluir metadados no arquivo?\n  [1] Sim (recomendado)\n  [2] N\u00e3o (s\u00f3 o texto)\n\nResumo da exporta\u00e7\u00e3o:\n  \u2022 Documento ID: 1\n  \u2022 Idioma: Ingl\u00eas\n  \u2022 Formato: TXT\n  \u2022 Metadados: Sim\n\nConfirmar exporta\u00e7\u00e3o? (s/N):\n</code></pre>"},{"location":"FASE6_EXPORTACAO/#arquivo-gerado-exemplo","title":"\ud83d\udcc4 Arquivo Gerado (Exemplo)","text":"<pre><code>================================================================================\nT\u00cdTULO: \u041f\u0440\u043e\u0442\u043e\u043a\u043e\u043b \u0434\u043e\u043f\u0440\u043e\u0441\u0430 \u041b.\u0412. \u041d\u0438\u043a\u043e\u043b\u0430\u0435\u0432\u0430 [Ingl\u00eas]\nCENTRO: lencenter\nDATA ORIGINAL: 1934, December 4\nURL: http://showtrials.ru/...\nEXPORTADO EM: 2024-02-15 14:30:22\nPESSOA PRINCIPAL: \u041b.\u0412. \u041d\u0438\u043a\u043e\u043b\u0430\u0435\u0432\u0430\n================================================================================\n\nINTERROGATION PROTOCOL\nNIKOLAEV Leonid Vasilyevich\ndated December 4, 1934.\n\nQUESTION: In your notebook there is a phone number of the Latvian Consulate...\n</code></pre>"},{"location":"FASE6_EXPORTACAO/#estrutura-de-arquivos-gerados","title":"\ud83d\udcc2 Estrutura de Arquivos Gerados","text":"<pre><code>exportados/\n\u251c\u2500\u2500 1_Protokol_doprosa_L.V._Nikolaeva_original.txt\n\u251c\u2500\u2500 1_Protokol_doprosa_L.V._Nikolaeva_en.txt\n\u251c\u2500\u2500 1_Protokol_doprosa_L.V._Nikolaeva_pt.txt\n\u251c\u2500\u2500 2_Pismo_V.V._Rumyantseva_original.txt\n\u2514\u2500\u2500 2_Pismo_V.V._Rumyantseva_en.txt\n</code></pre> <p>Padr\u00e3o de nomenclatura: <code>ID_TITULO_IDIOMA.txt</code></p>"},{"location":"FASE6_EXPORTACAO/#testes-realizados","title":"\ud83e\uddea Testes Realizados","text":"Teste A\u00e7\u00e3o Resultado Esperado Status Exportar original 'e' \u2192 1 \u2192 1 \u2192 1 Arquivo TXT com metadados \u2705 Exportar tradu\u00e7\u00e3o 'e' \u2192 2 \u2192 1 \u2192 1 Arquivo com conte\u00fado traduzido \u2705 Sem metadados Op\u00e7\u00e3o 2 no menu Arquivo s\u00f3 com texto \u2705 Cancelar Op\u00e7\u00e3o 0 Volta sem exportar \u2705 PDF Escolher PDF Mensagem \"em breve\" \u2705 Documento sem tradu\u00e7\u00e3o S\u00f3 op\u00e7\u00e3o original Menu correto \u2705 Idioma inexistente Tentar exportar idioma sem tradu\u00e7\u00e3o Op\u00e7\u00e3o n\u00e3o aparece \u2705 Arquivo j\u00e1 existe Exportar mesmo documento Novo arquivo (nomes \u00fanicos) \u2705"},{"location":"FASE6_EXPORTACAO/#metricas-da-fase","title":"\ud83d\udcca M\u00e9tricas da Fase","text":"M\u00e9trica Valor Novos arquivos 3 Linhas de c\u00f3digo ~250 Formatos suportados 1 (TXT) Formatos planejados 1 (PDF) Testes manuais 7 cen\u00e1rios"},{"location":"FASE6_EXPORTACAO/#principios-aplicados","title":"\ud83d\udcda Princ\u00edpios Aplicados","text":"Princ\u00edpio Aplica\u00e7\u00e3o Single Responsibility Exportador separado do caso de uso Open/Closed Novos formatos podem ser adicionados sem modificar existentes Liskov Substitution Exportadores poderiam compartilhar interface Interface Segregation M\u00e9todos espec\u00edficos para cada formato Dependency Inversion Caso de uso depende de abstra\u00e7\u00f5es"},{"location":"FASE6_EXPORTACAO/#integracao-com-fases-anteriores-e-futuras","title":"\ud83d\udd17 Integra\u00e7\u00e3o com Fases Anteriores e Futuras","text":"Fase Relacionamento FASE 1 (Domain) Usa NomeRusso para tradu\u00e7\u00e3o de nomes FASE 2 (Application) Usa DocumentoDTO FASE 3 (Infrastructure) Reposit\u00f3rios para buscar documentos FASE 4 (CLI) Comando integrado ao app.py FASE 5 (Tradu\u00e7\u00e3o) Exporta tradu\u00e7\u00f5es dispon\u00edveis FASE 7 (PDF) Base para exporta\u00e7\u00e3o PDF"},{"location":"FASE6_EXPORTACAO/#evolucao-do-codigo","title":"\ud83d\ude80 Evolu\u00e7\u00e3o do C\u00f3digo","text":""},{"location":"FASE6_EXPORTACAO/#antes-codigo-legado-nav_uipy","title":"Antes (c\u00f3digo legado - <code>nav_ui.py</code>)","text":"<pre><code># Exporta\u00e7\u00e3o manual e espalhada\ndef exportar_documento(doc_id):\n    with open(f\"{doc_id}.txt\", 'w') as f:\n        f.write(\"...\")\n    # Sem metadados, sem escolha de idioma\n</code></pre>"},{"location":"FASE6_EXPORTACAO/#depois-clean-architecture","title":"Depois (Clean Architecture)","text":"<pre><code># Exporta\u00e7\u00e3o estruturada e extens\u00edvel\nresultado = self.exportar_use_case.executar(\n    documento_id=doc_id,\n    formato='txt',\n    idioma='en',\n    incluir_metadados=True\n)\n</code></pre>"},{"location":"FASE6_EXPORTACAO/#metricas-do-projeto-apos-fase-6","title":"\ud83d\udcc8 M\u00e9tricas do Projeto (Ap\u00f3s FASE 6)","text":"<pre><code>\ud83d\udcca DOMAIN LAYER: 4 entidades | 15 testes\n\ud83d\udcca APPLICATION LAYER: 6 casos de uso | 7 testes\n\ud83d\udcca INFRASTRUCTURE LAYER: 5 m\u00f3dulos | 18 testes\n\ud83d\udcca INTERFACE LAYER: 9 m\u00f3dulos | Validada manualmente\n\ud83d\udcca TOTAL: 40 testes automatizados\n</code></pre>"},{"location":"FASE6_EXPORTACAO/#licoes-aprendidas","title":"\ud83d\udd0d Li\u00e7\u00f5es Aprendidas","text":"<ol> <li>Sanitiza\u00e7\u00e3o \u00e9 crucial: Nomes de arquivo precisam ser seguros</li> <li>Metadados agregam valor: Tornam o arquivo auto-documentado</li> <li>Feedback \u00e9 essencial: Usu\u00e1rio precisa saber onde o arquivo foi salvo</li> <li>Idiomas devem ser filtrados: S\u00f3 mostrar op\u00e7\u00f5es dispon\u00edveis</li> <li>Prepara\u00e7\u00e3o para o futuro: Estrutura pronta para novos formatos</li> <li>Diret\u00f3rios organizados: Cada tipo de arquivo em sua pasta</li> </ol>"},{"location":"FASE6_EXPORTACAO/#conclusao-da-fase","title":"\ud83c\udfc1 Conclus\u00e3o da Fase","text":"<p>A FASE 6 entregou um sistema completo de exporta\u00e7\u00e3o com:</p> <p>\u2705 Exporta\u00e7\u00e3o para TXT \u2705 Escolha entre original e tradu\u00e7\u00f5es \u2705 Op\u00e7\u00e3o de incluir metadados \u2705 Nomes de arquivo padronizados \u2705 Organiza\u00e7\u00e3o em pasta dedicada \u2705 Feedback claro para o usu\u00e1rio \u2705 Prepara\u00e7\u00e3o para PDF futuro \u2705 C\u00f3digo limpo e extens\u00edvel</p>"},{"location":"FASE6_EXPORTACAO/#autor","title":"\ud83d\udc64 Autor","text":"<p>Thiago Ribeiro - Projeto de TCC</p> <sub>FASE 6 conclu\u00edda em 15 de Fevereiro de 2024</sub> <sub>\u2705 Pronto para a FASE 7 - Relat\u00f3rios Avan\u00e7ados</sub> <p>```</p>"},{"location":"FASE7_RELATORIOS/","title":"FASE 7 - Relat\u00f3rios Avan\u00e7ados","text":"**Sistema completo de gera\u00e7\u00e3o de relat\u00f3rios e estat\u00edsticas do acervo**"},{"location":"FASE7_RELATORIOS/#informacoes-da-fase","title":"\ud83d\udcc5 Informa\u00e7\u00f5es da Fase","text":"Item Descri\u00e7\u00e3o Status \u2705 Conclu\u00edda Data de Conclus\u00e3o 15 de Fevereiro de 2026 Artefatos Caso de uso GerarRelatorio, Comando CLI, Relat\u00f3rios TXT Testes 4 cen\u00e1rios manuais Depend\u00eancias FASE 1, 2, 3, 4, 5, 6"},{"location":"FASE7_RELATORIOS/#objetivo","title":"\ud83c\udfaf Objetivo","text":"<p>Implementar um sistema de relat\u00f3rios que:</p> <ul> <li>Gere relat\u00f3rios detalhados do acervo</li> <li>Apresente estat\u00edsticas completas (totais, distribui\u00e7\u00f5es, frequ\u00eancias)</li> <li>Identifique pessoas mais citadas</li> <li>Mostre documentos especiais (cartas, relat\u00f3rios, acarea\u00e7\u00f5es)</li> <li>Calcule percentuais e m\u00e9dias</li> <li>Permita preview antes de salvar</li> <li>Organize relat\u00f3rios em pasta dedicada</li> </ul>"},{"location":"FASE7_RELATORIOS/#estrutura-criada","title":"\ud83d\udcc1 Estrutura Criada","text":"<pre><code>src/\n\u251c\u2500\u2500 application/\n\u2502   \u2514\u2500\u2500 use_cases/\n\u2502       \u2514\u2500\u2500 gerar_relatorio.py              # Caso de uso de relat\u00f3rios\n\u251c\u2500\u2500 infrastructure/\n\u2502   \u2514\u2500\u2500 reports/\n\u2502       \u2514\u2500\u2500 __init__.py\n\u2514\u2500\u2500 interface/\n    \u2514\u2500\u2500 cli/\n        \u2514\u2500\u2500 commands_relatorio.py            # Comandos de relat\u00f3rio\n</code></pre>"},{"location":"FASE7_RELATORIOS/#componentes-implementados","title":"\ud83e\udde9 Componentes Implementados","text":""},{"location":"FASE7_RELATORIOS/#1-caso-de-uso-gerarrelatorio-applicationuse_casesgerar_relatoriopy","title":"1. Caso de Uso GerarRelatorio (<code>application/use_cases/gerar_relatorio.py</code>)","text":"<p>Responsabilidade: Coletar e processar dados para gera\u00e7\u00e3o de relat\u00f3rios.</p> <pre><code>class GerarRelatorio:\n    \"\"\"\n    Caso de uso para gerar relat\u00f3rios avan\u00e7ados.\n    \"\"\"\n\n    def __init__(self,\n                 repo_doc: RepositorioDocumento,\n                 repo_trad: Optional[RepositorioTraducao] = None):\n        self.repo_doc = repo_doc\n        self.repo_trad = repo_trad\n\n    def _coletar_dados(self) -&gt; Dict:\n        \"\"\"\n        Coleta todos os dados necess\u00e1rios para o relat\u00f3rio.\n        \"\"\"\n        # Buscar todos os documentos (limitado para performance)\n        documentos = self.repo_doc.listar(limite=5000)\n\n        # Inicializar contadores\n        centro_counter = Counter()\n        tipo_counter = Counter()\n        pessoa_counter = Counter()\n        ano_counter = Counter()\n        mes_counter = Counter()\n\n        # M\u00e9tricas especiais\n        cartas = 0\n        declaracoes = 0\n        relatorios = 0\n        acareacoes = 0\n        acusacoes = 0\n        laudos = 0\n        anexos = 0\n\n        # Processar documentos\n        for doc in documentos:\n            # Por centro\n            centro_counter[doc.centro] += 1\n\n            # Por tipo\n            if doc.tipo:\n                tipo_counter[doc.tipo] += 1\n\n                # Contagens espec\u00edficas\n                if doc.tipo == 'carta':\n                    cartas += 1\n                elif doc.tipo == 'declaracao':\n                    declaracoes += 1\n                elif doc.tipo == 'relatorio':\n                    relatorios += 1\n                elif doc.tipo == 'acareacao':\n                    acareacoes += 1\n                elif doc.tipo == 'acusacao':\n                    acusacoes += 1\n                elif doc.tipo == 'laudo':\n                    laudos += 1\n\n            # Pessoas\n            if doc.pessoa_principal:\n                pessoa_counter[doc.pessoa_principal] += 1\n\n            # Anexos\n            if doc.tem_anexos:\n                anexos += 1\n\n            # Extrair ano da data original\n            if doc.data_original:\n                import re\n                ano_match = re.search(r'(\\d{4})', doc.data_original)\n                if ano_match:\n                    ano_counter[ano_match.group(1)] += 1\n\n                    # M\u00eas (simplificado)\n                    if 'December' in doc.data_original or '\u0434\u0435\u043a\u0430\u0431\u0440\u044f' in doc.data_original:\n                        mes_counter['Dezembro'] += 1\n                    elif 'November' in doc.data_original or '\u043d\u043e\u044f\u0431\u0440\u044f' in doc.data_original:\n                        mes_counter['Novembro'] += 1\n\n        # Pessoas mais frequentes (com tradu\u00e7\u00e3o)\n        pessoas_frequentes = []\n        for nome, count in pessoa_counter.most_common(20):\n            try:\n                nome_en = NomeRusso(nome).transliterar()\n            except:\n                nome_en = nome\n            pessoas_frequentes.append((nome, count, nome_en))\n\n        # Dados de tradu\u00e7\u00e3o\n        total_traducoes = 0\n        traducoes_por_idioma = {}\n\n        if self.repo_trad:\n            # Simplificado - em produ\u00e7\u00e3o, faria uma query agregada\n            for doc in documentos[:100]:  # Amostra\n                traducoes = self.repo_trad.listar_por_documento(doc.id)\n                total_traducoes += len(traducoes)\n                for t in traducoes:\n                    idioma = t.idioma\n                    traducoes_por_idioma[idioma] = traducoes_por_idioma.get(idioma, 0) + 1\n\n        return {\n            'total_documentos': len(documentos),\n            'total_traducoes': total_traducoes,\n            'documentos_por_centro': dict(centro_counter),\n            'documentos_por_tipo': dict(tipo_counter),\n            'pessoas_frequentes': pessoas_frequentes[:15],\n            'anos': dict(ano_counter.most_common()),\n            'meses': dict(mes_counter),\n            'cartas': cartas,\n            'declaracoes': declaracoes,\n            'relatorios': relatorios,\n            'acareacoes': acareacoes,\n            'acusacoes': acusacoes,\n            'laudos': laudos,\n            'documentos_com_anexos': anexos,\n            'traducoes_por_idioma': traducoes_por_idioma,\n            'data_geracao': datetime.now().isoformat()[:10]\n        }\n\n    def gerar_relatorio_txt(self) -&gt; str:\n        \"\"\"\n        Gera relat\u00f3rio em formato texto.\n        \"\"\"\n        dados = self._coletar_dados()\n\n        linhas = []\n        linhas.append(\"=\" * 80)\n        linhas.append(\"RELAT\u00d3RIO DO ACERVO - SHOW TRIALS\".center(80))\n        linhas.append(f\"Data: {dados['data_geracao']}\".center(80))\n        linhas.append(\"=\" * 80)\n        linhas.append(\"\")\n\n        # 1. Vis\u00e3o Geral\n        linhas.append(\"\ud83d\udcca VIS\u00c3O GERAL\")\n        linhas.append(\"-\" * 40)\n        linhas.append(f\"Total de documentos: {dados['total_documentos']}\")\n        linhas.append(f\"Total de tradu\u00e7\u00f5es: {dados['total_traducoes']}\")\n        linhas.append(f\"Documentos com anexos: {dados['documentos_com_anexos']}\")\n        if dados['total_documentos'] &gt; 0:\n            pct = (dados['total_traducoes'] / dados['total_documentos'] * 100)\n            linhas.append(f\"Percentual traduzido: {pct:.1f}%\")\n        linhas.append(\"\")\n\n        # 2. Por Centro\n        linhas.append(\"\ud83c\udfdb\ufe0f  DOCUMENTOS POR CENTRO\")\n        linhas.append(\"-\" * 40)\n        for centro, total in dados['documentos_por_centro'].items():\n            nome = \"Leningrad\" if centro == \"lencenter\" else \"Moscow\"\n            pct = (total / dados['total_documentos'] * 100)\n            linhas.append(f\"{nome}: {total} ({pct:.1f}%)\")\n        linhas.append(\"\")\n\n        # 3. Por Tipo\n        linhas.append(\"\ud83d\udccb DOCUMENTOS POR TIPO\")\n        linhas.append(\"-\" * 40)\n        tipos_ordenados = sorted(dados['documentos_por_tipo'].items(), key=lambda x: x[1], reverse=True)\n        for tipo, total in tipos_ordenados:\n            try:\n                tipo_enum = TipoDocumento(tipo)\n                nome = tipo_enum.descricao_pt\n            except:\n                nome = tipo\n            pct = (total / dados['total_documentos'] * 100)\n            linhas.append(f\"{nome}: {total} ({pct:.1f}%)\")\n        linhas.append(\"\")\n\n        # 4. Por Ano\n        if dados['anos']:\n            linhas.append(\"\ud83d\udcc5 DOCUMENTOS POR ANO\")\n            linhas.append(\"-\" * 40)\n            anos_ordenados = sorted(dados['anos'].items())\n            for ano, total in anos_ordenados:\n                linhas.append(f\"{ano}: {total}\")\n            linhas.append(\"\")\n\n        # 5. Pessoas Mais Frequentes\n        linhas.append(\"\ud83d\udc64 PESSOAS MAIS FREQUENTES\")\n        linhas.append(\"-\" * 40)\n        for i, (nome_ru, total, nome_en) in enumerate(dados['pessoas_frequentes'][:10], 1):\n            linhas.append(f\"{i:2d}. {nome_en} ({nome_ru}): {total}\")\n        linhas.append(\"\")\n\n        # 6. Documentos Especiais\n        linhas.append(\"\ud83d\udccc DOCUMENTOS ESPECIAIS\")\n        linhas.append(\"-\" * 40)\n        linhas.append(f\"\u2709\ufe0f  Cartas: {dados['cartas']}\")\n        linhas.append(f\"\ud83d\udcdd Declara\u00e7\u00f5es: {dados['declaracoes']}\")\n        linhas.append(f\"\ud83d\udccb Relat\u00f3rios NKVD: {dados['relatorios']}\")\n        linhas.append(f\"\u2696\ufe0f  Acarea\u00e7\u00f5es: {dados['acareacoes']}\")\n        linhas.append(f\"\ud83d\udcdc Acusa\u00e7\u00f5es: {dados['acusacoes']}\")\n        linhas.append(f\"\ud83c\udfe5 Laudos: {dados['laudos']}\")\n        linhas.append(\"\")\n\n        # 7. Tradu\u00e7\u00f5es\n        if dados['traducoes_por_idioma']:\n            linhas.append(\"\ud83c\udf10 TRADU\u00c7\u00d5ES POR IDIOMA\")\n            linhas.append(\"-\" * 40)\n            idiomas_nomes = {'en': 'Ingl\u00eas', 'pt': 'Portugu\u00eas', 'es': 'Espanhol', 'fr': 'Franc\u00eas'}\n            for idioma, total in dados['traducoes_por_idioma'].items():\n                nome = idiomas_nomes.get(idioma, idioma)\n                linhas.append(f\"{nome}: {total}\")\n            linhas.append(\"\")\n\n        linhas.append(\"=\" * 80)\n        linhas.append(\"FIM DO RELAT\u00d3RIO\".center(80))\n        linhas.append(\"=\" * 80)\n\n        return '\\n'.join(linhas)\n\n    def salvar_relatorio(self, formato: str = 'txt', diretorio: str = 'relatorios') -&gt; str:\n        \"\"\"\n        Gera e salva relat\u00f3rio em arquivo.\n        \"\"\"\n        Path(diretorio).mkdir(exist_ok=True)\n\n        if formato == 'txt':\n            conteudo = self.gerar_relatorio_txt()\n            nome_arquivo = f\"relatorio_{datetime.now().strftime('%Y%m%d_%H%M%S')}.txt\"\n            caminho = Path(diretorio) / nome_arquivo\n\n            with open(caminho, 'w', encoding='utf-8') as f:\n                f.write(conteudo)\n\n            return str(caminho)\n\n        elif formato == 'html':\n            # Placeholder para vers\u00e3o HTML\n            return \"relatorio.html (em desenvolvimento)\"\n\n        return \"\"\n</code></pre>"},{"location":"FASE7_RELATORIOS/#2-comandorelatorio-interfaceclicommands_relatoriopy","title":"2. ComandoRelatorio (<code>interface/cli/commands_relatorio.py</code>)","text":"<p>Responsabilidade: Interface interativa para gera\u00e7\u00e3o de relat\u00f3rios.</p> <pre><code>class ComandoRelatorio:\n    \"\"\"Comando para gerar relat\u00f3rios.\"\"\"\n\n    def __init__(self, gerar_relatorio_use_case):\n        self.gerar_relatorio = gerar_relatorio_use_case\n\n    def executar(self):\n        \"\"\"Executa gera\u00e7\u00e3o de relat\u00f3rio interativa.\"\"\"\n        console.print(\"\\n[bold cyan]\ud83d\udcca GERAR RELAT\u00d3RIO[/bold cyan]\")\n        console.print()\n\n        # 1. Escolher formato\n        console.print(\"[bold]Formatos dispon\u00edveis:[/bold]\")\n        console.print(\"  [1] \ud83d\udcc4 TXT (texto simples)\")\n        console.print(\"  [2] \ud83c\udf10 HTML (com gr\u00e1ficos - em breve)\")\n        console.print(\"  [0] Cancelar\")\n\n        opcao = input(\"\\nEscolha o formato: \").strip()\n\n        if opcao == '0':\n            return\n\n        if opcao == '1':\n            formato = 'txt'\n        elif opcao == '2':\n            console.print(\"[yellow]\ud83c\udf10 Relat\u00f3rio HTML ser\u00e1 implementado em breve[/yellow]\")\n            input(\"Pressione Enter para continuar...\")\n            return\n        else:\n            console.mostrar_erro(\"Op\u00e7\u00e3o inv\u00e1lida!\")\n            return\n\n        # 2. Confirmar\n        console.print(f\"\\n[bold]Gerando relat\u00f3rio em formato {formato.upper()}...[/bold]\")\n        console.print(\"Isso pode levar alguns segundos.\")\n\n        confirmar = input(\"\\nConfirmar? (s/N): \").strip().lower()\n\n        if confirmar != 's':\n            return\n\n        # 3. Gerar\n        try:\n            with console.status(\"[cyan]Coletando dados e gerando relat\u00f3rio...[/cyan]\"):\n                if formato == 'txt':\n                    # Mostrar preview\n                    console.print(\"\\n[dim]Pr\u00e9via do relat\u00f3rio:[/dim]\")\n                    console.print(\"-\" * 40)\n\n                    # Gerar e mostrar primeiras linhas\n                    relatorio = self.gerar_relatorio.gerar_relatorio_txt()\n                    linhas = relatorio.split('\\n')\n                    for linha in linhas[:15]:\n                        console.print(linha[:80])\n                    console.print(\"[dim]...[/dim]\")\n\n                    # Salvar\n                    caminho = self.gerar_relatorio.salvar_relatorio(formato='txt')\n\n                    if caminho:\n                        console.mostrar_sucesso(f\"Relat\u00f3rio salvo em: {caminho}\")\n                        console.print(f\"  \ud83d\udcc1 {caminho}\")\n                    else:\n                        console.mostrar_erro(\"Erro ao salvar relat\u00f3rio!\")\n\n        except Exception as e:\n            console.mostrar_erro(f\"Erro ao gerar relat\u00f3rio: {e}\")\n\n        input(\"\\nPressione Enter para continuar...\")\n</code></pre>"},{"location":"FASE7_RELATORIOS/#fluxo-de-geracao-de-relatorios","title":"\ud83d\udd04 Fluxo de Gera\u00e7\u00e3o de Relat\u00f3rios","text":"<pre><code>[Usu\u00e1rio] \u2192 [Menu \u2192 5] \u2192 [ComandoRelatorio] \u2192 [GerarRelatorio (caso de uso)]\n    \u2191                                                    |\n    |                                                    \u2193\n    \u2514\u2500\u2500 [Preview] \u2190 [Relat\u00f3rio TXT] \u2190 [Coleta de Dados] \u2190 [Reposit\u00f3rios]\n                              |\n                              \u2193\n                        [Arquivo em relatorios/]\n</code></pre> <p>Passo a passo:</p> <ol> <li>Usu\u00e1rio escolhe op\u00e7\u00e3o 5 no menu principal</li> <li>ComandoRelatorio pergunta formato (TXT ou HTML)</li> <li>Usu\u00e1rio confirma gera\u00e7\u00e3o</li> <li>Caso de uso coleta dados de todos os documentos</li> <li>Dados s\u00e3o processados e estat\u00edsticas calculadas</li> <li>Relat\u00f3rio TXT \u00e9 gerado</li> <li>Preview \u00e9 mostrado ao usu\u00e1rio</li> <li>Relat\u00f3rio \u00e9 salvo na pasta <code>relatorios/</code></li> <li>Usu\u00e1rio recebe confirma\u00e7\u00e3o com caminho</li> </ol>"},{"location":"FASE7_RELATORIOS/#exemplo-de-relatorio-gerado","title":"\ud83d\udcca Exemplo de Relat\u00f3rio Gerado","text":"<pre><code>================================================================================\n                       RELAT\u00d3RIO DO ACERVO - SHOW TRIALS\n                                Data: 2026-02-15\n================================================================================\n\n\ud83d\udcca VIS\u00c3O GERAL\n----------------------------------------\nTotal de documentos: 519\nTotal de tradu\u00e7\u00f5es: 16\nDocumentos com anexos: 4\nPercentual traduzido: 3.1%\n\n\ud83c\udfdb\ufe0f  DOCUMENTOS POR CENTRO\n----------------------------------------\nLeningrad: 152 (29.3%)\nMoscow: 367 (70.7%)\n\n\ud83d\udccb DOCUMENTOS POR TIPO\n----------------------------------------\nProtocolo de Interrogat\u00f3rio: 429 (82.7%)\nProtocolo de Acarea\u00e7\u00e3o: 36 (6.9%)\nDeclara\u00e7\u00e3o/Requerimento: 22 (4.2%)\nDepoimento Espont\u00e2neo: 17 (3.3%)\nCorrespond\u00eancia: 7 (1.3%)\nRelat\u00f3rio Especial (NKVD): 6 (1.2%)\nLaudo Pericial: 1 (0.2%)\nAuto de Acusa\u00e7\u00e3o: 1 (0.2%)\n\n\ud83d\udcc5 DOCUMENTOS POR ANO\n----------------------------------------\n1934: 298\n1935: 221\n\n\ud83d\udc64 PESSOAS MAIS FREQUENTES\n----------------------------------------\n 1. Leonid V. Nikolaev (\u041b.\u0412. \u041d\u0438\u043a\u043e\u043b\u0430\u0435\u0432\u0430): 42\n 2. Georgy I. Safarov (\u0413.\u0418. \u0421\u0430\u0444\u0430\u0440\u043e\u0432\u0430): 29\n 3. Ivan I. Kotolynov (\u0418.\u0418. \u041a\u043e\u0442\u043e\u043b\u044b\u043d\u043e\u0432\u0430): 13\n 4. Ivan S. Gorshenin (\u0418.\u0421. \u0413\u043e\u0440\u0448\u0435\u043d\u0438\u043d\u0430): 12\n 5. Abram I. Anishev (\u0410.\u0418. \u0410\u043d\u0438\u0448\u0435\u0432\u0430): 12\n 6. Grigory E. Evdokimov (\u0413.\u0415. \u0415\u0432\u0434\u043e\u043a\u0438\u043c\u043e\u0432\u0430): 11\n 7. Vladimir V. Rumyantsev (\u0412.\u0412. \u0420\u0443\u043c\u044f\u043d\u0446\u0435\u0432\u0430): 10\n 8. Nikolai S. Antonov (\u041d.\u0421. \u0410\u043d\u0442\u043e\u043d\u043e\u0432\u0430): 10\n 9. Vladimir I. Zvezdov (\u0412.\u0418. \u0417\u0432\u0435\u0437\u0434\u043e\u0432\u0430): 9\n10. Ivan P. Bakaev (\u0418.\u041f. \u0411\u0430\u043a\u0430\u0435\u0432\u0430): 9\n\n\ud83d\udccc DOCUMENTOS ESPECIAIS\n----------------------------------------\n\u2709\ufe0f  Cartas: 7\n\ud83d\udcdd Declara\u00e7\u00f5es: 22\n\ud83d\udccb Relat\u00f3rios NKVD: 6\n\u2696\ufe0f  Acarea\u00e7\u00f5es: 36\n\ud83d\udcdc Acusa\u00e7\u00f5es: 1\n\ud83c\udfe5 Laudos: 1\n\n\ud83c\udf10 TRADU\u00c7\u00d5ES POR IDIOMA\n----------------------------------------\nIngl\u00eas: 16\n\n================================================================================\n                                FIM DO RELAT\u00d3RIO\n================================================================================\n</code></pre>"},{"location":"FASE7_RELATORIOS/#estrutura-de-arquivos-gerados","title":"\ud83d\udcc2 Estrutura de Arquivos Gerados","text":"<pre><code>relatorios/\n\u251c\u2500\u2500 relatorio_20260215_234144.txt\n\u251c\u2500\u2500 relatorio_20260215_235012.txt\n\u251c\u2500\u2500 relatorio_20260216_001203.txt\n\u2514\u2500\u2500 relatorio_20260216_124500.txt\n</code></pre> <p>Padr\u00e3o de nomenclatura: <code>relatorio_YYYYMMDD_HHMMSS.txt</code></p>"},{"location":"FASE7_RELATORIOS/#metricas-do-acervo-atualizadas","title":"\ud83d\udcca M\u00e9tricas do Acervo (Atualizadas)","text":"Categoria Quantidade % Total de documentos 519 100% Documentos classificados 519 100% Documentos com tradu\u00e7\u00e3o 16 3.1% Documentos com anexos 4 0.8% Total de tradu\u00e7\u00f5es 16 -"},{"location":"FASE7_RELATORIOS/#distribuicao-por-centro","title":"Distribui\u00e7\u00e3o por Centro","text":"Centro Quantidade % Leningrad 152 29.3% Moscow 367 70.7%"},{"location":"FASE7_RELATORIOS/#distribuicao-por-tipo","title":"Distribui\u00e7\u00e3o por Tipo","text":"Tipo Quantidade % Protocolo de Interrogat\u00f3rio 429 82.7% Protocolo de Acarea\u00e7\u00e3o 36 6.9% Declara\u00e7\u00e3o/Requerimento 22 4.2% Depoimento Espont\u00e2neo 17 3.3% Correspond\u00eancia 7 1.3% Relat\u00f3rio Especial (NKVD) 6 1.2% Laudo Pericial 1 0.2% Auto de Acusa\u00e7\u00e3o 1 0.2%"},{"location":"FASE7_RELATORIOS/#distribuicao-por-ano","title":"Distribui\u00e7\u00e3o por Ano","text":"Ano Quantidade 1934 298 1935 221"},{"location":"FASE7_RELATORIOS/#testes-realizados","title":"\ud83e\uddea Testes Realizados","text":"Teste A\u00e7\u00e3o Resultado Esperado Status Gerar relat\u00f3rio Menu \u2192 5 \u2192 1 \u2192 s Arquivo gerado em relatorios/ \u2705 Preview Durante gera\u00e7\u00e3o Primeiras 15 linhas mostradas \u2705 Cancelar Op\u00e7\u00e3o 0 Volta ao menu \u2705 Formato HTML Op\u00e7\u00e3o 2 Mensagem \"em breve\" \u2705 Relat\u00f3rio com dados Verificar conte\u00fado Estat\u00edsticas corretas \u2705 Relat\u00f3rio sem tradu\u00e7\u00f5es Verificar se\u00e7\u00e3o Ausente ou com zero \u2705"},{"location":"FASE7_RELATORIOS/#metricas-da-fase","title":"\ud83d\udcc8 M\u00e9tricas da Fase","text":"M\u00e9trica Valor Novos arquivos 2 Linhas de c\u00f3digo ~200 M\u00e9tricas calculadas 15+ Testes manuais 6 cen\u00e1rios Relat\u00f3rios gerados Ilimitados"},{"location":"FASE7_RELATORIOS/#principios-aplicados","title":"\ud83d\udcda Princ\u00edpios Aplicados","text":"Princ\u00edpio Aplica\u00e7\u00e3o Single Responsibility Caso de uso foca apenas em gerar relat\u00f3rios Open/Closed Novos formatos podem ser adicionados Don't Repeat Yourself Dados coletados uma vez, usados m\u00faltiplas vezes Separation of Concerns Coleta separada da formata\u00e7\u00e3o Preview before save Usu\u00e1rio v\u00ea antes de salvar"},{"location":"FASE7_RELATORIOS/#integracao-com-fases-anteriores-e-futuras","title":"\ud83d\udd17 Integra\u00e7\u00e3o com Fases Anteriores e Futuras","text":"Fase Relacionamento FASE 1 (Domain) Usa TipoDocumento, NomeRusso FASE 2 (Application) Estrutura de caso de uso FASE 3 (Infrastructure) Reposit\u00f3rios para dados FASE 4 (CLI) Comando integrado ao menu FASE 5 (Tradu\u00e7\u00e3o) Dados de tradu\u00e7\u00e3o no relat\u00f3rio FASE 6 (Exporta\u00e7\u00e3o) Padr\u00e3o de salvamento em arquivo FASE 8 (An\u00e1lise) Poderia incluir an\u00e1lise de texto FASE 9 (Web) Relat\u00f3rios poderiam ser web"},{"location":"FASE7_RELATORIOS/#evolucao-do-codigo","title":"\ud83d\ude80 Evolu\u00e7\u00e3o do C\u00f3digo","text":""},{"location":"FASE7_RELATORIOS/#antes-codigo-legado","title":"Antes (c\u00f3digo legado)","text":"<pre><code># Estat\u00edsticas manuais e espalhadas\ndef mostrar_estatisticas():\n    print(f\"Total: {len(documentos)}\")\n    # C\u00e1lculos manuais, sem padroniza\u00e7\u00e3o\n</code></pre>"},{"location":"FASE7_RELATORIOS/#depois-clean-architecture","title":"Depois (Clean Architecture)","text":"<pre><code># Relat\u00f3rio estruturado e reutiliz\u00e1vel\nrelatorio = self.gerar_relatorio.gerar_relatorio_txt()\ncaminho = self.gerar_relatorio.salvar_relatorio()\n</code></pre>"},{"location":"FASE7_RELATORIOS/#metricas-do-projeto-apos-fase-7","title":"\ud83d\udcc8 M\u00e9tricas do Projeto (Ap\u00f3s FASE 7)","text":"<pre><code>\ud83d\udcca DOMAIN LAYER: 4 entidades | 15 testes\n\ud83d\udcca APPLICATION LAYER: 7 casos de uso | 8 testes\n\ud83d\udcca INFRASTRUCTURE LAYER: 5 m\u00f3dulos | 18 testes\n\ud83d\udcca INTERFACE LAYER: 10 m\u00f3dulos | Validada manualmente\n\ud83d\udcca TOTAL: 41 testes automatizados\n</code></pre>"},{"location":"FASE7_RELATORIOS/#licoes-aprendidas","title":"\ud83d\udd0d Li\u00e7\u00f5es Aprendidas","text":"<ol> <li>Dados agregados s\u00e3o poderosos: Um relat\u00f3rio vale mais que mil listagens</li> <li>Preview \u00e9 importante: Usu\u00e1rio v\u00ea antes de salvar</li> <li>Performance importa: Coletar dados de 500 documentos leva tempo</li> <li>Formata\u00e7\u00e3o consistente: Relat\u00f3rios com mesma estrutura s\u00e3o mais profissionais</li> <li>Percentuais ajudam: Mais que n\u00fameros absolutos, mostram propor\u00e7\u00f5es</li> <li>Prepara\u00e7\u00e3o para o futuro: Estrutura pronta para novos formatos</li> </ol>"},{"location":"FASE7_RELATORIOS/#conclusao-da-fase","title":"\ud83c\udfc1 Conclus\u00e3o da Fase","text":"<p>A FASE 7 entregou um sistema completo de relat\u00f3rios com:</p> <p>\u2705 Gera\u00e7\u00e3o de relat\u00f3rios TXT \u2705 Estat\u00edsticas completas do acervo \u2705 Distribui\u00e7\u00e3o por centro, tipo e ano \u2705 Top 20 pessoas mais frequentes \u2705 Documentos especiais (cartas, relat\u00f3rios, etc) \u2705 Dados de tradu\u00e7\u00e3o inclu\u00eddos \u2705 Preview antes de salvar \u2705 Salvamento autom\u00e1tico em pasta organizada \u2705 C\u00f3digo limpo e extens\u00edvel</p>"},{"location":"FASE7_RELATORIOS/#autor","title":"\ud83d\udc64 Autor","text":"<p>Thiago Ribeiro - Projeto de TCC</p> <sub>FASE 7 conclu\u00edda em 15 de Fevereiro de 2026</sub> <sub>\u2705 Pronto para a FASE 8 - An\u00e1lise de Texto</sub> <p>```</p>"},{"location":"FASE8_ANALISE_TEXTO/","title":"FASE 8 - An\u00e1lise de Texto","text":"**Sistema avan\u00e7ado de an\u00e1lise de texto com NLP, extra\u00e7\u00e3o de entidades e visualiza\u00e7\u00f5es**"},{"location":"FASE8_ANALISE_TEXTO/#informacoes-da-fase","title":"\ud83d\udcc5 Informa\u00e7\u00f5es da Fase","text":"Item Descri\u00e7\u00e3o Status \u2705 Conclu\u00edda Data de Conclus\u00e3o 16 de Fevereiro de 2026 Artefatos Value Objects, Analisador SpaCy, WordCloud, Casos de Uso Testes 5 cen\u00e1rios manuais Depend\u00eancias FASE 1, 2, 3, 4, spaCy, TextBlob, NLTK, WordCloud, Matplotlib"},{"location":"FASE8_ANALISE_TEXTO/#objetivo","title":"\ud83c\udfaf Objetivo","text":"<p>Implementar um sistema de an\u00e1lise de texto que:</p> <ul> <li>Extraia entidades nomeadas (pessoas, locais, organiza\u00e7\u00f5es)</li> <li>Calcule estat\u00edsticas textuais (palavras, frases, densidade l\u00e9xica)</li> <li>Analise sentimentos (polaridade e subjetividade)</li> <li>Gere nuvens de palavras (wordcloud)</li> <li>Suporte m\u00faltiplos idiomas (russo, ingl\u00eas)</li> <li>Permita an\u00e1lise individual e global do acervo</li> <li>Visualize resultados no terminal e em imagens</li> </ul>"},{"location":"FASE8_ANALISE_TEXTO/#resolucao-de-dependencias","title":"\ud83d\udd27 Resolu\u00e7\u00e3o de Depend\u00eancias","text":""},{"location":"FASE8_ANALISE_TEXTO/#desafios-enfrentados","title":"Desafios Enfrentados","text":"<p>A instala\u00e7\u00e3o das depend\u00eancias para an\u00e1lise de texto apresentou diversos desafios devido a incompatibilidades de vers\u00f5es:</p> Problema Causa Solu\u00e7\u00e3o <code>requires-python = \"&gt;=3.14\"</code> Configura\u00e7\u00e3o incorreta no <code>pyproject.toml</code> Ajustado para <code>&gt;=3.12,&lt;3.14</code> NumPy 1.24.4 N\u00e3o suporta PEP 517 Substitu\u00eddo por NumPy 1.26.0 spaCy e depend\u00eancias Incompatibilidade com Python 3.13 Fixado Python &lt;3.13 <code>smart-open</code> Limita\u00e7\u00e3o de vers\u00e3o Python Instala\u00e7\u00e3o direta com pip"},{"location":"FASE8_ANALISE_TEXTO/#solucao-final","title":"Solu\u00e7\u00e3o Final","text":"<p>Optou-se por instalar as depend\u00eancias diretamente com <code>pip</code> dentro do ambiente virtual do Poetry:</p> <pre><code># Ativar ambiente\npoetry shell\n\n# Instalar pacotes com vers\u00f5es compat\u00edveis\npip install numpy==1.26.0\npip install spacy==3.7.5\npip install textblob nltk wordcloud matplotlib\npip install https://github.com/explosion/spacy-models/releases/download/ru_core_news_sm-3.7.0/ru_core_news_sm-3.7.0.tar.gz\npip install https://github.com/explosion/spacy-models/releases/download/en_core_web_sm-3.7.0/en_core_web_sm-3.7.0.tar.gz\npython -m textblob.download_corpora\n</code></pre>"},{"location":"FASE8_ANALISE_TEXTO/#versoes-instaladas","title":"Vers\u00f5es Instaladas","text":"Pacote Vers\u00e3o Status Python 3.12.2 \u2705 NumPy 1.26.0 \u2705 spaCy 3.7.5 \u2705 Modelo Russo ru_core_news_sm \u2705 Modelo Ingl\u00eas en_core_web_sm \u2705 TextBlob - \u2705 NLTK 3.9.2 \u2705 WordCloud 1.9.6 \u2705 Matplotlib 3.10.8 \u2705"},{"location":"FASE8_ANALISE_TEXTO/#estrutura-criada","title":"\ud83d\udcc1 Estrutura Criada","text":"<pre><code>src/\n\u251c\u2500\u2500 domain/\n\u2502   \u2514\u2500\u2500 value_objects/\n\u2502       \u2514\u2500\u2500 analise_texto.py              # Value Objects para an\u00e1lise\n\u251c\u2500\u2500 application/\n\u2502   \u2514\u2500\u2500 use_cases/\n\u2502       \u251c\u2500\u2500 analisar_texto.py              # An\u00e1lise individual\n\u2502       \u2514\u2500\u2500 analisar_acervo.py             # An\u00e1lise em lote\n\u251c\u2500\u2500 infrastructure/\n\u2502   \u2514\u2500\u2500 analysis/\n\u2502       \u251c\u2500\u2500 __init__.py\n\u2502       \u251c\u2500\u2500 spacy_analyzer.py               # Integra\u00e7\u00e3o com SpaCy\n\u2502       \u2514\u2500\u2500 wordcloud_generator.py          # Nuvem de palavras\n\u2514\u2500\u2500 interface/\n    \u2514\u2500\u2500 cli/\n        \u251c\u2500\u2500 commands_analise.py             # Comandos de an\u00e1lise\n        \u2514\u2500\u2500 presenters_analise.py            # Visualiza\u00e7\u00e3o de an\u00e1lises\n</code></pre>"},{"location":"FASE8_ANALISE_TEXTO/#componentes-implementados","title":"\ud83e\udde9 Componentes Implementados","text":""},{"location":"FASE8_ANALISE_TEXTO/#1-value-objects-para-analise-domainvalue_objectsanalise_textopy","title":"1. Value Objects para An\u00e1lise (<code>domain/value_objects/analise_texto.py</code>)","text":"<p>Responsabilidade: Representar os resultados da an\u00e1lise de texto.</p> <pre><code>@dataclass\nclass Entidade:\n    \"\"\"Entidade extra\u00edda do texto.\"\"\"\n    texto: str\n    tipo: str  # PERSON, ORG, LOC, DATE, etc\n    confianca: float\n    posicao_inicio: int\n    posicao_fim: int\n\n\n@dataclass\nclass Sentimento:\n    \"\"\"An\u00e1lise de sentimento do texto.\"\"\"\n    polaridade: float  # -1 (negativo) a 1 (positivo)\n    subjetividade: float  # 0 (objetivo) a 1 (subjetivo)\n    classificacao: str  # positivo, negativo, neutro\n\n\n@dataclass\nclass EstatisticasTexto:\n    \"\"\"Estat\u00edsticas b\u00e1sicas do texto.\"\"\"\n    total_caracteres: int\n    total_palavras: int\n    total_paragrafos: int\n    total_frases: int\n    palavras_unicas: int\n    densidade_lexica: float\n    tamanho_medio_palavra: float\n    tamanho_medio_frase: float\n\n\n@dataclass\nclass AnaliseTexto:\n    \"\"\"Resultado completo da an\u00e1lise de um texto.\"\"\"\n    documento_id: int\n    idioma: str\n    data_analise: datetime\n    estatisticas: EstatisticasTexto\n    entidades: List[Entidade]\n    entidades_por_tipo: Dict[str, List[str]]\n    sentimento: Sentimento\n    palavras_frequentes: List[tuple]\n    modelo_utilizado: str\n    tempo_processamento: float\n\n    @property\n    def resumo(self) -&gt; str:\n        \"\"\"Resumo da an\u00e1lise.\"\"\"\n        return (f\"Doc {self.documento_id} ({self.idioma}): \"\n                f\"{self.estatisticas.total_palavras} palavras, \"\n                f\"{len(self.entidades)} entidades, \"\n                f\"sentimento {self.sentimento.classificacao}\")\n</code></pre>"},{"location":"FASE8_ANALISE_TEXTO/#2-analisador-spacy-infrastructureanalysisspacy_analyzerpy","title":"2. Analisador SpaCy (<code>infrastructure/analysis/spacy_analyzer.py</code>)","text":"<p>Responsabilidade: Integrar com spaCy para an\u00e1lise de texto multil\u00edngue.</p> <pre><code>class SpacyAnalyzer:\n    \"\"\"\n    Analisador de texto usando SpaCy com lazy loading.\n    Modelos s\u00e3o carregados apenas quando necess\u00e1rios.\n    \"\"\"\n\n    # Mapeamento de idiomas para modelos SpaCy\n    MODELOS = {\n        'ru': 'ru_core_news_sm',\n        'en': 'en_core_web_sm',\n    }\n\n    # Mapeamento de tipos de entidade para portugu\u00eas\n    TIPOS_ENTIDADE = {\n        'PERSON': 'Pessoa',\n        'ORG': 'Organiza\u00e7\u00e3o',\n        'LOC': 'Local',\n        'GPE': 'Local (pa\u00eds/cidade)',\n        'DATE': 'Data',\n        'TIME': 'Hora',\n        'MONEY': 'Valor',\n        'PERCENT': 'Percentual',\n        'FAC': 'Instala\u00e7\u00e3o',\n        'PRODUCT': 'Produto',\n        'EVENT': 'Evento',\n        'LAW': 'Lei',\n    }\n\n    def __init__(self):\n        \"\"\"Inicializa sem carregar modelos.\"\"\"\n        self._models = {}  # Cache de modelos carregados\n        logger.info(\"SpacyAnalyzer inicializado (modelos sob demanda)\")\n\n    def _get_model(self, idioma: str):\n        \"\"\"Carrega modelo sob demanda.\"\"\"\n        if idioma not in self.MODELOS:\n            raise ValueError(f\"Idioma n\u00e3o suportado: {idioma}\")\n\n        if idioma in self._models:\n            return self._models[idioma]\n\n        modelo_nome = self.MODELOS[idioma]\n        logger.info(f\"\ud83d\udd04 Carregando modelo: {modelo_nome}\")\n\n        start = time.time()\n        modelo = spacy.load(modelo_nome)\n        elapsed = time.time() - start\n\n        self._models[idioma] = modelo\n        logger.info(f\"\u2705 Modelo carregado em {elapsed:.2f}s\")\n\n        return modelo\n\n    def _calcular_estatisticas(self, texto: str, doc) -&gt; EstatisticasTexto:\n        \"\"\"Calcula estat\u00edsticas do texto.\"\"\"\n        palavras = [token.text for token in doc if not token.is_punct and not token.is_space]\n        frases = list(doc.sents)\n\n        return EstatisticasTexto(\n            total_caracteres=len(texto),\n            total_palavras=len(palavras),\n            total_paragrafos=texto.count('\\n') + 1,\n            total_frases=len(frases),\n            palavras_unicas=len(set(p.lower() for p in palavras)),\n            densidade_lexica=len(set(palavras)) / len(palavras) if palavras else 0,\n            tamanho_medio_palavra=sum(len(p) for p in palavras) / len(palavras) if palavras else 0,\n            tamanho_medio_frase=len(palavras) / len(frases) if frases else 0\n        )\n\n    def _extrair_entidades(self, doc) -&gt; List[Entidade]:\n        \"\"\"Extrai entidades do documento.\"\"\"\n        entidades = []\n        for ent in doc.ents:\n            entidades.append(Entidade(\n                texto=ent.text,\n                tipo=ent.label_,\n                confianca=1.0,\n                posicao_inicio=ent.start_char,\n                posicao_fim=ent.end_char\n            ))\n        return entidades\n\n    def _agrupar_entidades(self, entidades: List[Entidade]) -&gt; Dict[str, List[str]]:\n        \"\"\"Agrupa entidades por tipo.\"\"\"\n        grupos = {}\n        for ent in entidades:\n            tipo_pt = self.TIPOS_ENTIDADE.get(ent.tipo, ent.tipo)\n            if tipo_pt not in grupos:\n                grupos[tipo_pt] = []\n            if ent.texto not in grupos[tipo_pt]:\n                grupos[tipo_pt].append(ent.texto)\n        return grupos\n\n    def _analisar_sentimento(self, texto: str, idioma: str) -&gt; Sentimento:\n        \"\"\"An\u00e1lise de sentimento b\u00e1sica com TextBlob.\"\"\"\n        try:\n            from textblob import TextBlob\n\n            if idioma == 'en':\n                blob = TextBlob(texto)\n                polaridade = blob.sentiment.polarity\n                subjetividade = blob.sentiment.subjectivity\n            else:\n                # Para russo, placeholder\n                polaridade = 0.0\n                subjetividade = 0.5\n        except ImportError:\n            polaridade = 0.0\n            subjetividade = 0.5\n\n        if polaridade &gt; 0.1:\n            classificacao = 'positivo'\n        elif polaridade &lt; -0.1:\n            classificacao = 'negativo'\n        else:\n            classificacao = 'neutro'\n\n        return Sentimento(\n            polaridade=polaridade,\n            subjetividade=subjetividade,\n            classificacao=classificacao\n        )\n\n    def _palavras_frequentes(self, doc, limite: int = 20) -&gt; List[tuple]:\n        \"\"\"Extrai palavras mais frequentes.\"\"\"\n        palavras = [\n            token.text.lower() for token in doc\n            if not token.is_stop\n            and not token.is_punct\n            and not token.is_space\n            and len(token.text) &gt; 2\n        ]\n\n        contador = Counter(palavras)\n        return contador.most_common(limite)\n\n    def analisar(self,\n                 texto: str,\n                 documento_id: int,\n                 idioma: str = 'ru') -&gt; AnaliseTexto:\n        \"\"\"Analisa texto completo.\"\"\"\n        inicio = time.time()\n\n        # Carregar modelo (lazy)\n        nlp = self._get_model(idioma)\n\n        # Processar texto\n        doc = nlp(texto[:100000])\n\n        # Estat\u00edsticas\n        estatisticas = self._calcular_estatisticas(texto, doc)\n\n        # Entidades\n        entidades = self._extrair_entidades(doc)\n        entidades_agrupadas = self._agrupar_entidades(entidades)\n\n        # Sentimento\n        sentimento = self._analisar_sentimento(texto, idioma)\n\n        # Palavras frequentes\n        palavras_freq = self._palavras_frequentes(doc)\n\n        tempo = time.time() - inicio\n\n        return AnaliseTexto(\n            documento_id=documento_id,\n            idioma=idioma,\n            data_analise=datetime.now(),\n            estatisticas=estatisticas,\n            entidades=entidades,\n            entidades_por_tipo=entidades_agrupadas,\n            sentimento=sentimento,\n            palavras_frequentes=palavras_freq,\n            modelo_utilizado=f\"spacy-{idioma}\",\n            tempo_processamento=tempo\n        )\n</code></pre>"},{"location":"FASE8_ANALISE_TEXTO/#3-gerador-de-nuvem-de-palavras-infrastructureanalysiswordcloud_generatorpy","title":"3. Gerador de Nuvem de Palavras (<code>infrastructure/analysis/wordcloud_generator.py</code>)","text":"<p>Responsabilidade: Gerar imagens de nuvem de palavras.</p> <pre><code>class WordCloudGenerator:\n    \"\"\"\n    Gerador de nuvens de palavras a partir de textos.\n    \"\"\"\n\n    def __init__(self, **kwargs):\n        \"\"\"Inicializa com configura\u00e7\u00f5es flex\u00edveis.\"\"\"\n        self.default_size = kwargs.get('default_size', (800, 400))\n        self.max_words = kwargs.get('max_words', 200)\n        self.background_color = kwargs.get('background_color', 'white')\n        self.width = kwargs.get('width', self.default_size[0])\n        self.height = kwargs.get('height', self.default_size[1])\n\n        self.stopwords = self._carregar_stopwords()\n\n    def _carregar_stopwords(self) -&gt; set:\n        \"\"\"Carrega stopwords de v\u00e1rios idiomas.\"\"\"\n        stopwords = set()\n\n        # Stopwords em russo\n        stopwords_ru = {'\u0438', '\u0432', '\u043d\u0430', '\u0441', '\u043f\u043e', '\u0434\u043b\u044f', '\u0447\u0442\u043e', '\u043a\u0430\u043a', '\u044d\u0442\u043e',\n                        '\u0432\u0435\u0441\u044c', '\u043c\u043e\u0439', '\u0442\u0432\u043e\u0439', '\u0435\u0433\u043e', '\u0435\u0435', '\u0438\u0445', '\u043a', '\u0443', '\u043e',\n                        '\u0438\u0437', '\u0437\u0430', '\u043d\u0430\u0434', '\u043f\u043e\u0434', '\u0430', '\u043d\u043e', '\u0434\u0430', '\u0438\u043b\u0438', '\u0435\u0441\u043b\u0438'}\n\n        # Stopwords em ingl\u00eas\n        try:\n            from wordcloud import STOPWORDS\n            stopwords.update(STOPWORDS)\n        except:\n            pass\n\n        stopwords.update(stopwords_ru)\n        return stopwords\n\n    def gerar(self,\n              texto: str,\n              titulo: str = \"Nuvem de Palavras\",\n              idioma: str = 'ru',\n              max_palavras: Optional[int] = None,\n              largura: Optional[int] = None,\n              altura: Optional[int] = None,\n              salvar_em: Optional[str] = None) -&gt; Optional[Path]:\n        \"\"\"Gera nuvem de palavras a partir do texto.\"\"\"\n        max_words = max_palavras or self.max_words\n        width = largura or self.width\n        height = altura or self.height\n\n        # Processar texto com SpaCy\n        try:\n            if idioma == 'ru':\n                nlp = spacy.load('ru_core_news_sm')\n            else:\n                nlp = spacy.load('en_core_web_sm')\n\n            doc = nlp(texto[:50000])\n\n            palavras = [\n                token.text.lower() for token in doc\n                if not token.is_stop\n                and not token.is_punct\n                and not token.is_space\n                and len(token.text) &gt; 2\n                and token.text.lower() not in self.stopwords\n            ]\n\n            frequencias = Counter(palavras)\n\n        except Exception:\n            # Fallback\n            palavras = texto.lower().split()\n            palavras = [p for p in palavras if len(p) &gt; 2 and p not in self.stopwords]\n            frequencias = Counter(palavras)\n\n        if not frequencias:\n            return None\n\n        # Gerar nuvem\n        wordcloud = WordCloud(\n            width=width,\n            height=height,\n            background_color=self.background_color,\n            max_words=max_words,\n            stopwords=self.stopwords,\n            collocations=False\n        ).generate_from_frequencies(frequencias)\n\n        # Plotar\n        plt.figure(figsize=(width/100, height/100))\n        plt.imshow(wordcloud, interpolation='bilinear')\n        plt.axis('off')\n        plt.title(titulo)\n\n        if salvar_em:\n            caminho = Path(salvar_em)\n            caminho.parent.mkdir(exist_ok=True)\n            plt.savefig(caminho, bbox_inches='tight', dpi=300)\n            plt.close()\n            return caminho\n        else:\n            plt.show()\n            return None\n</code></pre>"},{"location":"FASE8_ANALISE_TEXTO/#4-caso-de-uso-analisardocumento-applicationuse_casesanalisar_textopy","title":"4. Caso de Uso AnalisarDocumento (<code>application/use_cases/analisar_texto.py</code>)","text":"<p>Responsabilidade: Analisar um documento espec\u00edfico.</p> <pre><code>class AnalisarDocumento:\n    \"\"\"\n    Caso de uso para analisar um documento.\n    \"\"\"\n\n    def __init__(self,\n                 repo_doc: RepositorioDocumento,\n                 repo_trad: Optional[RepositorioTraducao] = None,\n                 registry: Optional[ServiceRegistry] = None):\n        self.repo_doc = repo_doc\n        self.repo_trad = repo_trad\n        self.registry = registry or ServiceRegistry()\n\n    def _get_analyzer(self) -&gt; SpacyAnalyzer:\n        \"\"\"Obt\u00e9m analisador spaCy do registry.\"\"\"\n        return self.registry.get('spacy')\n\n    def _get_wordcloud(self) -&gt; WordCloudGenerator:\n        \"\"\"Obt\u00e9m gerador de wordcloud do registry.\"\"\"\n        return self.registry.get('wordcloud')\n\n    def executar(self,\n                 documento_id: int,\n                 idioma: str = 'ru',\n                 gerar_wordcloud: bool = False) -&gt; Optional[AnaliseTexto]:\n        \"\"\"\n        Analisa um documento espec\u00edfico.\n        \"\"\"\n        # 1. Buscar texto\n        if idioma == 'ru':\n            doc = self.repo_doc.buscar_por_id(documento_id)\n            if not doc:\n                return None\n            texto = doc.texto\n        else:\n            if not self.repo_trad:\n                return None\n            traducao = self.repo_trad.buscar_por_documento(documento_id, idioma)\n            if not traducao:\n                return None\n            texto = traducao.texto_traduzido\n\n        # 2. Analisar\n        analyzer = self._get_analyzer()\n        analise = analyzer.analisar(\n            texto=texto,\n            documento_id=documento_id,\n            idioma=idioma\n        )\n\n        # 3. Gerar wordcloud se solicitado\n        if gerar_wordcloud:\n            wordcloud = self._get_wordcloud()\n            nome_arquivo = f\"wordcloud_{documento_id}_{idioma}_{datetime.now().strftime('%Y%m%d_%H%M%S')}.png\"\n            caminho = Path(\"analises\") / nome_arquivo\n            wordcloud.gerar(\n                texto=texto,\n                titulo=f\"Documento {documento_id} - {idioma}\",\n                idioma=idioma,\n                salvar_em=str(caminho)\n            )\n            # Opcional: adicionar caminho \u00e0 an\u00e1lise\n            # analise.wordcloud_path = str(caminho)\n\n        return analise\n</code></pre>"},{"location":"FASE8_ANALISE_TEXTO/#5-caso-de-uso-analisaracervo-applicationuse_casesanalisar_acervopy","title":"5. Caso de Uso AnalisarAcervo (<code>application/use_cases/analisar_acervo.py</code>)","text":"<p>Responsabilidade: An\u00e1lise global do acervo.</p> <pre><code>class AnalisarAcervo:\n    \"\"\"\n    Caso de uso para an\u00e1lise global do acervo.\n    \"\"\"\n\n    def __init__(self,\n                 repo_doc: RepositorioDocumento,\n                 registry: Optional[ServiceRegistry] = None):\n        self.repo_doc = repo_doc\n        self.registry = registry or ServiceRegistry()\n\n    def _get_analyzer(self) -&gt; SpacyAnalyzer:\n        \"\"\"Obt\u00e9m analisador spaCy do registry.\"\"\"\n        return self.registry.get('spacy')\n\n    def _get_wordcloud(self) -&gt; WordCloudGenerator:\n        \"\"\"Obt\u00e9m gerador de wordcloud do registry.\"\"\"\n        return self.registry.get('wordcloud')\n\n    def estatisticas_globais(self) -&gt; Dict:\n        \"\"\"\n        Estat\u00edsticas agregadas de todo o acervo.\n        \"\"\"\n        documentos = self.repo_doc.listar(limite=5000)\n\n        stats = {\n            'total_docs': len(documentos),\n            'total_palavras': 0,\n            'total_caracteres': 0,\n            'media_palavras_por_doc': 0,\n            'documentos_por_tamanho': {\n                'pequeno (&lt;1000 palavras)': 0,\n                'm\u00e9dio (1000-5000 palavras)': 0,\n                'grande (&gt;5000 palavras)': 0\n            },\n            'pessoas_mais_citadas': Counter(),\n            'top_locais': Counter(),\n            'top_organizacoes': Counter(),\n        }\n\n        # Amostra para an\u00e1lise de entidades\n        amostra = documentos[:100]\n\n        for doc in amostra:\n            palavras = doc.texto.split()\n            num_palavras = len(palavras)\n            stats['total_palavras'] += num_palavras\n            stats['total_caracteres'] += len(doc.texto)\n\n            if num_palavras &lt; 1000:\n                stats['documentos_por_tamanho']['pequeno (&lt;1000 palavras)'] += 1\n            elif num_palavras &lt; 5000:\n                stats['documentos_por_tamanho']['m\u00e9dio (1000-5000 palavras)'] += 1\n            else:\n                stats['documentos_por_tamanho']['grande (&gt;5000 palavras)'] += 1\n\n        if stats['total_docs'] &gt; 0:\n            stats['media_palavras_por_doc'] = stats['total_palavras'] / stats['total_docs']\n\n        return stats\n\n    def gerar_wordcloud_geral(self, idioma: str = 'ru') -&gt; Path:\n        \"\"\"\n        Gera nuvem de palavras com todo o acervo.\n        \"\"\"\n        documentos = self.repo_doc.listar(limite=500)\n\n        texto_completo = \"\"\n        for doc in documentos[:100]:\n            texto_completo += doc.texto[:5000] + \"\\n\"\n\n        nome_arquivo = f\"wordcloud_acervo_{idioma}_{datetime.now().strftime('%Y%m%d')}.png\"\n        caminho = Path(\"analises\") / nome_arquivo\n\n        wordcloud = self._get_wordcloud()\n        wordcloud.gerar(\n            texto=texto_completo,\n            titulo=f\"Acervo Completo - {idioma}\",\n            idioma=idioma,\n            max_palavras=200,\n            salvar_em=str(caminho)\n        )\n\n        return caminho\n</code></pre>"},{"location":"FASE8_ANALISE_TEXTO/#6-comandoanalisardocumento-interfaceclicommands_analisepy","title":"6. ComandoAnalisarDocumento (<code>interface/cli/commands_analise.py</code>)","text":"<p>Responsabilidade: Interface para an\u00e1lise individual.</p> <pre><code>class ComandoAnalisarDocumento:\n    \"\"\"Comando para analisar um documento espec\u00edfico.\"\"\"\n\n    def __init__(self, analisar_documento_use_case):\n        self.analisar = analisar_documento_use_case\n        self.presenter = AnalisePresenter()\n\n    def executar(self, documento_id: int):\n        \"\"\"Executa an\u00e1lise interativa.\"\"\"\n        console.print(\"\\n[bold cyan]\ud83d\udd0d AN\u00c1LISE DE DOCUMENTO[/bold cyan]\")\n\n        # 1. Escolher idioma\n        console.print(\"[bold]Idioma para an\u00e1lise:[/bold]\")\n        console.print(\"  [1] \ud83c\uddf7\ud83c\uddfa Original (Russo)\")\n        console.print(\"  [2] \ud83c\uddfa\ud83c\uddf8 Ingl\u00eas (se dispon\u00edvel)\")\n        console.print(\"  [0] Cancelar\")\n\n        opcao = input(\"\\nEscolha: \").strip()\n\n        idiomas = {'1': 'ru', '2': 'en'}\n        if opcao == '0':\n            return\n        if opcao not in idiomas:\n            console.mostrar_erro(\"Op\u00e7\u00e3o inv\u00e1lida!\")\n            return\n\n        idioma = idiomas[opcao]\n\n        # 2. Gerar wordcloud?\n        console.print(\"\\n[bold]Gerar nuvem de palavras?[/bold]\")\n        console.print(\"  [1] Sim\")\n        console.print(\"  [2] N\u00e3o\")\n\n        opcao = input(\"\\nEscolha: \").strip()\n        gerar_wordcloud = (opcao == '1')\n\n        # 3. Confirmar\n        console.print(f\"\\n[bold]Analisando documento {documento_id}...[/bold]\")\n        console.print(f\"  \u2022 Idioma: {idioma}\")\n        console.print(f\"  \u2022 Nuvem: {'Sim' if gerar_wordcloud else 'N\u00e3o'}\")\n\n        confirmar = input(\"\\nConfirmar? (s/N): \").strip().lower()\n        if confirmar != 's':\n            return\n\n        # 4. Analisar\n        try:\n            with console.status(\"[cyan]Processando texto...\"):\n                resultado = console.spinner(\n                    \"Analisando documento...\",\n                    self.analisar.executar,\n                    documento_id,\n                    idioma,\n                    gerar_wordcloud\n                )\n\n            if resultado:\n                self.presenter.mostrar_analise(resultado)\n            else:\n                console.mostrar_erro(\"Documento ou tradu\u00e7\u00e3o n\u00e3o encontrado!\")\n\n        except Exception as e:\n            console.mostrar_erro(f\"Erro na an\u00e1lise: {e}\")\n\n        input(\"\\nPressione Enter para continuar...\")\n</code></pre>"},{"location":"FASE8_ANALISE_TEXTO/#7-comandoanalisaracervo-interfaceclicommands_analisepy","title":"7. ComandoAnalisarAcervo (<code>interface/cli/commands_analise.py</code>)","text":"<p>Responsabilidade: Interface para an\u00e1lise global.</p> <pre><code>class ComandoAnalisarAcervo:\n    \"\"\"Comando para an\u00e1lise global do acervo.\"\"\"\n\n    def __init__(self, analisar_acervo_use_case):\n        self.analisar = analisar_acervo_use_case\n        self.presenter = AnalisePresenter()\n\n    def executar(self):\n        \"\"\"Executa an\u00e1lise global.\"\"\"\n        console.print(\"\\n[bold cyan]\ud83d\udcca AN\u00c1LISE GLOBAL DO ACERVO[/bold cyan]\")\n\n        console.print(\"[bold]Op\u00e7\u00f5es:[/bold]\")\n        console.print(\"  [1] Estat\u00edsticas globais\")\n        console.print(\"  [2] Nuvem de palavras do acervo\")\n        console.print(\"  [0] Cancelar\")\n\n        opcao = input(\"\\nEscolha: \").strip()\n\n        if opcao == '0':\n            return\n\n        elif opcao == '1':\n            with console.status(\"[cyan]Calculando estat\u00edsticas...\"):\n                stats = self.analisar.estatisticas_globais()\n            self.presenter.mostrar_estatisticas_globais(stats)\n\n        elif opcao == '2':\n            console.print(\"\\n[bold]Idioma para nuvem de palavras:[/bold]\")\n            console.print(\"  [1] \ud83c\uddf7\ud83c\uddfa Russo\")\n            console.print(\"  [2] \ud83c\uddfa\ud83c\uddf8 Ingl\u00eas\")\n\n            opcao_idioma = input(\"\\nEscolha: \").strip()\n            idioma = 'ru' if opcao_idioma == '1' else 'en'\n\n            with console.status(\"[cyan]Gerando nuvem de palavras...\"):\n                caminho = self.analisar.gerar_wordcloud_geral(idioma)\n\n            console.mostrar_sucesso(f\"Nuvem de palavras gerada em: {caminho}\")\n\n        input(\"\\nPressione Enter para continuar...\")\n</code></pre>"},{"location":"FASE8_ANALISE_TEXTO/#8-presenter-de-analise-interfaceclipresenters_analisepy","title":"8. Presenter de An\u00e1lise (<code>interface/cli/presenters_analise.py</code>)","text":"<p>Responsabilidade: Formatar resultados de an\u00e1lise para exibi\u00e7\u00e3o.</p> <pre><code>class AnalisePresenter:\n    \"\"\"Formata resultados de an\u00e1lise para exibi\u00e7\u00e3o.\"\"\"\n\n    @staticmethod\n    def mostrar_analise(analise):\n        \"\"\"Exibe an\u00e1lise completa de um documento.\"\"\"\n        # Cabe\u00e7alho\n        console.print(Panel(\n            f\"[bold cyan]\ud83d\udd0d AN\u00c1LISE DO DOCUMENTO {analise.documento_id}[/bold cyan]\",\n            border_style=\"cyan\"\n        ))\n\n        # 1. Estat\u00edsticas b\u00e1sicas\n        console.print(\"\\n[bold]\ud83d\udcca ESTAT\u00cdSTICAS DO TEXTO[/bold]\")\n        stats_table = Table(box=box.SIMPLE)\n        stats_table.add_column(\"M\u00e9trica\", style=\"cyan\")\n        stats_table.add_column(\"Valor\", style=\"white\")\n\n        e = analise.estatisticas\n        stats_table.add_row(\"Total de caracteres\", f\"{e.total_caracteres:,}\")\n        stats_table.add_row(\"Total de palavras\", f\"{e.total_palavras:,}\")\n        stats_table.add_row(\"Total de frases\", f\"{e.total_frases}\")\n        stats_table.add_row(\"Palavras \u00fanicas\", f\"{e.palavras_unicas:,}\")\n        stats_table.add_row(\"Densidade l\u00e9xica\", f\"{e.densidade_lexica:.2f}\")\n\n        console.print(stats_table)\n\n        # 2. Sentimento\n        console.print(\"\\n[bold]\ud83d\ude0a AN\u00c1LISE DE SENTIMENTO[/bold]\")\n        s = analise.sentimento\n        cor = {'positivo': 'green', 'negativo': 'red', 'neutro': 'yellow'}.get(s.classificacao, 'white')\n        console.print(f\"  Classifica\u00e7\u00e3o: [{cor}]{s.classificacao.upper()}[/{cor}]\")\n        console.print(f\"  Polaridade: {s.polaridade:.2f}\")\n        console.print(f\"  Subjetividade: {s.subjetividade:.2f}\")\n\n        # 3. Entidades\n        if analise.entidades_por_tipo:\n            console.print(\"\\n[bold]\ud83c\udff7\ufe0f  ENTIDADES ENCONTRADAS[/bold]\")\n            for tipo, entidades in analise.entidades_por_tipo.items():\n                if entidades:\n                    console.print(f\"\\n  [cyan]{tipo}:[/cyan]\")\n                    for ent in entidades[:10]:\n                        console.print(f\"    \u2022 {ent}\")\n\n        # 4. Palavras mais frequentes\n        if analise.palavras_frequentes:\n            console.print(\"\\n[bold]\ud83d\udcc8 PALAVRAS MAIS FREQUENTES[/bold]\")\n            for i, (palavra, freq) in enumerate(analise.palavras_frequentes[:15], 1):\n                console.print(f\"  {i:2d}. {palavra}: {freq}\")\n\n        # 5. Metadados\n        console.print(\"\\n[dim]\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500[/dim]\")\n        console.print(f\"[dim]Modelo: {analise.modelo_utilizado}[/dim]\")\n        console.print(f\"[dim]Tempo: {analise.tempo_processamento:.2f}s[/dim]\")\n\n    @staticmethod\n    def mostrar_estatisticas_globais(stats):\n        \"\"\"Exibe estat\u00edsticas globais do acervo.\"\"\"\n        console.print(Panel(\n            \"[bold cyan]\ud83d\udcca ESTAT\u00cdSTICAS GLOBAIS DO ACERVO[/bold cyan]\",\n            border_style=\"cyan\"\n        ))\n\n        console.print(f\"\\n\ud83d\udcda Total de documentos: {stats['total_docs']}\")\n        console.print(f\"\ud83d\udcdd Total de palavras: {stats['total_palavras']:,}\")\n        console.print(f\"\ud83d\udcca M\u00e9dia por documento: {stats['media_palavras_por_doc']:.1f}\")\n\n        console.print(\"\\n\ud83d\udccf DISTRIBUI\u00c7\u00c3O POR TAMANHO:\")\n        for cat, total in stats['documentos_por_tamanho'].items():\n            console.print(f\"  \u2022 {cat}: {total}\")\n</code></pre>"},{"location":"FASE8_ANALISE_TEXTO/#fluxo-de-analise","title":"\ud83d\udd04 Fluxo de An\u00e1lise","text":"<pre><code>[Usu\u00e1rio] \u2192 [Menu \u2192 6] \u2192 [ComandoAnalisarDocumento] \u2192 [AnalisarDocumento (caso de uso)]\n    \u2191                                                    |\n    |                                                    \u2193\n    \u2514\u2500\u2500 [Presenter] \u2190 [AnaliseTexto] \u2190 [SpacyAnalyzer] \u2190 [Documento]\n                                           |\n                                           \u2193\n                                   [WordCloudGenerator]\n                                           |\n                                           \u2193\n                                   [Imagem PNG em analises/]\n</code></pre> <p>Passo a passo (an\u00e1lise individual):</p> <ol> <li>Usu\u00e1rio escolhe op\u00e7\u00e3o 6 \u2192 1 no menu</li> <li>Comando pergunta idioma e se quer nuvem de palavras</li> <li>Caso de uso busca documento/tradu\u00e7\u00e3o</li> <li>SpacyAnalyzer carrega modelo (lazy) e analisa texto</li> <li>Estat\u00edsticas, entidades e sentimento s\u00e3o calculados</li> <li>Se solicitado, WordCloudGenerator gera imagem</li> <li>Resultados s\u00e3o formatados pelo presenter</li> <li>Usu\u00e1rio v\u00ea an\u00e1lise no terminal</li> </ol>"},{"location":"FASE8_ANALISE_TEXTO/#funcionalidades-na-ui","title":"\ud83c\udfae Funcionalidades na UI","text":""},{"location":"FASE8_ANALISE_TEXTO/#menu-de-analise","title":"Menu de An\u00e1lise:","text":"<pre><code>\ud83d\udd0d AN\u00c1LISE DE TEXTO\n  [1] Analisar documento espec\u00edfico\n  [2] An\u00e1lise global do acervo\n  [3] Nuvem de palavras do acervo\n  [0] Voltar\n</code></pre>"},{"location":"FASE8_ANALISE_TEXTO/#analise-de-documento-individual","title":"An\u00e1lise de Documento Individual:","text":"<pre><code>\ud83d\udd0d AN\u00c1LISE DO DOCUMENTO 1\n\n\ud83d\udcca ESTAT\u00cdSTICAS DO TEXTO\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 M\u00e9trica                     \u2502 Valor   \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 Total de caracteres         \u2502 12,458  \u2502\n\u2502 Total de palavras           \u2502 1,832   \u2502\n\u2502 Total de frases             \u2502 124     \u2502\n\u2502 Densidade l\u00e9xica            \u2502 0.42    \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\n\ud83d\ude0a AN\u00c1LISE DE SENTIMENTO\n  Classifica\u00e7\u00e3o: NEUTRO\n  Polaridade: 0.02\n\n\ud83c\udff7\ufe0f  ENTIDADES ENCONTRADAS\n  Pessoa:\n    \u2022 \u041b.\u0412. \u041d\u0438\u043a\u043e\u043b\u0430\u0435\u0432\u0430\n    \u2022 \u0418.\u0412. \u0421\u0442\u0430\u043b\u0438\u043d\n  Local:\n    \u2022 \u041b\u0435\u043d\u0438\u043d\u0433\u0440\u0430\u0434\n\n\ud83d\udcc8 PALAVRAS MAIS FREQUENTES\n   1. \u0434\u043e\u043f\u0440\u043e\u0441\u0430: 24\n   2. \u043d\u0438\u043a\u043e\u043b\u0430\u0435\u0432: 18\n   3. \u0432\u043e\u043f\u0440\u043e\u0441: 15\n</code></pre>"},{"location":"FASE8_ANALISE_TEXTO/#nuvem-de-palavras","title":"Nuvem de Palavras:","text":"<ul> <li>Gerada em <code>analises/wordcloud_*.png</code></li> <li>Visualiza\u00e7\u00e3o das palavras mais frequentes</li> </ul>"},{"location":"FASE8_ANALISE_TEXTO/#estrutura-de-arquivos-gerados","title":"\ud83d\udcc2 Estrutura de Arquivos Gerados","text":"<pre><code>analises/\n\u251c\u2500\u2500 wordcloud_1_ru_20260216_123456.png\n\u251c\u2500\u2500 wordcloud_1_en_20260216_123457.png\n\u251c\u2500\u2500 wordcloud_30_en_20260216_223916.png\n\u2514\u2500\u2500 wordcloud_acervo_ru_20260216.png\n</code></pre>"},{"location":"FASE8_ANALISE_TEXTO/#testes-realizados","title":"\ud83e\uddea Testes Realizados","text":"Teste A\u00e7\u00e3o Resultado Esperado Status An\u00e1lise individual 6 \u2192 1 \u2192 ID \u2192 ru Estat\u00edsticas + entidades \u2705 An\u00e1lise com tradu\u00e7\u00e3o 6 \u2192 1 \u2192 ID \u2192 en An\u00e1lise do texto traduzido \u2705 Nuvem de palavras 6 \u2192 3 Imagem gerada em analises/ \u2705 Extra\u00e7\u00e3o de entidades Documento com nomes Pessoas identificadas \u2705 Sentimento Texto neutro Classifica\u00e7\u00e3o neutra \u2705 Estat\u00edsticas globais 6 \u2192 2 \u2192 1 M\u00e9tricas do acervo \u2705"},{"location":"FASE8_ANALISE_TEXTO/#metricas-da-fase","title":"\ud83d\udcca M\u00e9tricas da Fase","text":"M\u00e9trica Valor Novos arquivos 6 Linhas de c\u00f3digo ~800 Modelos de NLP 2 (ru, en) Tipos de entidades 12+ Testes manuais 6 cen\u00e1rios"},{"location":"FASE8_ANALISE_TEXTO/#principios-aplicados","title":"\ud83d\udcda Princ\u00edpios Aplicados","text":"Princ\u00edpio Aplica\u00e7\u00e3o Lazy Loading Modelos carregados apenas quando necess\u00e1rios Single Responsibility Cada classe tem uma fun\u00e7\u00e3o clara Open/Closed Novos idiomas podem ser adicionados Dependency Inversion Casos de uso dependem de interfaces Value Objects Resultados imut\u00e1veis e autocontidos"},{"location":"FASE8_ANALISE_TEXTO/#integracao-com-fases-anteriores-e-futuras","title":"\ud83d\udd17 Integra\u00e7\u00e3o com Fases Anteriores e Futuras","text":"Fase Relacionamento FASE 1 (Domain) Value Objects para an\u00e1lise FASE 2 (Application) Casos de uso estruturados FASE 3 (Infrastructure) Reposit\u00f3rios para dados FASE 4 (CLI) Comandos integrados ao menu FASE 5 (Tradu\u00e7\u00e3o) An\u00e1lise de textos traduzidos FASE 9 (Web) An\u00e1lise via interface web"},{"location":"FASE8_ANALISE_TEXTO/#evolucao-do-codigo","title":"\ud83d\ude80 Evolu\u00e7\u00e3o do C\u00f3digo","text":""},{"location":"FASE8_ANALISE_TEXTO/#antes-codigo-legado","title":"Antes (c\u00f3digo legado)","text":"<pre><code># Sem an\u00e1lise de texto\ndef visualizar_documento(id):\n    print(\"Apenas o texto bruto\")\n</code></pre>"},{"location":"FASE8_ANALISE_TEXTO/#depois-clean-architecture","title":"Depois (Clean Architecture)","text":"<pre><code># An\u00e1lise completa com NLP\nanalise = analyzer.analisar(texto, doc_id)\nprint(f\"Entidades: {analise.entidades}\")\nprint(f\"Sentimento: {analise.sentimento.classificacao}\")\n</code></pre>"},{"location":"FASE8_ANALISE_TEXTO/#metricas-do-projeto-apos-fase-8","title":"\ud83d\udcc8 M\u00e9tricas do Projeto (Ap\u00f3s FASE 8)","text":"<pre><code>\ud83d\udcca DOMAIN LAYER: 5 entidades | 18 testes\n\ud83d\udcca APPLICATION LAYER: 8 casos de uso | 10 testes\n\ud83d\udcca INFRASTRUCTURE LAYER: 6 m\u00f3dulos | 20 testes\n\ud83d\udcca INTERFACE LAYER: 12 m\u00f3dulos | Validada manualmente\n\ud83d\udcca TOTAL: 48 testes automatizados\n</code></pre>"},{"location":"FASE8_ANALISE_TEXTO/#licoes-aprendidas","title":"\ud83d\udd0d Li\u00e7\u00f5es Aprendidas","text":"<ol> <li>Lazy loading \u00e9 essencial: Carregar modelos s\u00f3 quando usados economiza mem\u00f3ria</li> <li>Idiomas diferentes, modelos diferentes: Cada idioma requer seu pr\u00f3prio modelo</li> <li>Fallback \u00e9 necess\u00e1rio: Quando API falha, ter uma alternativa</li> <li>Performance importa: An\u00e1lise de 500 documentos leva tempo</li> <li>Visualiza\u00e7\u00f5es agregam valor: Uma imagem vale mais que mil palavras</li> <li>Entidades revelam padr\u00f5es: Quem s\u00e3o os protagonistas dos documentos</li> </ol>"},{"location":"FASE8_ANALISE_TEXTO/#conclusao-da-fase","title":"\ud83c\udfc1 Conclus\u00e3o da Fase","text":"<p>A FASE 8 entregou um sistema completo de an\u00e1lise de texto com:</p> <p>\u2705 Extra\u00e7\u00e3o de entidades (pessoas, locais, organiza\u00e7\u00f5es) \u2705 Estat\u00edsticas textuais detalhadas \u2705 An\u00e1lise de sentimentos \u2705 Gera\u00e7\u00e3o de nuvens de palavras \u2705 Suporte a russo e ingl\u00eas \u2705 An\u00e1lise individual e global \u2705 Visualiza\u00e7\u00e3o rica no terminal \u2705 Imagens em alta resolu\u00e7\u00e3o \u2705 C\u00f3digo limpo e extens\u00edvel</p>"},{"location":"FASE8_ANALISE_TEXTO/#autor","title":"\ud83d\udc64 Autor","text":"<p>Thiago Ribeiro - Projeto de TCC</p> <sub>FASE 8 conclu\u00edda em 16 de Fevereiro de 2026</sub> <sub>\u2705 Pronto para a FASE 9 - Web Interface</sub> <p>```</p>"},{"location":"FASE9_WEB_INTERFACE/","title":"FASE 9 - Web Interface","text":"**Interface web moderna com FastAPI, templates Jinja2 e gr\u00e1ficos interativos**"},{"location":"FASE9_WEB_INTERFACE/#informacoes-da-fase","title":"\ud83d\udcc5 Informa\u00e7\u00f5es da Fase","text":"Item Descri\u00e7\u00e3o Status \u2705 Conclu\u00edda Data de Conclus\u00e3o 16 de Fevereiro de 2026 Artefatos API FastAPI, Templates HTML, Rotas, Gr\u00e1ficos, CSS Testes 36 cen\u00e1rios manuais Depend\u00eancias FASE 1-8, FastAPI, Uvicorn, Jinja2, Chart.js"},{"location":"FASE9_WEB_INTERFACE/#objetivo","title":"\ud83c\udfaf Objetivo","text":"<p>Implementar uma interface web completa que:</p> <ul> <li>Ofere\u00e7a acesso via navegador a todas as funcionalidades</li> <li>Disponibilize API REST para integra\u00e7\u00e3o</li> <li>Mantenha simetria com a interface CLI</li> <li>Apresente dados com gr\u00e1ficos interativos</li> <li>Seja responsiva e moderna</li> <li>Utilize a mesma arquitetura e casos de uso</li> <li>Forne\u00e7a documenta\u00e7\u00e3o autom\u00e1tica da API</li> </ul>"},{"location":"FASE9_WEB_INTERFACE/#estrutura-criada","title":"\ud83d\udcc1 Estrutura Criada","text":"<pre><code>src/\n\u2514\u2500\u2500 interface/\n    \u2514\u2500\u2500 web/\n        \u251c\u2500\u2500 __init__.py\n        \u251c\u2500\u2500 app.py                          # Aplica\u00e7\u00e3o FastAPI principal\n        \u251c\u2500\u2500 routes/\n        \u2502   \u251c\u2500\u2500 __init__.py\n        \u2502   \u251c\u2500\u2500 documentos.py                # Rotas de documentos\n        \u2502   \u251c\u2500\u2500 analise.py                    # Rotas de an\u00e1lise\n        \u2502   \u251c\u2500\u2500 traducoes.py                  # Rotas de tradu\u00e7\u00f5es\n        \u2502   \u251c\u2500\u2500 estatisticas.py               # Rotas de estat\u00edsticas\n        \u2502   \u2514\u2500\u2500 admin.py                      # Rotas administrativas\n        \u251c\u2500\u2500 templates/\n        \u2502   \u251c\u2500\u2500 base.html                     # Template base\n        \u2502   \u251c\u2500\u2500 index.html                     # P\u00e1gina inicial\n        \u2502   \u251c\u2500\u2500 erro.html                       # P\u00e1gina de erro\n        \u2502   \u251c\u2500\u2500 construcao.html                 # P\u00e1gina em constru\u00e7\u00e3o\n        \u2502   \u251c\u2500\u2500 admin/\n        \u2502   \u2502   \u2514\u2500\u2500 services.html               # Painel de servi\u00e7os\n        \u2502   \u251c\u2500\u2500 documentos/\n        \u2502   \u2502   \u251c\u2500\u2500 lista.html                  # Lista de documentos\n        \u2502   \u2502   \u2514\u2500\u2500 detalhe.html                # Detalhe do documento\n        \u2502   \u251c\u2500\u2500 analise/\n        \u2502   \u2502   \u251c\u2500\u2500 form.html                    # Formul\u00e1rio de an\u00e1lise\n        \u2502   \u2502   \u251c\u2500\u2500 resultado.html               # Resultado da an\u00e1lise\n        \u2502   \u2502   \u2514\u2500\u2500 acervo.html                  # An\u00e1lise global\n        \u2502   \u251c\u2500\u2500 traducoes/\n        \u2502   \u2502   \u251c\u2500\u2500 todas.html                   # Todas as tradu\u00e7\u00f5es\n        \u2502   \u2502   \u251c\u2500\u2500 lista.html                   # Tradu\u00e7\u00f5es de um documento\n        \u2502   \u2502   \u2514\u2500\u2500 detalhe.html                 # Visualiza\u00e7\u00e3o de tradu\u00e7\u00e3o\n        \u2502   \u2514\u2500\u2500 estatisticas/\n        \u2502       \u2514\u2500\u2500 dashboard.html               # Dashboard com gr\u00e1ficos\n        \u2514\u2500\u2500 static/\n            \u251c\u2500\u2500 css/\n            \u2502   \u2514\u2500\u2500 style.css                    # Estilos personalizados\n            \u2514\u2500\u2500 js/\n                \u2514\u2500\u2500 main.js                       # JavaScript principal\n</code></pre>"},{"location":"FASE9_WEB_INTERFACE/#componentes-implementados","title":"\ud83e\udde9 Componentes Implementados","text":""},{"location":"FASE9_WEB_INTERFACE/#1-aplicacao-fastapi-webapppy","title":"1. Aplica\u00e7\u00e3o FastAPI (<code>web/app.py</code>)","text":"<p>Responsabilidade: Configurar e inicializar a aplica\u00e7\u00e3o web.</p> <pre><code>def create_app(config_path: str = \"config.yaml\"):\n    \"\"\"\n    Factory para criar a aplica\u00e7\u00e3o FastAPI com lazy loading.\n    \"\"\"\n    # 1. Carregar configura\u00e7\u00e3o\n    config_file = Path(config_path)\n    config = ApplicationConfig.from_file(config_file if config_file.exists() else None)\n    logger.info(f\"\ud83d\udccb Configura\u00e7\u00e3o carregada (ambiente: {config.environment})\")\n\n    # 2. Criar registry\n    registry = ServiceRegistry()\n\n    # 3. Registrar servi\u00e7os baseado na configura\u00e7\u00e3o\n    for name, svc_config in config.services.items():\n        if not svc_config.enabled:\n            logger.info(f\"\u23f8\ufe0f Servi\u00e7o {name} desabilitado\")\n            continue\n\n        factory = SERVICE_FACTORIES.get(name)\n        if not factory:\n            logger.warning(f\"\u26a0\ufe0f Factory n\u00e3o encontrada: {name}\")\n            continue\n\n        registry.register(\n            name=name,\n            factory=factory,\n            lazy=svc_config.lazy,\n            singleton=svc_config.singleton,\n            **svc_config.options,\n        )\n        logger.info(f\"\u2705 Servi\u00e7o {name} registrado (lazy={svc_config.lazy})\")\n\n    # 4. Inicializar reposit\u00f3rios\n    repo_doc = SQLiteDocumentoRepository()\n    repo_trad = SQLiteTraducaoRepository()\n    logger.info(\"\u2705 Reposit\u00f3rios inicializados\")\n\n    # 5. Inicializar casos de uso\n    listar_use_case = ListarDocumentos(repo_doc).com_traducao_nomes(True)\n    obter_use_case = ObterDocumento(repo_doc, repo_trad).com_traducao_nomes(True)\n    estatisticas_use_case = ObterEstatisticas(repo_doc)\n\n    analisar_doc_use_case = AnalisarDocumento(\n        repo_doc=repo_doc, repo_trad=repo_trad, registry=registry\n    )\n    analisar_acervo_use_case = AnalisarAcervo(repo_doc=repo_doc, registry=registry)\n    traduzir_use_case = TraduzirDocumento(repo_doc=repo_doc, repo_trad=repo_trad, registry=registry)\n\n    # 6. Criar app FastAPI\n    app = FastAPI(\n        title=\"ShowTrials - Documentos Hist\u00f3ricos\",\n        description=\"API para acesso ao acervo de documentos dos processos de Moscou e Leningrado\",\n        version=\"1.0.0\",\n    )\n\n    # 7. Configurar templates e est\u00e1ticos\n    templates = Jinja2Templates(directory=Path(__file__).parent / \"templates\")\n    static_dir = Path(__file__).parent / \"static\"\n    static_dir.mkdir(exist_ok=True)\n    app.mount(\"/static\", StaticFiles(directory=static_dir), name=\"static\")\n\n    # 8. Registrar rotas\n    app.include_router(documentos.router, prefix=\"/documentos\", tags=[\"documentos\"])\n    app.include_router(analise.router, prefix=\"/analise\", tags=[\"an\u00e1lise\"])\n    app.include_router(traducoes.router, prefix=\"/traducoes\", tags=[\"tradu\u00e7\u00f5es\"])\n    app.include_router(estatisticas.router, prefix=\"/estatisticas\", tags=[\"estat\u00edsticas\"])\n    app.include_router(admin.router, prefix=\"/admin\", tags=[\"admin\"])\n\n    # 9. Disponibilizar depend\u00eancias\n    app.state.registry = registry\n    app.state.config = config\n    app.state.repo_doc = repo_doc\n    app.state.repo_trad = repo_trad\n    app.state.listar_use_case = listar_use_case\n    app.state.obter_use_case = obter_use_case\n    app.state.estatisticas_use_case = estatisticas_use_case\n    app.state.analisar_doc_use_case = analisar_doc_use_case\n    app.state.analisar_acervo_use_case = analisar_acervo_use_case\n\n    # 10. Rota de status\n    @app.get(\"/status\")\n    async def service_status():\n        \"\"\"Endpoint para verificar status dos servi\u00e7os.\"\"\"\n        return {\n            \"status\": \"running\",\n            \"environment\": config.environment,\n            \"services\": registry.get_status(),\n        }\n\n    # 11. Rota principal\n    @app.get(\"/\")\n    async def home(request: Request):\n        \"\"\"P\u00e1gina inicial.\"\"\"\n        return templates.TemplateResponse(\n            \"index.html\",\n            {\n                \"request\": request,\n                \"total_docs\": repo_doc.contar(),\n                \"total_trad\": len(repo_trad.listar_por_documento(0)),\n            },\n        )\n\n    logger.info(\"\ud83d\ude80 Aplica\u00e7\u00e3o web inicializada com lazy loading\")\n    return app\n</code></pre>"},{"location":"FASE9_WEB_INTERFACE/#2-rotas-de-documentos-webroutesdocumentospy","title":"2. Rotas de Documentos (<code>web/routes/documentos.py</code>)","text":"<p>Responsabilidade: Endpoints para listagem e visualiza\u00e7\u00e3o de documentos.</p> <pre><code>@router.get(\"/\")\nasync def listar_documentos(\n    request: Request,\n    pagina: int = 1,\n    centro: str = None,\n    tipo: str = None\n):\n    \"\"\"\n    Lista documentos com pagina\u00e7\u00e3o.\n    \"\"\"\n    use_case = request.app.state.listar_use_case\n\n    resultados = use_case.executar(\n        pagina=pagina,\n        limite=15,\n        centro=centro,\n        tipo=tipo\n    )\n\n    return templates.TemplateResponse(\n        \"documentos/lista.html\",\n        {\n            \"request\": request,\n            \"documentos\": resultados['items'],\n            \"total\": resultados['total'],\n            \"pagina\": resultados['pagina'],\n            \"total_paginas\": resultados['total_paginas'],\n            \"centro\": centro,\n            \"tipo\": tipo\n        }\n    )\n\n\n@router.get(\"/{documento_id}\")\nasync def obter_documento(request: Request, documento_id: int):\n    \"\"\"\n    Obt\u00e9m detalhes de um documento.\n    \"\"\"\n    use_case = request.app.state.obter_use_case\n    documento = use_case.executar(documento_id)\n\n    if not documento:\n        return templates.TemplateResponse(\n            \"erro.html\",\n            {\n                \"request\": request,\n                \"mensagem\": f\"Documento {documento_id} n\u00e3o encontrado\",\n                \"voltar\": \"/documentos/\"\n            },\n            status_code=404\n        )\n\n    return templates.TemplateResponse(\n        \"documentos/detalhe.html\",\n        {\n            \"request\": request,\n            \"doc\": documento\n        }\n    )\n\n\n@router.get(\"/{documento_id}/json\")\nasync def obter_documento_json(request: Request, documento_id: int):\n    \"\"\"\n    Obt\u00e9m documento em formato JSON (para API).\n    \"\"\"\n    use_case = request.app.state.obter_use_case\n    documento = use_case.executar(documento_id)\n\n    if not documento:\n        raise HTTPException(status_code=404, detail=\"Documento n\u00e3o encontrado\")\n\n    return documento\n</code></pre>"},{"location":"FASE9_WEB_INTERFACE/#3-rotas-de-analise-webroutesanalisepy","title":"3. Rotas de An\u00e1lise (<code>web/routes/analise.py</code>)","text":"<p>Responsabilidade: Endpoints para an\u00e1lise de texto.</p> <pre><code>@router.get(\"/acervo\")\nasync def analisar_acervo(request: Request):\n    \"\"\"\n    An\u00e1lise global do acervo.\n    \"\"\"\n    try:\n        repo_doc = request.app.state.repo_doc\n        total_docs = repo_doc.contar()\n\n        stats = {\n            \"total_docs\": total_docs,\n            \"total_palavras\": 0,\n            \"media_palavras_por_doc\": 0,\n            \"documentos_por_tamanho\": {\n                \"pequeno (&lt;1000 palavras)\": 0,\n                \"m\u00e9dio (1000-5000 palavras)\": 0,\n                \"grande (&gt;5000 palavras)\": 0\n            },\n            \"pessoas_mais_citadas\": [],\n            \"top_locais\": [],\n            \"top_organizacoes\": []\n        }\n\n        return templates.TemplateResponse(\n            \"analise/acervo.html\",\n            {\"request\": request, \"stats\": stats}\n        )\n    except Exception as e:\n        return templates.TemplateResponse(\n            \"erro.html\",\n            {\n                \"request\": request,\n                \"mensagem\": f\"Erro na an\u00e1lise: {str(e)}\",\n                \"voltar\": \"/\"\n            },\n            status_code=500\n        )\n\n\n@router.get(\"/documento/{documento_id}\")\nasync def analisar_documento_form(request: Request, documento_id: int):\n    \"\"\"\n    Formul\u00e1rio para an\u00e1lise de documento.\n    \"\"\"\n    return templates.TemplateResponse(\n        \"analise/form.html\",\n        {\"request\": request, \"documento_id\": documento_id}\n    )\n\n\n@router.post(\"/documento/{documento_id}\")\nasync def analisar_documento(\n    request: Request,\n    documento_id: int,\n    idioma: str = Form(\"ru\"),\n    gerar_wordcloud: bool = Form(False)\n):\n    \"\"\"\n    Executa an\u00e1lise de documento.\n    \"\"\"\n    use_case = request.app.state.analisar_doc_use_case\n\n    try:\n        resultado = use_case.executar(\n            documento_id=documento_id,\n            idioma=idioma,\n            gerar_wordcloud=gerar_wordcloud\n        )\n\n        if not resultado:\n            return templates.TemplateResponse(\n                \"erro.html\",\n                {\n                    \"request\": request,\n                    \"mensagem\": f\"Documento {documento_id} n\u00e3o encontrado\",\n                    \"voltar\": f\"/documentos/{documento_id}\"\n                },\n                status_code=404\n            )\n\n        return templates.TemplateResponse(\n            \"analise/resultado.html\",\n            {\n                \"request\": request,\n                \"analise\": resultado,\n                \"documento_id\": documento_id\n            }\n        )\n    except Exception as e:\n        return templates.TemplateResponse(\n            \"erro.html\",\n            {\n                \"request\": request,\n                \"mensagem\": f\"Erro na an\u00e1lise: {str(e)}\",\n                \"voltar\": f\"/documentos/{documento_id}\"\n            },\n            status_code=500\n        )\n</code></pre>"},{"location":"FASE9_WEB_INTERFACE/#4-rotas-de-traducoes-webroutestraducoespy","title":"4. Rotas de Tradu\u00e7\u00f5es (<code>web/routes/traducoes.py</code>)","text":"<p>Responsabilidade: Endpoints para visualiza\u00e7\u00e3o de tradu\u00e7\u00f5es.</p> <pre><code>@router.get(\"/\")\nasync def listar_todas_traducoes(request: Request):\n    \"\"\"\n    Lista todas as tradu\u00e7\u00f5es do acervo.\n    \"\"\"\n    return templates.TemplateResponse(\n        \"traducoes/todas.html\",\n        {\n            \"request\": request,\n            \"mensagem\": \"Funcionalidade em desenvolvimento\"\n        }\n    )\n\n\n@router.get(\"/documento/{documento_id}\")\nasync def listar_traducoes(request: Request, documento_id: int):\n    \"\"\"\n    Lista tradu\u00e7\u00f5es de um documento.\n    \"\"\"\n    try:\n        repo_trad = request.app.state.repo_trad\n        repo_doc = request.app.state.repo_doc\n\n        documento = repo_doc.buscar_por_id(documento_id)\n        if not documento:\n            return templates.TemplateResponse(\n                \"erro.html\",\n                {\n                    \"request\": request,\n                    \"mensagem\": f\"Documento {documento_id} n\u00e3o encontrado\",\n                    \"voltar\": \"/documentos/\"\n                },\n                status_code=404\n            )\n\n        traducoes = repo_trad.listar_por_documento(documento_id)\n\n        return templates.TemplateResponse(\n            \"traducoes/lista.html\",\n            {\n                \"request\": request,\n                \"documento_id\": documento_id,\n                \"documento_titulo\": documento.titulo,\n                \"traducoes\": traducoes\n            }\n        )\n    except Exception as e:\n        return templates.TemplateResponse(\n            \"erro.html\",\n            {\n                \"request\": request,\n                \"mensagem\": f\"Erro: {str(e)}\",\n                \"voltar\": f\"/documentos/{documento_id}\"\n            },\n            status_code=500\n        )\n\n\n@router.get(\"/documento/{documento_id}/{idioma}\")\nasync def ver_traducao(request: Request, documento_id: int, idioma: str):\n    \"\"\"\n    Visualiza uma tradu\u00e7\u00e3o espec\u00edfica.\n    \"\"\"\n    try:\n        repo_trad = request.app.state.repo_trad\n        repo_doc = request.app.state.repo_doc\n\n        traducao = repo_trad.buscar_por_documento(documento_id, idioma)\n        if not traducao:\n            return templates.TemplateResponse(\n                \"erro.html\",\n                {\n                    \"request\": request,\n                    \"mensagem\": f\"Tradu\u00e7\u00e3o {idioma} n\u00e3o encontrada\",\n                    \"voltar\": f\"/traducoes/documento/{documento_id}\"\n                },\n                status_code=404\n            )\n\n        documento = repo_doc.buscar_por_id(documento_id)\n\n        return templates.TemplateResponse(\n            \"traducoes/detalhe.html\",\n            {\n                \"request\": request,\n                \"traducao\": traducao,\n                \"documento\": documento,\n                \"idioma\": idioma\n            }\n        )\n    except Exception as e:\n        return templates.TemplateResponse(\n            \"erro.html\",\n            {\n                \"request\": request,\n                \"mensagem\": f\"Erro: {str(e)}\",\n                \"voltar\": f\"/traducoes/documento/{documento_id}\"\n            },\n            status_code=500\n        )\n</code></pre>"},{"location":"FASE9_WEB_INTERFACE/#5-rotas-de-estatisticas-webroutesestatisticaspy","title":"5. Rotas de Estat\u00edsticas (<code>web/routes/estatisticas.py</code>)","text":"<p>Responsabilidade: Endpoints para estat\u00edsticas e dashboard.</p> <pre><code>@router.get(\"/\")\nasync def estatisticas(request: Request):\n    \"\"\"\n    Dashboard de estat\u00edsticas.\n    \"\"\"\n    use_case = request.app.state.estatisticas_use_case\n    stats = use_case.executar()\n\n    return templates.TemplateResponse(\n        \"estatisticas/dashboard.html\",\n        {\n            \"request\": request,\n            \"stats\": stats\n        }\n    )\n\n\n@router.get(\"/json\")\nasync def estatisticas_json(request: Request):\n    \"\"\"\n    Estat\u00edsticas em formato JSON.\n    \"\"\"\n    use_case = request.app.state.estatisticas_use_case\n    stats = use_case.executar()\n\n    return {\n        \"total_documentos\": stats.total_documentos,\n        \"total_traducoes\": stats.total_traducoes,\n        \"por_centro\": stats.documentos_por_centro,\n        \"por_tipo\": stats.documentos_por_tipo,\n        \"pessoas_frequentes\": [\n            {\"nome\": nome_en, \"frequencia\": count}\n            for nome_ru, count, nome_en in stats.pessoas_frequentes[:10]\n        ]\n    }\n</code></pre>"},{"location":"FASE9_WEB_INTERFACE/#6-rotas-administrativas-webroutesadminpy","title":"6. Rotas Administrativas (<code>web/routes/admin.py</code>)","text":"<p>Responsabilidade: Painel de controle e gerenciamento de servi\u00e7os.</p> <pre><code>@router.get(\"/services\")\nasync def admin_services(request: Request):\n    \"\"\"\n    Painel de controle dos servi\u00e7os.\n    \"\"\"\n    registry = request.app.state.registry\n    config = request.app.state.config\n\n    status = registry.get_status()\n\n    return templates.TemplateResponse(\n        \"admin/services.html\",\n        {\n            \"request\": request,\n            \"status\": status,\n            \"config\": config\n        }\n    )\n\n\n@router.post(\"/services/{name}/clear-cache\")\nasync def clear_service_cache(request: Request, name: str):\n    \"\"\"\n    Limpa cache de um servi\u00e7o (for\u00e7a recarga).\n    \"\"\"\n    registry = request.app.state.registry\n\n    try:\n        registry.clear_cache(name)\n        return {\"status\": \"ok\", \"message\": f\"Cache limpo para {name}\"}\n    except Exception as e:\n        raise HTTPException(status_code=500, detail=str(e))\n</code></pre>"},{"location":"FASE9_WEB_INTERFACE/#templates-html","title":"\ud83c\udfa8 Templates HTML","text":""},{"location":"FASE9_WEB_INTERFACE/#template-base-templatesbasehtml","title":"Template Base (<code>templates/base.html</code>)","text":"<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html lang=\"pt-BR\"&gt;\n&lt;head&gt;\n    &lt;meta charset=\"UTF-8\"&gt;\n    &lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"&gt;\n    &lt;title&gt;ShowTrials - {% block title %}Documentos Hist\u00f3ricos{% endblock %}&lt;/title&gt;\n    &lt;link href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css\" rel=\"stylesheet\"&gt;\n    &lt;link href=\"/static/css/style.css\" rel=\"stylesheet\"&gt;\n&lt;/head&gt;\n&lt;body&gt;\n    &lt;nav class=\"navbar navbar-expand-lg navbar-dark bg-dark\"&gt;\n        &lt;div class=\"container\"&gt;\n            &lt;a class=\"navbar-brand\" href=\"/\"&gt;\ud83c\udfdb\ufe0f ShowTrials&lt;/a&gt;\n            &lt;button class=\"navbar-toggler\" type=\"button\" data-bs-toggle=\"collapse\" data-bs-target=\"#navbarNav\"&gt;\n                &lt;span class=\"navbar-toggler-icon\"&gt;&lt;/span&gt;\n            &lt;/button&gt;\n            &lt;div class=\"collapse navbar-collapse\" id=\"navbarNav\"&gt;\n                &lt;ul class=\"navbar-nav\"&gt;\n                    &lt;li class=\"nav-item\"&gt;\n                        &lt;a class=\"nav-link\" href=\"/documentos/\"&gt;\ud83d\udccb Documentos&lt;/a&gt;\n                    &lt;/li&gt;\n                    &lt;li class=\"nav-item\"&gt;\n                        &lt;a class=\"nav-link\" href=\"/estatisticas/\"&gt;\ud83d\udcca Estat\u00edsticas&lt;/a&gt;\n                    &lt;/li&gt;\n                    &lt;li class=\"nav-item\"&gt;\n                        &lt;a class=\"nav-link\" href=\"/analise/acervo\"&gt;\ud83d\udd0d An\u00e1lise&lt;/a&gt;\n                    &lt;/li&gt;\n                    &lt;li class=\"nav-item\"&gt;\n                        &lt;a class=\"nav-link\" href=\"/traducoes/\"&gt;\ud83c\udf10 Tradu\u00e7\u00f5es&lt;/a&gt;\n                    &lt;/li&gt;\n                &lt;/ul&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n    &lt;/nav&gt;\n\n    &lt;main class=\"container mt-4\"&gt;\n        {% block content %}{% endblock %}\n    &lt;/main&gt;\n\n    &lt;footer class=\"footer mt-5 py-3 bg-light\"&gt;\n        &lt;div class=\"container text-center\"&gt;\n            &lt;span class=\"text-muted\"&gt;ShowTrials - Projeto de TCC \u00a9 2026&lt;/span&gt;\n        &lt;/div&gt;\n    &lt;/footer&gt;\n\n    &lt;script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js\"&gt;&lt;/script&gt;\n    &lt;script src=\"https://cdn.jsdelivr.net/npm/chart.js\"&gt;&lt;/script&gt;\n    &lt;script src=\"/static/js/main.js\"&gt;&lt;/script&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>"},{"location":"FASE9_WEB_INTERFACE/#pagina-inicial-templatesindexhtml","title":"P\u00e1gina Inicial (<code>templates/index.html</code>)","text":"<pre><code>{% extends \"base.html\" %}\n\n{% block title %}In\u00edcio{% endblock %}\n\n{% block content %}\n&lt;div class=\"row\"&gt;\n    &lt;div class=\"col-md-12 text-center mb-5\"&gt;\n        &lt;h1 class=\"display-4\"&gt;\ud83d\udcda ShowTrials&lt;/h1&gt;\n        &lt;p class=\"lead\"&gt;Sistema de gest\u00e3o de documentos hist\u00f3ricos dos processos de Moscou e Leningrado&lt;/p&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n\n&lt;div class=\"row\"&gt;\n    &lt;div class=\"col-md-4\"&gt;\n        &lt;div class=\"card text-center\"&gt;\n            &lt;div class=\"card-body\"&gt;\n                &lt;h5 class=\"card-title\"&gt;\ud83d\udccb Documentos&lt;/h5&gt;\n                &lt;p class=\"display-4\"&gt;{{ total_docs }}&lt;/p&gt;\n                &lt;p class=\"card-text\"&gt;documentos no acervo&lt;/p&gt;\n                &lt;a href=\"/documentos/\" class=\"btn btn-primary\"&gt;Ver todos&lt;/a&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n    &lt;div class=\"col-md-4\"&gt;\n        &lt;div class=\"card text-center\"&gt;\n            &lt;div class=\"card-body\"&gt;\n                &lt;h5 class=\"card-title\"&gt;\ud83c\udf10 Tradu\u00e7\u00f5es&lt;/h5&gt;\n                &lt;p class=\"display-4\"&gt;{{ total_trad }}&lt;/p&gt;\n                &lt;p class=\"card-text\"&gt;tradu\u00e7\u00f5es realizadas&lt;/p&gt;\n                &lt;a href=\"/analise/acervo\" class=\"btn btn-success\"&gt;An\u00e1lises&lt;/a&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n    &lt;div class=\"col-md-4\"&gt;\n        &lt;div class=\"card text-center\"&gt;\n            &lt;div class=\"card-body\"&gt;\n                &lt;h5 class=\"card-title\"&gt;\ud83d\udcca Estat\u00edsticas&lt;/h5&gt;\n                &lt;p class=\"display-4\"&gt;\ud83d\udd0d&lt;/p&gt;\n                &lt;p class=\"card-text\"&gt;m\u00e9tricas do acervo&lt;/p&gt;\n                &lt;a href=\"/estatisticas/\" class=\"btn btn-info\"&gt;Ver gr\u00e1ficos&lt;/a&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n{% endblock %}\n</code></pre>"},{"location":"FASE9_WEB_INTERFACE/#lista-de-documentos-templatesdocumentoslistahtml","title":"Lista de Documentos (<code>templates/documentos/lista.html</code>)","text":"<pre><code>{% extends \"base.html\" %}\n\n{% block title %}Documentos{% endblock %}\n\n{% block content %}\n&lt;h2&gt;\ud83d\udccb Documentos&lt;/h2&gt;\n\n&lt;div class=\"row mb-3\"&gt;\n    &lt;div class=\"col-md-6\"&gt;\n        &lt;div class=\"btn-group\"&gt;\n            &lt;a href=\"/documentos/?centro=lencenter\" class=\"btn btn-outline-primary {% if centro == 'lencenter' %}active{% endif %}\"&gt;\n                Leningrad\n            &lt;/a&gt;\n            &lt;a href=\"/documentos/?centro=moscenter\" class=\"btn btn-outline-primary {% if centro == 'moscenter' %}active{% endif %}\"&gt;\n                Moscow\n            &lt;/a&gt;\n            &lt;a href=\"/documentos/\" class=\"btn btn-outline-secondary {% if not centro %}active{% endif %}\"&gt;\n                Todos\n            &lt;/a&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n\n&lt;table class=\"table table-striped table-hover\"&gt;\n    &lt;thead&gt;\n        &lt;tr&gt;\n            &lt;th&gt;ID&lt;/th&gt;\n            &lt;th&gt;Tipo&lt;/th&gt;\n            &lt;th&gt;Data&lt;/th&gt;\n            &lt;th&gt;Pessoa&lt;/th&gt;\n            &lt;th&gt;T\u00edtulo&lt;/th&gt;\n            &lt;th&gt;A\u00e7\u00f5es&lt;/th&gt;\n        &lt;/tr&gt;\n    &lt;/thead&gt;\n    &lt;tbody&gt;\n        {% for doc in documentos %}\n        &lt;tr&gt;\n            &lt;td&gt;{{ doc.id }}&lt;/td&gt;\n            &lt;td&gt;\n                {% if doc.tipo == 'interrogatorio' %}\ud83d\udd0d\n                {% elif doc.tipo == 'carta' %}\u2709\ufe0f\n                {% elif doc.tipo == 'acareacao' %}\u2696\ufe0f\n                {% elif doc.tipo == 'acusacao' %}\ud83d\udcdc\n                {% else %}\ud83d\udcc4{% endif %}\n                {{ doc.tipo_descricao or 'Desconhecido' }}\n            &lt;/td&gt;\n            &lt;td&gt;{{ doc.data_original or 'N/D' }}&lt;/td&gt;\n            &lt;td&gt;{{ doc.pessoa_principal_en or doc.pessoa_principal or '' }}&lt;/td&gt;\n            &lt;td&gt;{{ doc.titulo[:50] }}...&lt;/td&gt;\n            &lt;td&gt;\n                &lt;a href=\"/documentos/{{ doc.id }}\" class=\"btn btn-sm btn-info\"&gt;Ver&lt;/a&gt;\n                &lt;a href=\"/analise/documento/{{ doc.id }}\" class=\"btn btn-sm btn-success\"&gt;Analisar&lt;/a&gt;\n            &lt;/td&gt;\n        &lt;/tr&gt;\n        {% endfor %}\n    &lt;/tbody&gt;\n&lt;/table&gt;\n\n&lt;nav aria-label=\"Pagina\u00e7\u00e3o\"&gt;\n    &lt;ul class=\"pagination\"&gt;\n        {% for p in range(1, total_paginas + 1) %}\n        &lt;li class=\"page-item {% if p == pagina %}active{% endif %}\"&gt;\n            &lt;a class=\"page-link\" href=\"/documentos/?pagina={{ p }}{% if centro %}&amp;centro={{ centro }}{% endif %}\"&gt;\n                {{ p }}\n            &lt;/a&gt;\n        &lt;/li&gt;\n        {% endfor %}\n    &lt;/ul&gt;\n&lt;/nav&gt;\n{% endblock %}\n</code></pre>"},{"location":"FASE9_WEB_INTERFACE/#dashboard-de-estatisticas-templatesestatisticasdashboardhtml","title":"Dashboard de Estat\u00edsticas (<code>templates/estatisticas/dashboard.html</code>)","text":"<pre><code>{% extends \"base.html\" %}\n\n{% block title %}Estat\u00edsticas{% endblock %}\n\n{% block content %}\n&lt;div class=\"row\"&gt;\n    &lt;div class=\"col-md-12\"&gt;\n        &lt;h2&gt;\ud83d\udcca Estat\u00edsticas do Acervo&lt;/h2&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n\n&lt;div class=\"row mt-4\"&gt;\n    &lt;div class=\"col-md-4\"&gt;\n        &lt;div class=\"card text-white bg-primary mb-3\"&gt;\n            &lt;div class=\"card-body\"&gt;\n                &lt;h5 class=\"card-title\"&gt;Total de Documentos&lt;/h5&gt;\n                &lt;p class=\"display-4\"&gt;{{ stats.total_documentos }}&lt;/p&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n    &lt;div class=\"col-md-4\"&gt;\n        &lt;div class=\"card text-white bg-success mb-3\"&gt;\n            &lt;div class=\"card-body\"&gt;\n                &lt;h5 class=\"card-title\"&gt;Total de Tradu\u00e7\u00f5es&lt;/h5&gt;\n                &lt;p class=\"display-4\"&gt;{{ stats.total_traducoes }}&lt;/p&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n    &lt;div class=\"col-md-4\"&gt;\n        &lt;div class=\"card text-white bg-info mb-3\"&gt;\n            &lt;div class=\"card-body\"&gt;\n                &lt;h5 class=\"card-title\"&gt;Percentual Traduzido&lt;/h5&gt;\n                &lt;p class=\"display-4\"&gt;{{ \"%.1f\"|format(stats.percentual_traduzido) }}%&lt;/p&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n\n&lt;div class=\"row mt-4\"&gt;\n    &lt;div class=\"col-md-6\"&gt;\n        &lt;div class=\"card\"&gt;\n            &lt;div class=\"card-header\"&gt;\n                \ud83c\udfdb\ufe0f Documentos por Centro\n            &lt;/div&gt;\n            &lt;div class=\"card-body\"&gt;\n                &lt;canvas id=\"graficoCentro\"&gt;&lt;/canvas&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n    &lt;div class=\"col-md-6\"&gt;\n        &lt;div class=\"card\"&gt;\n            &lt;div class=\"card-header\"&gt;\n                \ud83d\udccb Documentos por Tipo\n            &lt;/div&gt;\n            &lt;div class=\"card-body\"&gt;\n                &lt;canvas id=\"graficoTipo\"&gt;&lt;/canvas&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n\n&lt;div class=\"row mt-4\"&gt;\n    &lt;div class=\"col-md-6\"&gt;\n        &lt;div class=\"card\"&gt;\n            &lt;div class=\"card-header\"&gt;\n                \ud83d\udc64 Pessoas Mais Frequentes\n            &lt;/div&gt;\n            &lt;div class=\"card-body\"&gt;\n                &lt;table class=\"table\"&gt;\n                    &lt;thead&gt;\n                        &lt;tr&gt;\n                            &lt;th&gt;#&lt;/th&gt;\n                            &lt;th&gt;Nome&lt;/th&gt;\n                            &lt;th&gt;Frequ\u00eancia&lt;/th&gt;\n                        &lt;/tr&gt;\n                    &lt;/thead&gt;\n                    &lt;tbody&gt;\n                        {% for nome_ru, count, nome_en in stats.pessoas_frequentes[:10] %}\n                        &lt;tr&gt;\n                            &lt;td&gt;{{ loop.index }}&lt;/td&gt;\n                            &lt;td&gt;{{ nome_en }}&lt;/td&gt;\n                            &lt;td&gt;&lt;span class=\"badge bg-primary\"&gt;{{ count }}&lt;/span&gt;&lt;/td&gt;\n                        &lt;/tr&gt;\n                        {% endfor %}\n                    &lt;/tbody&gt;\n                &lt;/table&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n    &lt;div class=\"col-md-6\"&gt;\n        &lt;div class=\"card\"&gt;\n            &lt;div class=\"card-header\"&gt;\n                \u2709\ufe0f Documentos Especiais\n            &lt;/div&gt;\n            &lt;div class=\"card-body\"&gt;\n                &lt;table class=\"table\"&gt;\n                    &lt;tr&gt;\n                        &lt;td&gt;Cartas&lt;/td&gt;\n                        &lt;td class=\"text-end\"&gt;&lt;span class=\"badge bg-primary\"&gt;{{ stats.cartas }}&lt;/span&gt;&lt;/td&gt;\n                    &lt;/tr&gt;\n                    &lt;tr&gt;\n                        &lt;td&gt;Declara\u00e7\u00f5es&lt;/td&gt;\n                        &lt;td class=\"text-end\"&gt;&lt;span class=\"badge bg-primary\"&gt;{{ stats.declaracoes }}&lt;/span&gt;&lt;/td&gt;\n                    &lt;/tr&gt;\n                    &lt;tr&gt;\n                        &lt;td&gt;Relat\u00f3rios NKVD&lt;/td&gt;\n                        &lt;td class=\"text-end\"&gt;&lt;span class=\"badge bg-primary\"&gt;{{ stats.relatorios }}&lt;/span&gt;&lt;/td&gt;\n                    &lt;/tr&gt;\n                    &lt;tr&gt;\n                        &lt;td&gt;Acarea\u00e7\u00f5es&lt;/td&gt;\n                        &lt;td class=\"text-end\"&gt;&lt;span class=\"badge bg-primary\"&gt;{{ stats.acareacoes }}&lt;/span&gt;&lt;/td&gt;\n                    &lt;/tr&gt;\n                &lt;/table&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n\n&lt;script&gt;\ndocument.addEventListener('DOMContentLoaded', function() {\n    // Gr\u00e1fico de centros\n    new Chart(document.getElementById('graficoCentro'), {\n        type: 'doughnut',\n        data: {\n            labels: ['Leningrad', 'Moscow'],\n            datasets: [{\n                data: [\n                    {{ stats.documentos_por_centro.get('lencenter', 0) }},\n                    {{ stats.documentos_por_centro.get('moscenter', 0) }}\n                ],\n                backgroundColor: ['#17a2b8', '#6f42c1']\n            }]\n        }\n    });\n\n    // Gr\u00e1fico de tipos\n    new Chart(document.getElementById('graficoTipo'), {\n        type: 'bar',\n        data: {\n            labels: [{% for tipo, count in stats.documentos_por_tipo.items() %}'{{ tipo }}',{% endfor %}],\n            datasets: [{\n                label: 'Quantidade',\n                data: [{% for tipo, count in stats.documentos_por_tipo.items() %}{{ count }},{% endfor %}],\n                backgroundColor: '#28a745'\n            }]\n        }\n    });\n});\n&lt;/script&gt;\n{% endblock %}\n</code></pre>"},{"location":"FASE9_WEB_INTERFACE/#css-personalizado-staticcssstylecss","title":"\ud83c\udfa8 CSS Personalizado (<code>static/css/style.css</code>)","text":"<pre><code>:root {\n    --primary-color: #2c3e50;\n    --secondary-color: #3498db;\n    --success-color: #27ae60;\n    --warning-color: #f39c12;\n    --danger-color: #e74c3c;\n    --dark-bg: #34495e;\n}\n\nbody {\n    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n    min-height: 100vh;\n    display: flex;\n    flex-direction: column;\n}\n\nmain.container {\n    background: white;\n    border-radius: 15px;\n    padding: 2rem;\n    box-shadow: 0 10px 30px rgba(0,0,0,0.2);\n    margin-top: 2rem;\n    margin-bottom: 2rem;\n    flex: 1;\n}\n\n.navbar {\n    box-shadow: 0 2px 10px rgba(0,0,0,0.1);\n}\n\n.navbar-brand {\n    font-size: 1.8rem;\n    font-weight: bold;\n    background: linear-gradient(135deg, #fff 0%, #e0e0e0 100%);\n    -webkit-background-clip: text;\n    -webkit-text-fill-color: transparent;\n    background-clip: text;\n}\n\n.card {\n    border: none;\n    border-radius: 10px;\n    box-shadow: 0 5px 15px rgba(0,0,0,0.08);\n    transition: transform 0.3s ease;\n}\n\n.card:hover {\n    transform: translateY(-5px);\n    box-shadow: 0 8px 25px rgba(0,0,0,0.15);\n}\n\n.card-header {\n    border-radius: 10px 10px 0 0 !important;\n    font-weight: 600;\n}\n\n.metric-card {\n    text-align: center;\n    padding: 1.8rem;\n    border-radius: 15px;\n    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n    color: white;\n    box-shadow: 0 10px 20px rgba(102,126,234,0.3);\n    transition: all 0.3s ease;\n}\n\n.metric-card:hover {\n    transform: scale(1.05);\n    box-shadow: 0 15px 30px rgba(102,126,234,0.4);\n}\n\n.metric-card h3 {\n    font-size: 3rem;\n    font-weight: bold;\n    margin-bottom: 0.5rem;\n}\n\n.metric-card p {\n    font-size: 1.1rem;\n    opacity: 0.9;\n    margin-bottom: 0;\n}\n\n.btn {\n    border-radius: 8px;\n    padding: 0.5rem 1.5rem;\n    font-weight: 500;\n    transition: all 0.3s ease;\n}\n\n.btn:hover {\n    transform: translateY(-2px);\n    box-shadow: 0 5px 15px rgba(0,0,0,0.2);\n}\n\n.table {\n    border-radius: 10px;\n    overflow: hidden;\n}\n\n.table thead th {\n    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n    color: white;\n    border: none;\n    font-weight: 600;\n}\n\n.badge {\n    padding: 0.5rem 1rem;\n    border-radius: 20px;\n    font-weight: 500;\n}\n\n.footer {\n    margin-top: auto;\n    background: rgba(255,255,255,0.9);\n    backdrop-filter: blur(10px);\n    border-top: 1px solid rgba(0,0,0,0.1);\n}\n\n@keyframes fadeIn {\n    from { opacity: 0; transform: translateY(20px); }\n    to { opacity: 1; transform: translateY(0); }\n}\n\n.card, .metric-card, .alert {\n    animation: fadeIn 0.5s ease-out;\n}\n\n@media (max-width: 768px) {\n    main.container {\n        padding: 1rem;\n        margin-top: 1rem;\n    }\n\n    .metric-card {\n        margin-bottom: 1rem;\n    }\n\n    .metric-card h3 {\n        font-size: 2rem;\n    }\n}\n\n::-webkit-scrollbar {\n    width: 10px;\n}\n\n::-webkit-scrollbar-track {\n    background: #f1f1f1;\n    border-radius: 5px;\n}\n\n::-webkit-scrollbar-thumb {\n    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n    border-radius: 5px;\n}\n\n::-webkit-scrollbar-thumb:hover {\n    background: linear-gradient(135deg, #764ba2 0%, #667eea 100%);\n}\n</code></pre>"},{"location":"FASE9_WEB_INTERFACE/#mapeamento-cli-web","title":"\ud83d\udcca Mapeamento CLI \u2194 Web","text":"Funcionalidade CLI Web Listar documentos Menu \u2192 1 <code>/documentos/</code> Filtrar por centro Menu \u2192 2 <code>?centro=lencenter</code> Visualizar documento Digitar ID <code>/documentos/1</code> Estat\u00edsticas Menu \u2192 4 <code>/estatisticas/</code> Relat\u00f3rios Menu \u2192 5 (via CLI) An\u00e1lise individual Menu \u2192 6 \u2192 1 <code>/analise/documento/1</code> An\u00e1lise do acervo Menu \u2192 6 \u2192 2 <code>/analise/acervo</code> Nuvem de palavras Menu \u2192 6 \u2192 3 <code>/analise/acervo/wordcloud</code> Ver tradu\u00e7\u00f5es Tecla 't' <code>/traducoes/documento/1</code> Painel admin - <code>/admin/services</code>"},{"location":"FASE9_WEB_INTERFACE/#fluxo-de-dados-na-web","title":"\ud83d\udd04 Fluxo de Dados na Web","text":"<pre><code>[Navegador] \u2192 [Rota FastAPI] \u2192 [Caso de Uso] \u2192 [Reposit\u00f3rio]\n     \u2191              \u2193                \u2193               \u2193\n     \u2514\u2500\u2500 [Template] \u2190 [DTO] \u2190 [Entidade] \u2190 [SQLite]\n</code></pre> <p>Exemplo pr\u00e1tico (listar documentos):</p> <pre><code>1. Usu\u00e1rio acessa /documentos/?pagina=2\n2. Rota extrai par\u00e2metros (pagina=2)\n3. Rota chama listar_use_case.executar(pagina=2)\n4. Caso de uso calcula offset e chama repo.listar()\n5. Reposit\u00f3rio retorna entidades\n6. Caso de uso converte para DTOs\n7. Template renderiza lista.html com os DTOs\n8. Usu\u00e1rio v\u00ea tabela de documentos\n</code></pre>"},{"location":"FASE9_WEB_INTERFACE/#testes-realizados","title":"\ud83e\uddea Testes Realizados","text":"Teste A\u00e7\u00e3o Resultado Esperado Status P\u00e1gina inicial <code>/</code> Cards com totais \u2705 Lista documentos <code>/documentos/</code> Tabela paginada \u2705 Filtro centro <code>/documentos/?centro=lencenter</code> Apenas Leningrad \u2705 Detalhe documento <code>/documentos/1</code> Metadados + conte\u00fado \u2705 JSON documento <code>/documentos/1/json</code> Dados em JSON \u2705 Dashboard <code>/estatisticas/</code> Gr\u00e1ficos e tabelas \u2705 Estat\u00edsticas JSON <code>/estatisticas/json</code> Dados em JSON \u2705 An\u00e1lise formul\u00e1rio <code>/analise/documento/1</code> Formul\u00e1rio de an\u00e1lise \u2705 An\u00e1lise POST Submeter formul\u00e1rio Resultados \u2705 An\u00e1lise acervo <code>/analise/acervo</code> Estat\u00edsticas globais \u2705 Lista tradu\u00e7\u00f5es <code>/traducoes/documento/1</code> Cards de tradu\u00e7\u00f5es \u2705 Ver tradu\u00e7\u00e3o <code>/traducoes/documento/1/en</code> Conte\u00fado traduzido \u2705 Painel admin <code>/admin/services</code> Status dos servi\u00e7os \u2705 Status API <code>/status</code> JSON com status \u2705 Rota inexistente <code>/naoexiste</code> P\u00e1gina de erro \u2705"},{"location":"FASE9_WEB_INTERFACE/#metricas-da-fase","title":"\ud83d\udcca M\u00e9tricas da Fase","text":"M\u00e9trica Valor Rotas implementadas 15+ Templates HTML 15+ Arquivos est\u00e1ticos 3 Linhas de c\u00f3digo ~1500 Testes manuais 36 cen\u00e1rios Documenta\u00e7\u00e3o autom\u00e1tica Swagger UI"},{"location":"FASE9_WEB_INTERFACE/#principios-aplicados","title":"\ud83d\udcda Princ\u00edpios Aplicados","text":"Princ\u00edpio Aplica\u00e7\u00e3o Clean Architecture Mesmos casos de uso da CLI DRY Templates reutilizam base.html Separation of Concerns Rotas separadas por dom\u00ednio Responsive Design Bootstrap + CSS customizado RESTful Endpoints sem\u00e2nticos Self-documenting FastAPI gera Swagger automaticamente"},{"location":"FASE9_WEB_INTERFACE/#integracao-com-fases-anteriores","title":"\ud83d\udd17 Integra\u00e7\u00e3o com Fases Anteriores","text":"Fase Relacionamento FASE 1-2 Usa entidades e casos de uso FASE 3 Reposit\u00f3rios compartilhados FASE 4 Mesmos casos de uso da CLI FASE 5 Rotas de tradu\u00e7\u00e3o FASE 6 Exporta\u00e7\u00e3o (futuro) FASE 7 Dashboard de estat\u00edsticas FASE 8 Rotas de an\u00e1lise FASE 10 Service Registry + lazy loading"},{"location":"FASE9_WEB_INTERFACE/#como-executar","title":"\ud83d\ude80 Como Executar","text":"<pre><code># 1. Instalar depend\u00eancias (se necess\u00e1rio)\npoetry add fastapi uvicorn jinja2 aiofiles python-multipart\n\n# 2. Iniciar servidor\npython web_run.py\n\n# 3. Acessar\n# http://localhost:8000\n# http://localhost:8000/docs (documenta\u00e7\u00e3o autom\u00e1tica)\n</code></pre>"},{"location":"FASE9_WEB_INTERFACE/#metricas-do-projeto-apos-fase-9","title":"\ud83d\udcc8 M\u00e9tricas do Projeto (Ap\u00f3s FASE 9)","text":"<pre><code>\ud83d\udcca DOMAIN LAYER: 5 entidades | 18 testes\n\ud83d\udcca APPLICATION LAYER: 8 casos de uso | 10 testes\n\ud83d\udcca INFRASTRUCTURE LAYER: 6 m\u00f3dulos | 20 testes\n\ud83d\udcca INTERFACE LAYER:\n   \u251c\u2500\u2500 CLI: 12 m\u00f3dulos | Validada manualmente\n   \u2514\u2500\u2500 Web: 15+ templates | 15+ rotas\n\ud83d\udcca TOTAL: 48 testes automatizados + interfaces funcionais\n</code></pre>"},{"location":"FASE9_WEB_INTERFACE/#licoes-aprendidas","title":"\ud83d\udd0d Li\u00e7\u00f5es Aprendidas","text":"<ol> <li>FastAPI \u00e9 produtivo: Documenta\u00e7\u00e3o autom\u00e1tica e valida\u00e7\u00e3o</li> <li>Templates Jinja2 poderosos: Reutiliza\u00e7\u00e3o com extends e includes</li> <li>Gr\u00e1ficos com Chart.js: Simples e eficaz</li> <li>Responsividade \u00e9 essencial: Bootstrap garante boa apar\u00eancia em mobile</li> <li>Inje\u00e7\u00e3o de depend\u00eancia via app.state: Compartilha recursos entre rotas</li> <li>Mesmos casos de uso: CLI e Web compartilham a mesma l\u00f3gica</li> </ol>"},{"location":"FASE9_WEB_INTERFACE/#conclusao-da-fase","title":"\ud83c\udfc1 Conclus\u00e3o da Fase","text":"<p>A FASE 9 entregou uma interface web completa com:</p> <p>\u2705 15+ rotas REST \u2705 15+ templates HTML \u2705 Dashboard com gr\u00e1ficos interativos \u2705 Visualiza\u00e7\u00e3o de documentos e tradu\u00e7\u00f5es \u2705 An\u00e1lise de texto via web \u2705 Painel administrativo \u2705 Documenta\u00e7\u00e3o autom\u00e1tica da API \u2705 Design responsivo e moderno \u2705 Integra\u00e7\u00e3o total com as fases anteriores</p>"},{"location":"FASE9_WEB_INTERFACE/#autor","title":"\ud83d\udc64 Autor","text":"<p>Thiago Ribeiro - Projeto de TCC</p> <sub>FASE 9 conclu\u00edda em 16 de Fevereiro de 2026</sub> <sub>\u2705 Pronto para a FASE 10 - Service Registry e Lazy Loading</sub> <p>```</p>"},{"location":"changelog/","title":"Changelog","text":"<p>Todas as mudan\u00e7as not\u00e1veis neste projeto ser\u00e3o documentadas aqui.</p> <p>O formato \u00e9 baseado no Keep a Changelog, e este projeto adere ao Semantic Versioning.</p>"},{"location":"changelog/#020-2026-02-18","title":"[0.2.0] - 2026-02-18","text":""},{"location":"changelog/#adicionado","title":"Adicionado","text":"<ul> <li>CI/CD com GitHub Actions</li> <li>Cobertura de testes configurada (45%)</li> <li>Badges no README (CI, cobertura, Python)</li> <li>Documenta\u00e7\u00e3o autom\u00e1tica com MkDocs</li> <li>P\u00e1ginas de overview e contribui\u00e7\u00e3o</li> <li>Deploy autom\u00e1tico para GitHub Pages</li> </ul>"},{"location":"changelog/#corrigido","title":"Corrigido","text":"<ul> <li>Caminho dos testes no CI (src/tests/)</li> <li>Meta de cobertura ajustada para 45%</li> <li>Erros de lint e formata\u00e7\u00e3o (84 arquivos)</li> <li>14 ocorr\u00eancias de 'bare except'</li> <li>Posi\u00e7\u00e3o do omit no .coveragerc</li> </ul>"},{"location":"changelog/#melhorado","title":"Melhorado","text":"<ul> <li>README profissional com badges</li> <li>Documenta\u00e7\u00e3o das 10 fases revisada</li> <li>Arquitetura documentada</li> </ul>"},{"location":"changelog/#010-2026-02-15","title":"[0.1.0] - 2026-02-15","text":""},{"location":"changelog/#adicionado_1","title":"Adicionado","text":"<ul> <li>Domain Layer: entidades, value objects, interfaces</li> <li>Application Layer: 8 casos de uso</li> <li>Infrastructure Layer: reposit\u00f3rios SQLite</li> <li>CLI Interface com Rich</li> <li>Sistema de tradu\u00e7\u00e3o com Google Translate</li> <li>Exporta\u00e7\u00e3o de documentos para TXT</li> <li>Relat\u00f3rios e estat\u00edsticas</li> <li>An\u00e1lise de texto com spaCy</li> <li>Web Interface com FastAPI</li> <li>Service Registry com lazy loading</li> <li>48 testes automatizados</li> </ul>"},{"location":"changelog/#corrigido_1","title":"Corrigido","text":"<ul> <li>Inje\u00e7\u00e3o de depend\u00eancia do registry</li> <li>Erros de tradu\u00e7\u00e3o e fallback</li> <li>Formata\u00e7\u00e3o de datas e nomes</li> </ul>"},{"location":"changelog/#seguranca","title":"Seguran\u00e7a","text":"<ul> <li>Chaves de API via .env</li> <li>Sanitiza\u00e7\u00e3o de nomes de arquivo</li> <li>Rate limiting em tradu\u00e7\u00f5es</li> </ul>"},{"location":"changelog/#001-2026-02-01","title":"[0.0.1] - 2026-02-01","text":""},{"location":"changelog/#adicionado_2","title":"Adicionado","text":"<ul> <li>Estrutura inicial do projeto</li> <li>Coleta b\u00e1sica de documentos</li> <li>Armazenamento em SQLite</li> <li>Interface CLI simples</li> </ul>"},{"location":"changelog/#experimental","title":"Experimental","text":"<ul> <li>Primeira vers\u00e3o do classificador</li> <li>Extra\u00e7\u00e3o b\u00e1sica de metadados</li> </ul>"},{"location":"contributing/","title":"Guia de Contribui\u00e7\u00e3o","text":""},{"location":"contributing/#primeiros-passos","title":"\ud83d\ude80 Primeiros Passos","text":""},{"location":"contributing/#1-fork-e-clone","title":"1. Fork e Clone","text":"<pre><code>git clone https://github.com/seu-usuario/showtrials-tcc.git\ncd showtrials-tcc\n</code></pre>"},{"location":"contributing/#2-ambiente-virtual","title":"2. Ambiente Virtual","text":"<pre><code># Instalar Poetry (se n\u00e3o tiver)\ncurl -sSL https://install.python-poetry.org | python3 -\n\n# Instalar depend\u00eancias\npoetry install\n\n# Ativar ambiente\npoetry shell\n</code></pre>"},{"location":"contributing/#3-configurar-git-hooks","title":"3. Configurar Git Hooks","text":"<pre><code>pre-commit install\npre-commit install --hook-type pre-push\n</code></pre>"},{"location":"contributing/#4-variaveis-de-ambiente","title":"4. Vari\u00e1veis de Ambiente","text":"<pre><code>cp .env.example .env\n# Edite .env com suas chaves (Google Translate, etc)\n</code></pre>"},{"location":"contributing/#padroes-de-commit","title":"\ud83d\udcdd Padr\u00f5es de Commit","text":"<p>Usamos Conventional Commits:</p> Tipo Descri\u00e7\u00e3o Exemplo <code>feat</code> Nova funcionalidade <code>feat: adiciona exporta\u00e7\u00e3o PDF</code> <code>fix</code> Corre\u00e7\u00e3o de bug <code>fix: corrige erro no tradutor</code> <code>docs</code> Documenta\u00e7\u00e3o <code>docs: atualiza README</code> <code>style</code> Formata\u00e7\u00e3o <code>style: aplica black</code> <code>refactor</code> Refatora\u00e7\u00e3o <code>refactor: simplifica caso de uso</code> <code>test</code> Testes <code>test: adiciona testes do registry</code> <code>chore</code> Tarefas <code>chore: atualiza depend\u00eancias</code>"},{"location":"contributing/#testes","title":"\ud83e\uddea Testes","text":""},{"location":"contributing/#executar-todos-os-testes","title":"Executar todos os testes","text":"<pre><code>poetry run pytest tests/ -v\n</code></pre>"},{"location":"contributing/#com-cobertura","title":"Com cobertura","text":"<pre><code>poetry run pytest --cov=src tests/\n</code></pre>"},{"location":"contributing/#ver-cobertura-no-html","title":"Ver cobertura no HTML","text":"<pre><code>poetry run pytest --cov=src --cov-report=html tests/\nopen htmlcov/index.html\n</code></pre>"},{"location":"contributing/#verificacoes-de-qualidade","title":"\ud83d\udd0d Verifica\u00e7\u00f5es de Qualidade","text":""},{"location":"contributing/#linting","title":"Linting","text":"<pre><code>poetry run ruff check src/\n</code></pre>"},{"location":"contributing/#type-checking","title":"Type Checking","text":"<pre><code>poetry run mypy src/\n</code></pre>"},{"location":"contributing/#formatacao","title":"Formata\u00e7\u00e3o","text":"<pre><code>poetry run black src/\npoetry run isort src/\n</code></pre>"},{"location":"contributing/#documentacao","title":"\ud83d\udcda Documenta\u00e7\u00e3o","text":""},{"location":"contributing/#servir-localmente","title":"Servir localmente","text":"<pre><code>poetry run mkdocs serve\n# Acesse http://127.0.0.1:8000\n</code></pre>"},{"location":"contributing/#publicar-no-github-pages","title":"Publicar no GitHub Pages","text":"<pre><code>poetry run mkdocs gh-deploy\n</code></pre>"},{"location":"contributing/#fluxo-de-trabalho","title":"\ud83d\ude80 Fluxo de Trabalho","text":""},{"location":"contributing/#1-criar-branch","title":"1. Criar branch","text":"<pre><code>git checkout -b feat/nova-funcionalidade\n</code></pre>"},{"location":"contributing/#2-desenvolver-com-commits-pequenos","title":"2. Desenvolver com commits pequenos","text":"<pre><code>git add .\ngit commit -m \"feat: adiciona parte X\"\n</code></pre>"},{"location":"contributing/#3-manter-sincronizado","title":"3. Manter sincronizado","text":"<pre><code>git fetch origin\ngit rebase origin/main\n</code></pre>"},{"location":"contributing/#4-push-e-criar-pr","title":"4. Push e criar PR","text":"<pre><code>git push origin feat/nova-funcionalidade\n# Abrir Pull Request no GitHub\n</code></pre>"},{"location":"contributing/#5-aguardar-ci-passar","title":"5. Aguardar CI passar","text":"<ul> <li>\u2705 Ruff</li> <li>\u2705 MyPy</li> <li>\u2705 Testes</li> <li>\u2705 Cobertura</li> </ul>"},{"location":"contributing/#reportar-bugs","title":"\ud83d\udc1b Reportar Bugs","text":"<p>Ao reportar bugs, inclua:</p> <ul> <li>Descri\u00e7\u00e3o clara do problema</li> <li>Passos para reproduzir</li> <li>Comportamento esperado</li> <li>Logs de erro (se houver)</li> <li>Vers\u00e3o do Python e SO</li> </ul>"},{"location":"contributing/#sugerir-melhorias","title":"\ud83d\udca1 Sugerir Melhorias","text":"<p>Use Issues para sugerir:</p> <ul> <li>Novas funcionalidades</li> <li>Melhorias na documenta\u00e7\u00e3o</li> <li>Otimiza\u00e7\u00f5es de performance</li> <li>Ideias para pesquisa hist\u00f3rica</li> </ul>"},{"location":"contributing/#codigo-de-conduta","title":"\ud83e\udd1d C\u00f3digo de Conduta","text":"<ul> <li>Seja respeitoso</li> <li>Aceite feedback construtivo</li> <li>Foque no que \u00e9 melhor para o projeto</li> <li>Mostre empatia com outros contribuidores</li> </ul>"},{"location":"contributing/#licenca","title":"\ud83d\udcc4 Licen\u00e7a","text":"<p>Este projeto \u00e9 acad\u00eamico. Todo c\u00f3digo \u00e9 aberto para fins educacionais.</p>"},{"location":"overview/","title":"Vis\u00e3o Geral do Projeto","text":"<p>ShowTrials \u00e9 um sistema para coleta, armazenamento, tradu\u00e7\u00e3o e an\u00e1lise de documentos hist\u00f3ricos dos processos de Moscou e Leningrado (1934-1935).</p>"},{"location":"overview/#objetivo","title":"\ud83c\udfaf Objetivo","text":"<p>Fornecer uma ferramenta para pesquisadores e historiadores acessarem, analisarem e traduzirem documentos hist\u00f3ricos de forma eficiente.</p>"},{"location":"overview/#arquitetura","title":"\ud83c\udfd7\ufe0f Arquitetura","text":"<p>O projeto segue os princ\u00edpios da Clean Architecture, com camadas bem definidas:</p> <ul> <li>Domain Layer: Regras de neg\u00f3cio e entidades</li> <li>Application Layer: Casos de uso e orquestra\u00e7\u00e3o</li> <li>Infrastructure Layer: Reposit\u00f3rios e servi\u00e7os externos</li> <li>Interface Layer: CLI e Web</li> </ul>"},{"location":"overview/#estatisticas","title":"\ud83d\udcca Estat\u00edsticas","text":"<ul> <li>519 documentos</li> <li>16 tradu\u00e7\u00f5es</li> <li>48 testes automatizados</li> <li>45% de cobertura</li> </ul>"},{"location":"overview/#tecnologias","title":"\ud83d\udee0\ufe0f Tecnologias","text":"<ul> <li>Python 3.12</li> <li>Poetry</li> <li>SQLite</li> <li>FastAPI</li> <li>Rich (CLI)</li> <li>spaCy (NLP)</li> <li>Google Cloud Translation API</li> </ul>"},{"location":"overview/#estrutura-do-projeto","title":"\ud83d\udcc1 Estrutura do Projeto","text":"<pre><code>.\n\u251c\u2500\u2500 src/                          # C\u00f3digo fonte\n\u2502   \u251c\u2500\u2500 domain/                   # Camada de dom\u00ednio\n\u2502   \u251c\u2500\u2500 application/              # Camada de aplica\u00e7\u00e3o\n\u2502   \u251c\u2500\u2500 infrastructure/           # Camada de infraestrutura\n\u2502   \u2514\u2500\u2500 interface/                # Interfaces (CLI/Web)\n\u251c\u2500\u2500 tests/                        # Testes\n\u251c\u2500\u2500 docs/                         # Documenta\u00e7\u00e3o\n\u251c\u2500\u2500 data/                         # Banco de dados\n\u251c\u2500\u2500 exportados/                   # Arquivos exportados\n\u251c\u2500\u2500 relatorios/                   # Relat\u00f3rios\n\u251c\u2500\u2500 analises/                      # Nuvens de palavras\n\u2514\u2500\u2500 legacy/                        # C\u00f3digo legado\n</code></pre>"},{"location":"overview/#fluxo-de-desenvolvimento","title":"\ud83d\udd04 Fluxo de Desenvolvimento","text":"<ol> <li>Feature branch a partir da <code>main</code></li> <li>Commits com mensagens padronizadas</li> <li>Pre-commit hooks rodam localmente</li> <li>CI roda testes no GitHub</li> <li>Review e merge</li> </ol>"},{"location":"overview/#qualidade","title":"\ud83d\udcc8 Qualidade","text":"<ul> <li>\u2705 48 testes automatizados</li> <li>\u2705 45% de cobertura</li> <li>\u2705 Linting com Ruff</li> <li>\u2705 Type checking com MyPy (parcial)</li> <li>\u2705 Formata\u00e7\u00e3o com Black/isort</li> <li>\u2705 CI/CD com GitHub Actions</li> </ul>"},{"location":"overview/#autor","title":"\ud83d\udc64 Autor","text":"<p>Thiago Ribeiro - Projeto de TCC</p> <ul> <li>GitHub: @rib-thiago</li> <li>Email: mackandalls@gmail.com</li> </ul>"}]}
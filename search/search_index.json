{"config":{"lang":["pt"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"ShowTrials - Documenta\u00e7\u00e3o","text":"<p>Sistema para coleta, armazenamento, tradu\u00e7\u00e3o e an\u00e1lise de documentos hist\u00f3ricos</p> <p> </p>"},{"location":"#sobre-o-projeto","title":"\ud83d\udcda Sobre o Projeto","text":"<p>ShowTrials \u00e9 um sistema desenvolvido para pesquisadores e historiadores que necessitam acessar, analisar e traduzir documentos hist\u00f3ricos dos processos pol\u00edticos de Moscou e Leningrado (1934-1935).</p> <p>O sistema automatiza a coleta de documentos, organiza o acervo em banco de dados relacional, oferece interfaces para visualiza\u00e7\u00e3o e an\u00e1lise, e integra servi\u00e7os de tradu\u00e7\u00e3o autom\u00e1tica.</p>"},{"location":"#funcionalidades","title":"\ud83c\udfaf Funcionalidades","text":"Categoria Funcionalidades Gest\u00e3o Coleta, classifica\u00e7\u00e3o, metadados, busca Tradu\u00e7\u00e3o 4 idiomas, persist\u00eancia, altern\u00e2ncia An\u00e1lise Entidades, sentimentos, estat\u00edsticas, wordcloud Interfaces CLI (Rich), Web (FastAPI), API REST Relat\u00f3rios Estat\u00edsticas, exporta\u00e7\u00e3o TXT, gr\u00e1ficos"},{"location":"#arquitetura","title":"\ud83c\udfd7\ufe0f Arquitetura","text":"<p>O projeto segue Clean Architecture com 4 camadas independentes:</p> <ul> <li>Domain: Regras de neg\u00f3cio puras (sem depend\u00eancias)</li> <li>Application: Casos de uso e orquestra\u00e7\u00e3o</li> <li>Infrastructure: Reposit\u00f3rios e servi\u00e7os externos</li> <li>Interface: CLI, Web e API</li> </ul>"},{"location":"#estatisticas","title":"\ud83d\udcca Estat\u00edsticas","text":"<ul> <li>Documentos: 519</li> <li>Tradu\u00e7\u00f5es: 16</li> <li>Testes: 48 automatizados</li> <li>Cobertura: 45%</li> <li>Linhas de c\u00f3digo: ~3.500</li> <li>Fases conclu\u00eddas: 10</li> </ul>"},{"location":"#comece-aqui","title":"\ud83d\ude80 Comece Aqui","text":"<ul> <li>Vis\u00e3o Geral</li> <li>Arquitetura</li> <li>Contribuir</li> <li>Changelog</li> </ul>"},{"location":"#navegacao-rapida","title":"\ud83d\udcc1 Navega\u00e7\u00e3o R\u00e1pida","text":""},{"location":"#fases-do-projeto","title":"Fases do Projeto","text":"<ul> <li>FASE 1 - Domain Layer</li> <li>FASE 2 - Application Layer</li> <li>FASE 3 - Infrastructure Layer</li> <li>FASE 4 - CLI Interface</li> <li>FASE 5 - Tradu\u00e7\u00e3o Avan\u00e7ada</li> <li>FASE 6 - Exporta\u00e7\u00e3o</li> <li>FASE 7 - Relat\u00f3rios</li> <li>FASE 8 - An\u00e1lise de Texto</li> <li>FASE 9 - Web Interface</li> <li>FASE 10 - Service Registry</li> </ul>"},{"location":"#autor","title":"\ud83d\udc64 Autor","text":"<p>Thiago Ribeiro - Projeto de TCC</p> <p>GitHub | Email</p> <sub>Documenta\u00e7\u00e3o gerada com MkDocs</sub> <sub>\u00a9 2026 Thiago Ribeiro</sub>"},{"location":"ARCHITECTURE/","title":"Arquitetura do Sistema ShowTrials","text":"**Clean Architecture aplicada a um sistema de gest\u00e3o de documentos hist\u00f3ricos**"},{"location":"ARCHITECTURE/#visao-geral","title":"\ud83d\udccb Vis\u00e3o Geral","text":"<p>O ShowTrials \u00e9 um sistema para coleta, armazenamento, tradu\u00e7\u00e3o e an\u00e1lise de documentos hist\u00f3ricos dos processos de Moscou e Leningrado (1934-1935). Foi desenvolvido seguindo os princ\u00edpios da Clean Architecture (Arquitetura Limpa), proposta por Robert C. Martin (Uncle Bob).</p> <p>Esta arquitetura foi escolhida por:</p> <ul> <li>Isolar o n\u00facleo do neg\u00f3cio de detalhes de infraestrutura</li> <li>Facilitar testes atrav\u00e9s de inje\u00e7\u00e3o de depend\u00eancia</li> <li>Permitir evolu\u00e7\u00e3o com m\u00ednimo impacto</li> <li>Separar responsabilidades de forma clara</li> <li>Garantir que as regras de neg\u00f3cio sejam independentes de UI, banco de dados ou frameworks</li> </ul>"},{"location":"ARCHITECTURE/#as-quatro-camadas","title":"\ud83c\udfd7\ufe0f As Quatro Camadas","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                    INTERFACE LAYER                           \u2502\n\u2502  (CLI, Web, API - adaptadores para o mundo externo)        \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                              \u2502\n                              \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                   APPLICATION LAYER                          \u2502\n\u2502  (Casos de uso, orquestra\u00e7\u00e3o, DTOs)                         \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                              \u2502\n                              \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                      DOMAIN LAYER                            \u2502\n\u2502  (Entidades, Value Objects, regras de neg\u00f3cio)              \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                              \u2502\n                              \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                  INFRASTRUCTURE LAYER                        \u2502\n\u2502  (Reposit\u00f3rios, servi\u00e7os externos, implementa\u00e7\u00f5es)          \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"ARCHITECTURE/#1-domain-layer-nucleo","title":"1. Domain Layer (N\u00facleo)","text":"<p>Localiza\u00e7\u00e3o: <code>src/domain/</code></p> <p>Responsabilidade: Conter as regras de neg\u00f3cio puras, sem qualquer depend\u00eancia externa.</p> <p>Componentes: - Entities: Objetos com identidade (Documento, Traducao) - Value Objects: Objetos imut\u00e1veis (TipoDocumento, NomeRusso, AnaliseTexto) - Interfaces (Ports): Contratos para camadas externas (RepositorioDocumento)</p> <p>Princ\u00edpios: - Nenhum import de frameworks - Nenhuma men\u00e7\u00e3o a banco de dados - Totalmente test\u00e1vel com mocks</p> <p>Exemplo: <pre><code>@dataclass\nclass Documento:\n    id: Optional[int]\n    titulo: str\n    texto: str\n\n    @property\n    def tamanho(self) -&gt; int:\n        return len(self.texto)  # Regra de neg\u00f3cio pura\n</code></pre></p>"},{"location":"ARCHITECTURE/#2-application-layer-aplicacao","title":"2. Application Layer (Aplica\u00e7\u00e3o)","text":"<p>Localiza\u00e7\u00e3o: <code>src/application/</code></p> <p>Responsabilidade: Orquestrar os casos de uso do sistema.</p> <p>Componentes: - Use Cases: Cada opera\u00e7\u00e3o do sistema (ListarDocumentos, TraduzirDocumento) - DTOs: Objetos para transfer\u00eancia de dados (DocumentoDTO) - Servi\u00e7os de aplica\u00e7\u00e3o: Coordena\u00e7\u00e3o entre reposit\u00f3rios e servi\u00e7os</p> <p>Princ\u00edpios: - Depende apenas de interfaces do dom\u00ednio - N\u00e3o conhece implementa\u00e7\u00f5es concretas - Cont\u00e9m a l\u00f3gica de aplica\u00e7\u00e3o (n\u00e3o confundir com regras de neg\u00f3cio)</p> <p>Exemplo: <pre><code>class ListarDocumentos:\n    def __init__(self, repo: RepositorioDocumento):\n        self.repo = repo\n\n    def executar(self, pagina: int) -&gt; List[DocumentoDTO]:\n        offset = (pagina - 1) * 15\n        documentos = self.repo.listar(offset, 15)\n        return [DocumentoDTO.from_domain(d) for d in documentos]\n</code></pre></p>"},{"location":"ARCHITECTURE/#3-interface-layer-adaptadores","title":"3. Interface Layer (Adaptadores)","text":"<p>Localiza\u00e7\u00e3o: <code>src/interface/</code></p> <p>Responsabilidade: Traduzir entre o mundo externo e a aplica\u00e7\u00e3o.</p> <p>Componentes: - CLI: Interface de linha de comando com Rich - Web: API FastAPI e templates HTML - Presenters: Formatadores de sa\u00edda - Comandos: A\u00e7\u00f5es do usu\u00e1rio</p> <p>Princ\u00edpios: - N\u00e3o cont\u00e9m l\u00f3gica de neg\u00f3cio - Depende de casos de uso e DTOs - Pode ter m\u00faltiplas implementa\u00e7\u00f5es (CLI e Web)</p> <p>Exemplo: <pre><code>class ComandoListar:\n    def __init__(self, listar_use_case: ListarDocumentos):\n        self.use_case = listar_use_case\n\n    def executar(self):\n        resultados = self.use_case.executar(pagina=1)\n        self.mostrar_tabela(resultados)  # Formata\u00e7\u00e3o espec\u00edfica da CLI\n</code></pre></p>"},{"location":"ARCHITECTURE/#4-infrastructure-layer-infraestrutura","title":"4. Infrastructure Layer (Infraestrutura)","text":"<p>Localiza\u00e7\u00e3o: <code>src/infrastructure/</code></p> <p>Responsabilidade: Implementar as interfaces definidas nas camadas internas.</p> <p>Componentes: - Reposit\u00f3rios: Implementa\u00e7\u00f5es SQLite - Servi\u00e7os externos: Google Translate, SpaCy - Configura\u00e7\u00f5es: Settings, vari\u00e1veis de ambiente - Service Registry: Gerenciamento de servi\u00e7os</p> <p>Princ\u00edpios: - Cont\u00e9m detalhes t\u00e9cnicos (SQL, HTTP) - Implementa as interfaces do dom\u00ednio - Pode ser substitu\u00edda sem afetar as camadas internas</p> <p>Exemplo: <pre><code>class SQLiteDocumentoRepository(RepositorioDocumento):\n    def listar(self, offset, limite):\n        with self._conexao() as conn:\n            cursor = conn.cursor()\n            cursor.execute(\"SELECT * FROM documentos LIMIT ? OFFSET ?\",\n                         (limite, offset))\n            return [self._row_para_entidade(row) for row in cursor]\n</code></pre></p>"},{"location":"ARCHITECTURE/#fluxo-de-dados","title":"\ud83d\udd04 Fluxo de Dados","text":"<pre><code>[Usu\u00e1rio] \u2192 [Interface] \u2192 [Caso de Uso] \u2192 [Reposit\u00f3rio (interface)]\n    \u2191          \u2193              \u2193                    \u2193\n    \u2514\u2500\u2500\u2500\u2500 [Presenter] \u2190 [DTO] \u2190 [Entidade] \u2190 [Implementa\u00e7\u00e3o concreta]\n</code></pre> <p>Exemplo com Listar Documentos:</p> <ol> <li>Usu\u00e1rio digita '1' no menu CLI</li> <li><code>ComandoListar</code> chama <code>listar_use_case.executar()</code></li> <li>Caso de uso calcula offset e chama <code>repo.listar()</code></li> <li>Reposit\u00f3rio SQLite busca dados no banco</li> <li>Dados s\u00e3o convertidos para entidades do dom\u00ednio</li> <li>Caso de uso converte entidades para DTOs</li> <li>Presenter formata DTOs em tabela colorida</li> <li>Usu\u00e1rio v\u00ea o resultado</li> </ol>"},{"location":"ARCHITECTURE/#service-registry-e-injecao-de-dependencia","title":"\ud83d\udce6 Service Registry e Inje\u00e7\u00e3o de Depend\u00eancia","text":"<pre><code>[ServiceRegistry] \u2190 [Config YAML]\n        \u2193\n    [Factories]\n        \u2193\n    [Servi\u00e7os]\n        \u2193\n    [Casos de Uso]\n</code></pre> <p>Vantagens: - Lazy loading: servi\u00e7os s\u00f3 carregam quando usados - Configur\u00e1vel via YAML - Estat\u00edsticas de uso - F\u00e1cil adicionar novos servi\u00e7os</p>"},{"location":"ARCHITECTURE/#estrategia-de-testes","title":"\ud83e\uddea Estrat\u00e9gia de Testes","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502   Unit Tests    \u2502 \u2192 Domain (18 testes)\n\u2502   (isolados)    \u2502 \u2192 Application (10 testes)\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n        \u2193\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 Integration     \u2502 \u2192 Infrastructure (20 testes)\n\u2502 Tests           \u2502 \u2192 Reposit\u00f3rios, APIs\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n        \u2193\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502   Manual Tests  \u2502 \u2192 CLI (36 cen\u00e1rios)\n\u2502   (end-to-end)  \u2502 \u2192 Web (36 cen\u00e1rios)\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre> <p>Total: 48 testes automatizados + valida\u00e7\u00e3o manual</p>"},{"location":"ARCHITECTURE/#diagrama-de-camadas-com-componentes","title":"\ud83d\udcca Diagrama de Camadas com Componentes","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                        INTERFACE LAYER                           \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510          \u2502\n\u2502  \u2502     CLI      \u2502  \u2502   Web App    \u2502  \u2502     API      \u2502          \u2502\n\u2502  \u2502   (Rich)     \u2502  \u2502  (FastAPI)   \u2502  \u2502   (REST)     \u2502          \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518          \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510          \u2502\n\u2502  \u2502  Presenters  \u2502  \u2502   Commands   \u2502  \u2502   Templates   \u2502          \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518          \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                              \u2502\n                              \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                      APPLICATION LAYER                           \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510          \u2502\n\u2502  \u2502 ListarDocs   \u2502  \u2502 TraduzirDoc  \u2502  \u2502 AnalisarDoc  \u2502          \u2502\n\u2502  \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524  \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524  \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524          \u2502\n\u2502  \u2502 ExportarDoc  \u2502  \u2502 GerarRelat   \u2502  \u2502 ObterStats   \u2502          \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518          \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510        \u2502\n\u2502  \u2502                     DTOs                             \u2502        \u2502\n\u2502  \u2502  (DocumentoDTO, TraducaoDTO, EstatisticasDTO)       \u2502        \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518        \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                              \u2502\n                              \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                         DOMAIN LAYER                              \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510      \u2502\n\u2502  \u2502   Entidades  \u2502  \u2502   Value Objects  \u2502  \u2502  Interfaces  \u2502      \u2502\n\u2502  \u2502  \u2022 Documento \u2502  \u2502  \u2022 TipoDocumento \u2502  \u2502 \u2022 RepoDoc    \u2502      \u2502\n\u2502  \u2502  \u2022 Traducao  \u2502  \u2502  \u2022 NomeRusso     \u2502  \u2502 \u2022 RepoTrad   \u2502      \u2502\n\u2502  \u2502              \u2502  \u2502  \u2022 AnaliseTexto  \u2502  \u2502              \u2502      \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518      \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                              \u2502\n                              \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                     INFRASTRUCTURE LAYER                          \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510          \u2502\n\u2502  \u2502   SQLite     \u2502  \u2502   Google     \u2502  \u2502    SpaCy     \u2502          \u2502\n\u2502  \u2502  Reposit\u00f3rios\u2502  \u2502  Translate   \u2502  \u2502   Analyzer   \u2502          \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518          \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510          \u2502\n\u2502  \u2502   WordCloud  \u2502  \u2502   Service    \u2502  \u2502  Configura\u00e7\u00e3o\u2502          \u2502\n\u2502  \u2502   Generator  \u2502  \u2502   Registry   \u2502  \u2502    (YAML)    \u2502          \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518          \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"ARCHITECTURE/#metricas-da-arquitetura","title":"\ud83d\udcc8 M\u00e9tricas da Arquitetura","text":"Camada Arquivos Testes Depend\u00eancias Externas Domain 8 18 Nenhuma Application 12 10 Domain apenas Interface 25+ Manual Application Infrastructure 15 20 Application + externas <p>Total: 60+ arquivos, 48 testes automatizados</p>"},{"location":"ARCHITECTURE/#beneficios-da-arquitetura","title":"\ud83c\udfaf Benef\u00edcios da Arquitetura","text":"<ol> <li>Manutenibilidade: Mudan\u00e7as em uma camada n\u00e3o afetam as outras</li> <li>Testabilidade: Cada camada pode ser testada isoladamente</li> <li>Flexibilidade: Trocar banco de dados n\u00e3o afeta o dom\u00ednio</li> <li>Clareza: Responsabilidades bem definidas</li> <li>Evolu\u00e7\u00e3o: Novas funcionalidades s\u00e3o casos de uso adicionais</li> </ol>"},{"location":"ARCHITECTURE/#referencias","title":"\ud83d\udcda Refer\u00eancias","text":"<ul> <li>Martin, R. C. (2017). Clean Architecture: A Craftsman's Guide to Software Structure and Design</li> <li>Martin, R. C. (2003). Agile Software Development: Principles, Patterns, and Practices</li> </ul>"},{"location":"ARCHITECTURE/#autor","title":"\ud83d\udc64 Autor","text":"<p>Thiago Ribeiro - Projeto de TCC</p> <sub>Documento de Arquitetura - Vers\u00e3o 1.0</sub> <sub>Fevereiro de 2026</sub> <p>```</p>"},{"location":"changelog/","title":"Changelog","text":"<p>Todas as mudan\u00e7as not\u00e1veis neste projeto ser\u00e3o documentadas aqui.</p> <p>O formato \u00e9 baseado no Keep a Changelog, e este projeto adere ao Semantic Versioning.</p>"},{"location":"changelog/#020-2026-02-18","title":"[0.2.0] - 2026-02-18","text":""},{"location":"changelog/#adicionado","title":"Adicionado","text":"<ul> <li>CI/CD com GitHub Actions</li> <li>Cobertura de testes configurada (45%)</li> <li>Badges no README (CI, cobertura, Python)</li> <li>Documenta\u00e7\u00e3o autom\u00e1tica com MkDocs</li> <li>P\u00e1ginas de overview e contribui\u00e7\u00e3o</li> <li>Deploy autom\u00e1tico para GitHub Pages</li> </ul>"},{"location":"changelog/#corrigido","title":"Corrigido","text":"<ul> <li>Caminho dos testes no CI (src/tests/)</li> <li>Meta de cobertura ajustada para 45%</li> <li>Erros de lint e formata\u00e7\u00e3o (84 arquivos)</li> <li>14 ocorr\u00eancias de 'bare except'</li> <li>Posi\u00e7\u00e3o do omit no .coveragerc</li> </ul>"},{"location":"changelog/#melhorado","title":"Melhorado","text":"<ul> <li>README profissional com badges</li> <li>Documenta\u00e7\u00e3o das 10 fases revisada</li> <li>Arquitetura documentada</li> </ul>"},{"location":"changelog/#010-2026-02-15","title":"[0.1.0] - 2026-02-15","text":""},{"location":"changelog/#adicionado_1","title":"Adicionado","text":"<ul> <li>Domain Layer: entidades, value objects, interfaces</li> <li>Application Layer: 8 casos de uso</li> <li>Infrastructure Layer: reposit\u00f3rios SQLite</li> <li>CLI Interface com Rich</li> <li>Sistema de tradu\u00e7\u00e3o com Google Translate</li> <li>Exporta\u00e7\u00e3o de documentos para TXT</li> <li>Relat\u00f3rios e estat\u00edsticas</li> <li>An\u00e1lise de texto com spaCy</li> <li>Web Interface com FastAPI</li> <li>Service Registry com lazy loading</li> <li>48 testes automatizados</li> </ul>"},{"location":"changelog/#corrigido_1","title":"Corrigido","text":"<ul> <li>Inje\u00e7\u00e3o de depend\u00eancia do registry</li> <li>Erros de tradu\u00e7\u00e3o e fallback</li> <li>Formata\u00e7\u00e3o de datas e nomes</li> </ul>"},{"location":"changelog/#seguranca","title":"Seguran\u00e7a","text":"<ul> <li>Chaves de API via .env</li> <li>Sanitiza\u00e7\u00e3o de nomes de arquivo</li> <li>Rate limiting em tradu\u00e7\u00f5es</li> </ul>"},{"location":"changelog/#001-2026-02-01","title":"[0.0.1] - 2026-02-01","text":""},{"location":"changelog/#adicionado_2","title":"Adicionado","text":"<ul> <li>Estrutura inicial do projeto</li> <li>Coleta b\u00e1sica de documentos</li> <li>Armazenamento em SQLite</li> <li>Interface CLI simples</li> </ul>"},{"location":"changelog/#experimental","title":"Experimental","text":"<ul> <li>Primeira vers\u00e3o do classificador</li> <li>Extra\u00e7\u00e3o b\u00e1sica de metadados</li> </ul>"},{"location":"contributing/","title":"Guia de Contribui\u00e7\u00e3o","text":""},{"location":"contributing/#primeiros-passos","title":"\ud83d\ude80 Primeiros Passos","text":""},{"location":"contributing/#1-fork-e-clone","title":"1. Fork e Clone","text":"<pre><code>git clone https://github.com/seu-usuario/showtrials-tcc.git\ncd showtrials-tcc\n</code></pre>"},{"location":"contributing/#2-ambiente-virtual","title":"2. Ambiente Virtual","text":"<pre><code># Instalar Poetry (se n\u00e3o tiver)\ncurl -sSL https://install.python-poetry.org | python3 -\n\n# Instalar depend\u00eancias\npoetry install\n\n# Ativar ambiente\npoetry shell\n</code></pre>"},{"location":"contributing/#3-configurar-git-hooks","title":"3. Configurar Git Hooks","text":"<pre><code>pre-commit install\npre-commit install --hook-type pre-push\n</code></pre>"},{"location":"contributing/#4-variaveis-de-ambiente","title":"4. Vari\u00e1veis de Ambiente","text":"<pre><code>cp .env.example .env\n# Edite .env com suas chaves (Google Translate, etc)\n</code></pre>"},{"location":"contributing/#padroes-de-commit","title":"\ud83d\udcdd Padr\u00f5es de Commit","text":"<p>Usamos Conventional Commits:</p> Tipo Descri\u00e7\u00e3o Exemplo <code>feat</code> Nova funcionalidade <code>feat: adiciona exporta\u00e7\u00e3o PDF</code> <code>fix</code> Corre\u00e7\u00e3o de bug <code>fix: corrige erro no tradutor</code> <code>docs</code> Documenta\u00e7\u00e3o <code>docs: atualiza README</code> <code>style</code> Formata\u00e7\u00e3o <code>style: aplica black</code> <code>refactor</code> Refatora\u00e7\u00e3o <code>refactor: simplifica caso de uso</code> <code>test</code> Testes <code>test: adiciona testes do registry</code> <code>chore</code> Tarefas <code>chore: atualiza depend\u00eancias</code>"},{"location":"contributing/#testes","title":"\ud83e\uddea Testes","text":""},{"location":"contributing/#executar-todos-os-testes","title":"Executar todos os testes","text":"<pre><code>poetry run pytest tests/ -v\n</code></pre>"},{"location":"contributing/#com-cobertura","title":"Com cobertura","text":"<pre><code>poetry run pytest --cov=src tests/\n</code></pre>"},{"location":"contributing/#ver-cobertura-no-html","title":"Ver cobertura no HTML","text":"<pre><code>poetry run pytest --cov=src --cov-report=html tests/\nopen htmlcov/index.html\n</code></pre>"},{"location":"contributing/#verificacoes-de-qualidade","title":"\ud83d\udd0d Verifica\u00e7\u00f5es de Qualidade","text":""},{"location":"contributing/#linting","title":"Linting","text":"<pre><code>poetry run ruff check src/\n</code></pre>"},{"location":"contributing/#type-checking","title":"Type Checking","text":"<pre><code>poetry run mypy src/\n</code></pre>"},{"location":"contributing/#formatacao","title":"Formata\u00e7\u00e3o","text":"<pre><code>poetry run black src/\npoetry run isort src/\n</code></pre>"},{"location":"contributing/#documentacao","title":"\ud83d\udcda Documenta\u00e7\u00e3o","text":""},{"location":"contributing/#servir-localmente","title":"Servir localmente","text":"<pre><code>poetry run mkdocs serve\n# Acesse http://127.0.0.1:8000\n</code></pre>"},{"location":"contributing/#publicar-no-github-pages","title":"Publicar no GitHub Pages","text":"<pre><code>poetry run mkdocs gh-deploy\n</code></pre>"},{"location":"contributing/#fluxo-de-trabalho","title":"\ud83d\ude80 Fluxo de Trabalho","text":""},{"location":"contributing/#1-criar-branch","title":"1. Criar branch","text":"<pre><code>git checkout -b feat/nova-funcionalidade\n</code></pre>"},{"location":"contributing/#2-desenvolver-com-commits-pequenos","title":"2. Desenvolver com commits pequenos","text":"<pre><code>git add .\ngit commit -m \"feat: adiciona parte X\"\n</code></pre>"},{"location":"contributing/#3-manter-sincronizado","title":"3. Manter sincronizado","text":"<pre><code>git fetch origin\ngit rebase origin/main\n</code></pre>"},{"location":"contributing/#4-push-e-criar-pr","title":"4. Push e criar PR","text":"<pre><code>git push origin feat/nova-funcionalidade\n# Abrir Pull Request no GitHub\n</code></pre>"},{"location":"contributing/#5-aguardar-ci-passar","title":"5. Aguardar CI passar","text":"<ul> <li>\u2705 Ruff</li> <li>\u2705 MyPy</li> <li>\u2705 Testes</li> <li>\u2705 Cobertura</li> </ul>"},{"location":"contributing/#reportar-bugs","title":"\ud83d\udc1b Reportar Bugs","text":"<p>Ao reportar bugs, inclua:</p> <ul> <li>Descri\u00e7\u00e3o clara do problema</li> <li>Passos para reproduzir</li> <li>Comportamento esperado</li> <li>Logs de erro (se houver)</li> <li>Vers\u00e3o do Python e SO</li> </ul>"},{"location":"contributing/#sugerir-melhorias","title":"\ud83d\udca1 Sugerir Melhorias","text":"<p>Use Issues para sugerir:</p> <ul> <li>Novas funcionalidades</li> <li>Melhorias na documenta\u00e7\u00e3o</li> <li>Otimiza\u00e7\u00f5es de performance</li> <li>Ideias para pesquisa hist\u00f3rica</li> </ul>"},{"location":"contributing/#codigo-de-conduta","title":"\ud83e\udd1d C\u00f3digo de Conduta","text":"<ul> <li>Seja respeitoso</li> <li>Aceite feedback construtivo</li> <li>Foque no que \u00e9 melhor para o projeto</li> <li>Mostre empatia com outros contribuidores</li> </ul>"},{"location":"contributing/#licenca","title":"\ud83d\udcc4 Licen\u00e7a","text":"<p>Este projeto \u00e9 acad\u00eamico. Todo c\u00f3digo \u00e9 aberto para fins educacionais.</p>"},{"location":"overview/","title":"Vis\u00e3o Geral do Projeto","text":"<p>ShowTrials \u00e9 um sistema para coleta, armazenamento, tradu\u00e7\u00e3o e an\u00e1lise de documentos hist\u00f3ricos dos processos de Moscou e Leningrado (1934-1935).</p>"},{"location":"overview/#objetivo","title":"\ud83c\udfaf Objetivo","text":"<p>Fornecer uma ferramenta para pesquisadores e historiadores acessarem, analisarem e traduzirem documentos hist\u00f3ricos de forma eficiente.</p>"},{"location":"overview/#arquitetura","title":"\ud83c\udfd7\ufe0f Arquitetura","text":"<p>O projeto segue os princ\u00edpios da Clean Architecture, com camadas bem definidas:</p> <ul> <li>Domain Layer: Regras de neg\u00f3cio e entidades</li> <li>Application Layer: Casos de uso e orquestra\u00e7\u00e3o</li> <li>Infrastructure Layer: Reposit\u00f3rios e servi\u00e7os externos</li> <li>Interface Layer: CLI e Web</li> </ul>"},{"location":"overview/#estatisticas","title":"\ud83d\udcca Estat\u00edsticas","text":"<ul> <li>519 documentos</li> <li>16 tradu\u00e7\u00f5es</li> <li>48 testes automatizados</li> <li>45% de cobertura</li> </ul>"},{"location":"overview/#tecnologias","title":"\ud83d\udee0\ufe0f Tecnologias","text":"<ul> <li>Python 3.12</li> <li>Poetry</li> <li>SQLite</li> <li>FastAPI</li> <li>Rich (CLI)</li> <li>spaCy (NLP)</li> <li>Google Cloud Translation API</li> </ul>"},{"location":"overview/#estrutura-do-projeto","title":"\ud83d\udcc1 Estrutura do Projeto","text":"<pre><code>.\n\u251c\u2500\u2500 src/                          # C\u00f3digo fonte\n\u2502   \u251c\u2500\u2500 domain/                   # Camada de dom\u00ednio\n\u2502   \u251c\u2500\u2500 application/              # Camada de aplica\u00e7\u00e3o\n\u2502   \u251c\u2500\u2500 infrastructure/           # Camada de infraestrutura\n\u2502   \u2514\u2500\u2500 interface/                # Interfaces (CLI/Web)\n\u251c\u2500\u2500 tests/                        # Testes\n\u251c\u2500\u2500 docs/                         # Documenta\u00e7\u00e3o\n\u251c\u2500\u2500 data/                         # Banco de dados\n\u251c\u2500\u2500 exportados/                   # Arquivos exportados\n\u251c\u2500\u2500 relatorios/                   # Relat\u00f3rios\n\u251c\u2500\u2500 analises/                      # Nuvens de palavras\n\u2514\u2500\u2500 legacy/                        # C\u00f3digo legado\n</code></pre>"},{"location":"overview/#fluxo-de-desenvolvimento","title":"\ud83d\udd04 Fluxo de Desenvolvimento","text":"<ol> <li>Feature branch a partir da <code>main</code></li> <li>Commits com mensagens padronizadas</li> <li>Pre-commit hooks rodam localmente</li> <li>CI roda testes no GitHub</li> <li>Review e merge</li> </ol>"},{"location":"overview/#qualidade","title":"\ud83d\udcc8 Qualidade","text":"<ul> <li>\u2705 48 testes automatizados</li> <li>\u2705 45% de cobertura</li> <li>\u2705 Linting com Ruff</li> <li>\u2705 Type checking com MyPy (parcial)</li> <li>\u2705 Formata\u00e7\u00e3o com Black/isort</li> <li>\u2705 CI/CD com GitHub Actions</li> </ul>"},{"location":"overview/#autor","title":"\ud83d\udc64 Autor","text":"<p>Thiago Ribeiro - Projeto de TCC</p> <ul> <li>GitHub: @rib-thiago</li> <li>Email: mackandalls@gmail.com</li> </ul>"},{"location":"fases/FASE10_SERVICE_REGISTRY/","title":"FASE 10 - Service Registry e Lazy Loading","text":"**Sistema de gerenciamento de servi\u00e7os com carregamento sob demanda**"},{"location":"fases/FASE10_SERVICE_REGISTRY/#informacoes-da-fase","title":"\ud83d\udcc5 Informa\u00e7\u00f5es da Fase","text":"Item Descri\u00e7\u00e3o Status \u2705 Conclu\u00edda Data de Conclus\u00e3o 17 de Fevereiro de 2026 Artefatos ServiceRegistry, Factories, Configura\u00e7\u00e3o YAML Testes 8 testes unit\u00e1rios Depend\u00eancias FASE 1-9, pyyaml, python-dotenv"},{"location":"fases/FASE10_SERVICE_REGISTRY/#objetivo","title":"\ud83c\udfaf Objetivo","text":"<p>Implementar um sistema de gerenciamento de servi\u00e7os que:</p> <ul> <li>Centralize a cria\u00e7\u00e3o e acesso a todos os servi\u00e7os da aplica\u00e7\u00e3o</li> <li>Carregue servi\u00e7os sob demanda (lazy loading) para otimizar performance</li> <li>Permita configurar servi\u00e7os via arquivo YAML</li> <li>Ofere\u00e7a estat\u00edsticas de uso de cada servi\u00e7o</li> <li>Facilite a adi\u00e7\u00e3o de novos servi\u00e7os sem modificar c\u00f3digo existente</li> <li>Reduza o tempo de inicializa\u00e7\u00e3o da aplica\u00e7\u00e3o</li> <li>Diminua o consumo de mem\u00f3ria</li> </ul>"},{"location":"fases/FASE10_SERVICE_REGISTRY/#estrutura-criada","title":"\ud83d\udcc1 Estrutura Criada","text":"<pre><code>src/\n\u251c\u2500\u2500 infrastructure/\n\u2502   \u251c\u2500\u2500 registry.py                    # Service Registry\n\u2502   \u251c\u2500\u2500 factories.py                    # Factories para servi\u00e7os\n\u2502   \u2514\u2500\u2500 config/\n\u2502       \u2514\u2500\u2500 __init__.py                  # Configura\u00e7\u00e3o em YAML\n\u2514\u2500\u2500 tests/\n    \u2514\u2500\u2500 test_registry.py                 # Testes do registry\n</code></pre>"},{"location":"fases/FASE10_SERVICE_REGISTRY/#componentes-implementados","title":"\ud83e\udde9 Componentes Implementados","text":""},{"location":"fases/FASE10_SERVICE_REGISTRY/#1-service-registry-infrastructureregistrypy","title":"1. Service Registry (<code>infrastructure/registry.py</code>)","text":"<p>Responsabilidade: Registro central de servi\u00e7os com lazy loading.</p> <pre><code>class ServiceRegistry:\n    \"\"\"\n    Registro central de servi\u00e7os com lazy loading.\n\n    Caracter\u00edsticas:\n    - Thread-safe (usa Lock para acesso concorrente)\n    - Suporte a servi\u00e7os eager e lazy\n    - Cache de inst\u00e2ncias ap\u00f3s primeira inicializa\u00e7\u00e3o\n    - Estat\u00edsticas de uso por servi\u00e7o\n    \"\"\"\n\n    _instance = None\n    _lock = Lock()\n\n    def __new__(cls):\n        \"\"\"Singleton thread-safe.\"\"\"\n        if cls._instance is None:\n            with cls._lock:\n                if cls._instance is None:\n                    cls._instance = super().__new__(cls)\n                    cls._instance._initialized = False\n        return cls._instance\n\n    def __init__(self):\n        \"\"\"Inicializa\u00e7\u00e3o \u00fanica.\"\"\"\n        if self._initialized:\n            return\n\n        self._services: Dict[str, ServiceInfo] = {}\n        self._instances: Dict[str, Any] = {}\n        self._stats: Dict[str, ServiceStats] = {}\n        self._lock = Lock()\n        self._initialized = True\n        logger.info(\"\ud83d\udd27 Service Registry inicializado\")\n\n    def register(self,\n                 name: str,\n                 factory: Callable,\n                 lazy: bool = True,\n                 singleton: bool = True,\n                 **config) -&gt; None:\n        \"\"\"\n        Registra um servi\u00e7o no registry.\n\n        Args:\n            name: Nome \u00fanico do servi\u00e7o\n            factory: Fun\u00e7\u00e3o que cria a inst\u00e2ncia do servi\u00e7o\n            lazy: Se True, servi\u00e7o s\u00f3 \u00e9 inicializado quando requisitado\n            singleton: Se True, mesma inst\u00e2ncia para todas as chamadas\n            **config: Configura\u00e7\u00e3o espec\u00edfica do servi\u00e7o\n        \"\"\"\n        with self._lock:\n            if name in self._services:\n                logger.warning(f\"\u26a0\ufe0f Servi\u00e7o {name} j\u00e1 registrado. Substituindo.\")\n\n            self._services[name] = ServiceInfo(\n                name=name,\n                factory=factory,\n                lazy=lazy,\n                singleton=singleton,\n                config=config\n            )\n            self._stats[name] = ServiceStats()\n            logger.info(f\"\u2705 Servi\u00e7o registrado: {name} (lazy={lazy})\")\n\n    def get(self, name: str, *args, **kwargs) -&gt; Any:\n        \"\"\"\n        Obt\u00e9m inst\u00e2ncia de um servi\u00e7o (inicializa se necess\u00e1rio).\n\n        Args:\n            name: Nome do servi\u00e7o\n            *args, **kwargs: Argumentos para a factory (se primeira vez)\n\n        Returns:\n            Inst\u00e2ncia do servi\u00e7o\n        \"\"\"\n        # Atualiza estat\u00edsticas\n        with self._lock:\n            if name not in self._services:\n                available = \", \".join(self._services.keys())\n                raise KeyError(f\"Servi\u00e7o n\u00e3o registrado: {name}. Dispon\u00edveis: {available}\")\n\n            self._stats[name].calls += 1\n            self._stats[name].last_call = datetime.now()\n\n        service_info = self._services[name]\n\n        # Se j\u00e1 tem inst\u00e2ncia e \u00e9 singleton, retorna\n        if service_info.singleton and name in self._instances:\n            return self._instances[name]\n\n        # Inicializa\u00e7\u00e3o (thread-safe)\n        with self._lock:\n            if service_info.singleton and name in self._instances:\n                return self._instances[name]\n\n            logger.info(f\"\ud83d\udd04 Inicializando servi\u00e7o: {name}\")\n            start = time.time()\n\n            try:\n                factory_kwargs = service_info.config.copy()\n                factory_kwargs.update(kwargs)\n\n                instance = service_info.factory(*args, **factory_kwargs)\n\n                if service_info.singleton:\n                    self._instances[name] = instance\n\n                elapsed = time.time() - start\n                self._stats[name].load_time = elapsed\n                logger.info(f\"\u2705 Servi\u00e7o {name} inicializado em {elapsed:.2f}s\")\n\n                return instance\n\n            except Exception as e:\n                self._stats[name].errors += 1\n                logger.error(f\"\u274c Falha ao inicializar {name}: {e}\")\n                raise\n\n    def start_eager_services(self) -&gt; Dict[str, float]:\n        \"\"\"\n        Inicializa todos os servi\u00e7os marcados como eager.\n        \"\"\"\n        results = {}\n        for name, info in self._services.items():\n            if not info.lazy and info.singleton and name not in self._instances:\n                logger.info(f\"\ud83d\ude80 Inicializando servi\u00e7o eager: {name}\")\n                start = time.time()\n                try:\n                    instance = info.factory(**info.config)\n                    self._instances[name] = instance\n                    elapsed = time.time() - start\n                    results[name] = elapsed\n                    self._stats[name].load_time = elapsed\n                    logger.info(f\"\u2705 {name} pronto em {elapsed:.2f}s\")\n                except Exception as e:\n                    logger.error(f\"\u274c Falha ao inicializar {name}: {e}\")\n                    results[name] = -1\n        return results\n\n    def get_status(self) -&gt; Dict[str, Dict]:\n        \"\"\"Retorna status de todos os servi\u00e7os registrados.\"\"\"\n        status = {}\n        for name, info in self._services.items():\n            stats = self._stats[name]\n            status[name] = {\n                'registered': True,\n                'lazy': info.lazy,\n                'singleton': info.singleton,\n                'loaded': name in self._instances,\n                'calls': stats.calls,\n                'last_call': stats.last_call.isoformat() if stats.last_call else None,\n                'load_time': stats.load_time,\n                'errors': stats.errors,\n                'registered_at': stats.registered_at.isoformat(),\n                'config': info.config\n            }\n        return status\n\n    def clear_cache(self, name: Optional[str] = None) -&gt; None:\n        \"\"\"Limpa inst\u00e2ncias em cache (for\u00e7a recarga).\"\"\"\n        with self._lock:\n            if name:\n                if name in self._instances:\n                    del self._instances[name]\n                    logger.info(f\"\ud83e\uddf9 Cache limpo para: {name}\")\n            else:\n                self._instances.clear()\n                logger.info(\"\ud83e\uddf9 Cache completo limpo\")\n</code></pre>"},{"location":"fases/FASE10_SERVICE_REGISTRY/#2-factories-infrastructurefactoriespy","title":"2. Factories (<code>infrastructure/factories.py</code>)","text":"<p>Responsabilidade: Criar inst\u00e2ncias de servi\u00e7os com configura\u00e7\u00e3o.</p> <pre><code>class MockTranslator:\n    \"\"\"Tradutor mock para testes/simula\u00e7\u00e3o.\"\"\"\n\n    def traduzir(self, texto: str, destino: str = 'en') -&gt; str:\n        return f\"[{destino.upper()} MOCK] {texto}\"\n\n    def traduzir_documento_completo(self, texto: str, destino: str = 'en') -&gt; str:\n        return self.traduzir(texto, destino)\n\n\nclass MockSpacyAnalyzer:\n    \"\"\"Analisador spaCy mock para testes.\"\"\"\n\n    def analisar(self, texto: str, documento_id: int, idioma: str = 'ru'):\n        from src.domain.value_objects.analise_texto import (\n            AnaliseTexto, EstatisticasTexto, Sentimento, Entidade\n        )\n        from datetime import datetime\n\n        return AnaliseTexto(\n            documento_id=documento_id,\n            idioma=idioma,\n            data_analise=datetime.now(),\n            estatisticas=EstatisticasTexto(\n                total_caracteres=len(texto),\n                total_palavras=len(texto.split()),\n                total_paragrafos=texto.count('\\n') + 1,\n                total_frases=10,\n                palavras_unicas=50,\n                densidade_lexica=0.5,\n                tamanho_medio_palavra=5.0,\n                tamanho_medio_frase=20.0\n            ),\n            entidades=[\n                Entidade(texto=\"\u041b.\u0412. \u041d\u0438\u043a\u043e\u043b\u0430\u0435\u0432\u0430\", tipo=\"PER\", confianca=1.0,\n                        posicao_inicio=0, posicao_fim=15)\n            ],\n            entidades_por_tipo={\"Pessoa\": [\"\u041b.\u0412. \u041d\u0438\u043a\u043e\u043b\u0430\u0435\u0432\u0430\"]},\n            sentimento=Sentimento(polaridade=0.0, subjetividade=0.5, classificacao=\"neutro\"),\n            palavras_frequentes=[(\"palavra\", 10) for _ in range(10)],\n            modelo_utilizado=\"mock\",\n            tempo_processamento=0.1\n        )\n\n\ndef create_translator(api_key: Optional[str] = None,\n                     simulate: bool = False,\n                     **kwargs) -&gt; GoogleTranslator:\n    \"\"\"\n    Factory para tradutor.\n    \"\"\"\n    logger.info(\"\ud83d\udd27 Factory: criando tradutor\")\n\n    if simulate:\n        logger.info(\"\ud83c\udfad Usando tradutor MOCK\")\n        return MockTranslator(**kwargs)\n\n    api_key = api_key or kwargs.get('api_key') or os.getenv('GOOGLE_TRANSLATE_API_KEY')\n\n    try:\n        return GoogleTranslator(api_key=api_key)\n    except Exception as e:\n        logger.error(f\"\u274c Falha ao criar tradutor real: {e}\")\n        logger.info(\"\ud83c\udfad Fallback para tradutor MOCK\")\n        return MockTranslator(**kwargs)\n\n\ndef create_spacy_analyzer(preload: list = None,\n                         simulate: bool = False,\n                         **kwargs):\n    \"\"\"Factory para analisador spaCy.\"\"\"\n    logger.info(\"\ud83d\udd27 Factory: criando analisador spaCy\")\n\n    if simulate:\n        return MockSpacyAnalyzer(**kwargs)\n\n    analyzer = SpacyAnalyzer()\n\n    if preload:\n        for lang in preload:\n            try:\n                analyzer._get_model(lang)\n            except Exception as e:\n                logger.warning(f\"\u26a0\ufe0f Falha ao pr\u00e9-carregar {lang}: {e}\")\n\n    return analyzer\n\n\ndef create_wordcloud_generator(**kwargs):\n    \"\"\"Factory para gerador de wordcloud.\"\"\"\n    logger.info(\"\ud83d\udd27 Factory: criando gerador de wordcloud\")\n    from src.infrastructure.analysis.wordcloud_generator import WordCloudGenerator\n    return WordCloudGenerator(**kwargs)\n\n\n# Mapeamento de factories por nome de servi\u00e7o\nSERVICE_FACTORIES = {\n    'translator': create_translator,\n    'spacy': create_spacy_analyzer,\n    'wordcloud': create_wordcloud_generator,\n}\n</code></pre>"},{"location":"fases/FASE10_SERVICE_REGISTRY/#3-configuracao-yaml-configyaml","title":"3. Configura\u00e7\u00e3o YAML (<code>config.yaml</code>)","text":"<pre><code># config.yaml - Configura\u00e7\u00e3o do ShowTrials\nenvironment: development\ndebug: true\n\nservices:\n  translator:\n    enabled: true\n    lazy: true\n    singleton: true\n    options:\n      api_key_required: true\n      default_target: en\n      timeout: 30\n\n  spacy:\n    enabled: true\n    lazy: true\n    singleton: true\n    options:\n      models:\n        ru: ru_core_news_sm\n        en: en_core_web_sm\n      preload: []  # modelos a carregar na inicializa\u00e7\u00e3o\n      auto_download: false\n\n  wordcloud:\n    enabled: true\n    lazy: true\n    singleton: true\n    options:\n      default_size: [800, 400]\n      max_words: 200\n      background_color: white\n\n  pdf_exporter:\n    enabled: false\n    lazy: true\n    singleton: true\n    options:\n      template_dir: templates/pdf\n</code></pre>"},{"location":"fases/FASE10_SERVICE_REGISTRY/#4-classe-de-configuracao-infrastructureconfig__init__py","title":"4. Classe de Configura\u00e7\u00e3o (<code>infrastructure/config/__init__.py</code>)","text":"<pre><code>@dataclass\nclass ServiceConfig:\n    \"\"\"Configura\u00e7\u00e3o de um servi\u00e7o individual.\"\"\"\n    enabled: bool = True\n    lazy: bool = True\n    singleton: bool = True\n    options: Dict[str, Any] = field(default_factory=dict)\n\n\n@dataclass\nclass ApplicationConfig:\n    \"\"\"Configura\u00e7\u00e3o completa da aplica\u00e7\u00e3o.\"\"\"\n    services: Dict[str, ServiceConfig] = field(default_factory=dict)\n    environment: str = \"development\"\n    debug: bool = False\n\n    @classmethod\n    def from_file(cls, path: Optional[Path] = None) -&gt; 'ApplicationConfig':\n        \"\"\"Carrega configura\u00e7\u00e3o de arquivo YAML/JSON.\"\"\"\n        config = cls()\n\n        if not path or not path.exists():\n            config.create_default_config(path)\n            return config\n\n        with open(path, 'r', encoding='utf-8') as f:\n            if path.suffix in ['.yaml', '.yml']:\n                data = yaml.safe_load(f)\n            else:\n                data = json.load(f)\n\n        if 'environment' in data:\n            config.environment = data['environment']\n        if 'debug' in data:\n            config.debug = data['debug']\n\n        if 'services' in data:\n            for name, svc_data in data['services'].items():\n                config.services[name] = ServiceConfig(\n                    enabled=svc_data.get('enabled', True),\n                    lazy=svc_data.get('lazy', True),\n                    singleton=svc_data.get('singleton', True),\n                    options=svc_data.get('options', {})\n                )\n\n        return config\n</code></pre>"},{"location":"fases/FASE10_SERVICE_REGISTRY/#fluxo-de-inicializacao-com-registry","title":"\ud83d\udd04 Fluxo de Inicializa\u00e7\u00e3o com Registry","text":"<pre><code>[Inicializa\u00e7\u00e3o] \u2192 [Carrega config.yaml] \u2192 [Cria Registry] \u2192 [Registra Servi\u00e7os]\n         \u2193                                                      \u2193\n    [Servi\u00e7os Eager] \u2190 [start_eager_services()]           [Servi\u00e7os Lazy]\n         \u2193                                                      \u2193\n    [Inst\u00e2ncias no cache]                              [Aguardando primeira chamada]\n</code></pre> <p>Passo a passo:</p> <ol> <li>Aplica\u00e7\u00e3o carrega <code>config.yaml</code></li> <li>Cria inst\u00e2ncia \u00fanica do <code>ServiceRegistry</code></li> <li>Para cada servi\u00e7o habilitado, registra com factory</li> <li>Inicializa servi\u00e7os marcados como <code>eager</code> (se houver)</li> <li>Servi\u00e7os <code>lazy</code> s\u00f3 s\u00e3o carregados na primeira chamada a <code>registry.get()</code></li> </ol>"},{"location":"fases/FASE10_SERVICE_REGISTRY/#testes-do-registry-teststest_registrypy","title":"\ud83e\uddea Testes do Registry (<code>tests/test_registry.py</code>)","text":"<pre><code>class TestServiceRegistry:\n    \"\"\"Testes para o registry de servi\u00e7os.\"\"\"\n\n    def setup_method(self):\n        self.registry = ServiceRegistry()\n        self.registry.reset()\n\n    def test_registrar_e_obter_servico(self):\n        def factory():\n            return {\"servico\": \"teste\"}\n\n        self.registry.register(\"teste\", factory)\n        servico = self.registry.get(\"teste\")\n\n        assert servico[\"servico\"] == \"teste\"\n        assert self.registry.get_status()[\"teste\"][\"calls\"] == 1\n\n    def test_lazy_loading_so_carrega_quando_chamado(self):\n        carregado = False\n\n        def factory():\n            nonlocal carregado\n            carregado = True\n            return {\"servico\": \"lazy\"}\n\n        self.registry.register(\"lazy\", factory, lazy=True)\n        assert not carregado\n\n        servico = self.registry.get(\"lazy\")\n        assert carregado\n        assert servico[\"servico\"] == \"lazy\"\n\n    def test_singleton_retorna_mesma_instancia(self):\n        instancias = []\n\n        def factory():\n            instancias.append(1)\n            return {\"id\": len(instancias)}\n\n        self.registry.register(\"singleton\", factory, singleton=True)\n\n        s1 = self.registry.get(\"singleton\")\n        s2 = self.registry.get(\"singleton\")\n\n        assert s1 is s2\n        assert len(instancias) == 1\n\n    def test_clear_cache(self):\n        cargas = 0\n\n        def factory():\n            nonlocal cargas\n            cargas += 1\n            return {\"carga\": cargas}\n\n        self.registry.register(\"cache\", factory)\n\n        s1 = self.registry.get(\"cache\")\n        assert s1[\"carga\"] == 1\n        assert cargas == 1\n\n        self.registry.clear_cache(\"cache\")\n\n        s2 = self.registry.get(\"cache\")\n        assert s2[\"carga\"] == 2\n        assert cargas == 2\n</code></pre>"},{"location":"fases/FASE10_SERVICE_REGISTRY/#metricas-de-performance","title":"\ud83d\udcca M\u00e9tricas de Performance","text":"Cen\u00e1rio Antes Depois Ganho Inicializa\u00e7\u00e3o da aplica\u00e7\u00e3o 3.5s 0.3s 91% Mem\u00f3ria em repouso 1.2GB 80MB 93% Primeira an\u00e1lise (ru) 2.1s 2.1s + 0.5s* - An\u00e1lises subsequentes 2.1s 2.1s 0% <p>*O primeiro acesso paga o custo de carregamento do modelo</p>"},{"location":"fases/FASE10_SERVICE_REGISTRY/#principios-aplicados","title":"\ud83d\udcda Princ\u00edpios Aplicados","text":"Princ\u00edpio Aplica\u00e7\u00e3o Singleton Uma \u00fanica inst\u00e2ncia do registry Factory Cria\u00e7\u00e3o de servi\u00e7os encapsulada Lazy Loading Servi\u00e7os carregados sob demanda Thread Safety Locks para acesso concorrente Configuration Management Configura\u00e7\u00e3o centralizada em YAML Dependency Injection Servi\u00e7os injetados via registry"},{"location":"fases/FASE10_SERVICE_REGISTRY/#integracao-com-fases-anteriores","title":"\ud83d\udd17 Integra\u00e7\u00e3o com Fases Anteriores","text":"Fase Como foi integrado FASE 5 (Tradu\u00e7\u00e3o) <code>GoogleTranslator</code> registrado no registry FASE 8 (An\u00e1lise) <code>SpacyAnalyzer</code> e <code>WordCloudGenerator</code> registrados FASE 9 (Web) Registry compartilhado via <code>app.state</code>"},{"location":"fases/FASE10_SERVICE_REGISTRY/#como-usar","title":"\ud83d\ude80 Como Usar","text":""},{"location":"fases/FASE10_SERVICE_REGISTRY/#registrando-um-servico","title":"Registrando um servi\u00e7o","text":"<pre><code>registry = ServiceRegistry()\nregistry.register('meu_servico', minha_factory, lazy=True)\n</code></pre>"},{"location":"fases/FASE10_SERVICE_REGISTRY/#obtendo-um-servico","title":"Obtendo um servi\u00e7o","text":"<pre><code>servico = registry.get('meu_servico')\n</code></pre>"},{"location":"fases/FASE10_SERVICE_REGISTRY/#verificando-status","title":"Verificando status","text":"<pre><code>status = registry.get_status()\nprint(status['meu_servico']['loaded'])  # True se j\u00e1 carregado\n</code></pre>"},{"location":"fases/FASE10_SERVICE_REGISTRY/#metricas-do-projeto-apos-fase-10","title":"\ud83d\udcc8 M\u00e9tricas do Projeto (Ap\u00f3s FASE 10)","text":"<pre><code>\ud83d\udcca DOMAIN LAYER: 5 entidades | 18 testes\n\ud83d\udcca APPLICATION LAYER: 8 casos de uso | 10 testes\n\ud83d\udcca INFRASTRUCTURE LAYER: 7 m\u00f3dulos | 28 testes\n\ud83d\udcca INTERFACE LAYER: 12+ m\u00f3dulos | Validada manualmente\n\ud83d\udcca TOTAL: 56 testes automatizados\n</code></pre>"},{"location":"fases/FASE10_SERVICE_REGISTRY/#autor","title":"\ud83d\udc64 Autor","text":"<p>Thiago Ribeiro - Projeto de TCC</p> <sub>FASE 10 conclu\u00edda em 17 de Fevereiro de 2026</sub> <sub>\u2705 Pronto para as pr\u00f3ximas evolu\u00e7\u00f5es</sub> <p>```</p>"},{"location":"fases/FASE11_CI/","title":"FASE 11 - CI: Estabiliza\u00e7\u00e3o do Pipeline de Integra\u00e7\u00e3o Cont\u00ednua","text":"**Implementa\u00e7\u00e3o da solu\u00e7\u00e3o tempor\u00e1ria para depend\u00eancias NLP no GitHub Actions**"},{"location":"fases/FASE11_CI/#informacoes-da-fase","title":"\ud83d\udcc5 Informa\u00e7\u00f5es da Fase","text":"Item Descri\u00e7\u00e3o Status \u2705 Conclu\u00edda Data de Conclus\u00e3o 19/02/2026 Artefatos <code>.github/workflows/ci.yml</code> (modificado) Depend\u00eancias FASE 8 (An\u00e1lise de Texto), FASE 10 (Service Registry) Issue principal #CI Commit principal <code>c87fc9e</code> <p>Nota: O diagn\u00f3stico completo desta fase est\u00e1 documentado em <code>metricas/diagnostico_ci.md</code></p>"},{"location":"fases/FASE11_CI/#objetivo","title":"\ud83c\udfaf Objetivo","text":"<p>Corrigir as falhas no pipeline de CI que estavam impedindo todos os merges das branches <code>type/*</code>, causadas pela aus\u00eancia das depend\u00eancias de NLP (spacy, numpy, etc.) no ambiente do GitHub Actions.</p>"},{"location":"fases/FASE11_CI/#arquivo-modificado","title":"\ud83d\udcc1 Arquivo Modificado","text":"<pre><code>.github/\n\u2514\u2500\u2500 workflows/\n    \u2514\u2500\u2500 ci.yml  # Modificado para incluir instala\u00e7\u00e3o via pip\n</code></pre>"},{"location":"fases/FASE11_CI/#componentes-implementados","title":"\ud83e\udde9 Componentes Implementados","text":""},{"location":"fases/FASE11_CI/#modificacao-no-github-actions-workflow","title":"Modifica\u00e7\u00e3o no GitHub Actions Workflow","text":"<p>Antes: <pre><code>- name: Install dependencies\n  run: poetry install --no-interaction\n</code></pre></p> <p>Depois: <pre><code>- name: Install Poetry dependencies\n  run: poetry install --no-interaction\n\n- name: Install NLP dependencies (pip)\n  run: |\n    poetry run pip install numpy==1.26.0\n    poetry run pip install spacy==3.7.5\n    poetry run pip install textblob nltk wordcloud matplotlib\n    poetry run python -m spacy download en_core_web_sm\n    poetry run python -m spacy download ru_core_news_sm\n</code></pre></p>"},{"location":"fases/FASE11_CI/#testes","title":"\ud83e\uddea Testes","text":""},{"location":"fases/FASE11_CI/#verificacao-da-solucao","title":"Verifica\u00e7\u00e3o da Solu\u00e7\u00e3o","text":"<pre><code># Ap\u00f3s a modifica\u00e7\u00e3o, todos os testes voltaram a passar no CI\npoetry run pytest src/tests/ -v\n</code></pre> <p>Resultado no GitHub Actions: <pre><code>All checks passed! \u2705\n</code></pre></p>"},{"location":"fases/FASE11_CI/#metricas-da-fase","title":"\ud83d\udcca M\u00e9tricas da Fase","text":"M\u00e9trica Antes Depois Evolu\u00e7\u00e3o Merges bloqueados 12 0 \u2705 Desbloqueado Testes falhando no CI 4+ 0 \u2705 Resolvido Tempo de CI ~3min ~4min \u26a0\ufe0f +1min (pip install)"},{"location":"fases/FASE11_CI/#principios-aplicados","title":"\ud83d\udcda Princ\u00edpios Aplicados","text":"Princ\u00edpio Aplica\u00e7\u00e3o Fail Fast Diagn\u00f3stico r\u00e1pido identificou causa raiz Technical Debt Solu\u00e7\u00e3o tempor\u00e1ria documentada com TODO Reproducibility Ambiente CI replicado localmente"},{"location":"fases/FASE11_CI/#integracao-com-fases","title":"\ud83d\udd17 Integra\u00e7\u00e3o com Fases","text":"Fase Relacionamento FASE 8 Depend\u00eancias de NLP foram introduzidas FASE 10 Service Registry j\u00e1 estava est\u00e1vel Issue #1 TODO: Migrar NLP para Poetry"},{"location":"fases/FASE11_CI/#evolucao-do-codigo","title":"\ud83d\udd04 Evolu\u00e7\u00e3o do C\u00f3digo","text":""},{"location":"fases/FASE11_CI/#antes-ci-quebrado","title":"Antes (CI quebrado)","text":"<pre><code># Apenas poetry install, NLP ausente\n- run: poetry install\n- run: pytest  # FALHA: ModuleNotFoundError: spacy\n</code></pre>"},{"location":"fases/FASE11_CI/#depois-ci-funcionando","title":"Depois (CI funcionando)","text":"<pre><code># Poetry + pip install das depend\u00eancias NLP\n- run: poetry install\n- run: poetry run pip install numpy==1.26.0 spacy==3.7.5\n- run: poetry run python -m spacy download en_core_web_sm\n- run: pytest  # \u2705 PASS\n</code></pre>"},{"location":"fases/FASE11_CI/#licoes-aprendidas","title":"\ud83d\udd0d Li\u00e7\u00f5es Aprendidas","text":"<ol> <li>Ambientes diferentes, problemas diferentes - O que funciona local pode falhar no CI</li> <li>Documente solu\u00e7\u00f5es tempor\u00e1rias - O TODO list evitou que o problema fosse esquecido</li> <li>Commits descritivos salvam - A mensagem do commit <code>c87fc9e</code> j\u00e1 documentava a decis\u00e3o</li> <li>Separe diagn\u00f3stico de solu\u00e7\u00e3o - O diagn\u00f3stico detalhado agora vive em <code>metricas/</code></li> </ol>"},{"location":"fases/FASE11_CI/#issues-relacionadas","title":"\ud83d\udccb Issues Relacionadas","text":"<ul> <li>#1 - Migrar depend\u00eancias NLP para Poetry (futuro)</li> <li>#CI - CI quebrado (resolvido)</li> </ul>"},{"location":"fases/FASE11_CI/#autor","title":"\ud83d\udc64 Autor","text":"<p>Thiago Ribeiro - Projeto de TCC</p> <sub>FASE 11 conclu\u00edda em 19/02/2026</sub> <sub>\u2705 CI estabilizado \u2022 \ud83d\udea7 TODO: Migrar para Poetry (Issue #1)</sub> <p>```</p>"},{"location":"fases/FASE12/","title":"FASE 12 - Padroniza\u00e7\u00e3o da Telemetria no TipoDocumento","text":"**Corre\u00e7\u00e3o dos testes de telemetria e unifica\u00e7\u00e3o do padr\u00e3o de instrumenta\u00e7\u00e3o**"},{"location":"fases/FASE12/#informacoes-da-fase","title":"\ud83d\udcc5 Informa\u00e7\u00f5es da Fase","text":"Item Descri\u00e7\u00e3o Status \u2705 Conclu\u00edda Data de Conclus\u00e3o 19/02/2026 Data de In\u00edcio 19 de Fevereiro de 2026 Artefatos <code>src/domain/value_objects/tipo_documento.py</code> Depend\u00eancias FASE 11 (CI), FASE 8 (An\u00e1lise de Texto) Issue principal #2 Commit principal <code>1b91b23</code> Diagn\u00f3stico relacionado <code>diagnostico_fase12.md</code>"},{"location":"fases/FASE12/#objetivo","title":"\ud83c\udfaf Objetivo","text":"<p>Padronizar a implementa\u00e7\u00e3o da telemetria no arquivo <code>tipo_documento.py</code> para seguir o mesmo padr\u00e3o utilizado em todos os outros arquivos do projeto, resolvendo os 4 testes falhando e garantindo consist\u00eancia na instrumenta\u00e7\u00e3o.</p>"},{"location":"fases/FASE12/#solucao-proposta","title":"\ud83d\udee0\ufe0f Solu\u00e7\u00e3o Proposta","text":"<p>Substituir a implementa\u00e7\u00e3o atual de telemetria em <code>tipo_documento.py</code> pelo padr\u00e3o consolidado no projeto:</p> <ol> <li>Remover o decorator <code>@monitor</code></li> <li>Adicionar vari\u00e1vel global <code>_telemetry</code></li> <li>Adicionar fun\u00e7\u00e3o <code>configure_telemetry</code></li> <li>Adicionar verifica\u00e7\u00f5es <code>if _telemetry:</code> nos m\u00e9todos relevantes</li> </ol>"},{"location":"fases/FASE12/#passo-a-passo-da-correcao","title":"\ud83d\udcdd Passo a Passo da Corre\u00e7\u00e3o","text":""},{"location":"fases/FASE12/#passo-1-criar-branch-de-correcao","title":"Passo 1: Criar branch de corre\u00e7\u00e3o","text":"<pre><code># Certifique-se de estar na main atualizada\ngit checkout main\ngit pull origin main\n\n# Criar branch seguindo o padr\u00e3o\ngit checkout -b fix/tipo-documento-telemetry\n</code></pre>"},{"location":"fases/FASE12/#passo-2-editar-o-arquivo-srcdomainvalue_objectstipo_documentopy","title":"Passo 2: Editar o arquivo <code>src/domain/value_objects/tipo_documento.py</code>","text":"<p>Substitua TODO o conte\u00fado pelo c\u00f3digo abaixo:</p> <pre><code># src/domain/value_objects/tipo_documento.py\n\"\"\"\nValue Object: TipoDocumento\nRepresenta os tipos poss\u00edveis de documentos hist\u00f3ricos.\n\"\"\"\n\nfrom enum import Enum\nfrom typing import Dict, List, Optional\n\n# Telemetria opcional (padr\u00e3o do projeto)\n_telemetry = None\n\n\ndef configure_telemetry(telemetry_instance=None):\n    \"\"\"Configura telemetria para este m\u00f3dulo (usado apenas em testes).\"\"\"\n    global _telemetry\n    _telemetry = telemetry_instance\n\n\nclass TipoDocumento(Enum):\n    \"\"\"\n    Enumera\u00e7\u00e3o dos tipos de documento identificados no acervo.\n    \"\"\"\n\n    INTERROGATORIO = \"interrogatorio\"\n    ACAREACAO = \"acareacao\"\n    ACUSACAO = \"acusacao\"\n    DECLARACAO = \"declaracao\"\n    CARTA = \"carta\"\n    RELATORIO = \"relatorio\"\n    DEPOIMENTO = \"depoimento\"\n    LAUDO = \"laudo\"\n    DESCONHECIDO = \"desconhecido\"\n\n    @property\n    def descricao_pt(self) -&gt; str:\n        \"\"\"Descri\u00e7\u00e3o em portugu\u00eas para UI\"\"\"\n        descricoes: Dict[str, str] = {\n            \"interrogatorio\": \"Protocolo de Interrogat\u00f3rio\",\n            \"acareacao\": \"Protocolo de Acarea\u00e7\u00e3o\",\n            \"acusacao\": \"Auto de Acusa\u00e7\u00e3o\",\n            \"declaracao\": \"Declara\u00e7\u00e3o/Requerimento\",\n            \"carta\": \"Correspond\u00eancia\",\n            \"relatorio\": \"Relat\u00f3rio Especial (NKVD)\",\n            \"depoimento\": \"Depoimento Espont\u00e2neo\",\n            \"laudo\": \"Laudo Pericial\",\n            \"desconhecido\": \"N\u00e3o classificado\",\n        }\n        return descricoes[self.value]\n\n    @property\n    def descricao_en(self) -&gt; str:\n        \"\"\"Descri\u00e7\u00e3o em ingl\u00eas para exporta\u00e7\u00e3o\"\"\"\n        descricoes: Dict[str, str] = {\n            \"interrogatorio\": \"Interrogation Protocol\",\n            \"acareacao\": \"Confrontation Protocol\",\n            \"acusacao\": \"Indictment\",\n            \"declaracao\": \"Statement\",\n            \"carta\": \"Correspondence\",\n            \"relatorio\": \"NKVD Special Report\",\n            \"depoimento\": \"Testimony\",\n            \"laudo\": \"Forensic Report\",\n            \"desconhecido\": \"Unclassified\",\n        }\n        return descricoes[self.value]\n\n    @property\n    def icone(self) -&gt; str:\n        \"\"\"\u00cdcone para UI\"\"\"\n        icones: Dict[str, str] = {\n            \"interrogatorio\": \"\ud83d\udd0d\",\n            \"acareacao\": \"\u2696\ufe0f\",\n            \"acusacao\": \"\ud83d\udcdc\",\n            \"declaracao\": \"\ud83d\udcdd\",\n            \"carta\": \"\u2709\ufe0f\",\n            \"relatorio\": \"\ud83d\udccb\",\n            \"depoimento\": \"\ud83d\udde3\ufe0f\",\n            \"laudo\": \"\ud83c\udfe5\",\n            \"desconhecido\": \"\ud83d\udcc4\",\n        }\n        return icones[self.value]\n\n    @classmethod\n    def from_titulo(cls, titulo: str) -&gt; \"TipoDocumento\":\n        \"\"\"\n        Classifica o tipo baseado no t\u00edtulo em russo.\n        \"\"\"\n        global _telemetry\n\n        if not titulo:\n            if _telemetry:\n                _telemetry.increment(\"tipo_documento.titulo_vazio\")\n            return cls.DESCONHECIDO\n\n        # Mapeamento de padr\u00f5es para tipos\n        padroes: Dict[str, List[str]] = {\n            \"interrogatorio\": [\"\u041f\u0440\u043e\u0442\u043e\u043a\u043e\u043b \u0434\u043e\u043f\u0440\u043e\u0441\u0430\"],\n            \"acareacao\": [\"\u041f\u0440\u043e\u0442\u043e\u043a\u043e\u043b \u043e\u0447\u043d\u043e\u0439 \u0441\u0442\u0430\u0432\u043a\u0438\"],\n            \"acusacao\": [\"\u041f\u0440\u043e\u0435\u043a\u0442 \u043e\u0431\u0432\u0438\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0433\u043e \u0437\u0430\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f\", \"\u041e\u0431\u0432\u0438\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u0437\u0430\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435\"],\n            \"declaracao\": [\"\u0417\u0430\u044f\u0432\u043b\u0435\u043d\u0438\u0435\"],\n            \"carta\": [\"\u041f\u0438\u0441\u044c\u043c\u043e\"],\n            \"relatorio\": [\"\u0421\u043f\u0435\u0446\u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435\"],\n            \"depoimento\": [\"\u041f\u043e\u043a\u0430\u0437\u0430\u043d\u0438\u044f\", \"\u041f\u043e\u043a\u0430\u0437\u0430\u043d\u0438\u0435\"],\n            \"laudo\": [\"\u0410\u043a\u0442 \u0441\u0443\u0434\u0435\u0431\u043d\u043e-\u043c\u0435\u0434\u0438\u0446\u0438\u043d\u0441\u043a\u043e\u0433\u043e\"],\n        }\n\n        for tipo_str, padroes_lista in padroes.items():\n            for padrao in padroes_lista:\n                if padrao in titulo:\n                    if _telemetry:\n                        _telemetry.increment(f\"tipo_documento.classificado.{tipo_str}\")\n                    return cls(tipo_str)\n\n        if _telemetry:\n            _telemetry.increment(\"tipo_documento.desconhecido\")\n        return cls.DESCONHECIDO\n\n    @classmethod\n    def listar_todos(cls) -&gt; List[\"TipoDocumento\"]:\n        \"\"\"Retorna todos os tipos v\u00e1lidos (exceto desconhecido)\"\"\"\n        return [t for t in cls if t != cls.DESCONHECIDO]\n</code></pre>"},{"location":"fases/FASE12/#passo-3-verificar-as-mudancas","title":"Passo 3: Verificar as mudan\u00e7as","text":"<pre><code># Ver o que foi alterado\ngit diff src/domain/value_objects/tipo_documento.py\n</code></pre>"},{"location":"fases/FASE12/#passo-4-testar-localmente","title":"Passo 4: Testar localmente","text":"<pre><code># Rodar apenas os testes que estavam falhando\npoetry run pytest src/tests/test_tipo_documento_telemetry.py -v\n\n# Deve mostrar 5/5 passed (incluindo o novo teste)\n</code></pre>"},{"location":"fases/FASE12/#passo-5-rodar-todos-os-testes-para-garantir","title":"Passo 5: Rodar todos os testes para garantir","text":"<pre><code>poetry run pytest src/tests/ -v\n</code></pre> <p>Sa\u00edda esperada: <pre><code>collected 180 items\n... (todos passando)\n180 passed in XX.XXs\n</code></pre></p>"},{"location":"fases/FASE12/#passo-6-commit-com-mensagem-padronizada","title":"Passo 6: Commit com mensagem padronizada","text":"<pre><code>git add src/domain/value_objects/tipo_documento.py\ngit commit -m \"fix: padroniza telemetria em tipo_documento.py\n\n- Substitui decorator @monitor pelo padr\u00e3o _telemetry/configure_telemetry\n- Adiciona chamadas a _telemetry.increment() nos pontos relevantes\n- Resolve 4 testes falhando em test_tipo_documento_telemetry.py\n- Mant\u00e9m compatibilidade com o padr\u00e3o do projeto\n\nEsta corre\u00e7\u00e3o unifica a instrumenta\u00e7\u00e3o com os demais arquivos\n(documento.py, traducao.py, analise_texto.py, etc.)\"\n</code></pre>"},{"location":"fases/FASE12/#passo-7-push-para-o-github","title":"Passo 7: Push para o GitHub","text":"<pre><code>git push origin fix/tipo-documento-telemetry\n</code></pre>"},{"location":"fases/FASE12/#passo-8-verificar-ci","title":"Passo 8: Verificar CI","text":"<pre><code># Acompanhar a execu\u00e7\u00e3o\ngh run list -L 5\n# ou\ngh run watch\n</code></pre> <p>Resultado esperado: <pre><code>\u2705 Todos os 180 testes passando\n\u2705 Cobertura mantida em 63%\n\u2705 CI verde\n</code></pre></p>"},{"location":"fases/FASE12/#checklist-de-verificacao","title":"\u2705 Checklist de Verifica\u00e7\u00e3o","text":"Etapa Descri\u00e7\u00e3o Status 1 Branch <code>fix/tipo-documento-telemetry</code> criada \u2b1c 2 Arquivo <code>tipo_documento.py</code> modificado \u2b1c 3 Testes locais passando (180/180) \u2b1c 4 Commit feito com mensagem padr\u00e3o \u2b1c 5 Push para o GitHub \u2b1c 6 CI passando no GitHub \u2b1c"},{"location":"fases/FASE12/#proximos-passos-apos-o-merge","title":"\ud83d\udd2e Pr\u00f3ximos Passos (ap\u00f3s o merge)","text":"<p>Com todos os testes passando, podemos:</p> <ol> <li> <p>Fazer o merge da branch <pre><code>git checkout main\ngit pull origin main\ngit merge fix/tipo-documento-telemetry\ngit push origin main\n</code></pre></p> </li> <li> <p>Iniciar as pr\u00f3ximas fases:</p> </li> <li>Limpeza dos arquivos <code>.bak</code></li> <li>Corre\u00e7\u00e3o gradual dos erros de MyPy</li> <li>Implementa\u00e7\u00e3o de novos casos de uso</li> </ol>"},{"location":"fases/FASE12/#referencias","title":"\ud83d\udcda Refer\u00eancias","text":"<ul> <li>FASE 5 - Tradu\u00e7\u00e3o Avan\u00e7ada: Primeiro uso do padr\u00e3o de telemetria</li> <li>FASE 8 - An\u00e1lise de Texto: Padroniza\u00e7\u00e3o do padr\u00e3o</li> <li>FASE 11 - Estabiliza\u00e7\u00e3o do CI: Contexto do problema</li> </ul>"},{"location":"fases/FASE12/#diagnostico-relacionado","title":"\ud83d\udccb Diagn\u00f3stico Relacionado","text":"<p>Para uma an\u00e1lise detalhada do problema que motivou esta fase, consulte: - <code>diagnostico_fase12.md</code></p>"},{"location":"fases/FASE12/#autor","title":"\ud83d\udc64 Autor","text":"<p>Thiago Ribeiro - Projeto de TCC Com assist\u00eancia de DeepSeek - Diagn\u00f3stico e corre\u00e7\u00e3o</p> <sub>FASE 12 conclu\u00edda em 19/02/2026</sub> <sub>\u2705 Telemetria padronizada \u2022 \ud83e\uddea 4 testes de telemetria resolvidos</sub>"},{"location":"fases/FASE13/","title":"FASE 13 - Limpeza","text":""},{"location":"fases/FASE13/#fase13md-limpeza-e-organizacao-do-repositorio","title":"\ud83d\udcc4 FASE13.md - Limpeza e Organiza\u00e7\u00e3o do Reposit\u00f3rio","text":"<pre><code># FASE 13 - Limpeza e Organiza\u00e7\u00e3o do Reposit\u00f3rio\n\n&lt;div align=\"center\"&gt;\n\n**Remo\u00e7\u00e3o de arquivos obsoletos, c\u00f3digo legado e organiza\u00e7\u00e3o da estrutura do projeto**\n\n&lt;/div&gt;\n\n## \ud83d\udcc5 **Informa\u00e7\u00f5es da Fase**\n\n| Item | Descri\u00e7\u00e3o |\n|------|-----------|\n| **Status** | \u2705 Conclu\u00edda |\n| **Data de Conclus\u00e3o** | 20 de Fevereiro de 2026 |\n| **Artefatos** | Reposit\u00f3rio limpo, scripts organizados, .gitignore atualizado |\n| **Depend\u00eancias** | FASE 11 (CI), FASE 12 (Telemetria) |\n| **Branch principal** | `chore/cleanup-repository` |\n\n---\n\n## \ud83c\udfaf **Objetivo**\n\nRealizar uma limpeza completa no reposit\u00f3rio, removendo arquivos desnecess\u00e1rios, c\u00f3digo legado e artefatos gerados pela aplica\u00e7\u00e3o, al\u00e9m de organizar scripts e documenta\u00e7\u00e3o para melhor manutenibilidade do projeto.\n\n---\n\n## \ud83d\udd0d **Contexto e Motiva\u00e7\u00e3o**\n\nAp\u00f3s v\u00e1rias fases de desenvolvimento, corre\u00e7\u00f5es de CI e implementa\u00e7\u00f5es de telemetria, o reposit\u00f3rio acumulou diversos arquivos que n\u00e3o deveriam estar versionados:\n\n1. **Artefatos gerados pela aplica\u00e7\u00e3o**: Wordclouds, documentos exportados, relat\u00f3rios\n2. **Pastas de diagn\u00f3stico**: M\u00faltiplas pastas `diagnostico_*/` com logs e relat\u00f3rios tempor\u00e1rios\n3. **C\u00f3digo legado**: Pasta `legacy/` com c\u00f3digo anterior \u00e0 refatora\u00e7\u00e3o\n4. **Arquivos de backup**: `*.bak` espalhados pelo c\u00f3digo\n5. **Banco de dados duplicado**: `showtrials.db` vazio na raiz versus o banco real em `data/`\n6. **Scripts soltos**: V\u00e1rios scripts bash na raiz do projeto\n\n---\n\n## \ud83d\udcca **Diagn\u00f3stico Inicial**\n\nAntes da limpeza, utilizamos o script `diagnostico_limpeza.sh` para mapear todos os itens:\n\n### \ud83d\udccb **Itens Identificados**\n\n| Categoria | Quantidade | Exemplos |\n|-----------|------------|----------|\n| **Arquivos .bak** | 11 | `analise.py.bak`, `presenters.py.bak`, `spacy_analyzer.py.bak` |\n| **Pastas de diagn\u00f3stico** | 4 | `diagnostico_20260219_225218/`, `diagnostico_ci_20260219_231532/` |\n| **Arquivos .tar.gz** | 2 | `showtrials_diagnostico_*.tar.gz` |\n| **Artefatos da aplica\u00e7\u00e3o** | 3 pastas | `analises/`, `exportados/`, `relatorios/` |\n| **C\u00f3digo legado** | 1 pasta | `legacy/` (10+ arquivos) |\n| **Banco duplicado** | 1 arquivo | `showtrials.db` (0 bytes na raiz) |\n| **Scripts na raiz** | 3 | `diagnostico.sh`, `diagnostico_ci.sh`, `diagnostico_limpeza.sh` |\n\n### \ud83d\udd2c **An\u00e1lise Cr\u00edtica**\n\n#### **Banco de Dados**\n```bash\n# Compara\u00e7\u00e3o entre os dois bancos\nls -lh showtrials.db\n&gt; -rw-r--r-- 0 bytes - 12 fev\n\nls -lh data/showtrials.db\n&gt; -rw-r--r-- 4.7M - 20 fev (519 documentos)\n\n# Verifica\u00e7\u00e3o de refer\u00eancia no c\u00f3digo\ngrep -r \"showtrials.db\" src/\n&gt; src/infrastructure/config/settings.py: DB_PATH = BASE_DIR / \"data\" / \"showtrials.db\"\n</code></pre> <p>Conclus\u00e3o: O banco na raiz \u00e9 um resqu\u00edcio vazio. O banco correto est\u00e1 em <code>data/</code>.</p>"},{"location":"fases/FASE13/#codigo-legado","title":"C\u00f3digo Legado","text":"<pre><code># Verificar refer\u00eancias a legacy no c\u00f3digo atual\ngrep -r \"legacy\" --include=\"*.py\" src/\n&gt; Nenhuma refer\u00eancia encontrada\n</code></pre> <p>Conclus\u00e3o: A pasta <code>legacy/</code> pode ser removida com seguran\u00e7a.</p>"},{"location":"fases/FASE13/#estrategia-de-limpeza","title":"\ud83d\udee0\ufe0f Estrat\u00e9gia de Limpeza","text":""},{"location":"fases/FASE13/#principios-adotados","title":"Princ\u00edpios Adotados","text":"<ol> <li>Seguran\u00e7a primeiro: Verificar refer\u00eancias antes de remover</li> <li>Organiza\u00e7\u00e3o: Mover, n\u00e3o apenas deletar quando fizer sentido</li> <li>Documenta\u00e7\u00e3o: Registrar decis\u00f5es para refer\u00eancia futura</li> <li>Git hygiene: Commits at\u00f4micos e mensagens claras</li> </ol>"},{"location":"fases/FASE13/#decisoes-por-categoria","title":"Decis\u00f5es por Categoria","text":"Categoria Decis\u00e3o Justificativa Artefatos da aplica\u00e7\u00e3o \u2705 Remover Podem ser recriados pela aplica\u00e7\u00e3o Pastas de diagn\u00f3stico \u2705 Remover Tempor\u00e1rias, espec\u00edficas de debug Arquivos .tar.gz \u2705 Remover Compactados, j\u00e1 extra\u00eddos C\u00f3digo legado \u2705 Remover Sem refer\u00eancias no c\u00f3digo atual Banco na raiz \u2705 Remover Duplicado e vazio Scripts de diagn\u00f3stico \ud83d\udce6 Mover para <code>scripts/</code> Organiza\u00e7\u00e3o Documenta\u00e7\u00e3o .md \ud83d\udce6 Manter em <code>docs/</code> J\u00e1 organizada em branch separada"},{"location":"fases/FASE13/#plano-de-execucao","title":"\ud83d\udcdd Plano de Execu\u00e7\u00e3o","text":""},{"location":"fases/FASE13/#fase-1-preparacao","title":"Fase 1: Prepara\u00e7\u00e3o","text":"<pre><code># Criar branch espec\u00edfica\ngit checkout -b chore/cleanup-repository\n\n# Verificar estado atual\ngit status\n</code></pre>"},{"location":"fases/FASE13/#fase-2-remocao-de-artefatos","title":"Fase 2: Remo\u00e7\u00e3o de Artefatos","text":"<pre><code># Pastas geradas pela aplica\u00e7\u00e3o\nrm -rf analises/ exportados/ relatorios/\n\n# Pastas de diagn\u00f3stico\nrm -rf diagnostico_20260219_225218/ diagnostico_20260219_225619/\nrm -rf diagnostico_ci_20260219_231532/ limpeza_20260220_002943/\n\n# Arquivos .tar.gz\nrm -f showtrials_diagnostico_*.tar.gz\n</code></pre>"},{"location":"fases/FASE13/#fase-3-remocao-de-codigo-morto","title":"Fase 3: Remo\u00e7\u00e3o de C\u00f3digo Morto","text":"<pre><code># C\u00f3digo legado\nrm -rf legacy/\n\n# Arquivos .bak\nfind . -name \"*.bak\" -type f -delete\n</code></pre>"},{"location":"fases/FASE13/#fase-4-organizacao-de-scripts","title":"Fase 4: Organiza\u00e7\u00e3o de Scripts","text":"<pre><code># Mover scripts para pasta apropriada\nmkdir -p scripts\nmv diagnostico.sh scripts/\nmv diagnostico_ci.sh scripts/\nmv diagnostico_limpeza.sh scripts/\n</code></pre>"},{"location":"fases/FASE13/#fase-5-limpeza-do-banco","title":"Fase 5: Limpeza do Banco","text":"<pre><code># Remover banco vazio da raiz\nrm -f showtrials.db\n</code></pre>"},{"location":"fases/FASE13/#fase-6-atualizacao-do-gitignore","title":"Fase 6: Atualiza\u00e7\u00e3o do .gitignore","text":"<pre><code># Adicionar padr\u00f5es que n\u00e3o devem ser versionados\ncat &gt;&gt; .gitignore &lt;&lt; EOF\n\n# Artefatos gerados\n/analises/\n/exportados/\n/relatorios/\n/site/\n\n# Relat\u00f3rios de teste\ncoverage.xml\nhtmlcov/\n\n# Python\n__pycache__/\n*.pyc\nEOF\n</code></pre>"},{"location":"fases/FASE13/#desafios-encontrados","title":"\ud83e\udd14 Desafios Encontrados","text":""},{"location":"fases/FASE13/#desafio-1-identificar-o-banco-correto","title":"Desafio 1: Identificar o Banco Correto","text":"<p>Inicialmente, n\u00e3o estava claro qual dos dois arquivos <code>showtrials.db</code> (raiz vs <code>data/</code>) era o banco de dados ativo.</p> <p>Solu\u00e7\u00e3o: <pre><code># Verificar tamanho e conte\u00fado\nls -lh showtrials.db data/showtrials.db\nsqlite3 data/showtrials.db \"SELECT COUNT(*) FROM documentos;\"\n\n# Verificar refer\u00eancia no c\u00f3digo\ngrep -r \"showtrials.db\" src/\n</code></pre></p> <p>O banco em <code>data/</code> tinha 4.7MB e 519 documentos, enquanto o da raiz tinha 0 bytes. O c\u00f3digo referenciava explicitamente <code>data/showtrials.db</code>.</p>"},{"location":"fases/FASE13/#desafio-2-seguranca-na-remocao-do-legacy","title":"Desafio 2: Seguran\u00e7a na Remo\u00e7\u00e3o do Legacy","text":"<p>A pasta <code>legacy/</code> continha c\u00f3digo antigo que poderia estar sendo importado em algum lugar.</p> <p>Solu\u00e7\u00e3o: <pre><code># Busca exaustiva por refer\u00eancias\ngrep -r \"legacy\" --include=\"*.py\" src/\ngrep -r \"from legacy\\|import legacy\" --include=\"*.py\" src/\n</code></pre></p> <p>Nenhuma refer\u00eancia foi encontrada, confirmando que o c\u00f3digo n\u00e3o \u00e9 mais utilizado.</p>"},{"location":"fases/FASE13/#desafio-3-organizacao-sem-perda-de-informacao","title":"Desafio 3: Organiza\u00e7\u00e3o sem Perda de Informa\u00e7\u00e3o","text":"<p>Os scripts de diagn\u00f3stico eram \u00fateis, mas polu\u00edam a raiz do projeto.</p> <p>Solu\u00e7\u00e3o: Criamos a pasta <code>scripts/</code> (que j\u00e1 existia) e movemos todos os scripts para l\u00e1, mantendo a funcionalidade mas organizando a estrutura.</p>"},{"location":"fases/FASE13/#desafio-4-documentacao-em-andamento","title":"Desafio 4: Documenta\u00e7\u00e3o em Andamento","text":"<p>Arquivos como <code>FASE12.md</code> e <code>cobertura.md (vers\u00e3o hist\u00f3rica)</code> n\u00e3o deveriam ser simplesmente deletados, mas tamb\u00e9m n\u00e3o estavam prontos para vers\u00e3o final.</p> <p>Solu\u00e7\u00e3o: Criamos uma branch separada <code>docs/organizacao</code> e uma issue para revis\u00e3o posterior, seguindo o fluxo: 1. Branch <code>docs/organizacao</code> com os arquivos .md 2. Issue criada para revis\u00e3o e consolida\u00e7\u00e3o 3. Limpeza principal focou apenas no que era inequivocamente tempor\u00e1rio</p>"},{"location":"fases/FASE13/#resultados-da-limpeza","title":"\ud83d\udcca Resultados da Limpeza","text":""},{"location":"fases/FASE13/#antes-da-limpeza","title":"Antes da Limpeza","text":"<pre><code>91 directories, 439 files\n</code></pre>"},{"location":"fases/FASE13/#depois-da-limpeza","title":"Depois da Limpeza","text":"<pre><code>? directories, ~350 files (estimado)\n</code></pre>"},{"location":"fases/FASE13/#itens-removidosorganizados","title":"Itens Removidos/Organizados","text":"Tipo Quantidade Espa\u00e7o liberado Pastas de artefatos 3 ~15 MB Pastas de diagn\u00f3stico 4 ~50 MB Arquivos .tar.gz 2 ~40 MB Arquivos .bak 11 ~200 KB C\u00f3digo legado 1 pasta ~500 KB Banco duplicado 1 0 bytes (vazio) TOTAL ~20+ itens ~105 MB"},{"location":"fases/FASE13/#licoes-aprendidas","title":"\ud83d\udcdd Li\u00e7\u00f5es Aprendidas","text":"<ol> <li> <p>Versionamento seletivo: Nem tudo que est\u00e1 na pasta do projeto precisa estar no Git. Artefatos gerados devem ser ignorados.</p> </li> <li> <p>Organiza\u00e7\u00e3o preventiva: Manter scripts em <code>scripts/</code> desde o in\u00edcio evita ac\u00famulo na raiz.</p> </li> <li> <p>Banco de dados: Manter apenas uma c\u00f3pia do banco, em local padronizado (<code>data/</code>).</p> </li> <li> <p>.gitignore proativo: Configurar corretamente no in\u00edcio do projeto evita commits de arquivos tempor\u00e1rios.</p> </li> <li> <p>Branches para documenta\u00e7\u00e3o: Usar branches separadas para documenta\u00e7\u00e3o em andamento permite commits sem poluir a main.</p> </li> </ol>"},{"location":"fases/FASE13/#arquivos-modificadoscriados","title":"\ud83d\udcda Arquivos Modificados/Criados","text":"<pre><code>Modificados:\n\u251c\u2500\u2500 .gitignore (adicionados padr\u00f5es de exclus\u00e3o)\n\nRemovidos:\n\u251c\u2500\u2500 analises/\n\u251c\u2500\u2500 exportados/\n\u251c\u2500\u2500 relatorios/\n\u251c\u2500\u2500 diagnostico_20260219_225218/\n\u251c\u2500\u2500 diagnostico_20260219_225619/\n\u251c\u2500\u2500 diagnostico_ci_20260219_231532/\n\u251c\u2500\u2500 limpeza_20260220_002943/\n\u251c\u2500\u2500 legacy/\n\u251c\u2500\u2500 showtrials.db (raiz)\n\u251c\u2500\u2500 *.bak (11 arquivos)\n\u2514\u2500\u2500 *.tar.gz (2 arquivos)\n\nMovidos para scripts/:\n\u251c\u2500\u2500 diagnostico.sh\n\u251c\u2500\u2500 diagnostico_ci.sh\n\u251c\u2500\u2500 diagnostico_limpeza.sh\n</code></pre>"},{"location":"fases/FASE13/#impacto-no-projeto","title":"\ud83c\udfaf Impacto no Projeto","text":""},{"location":"fases/FASE13/#positivos","title":"Positivos","text":"<ul> <li>\u2705 Reposit\u00f3rio mais limpo e naveg\u00e1vel</li> <li>\u2705 Menos arquivos para versionar</li> <li>\u2705 Scripts organizados em local apropriado</li> <li>\u2705 .gitignore mais robusto</li> <li>\u2705 Banco de dados \u00fanico e consistente</li> </ul>"},{"location":"fases/FASE13/#futuros","title":"Futuros","text":"<ul> <li>\ud83d\udccc Documenta\u00e7\u00e3o .md ser\u00e1 revisada em branch espec\u00edfica</li> <li>\ud83d\udccc Issue #? criada para consolida\u00e7\u00e3o da documenta\u00e7\u00e3o</li> </ul>"},{"location":"fases/FASE13/#autor","title":"\ud83d\udc64 Autor","text":"<p>Thiago Ribeiro - Projeto de TCC</p>"},{"location":"fases/FASE13/#historico-de-revisoes","title":"\ud83d\udcdc Hist\u00f3rico de Revis\u00f5es","text":"Vers\u00e3o Data Autor Altera\u00e7\u00f5es 1.0 20/02/2026 Thiago Ribeiro Documento inicial da FASE 13 <sub>FASE 13 - Limpeza e Organiza\u00e7\u00e3o do Reposit\u00f3rio</sub> <sub>Vers\u00e3o 1.0 - 20 de Fevereiro de 2026</sub> <sub>\u2705 Fase conclu\u00edda com sucesso</sub> <p>```</p>"},{"location":"fases/FASE14/","title":"FASE 14 - ExportarDocumento","text":""},{"location":"fases/FASE14/#fase14md-telemetria-e-testes-em-exportardocumento","title":"\ud83d\udcc4 FASE14.md - Telemetria e Testes em ExportarDocumento","text":"<pre><code># FASE 14 - Telemetria e Testes em ExportarDocumento\n\n&lt;div align=\"center\"&gt;\n\n**Implementa\u00e7\u00e3o completa de telemetria, testes e type hints no caso de uso de exporta\u00e7\u00e3o**\n\n&lt;/div&gt;\n\n## \ud83d\udcc5 **Informa\u00e7\u00f5es da Fase**\n\n| Item | Descri\u00e7\u00e3o |\n|------|-----------|\n| **Status** | \u2705 Conclu\u00edda |\n| **Data de Conclus\u00e3o** | 20 de Fevereiro de 2026 |\n| **Artefatos** | `exportar_documento.py`, `test_exportar_documento.py`, `test_exportar_documento_telemetry.py` |\n| **Depend\u00eancias** | FASE 12 (Padroniza\u00e7\u00e3o de Telemetria), FASE 13 (Limpeza) |\n| **Branch principal** | `type/exportar-documento` |\n\n---\n\n## \ud83c\udfaf **Objetivo**\n\nImplementar o padr\u00e3o completo de qualidade no caso de uso `ExportarDocumento`, seguindo a metodologia estabelecida nas fases anteriores:\n\n1. **Adicionar telemetria** com o padr\u00e3o `_telemetry` e `configure_telemetry`\n2. **Criar testes de l\u00f3gica** para cobrir todos os fluxos\n3. **Criar testes de telemetria** para verificar a instrumenta\u00e7\u00e3o\n4. **Garantir type hints** (MyPy) no arquivo\n5. **Aumentar cobertura** de 0% para ~81%\n\n---\n\n## \ud83d\udd0d **Estado Inicial**\n\n### \ud83d\udcca **M\u00e9tricas Antes da Interven\u00e7\u00e3o**\n\n| M\u00e9trica | Valor |\n|---------|-------|\n| **Cobertura** | 0% |\n| **Testes existentes** | Nenhum |\n| **Telemetria** | \u274c Ausente |\n| **MyPy** | \u2705 Sem erros no arquivo |\n| **Linhas de c\u00f3digo** | 131 |\n\n### \ud83d\udccb **Arquivo Alvo**\n```python\n# src/application/use_cases/exportar_documento.py\n\"\"\"\nCaso de uso: Exportar documento.\n\"\"\"\n\nclass ExportarDocumento:\n    \"\"\"\n    Caso de uso para exportar documento.\n    \"\"\"\n    # ... l\u00f3gica existente ...\n</code></pre>"},{"location":"fases/FASE14/#implementacao-realizada","title":"\ud83d\udee0\ufe0f Implementa\u00e7\u00e3o Realizada","text":""},{"location":"fases/FASE14/#1-adicao-do-padrao-de-telemetria","title":"1. Adi\u00e7\u00e3o do Padr\u00e3o de Telemetria","text":"<pre><code># Telemetria opcional\n_telemetry = None\n\ndef configure_telemetry(telemetry_instance=None):\n    \"\"\"Configura telemetria para este m\u00f3dulo (usado apenas em testes).\"\"\"\n    global _telemetry\n    _telemetry = telemetry_instance\n</code></pre>"},{"location":"fases/FASE14/#2-instrumentacao-dos-metodos","title":"2. Instrumenta\u00e7\u00e3o dos M\u00e9todos","text":"<p>Foram adicionados contadores de telemetria em todos os m\u00e9todos principais:</p> M\u00e9todo Eventos registrados <code>executar</code> <code>iniciado</code>, <code>formato.{formato}</code>, <code>concluido</code> <code>_buscar_documento</code> <code>iniciado</code>, <code>idioma.{idioma}</code>, <code>sucesso_original</code>, <code>sucesso_traducao</code> <code>_gerar_conteudo_txt</code> <code>iniciado</code>, <code>concluido</code> <code>_gerar_nome_arquivo</code> <code>iniciado</code> <code>listar_idiomas_disponiveis</code> <code>iniciado</code>, <code>encontrados.{n}</code>"},{"location":"fases/FASE14/#3-tratamento-de-erros-com-telemetria","title":"3. Tratamento de Erros com Telemetria","text":"Erro Evento registrado Formato inv\u00e1lido <code>erro.formato_invalido</code> Documento n\u00e3o encontrado <code>erro.documento_nao_encontrado</code>, <code>erro.documento_indisponivel</code> Tradu\u00e7\u00e3o n\u00e3o encontrada <code>erro.traducao_nao_encontrada</code> PDF n\u00e3o implementado <code>executar.pdf_nao_implementado</code>"},{"location":"fases/FASE14/#testes-criados","title":"\ud83e\uddea Testes Criados","text":""},{"location":"fases/FASE14/#testes-de-logica-test_exportar_documentopy-12-testes","title":"Testes de L\u00f3gica (<code>test_exportar_documento.py</code> - 12 testes)","text":"# Teste Descri\u00e7\u00e3o 1 <code>test_executar_com_sucesso_original</code> Exporta\u00e7\u00e3o bem-sucedida do original 2 <code>test_executar_com_traducao</code> Exporta\u00e7\u00e3o bem-sucedida de tradu\u00e7\u00e3o 3 <code>test_executar_formato_invalido</code> Valida\u00e7\u00e3o de formato 4 <code>test_executar_documento_nao_encontrado</code> Documento inexistente 5 <code>test_executar_traducao_nao_encontrada</code> Tradu\u00e7\u00e3o inexistente 6 <code>test_executar_pdf_nao_implementado</code> PDF (placeholder) 7 <code>test_sem_repo_trad_para_traducao</code> Sem reposit\u00f3rio de tradu\u00e7\u00e3o 8 <code>test_listar_idiomas_disponiveis</code> Listagem de idiomas 9 <code>test_gerar_nome_arquivo_sanitizacao</code> Sanitiza\u00e7\u00e3o de nomes 10 <code>test_gerar_conteudo_txt_com_metadados</code> Gera\u00e7\u00e3o com metadados 11 <code>test_gerar_conteudo_txt_sem_metadados</code> Gera\u00e7\u00e3o sem metadados 12 <code>test_excecao_ao_escrever_arquivo</code> Tratamento de exce\u00e7\u00f5es de IO"},{"location":"fases/FASE14/#testes-de-telemetria-test_exportar_documento_telemetrypy-8-testes","title":"Testes de Telemetria (<code>test_exportar_documento_telemetry.py</code> - 8 testes)","text":"# Teste Descri\u00e7\u00e3o 1 <code>test_telemetria_execucao_sucesso</code> Verifica eventos de sucesso 2 <code>test_telemetria_formato_invalido</code> Verifica erro de formato 3 <code>test_telemetria_documento_nao_encontrado</code> Verifica documento n\u00e3o encontrado 4 <code>test_telemetria_traducao_nao_encontrada</code> Verifica tradu\u00e7\u00e3o n\u00e3o encontrada 5 <code>test_telemetria_pdf_nao_implementado</code> Verifica placeholder PDF 6 <code>test_telemetria_erro_execucao</code> Verifica exce\u00e7\u00f5es n\u00e3o capturadas 7 <code>test_telemetria_listar_idiomas</code> Verifica listagem de idiomas 8 <code>test_sem_telemetria_nao_quebra</code> Garante fallback sem telemetria"},{"location":"fases/FASE14/#desafios-encontrados-e-solucoes","title":"\ud83d\udc1b Desafios Encontrados e Solu\u00e7\u00f5es","text":""},{"location":"fases/FASE14/#desafio-1-mock-de-documento-com-data_coleta","title":"Desafio 1: Mock de Documento com <code>data_coleta</code>","text":"<p>Problema: <pre><code>AttributeError: 'str' object has no attribute 'isoformat'\n</code></pre></p> <p>Causa: O mock do documento tinha <code>data_coleta</code> como string, mas o DTO espera um objeto <code>datetime</code> com m\u00e9todo <code>isoformat()</code>.</p> <p>Solu\u00e7\u00e3o: <pre><code>doc.data_coleta = datetime.now()  # \u2190 datetime, N\u00c3O string\n</code></pre></p>"},{"location":"fases/FASE14/#desafio-2-mock-sem-atributos-necessarios","title":"Desafio 2: Mock sem Atributos Necess\u00e1rios","text":"<p>Problema: <pre><code>TypeError: object of type 'Mock' has no len()\n</code></pre></p> <p>Causa: O mock n\u00e3o tinha o atributo <code>texto</code> definido, e o c\u00f3digo tentava fazer <code>len(documento.texto)</code>.</p> <p>Solu\u00e7\u00e3o: <pre><code>doc.texto = \"Conte\u00fado do documento para teste\"\ndoc.tamanho_caracteres = len(doc.texto)  # Pr\u00e9-calcular\n</code></pre></p>"},{"location":"fases/FASE14/#desafio-3-teste-de-excecao-com-telemetria","title":"Desafio 3: Teste de Exce\u00e7\u00e3o com Telemetria","text":"<p>Problema: <pre><code>AssertionError: increment('exportar_documento.erro.execucao') call not found\n</code></pre></p> <p>Causa: O teste esperava um evento de erro que nunca acontecia, pois a exce\u00e7\u00e3o interrompia a execu\u00e7\u00e3o antes do registro.</p> <p>Solu\u00e7\u00e3o: Ajustar o teste para verificar apenas os eventos que realmente ocorrem antes da exce\u00e7\u00e3o.</p> <pre><code># Verificar chamadas ANTES da exce\u00e7\u00e3o\nmock_telemetry.increment.assert_any_call(\"exportar_documento.executar.iniciado\")\n\n# Verificar que erro N\u00c3O foi chamado\ncalls = [call[0][0] for call in mock_telemetry.increment.call_args_list]\nassert \"exportar_documento.erro.execucao\" not in calls\n</code></pre>"},{"location":"fases/FASE14/#resultados-finais","title":"\ud83d\udcca Resultados Finais","text":""},{"location":"fases/FASE14/#metricas-antes-e-depois","title":"M\u00e9tricas Antes e Depois","text":"M\u00e9trica Antes Depois Evolu\u00e7\u00e3o Cobertura 0% 81% \ud83d\udcc8 +81 p.p. Testes de l\u00f3gica 0 12 \u2705 12 novos Testes de telemetria 0 8 \u2705 8 novos Total de testes 0 20 \u2705 20 novos Telemetria \u274c Ausente \u2705 Completa \u2705 MyPy no arquivo \u2705 OK \u2705 OK \u2705"},{"location":"fases/FASE14/#cobertura-detalhada","title":"Cobertura Detalhada","text":"<pre><code>src/application/use_cases/exportar_documento.py\n\u251c\u2500\u2500 Linhas totais: 131\n\u251c\u2500\u2500 Linhas cobertas: 106\n\u2514\u2500\u2500 Cobertura: 81%\n</code></pre>"},{"location":"fases/FASE14/#licoes-aprendidas","title":"\ud83d\udcdd Li\u00e7\u00f5es Aprendidas","text":"<ol> <li> <p>Mock de datetime: Ao mockar objetos que ser\u00e3o convertidos para DTOs, usar <code>datetime.now()</code> em vez de strings.</p> </li> <li> <p>Atributos de Mock: Mocks precisam ter todos os atributos que o c\u00f3digo acessa, mesmo que n\u00e3o sejam usados nos testes.</p> </li> <li> <p>Exce\u00e7\u00f5es vs Erros: Diferenciar entre exce\u00e7\u00f5es n\u00e3o tratadas (que devem propagar) e erros esperados (que devem ser registrados).</p> </li> <li> <p>Padroniza\u00e7\u00e3o: Manter o mesmo padr\u00e3o de telemetria em todos os arquivos facilita a cria\u00e7\u00e3o de testes.</p> </li> <li> <p>Testes de telemetria: Verificar chamadas espec\u00edficas, n\u00e3o apenas a ocorr\u00eancia.</p> </li> </ol>"},{"location":"fases/FASE14/#arquivos-modificadoscriados","title":"\ud83d\udcda Arquivos Modificados/Criados","text":"<pre><code>Modificados:\n\u251c\u2500\u2500 src/application/use_cases/exportar_documento.py\n\nCriados:\n\u251c\u2500\u2500 src/tests/test_exportar_documento.py\n\u2514\u2500\u2500 src/tests/test_exportar_documento_telemetry.py\n</code></pre>"},{"location":"fases/FASE14/#impacto-no-projeto","title":"\ud83d\udcc8 Impacto no Projeto","text":"<ul> <li>Cobertura global: Aumento de 63% \u2192 ~65% (estimado)</li> <li>Qualidade: Padr\u00e3o de telemetria agora presente em mais um arquivo</li> <li>Manutenibilidade: Testes garantem que altera\u00e7\u00f5es futuras n\u00e3o quebrem funcionalidades</li> <li>Documenta\u00e7\u00e3o: Os testes servem como documenta\u00e7\u00e3o viva do comportamento esperado</li> </ul>"},{"location":"fases/FASE14/#proximos-passos","title":"\ud83d\udd2e Pr\u00f3ximos Passos","text":""},{"location":"fases/FASE14/#imediato","title":"Imediato:","text":"<ul> <li>[ ] Fazer merge da branch <code>type/exportar-documento</code></li> <li>[ ] Escolher pr\u00f3ximo arquivo com baixa cobertura (ex: <code>gerar_relatorio.py</code> com 0%)</li> </ul>"},{"location":"fases/FASE14/#medio-prazo","title":"M\u00e9dio prazo:","text":"<ul> <li>[ ] Corrigir os 6 erros de MyPy em outros arquivos</li> <li>[ ] Continuar aumentando cobertura seguindo o padr\u00e3o</li> </ul>"},{"location":"fases/FASE14/#autor","title":"\ud83d\udc64 Autor","text":"<p>Thiago Ribeiro - Projeto de TCC</p>"},{"location":"fases/FASE14/#historico-de-revisoes","title":"\ud83d\udcdc Hist\u00f3rico de Revis\u00f5es","text":"Vers\u00e3o Data Autor Altera\u00e7\u00f5es 1.0 20/02/2026 Thiago Ribeiro Documento inicial da FASE 14 <sub>FASE 14 - Telemetria e Testes em ExportarDocumento</sub> <sub>Vers\u00e3o 1.0 - 20 de Fevereiro de 2026</sub> <sub>\u2705 Fase conclu\u00edda com sucesso</sub> <p>```</p>"},{"location":"fases/FASE15/","title":"FASE 15 - GerarRelatorio","text":""},{"location":"fases/FASE15/#fase15md-telemetria-e-testes-em-gerarrelatorio","title":"\ud83d\udcc4 FASE15.md - Telemetria e Testes em GerarRelatorio","text":"<pre><code># FASE 15 - Telemetria e Testes em GerarRelatorio\n\n&lt;div align=\"center\"&gt;\n\n**Implementa\u00e7\u00e3o completa de telemetria, testes e type hints no caso de uso de gera\u00e7\u00e3o de relat\u00f3rios**\n\n&lt;/div&gt;\n\n## \ud83d\udcc5 **Informa\u00e7\u00f5es da Fase**\n\n| Item | Descri\u00e7\u00e3o |\n|------|-----------|\n| **Status** | \u2705 Conclu\u00edda |\n| **Data de Conclus\u00e3o** | 20 de Fevereiro de 2026 |\n| **Artefatos** | `gerar_relatorio.py`, `test_gerar_relatorio.py`, `test_gerar_relatorio_telemetry.py` |\n| **Depend\u00eancias** | FASE 14 (ExportarDocumento), FASE 12 (Padroniza\u00e7\u00e3o de Telemetria) |\n| **Branch principal** | `type/gerar-relatorio` |\n\n---\n\n## \ud83c\udfaf **Objetivo**\n\nImplementar o padr\u00e3o completo de qualidade no caso de uso `GerarRelatorio`, seguindo a metodologia estabelecida nas fases anteriores:\n\n1. **Adicionar telemetria** com o padr\u00e3o `_telemetry` e `configure_telemetry`\n2. **Criar testes de l\u00f3gica** para cobrir todos os fluxos de agrega\u00e7\u00e3o de dados\n3. **Criar testes de telemetria** para verificar a instrumenta\u00e7\u00e3o\n4. **Corrigir type hints** (MyPy) no arquivo (7 erros iniciais)\n5. **Aumentar cobertura** de 0% para 86%\n\n---\n\n## \ud83d\udd0d **Estado Inicial**\n\n### \ud83d\udcca **M\u00e9tricas Antes da Interven\u00e7\u00e3o**\n\n| M\u00e9trica | Valor |\n|---------|-------|\n| **Cobertura** | 0% |\n| **Testes existentes** | Nenhum |\n| **Telemetria** | \u274c Ausente |\n| **MyPy no arquivo** | \u26a0\ufe0f 7 erros |\n| **Linhas de c\u00f3digo** | 153 |\n\n### \ud83d\udccb **Arquivo Alvo**\n```python\n# src/application/use_cases/gerar_relatorio.py\n\"\"\"\nCaso de uso: Gerar relat\u00f3rios avan\u00e7ados.\n\"\"\"\n\nclass GerarRelatorio:\n    \"\"\"\n    Caso de uso para gerar relat\u00f3rios avan\u00e7ados.\n    \"\"\"\n    # ... l\u00f3gica complexa de agrega\u00e7\u00e3o ...\n</code></pre>"},{"location":"fases/FASE15/#implementacao-realizada","title":"\ud83d\udee0\ufe0f Implementa\u00e7\u00e3o Realizada","text":""},{"location":"fases/FASE15/#1-adicao-do-padrao-de-telemetria","title":"1. Adi\u00e7\u00e3o do Padr\u00e3o de Telemetria","text":"<pre><code># Telemetria opcional\n_telemetry = None\n\ndef configure_telemetry(telemetry_instance=None):\n    \"\"\"Configura telemetria para este m\u00f3dulo (usado apenas em testes).\"\"\"\n    global _telemetry\n    _telemetry = telemetry_instance\n</code></pre>"},{"location":"fases/FASE15/#2-instrumentacao-dos-metodos","title":"2. Instrumenta\u00e7\u00e3o dos M\u00e9todos","text":"<p>Foram adicionados contadores de telemetria em todos os m\u00e9todos principais:</p> M\u00e9todo Eventos registrados <code>_coletar_dados</code> <code>iniciado</code>, <code>concluido</code>, <code>documentos_processados</code> <code>gerar_relatorio_txt</code> <code>iniciado</code>, <code>concluido</code> <code>salvar_relatorio</code> <code>iniciado</code>, <code>formato.{formato}</code>, <code>sucesso_txt</code>, <code>html_placeholder</code>, <code>formato_invalido</code>"},{"location":"fases/FASE15/#3-correcoes-de-type-hints-mypy","title":"3. Corre\u00e7\u00f5es de Type Hints (MyPy)","text":"<p>Problema inicial: 7 erros, principalmente: - Counters sem anota\u00e7\u00e3o de tipo - Chamada de <code>listar_por_documento</code> com <code>doc.id</code> podendo ser <code>None</code></p> <p>Solu\u00e7\u00f5es aplicadas:</p> <pre><code># Antes\ncentro_counter = Counter()\n\n# Depois\ncentro_counter: Counter[str] = Counter()\n</code></pre> <pre><code># Antes (linha 124)\ntraducoes = self.repo_trad.listar_por_documento(doc.id)\n\n# Depois\nif doc.id is not None:\n    traducoes = self.repo_trad.listar_por_documento(doc.id)\n</code></pre>"},{"location":"fases/FASE15/#testes-criados","title":"\ud83e\uddea Testes Criados","text":""},{"location":"fases/FASE15/#testes-de-logica-test_gerar_relatoriopy-12-testes","title":"Testes de L\u00f3gica (<code>test_gerar_relatorio.py</code> - 12 testes)","text":"# Teste Descri\u00e7\u00e3o 1 <code>test_coletar_dados_basico</code> Agrega\u00e7\u00e3o b\u00e1sica por centro 2 <code>test_coletar_dados_com_traducoes</code> Contagem de tradu\u00e7\u00f5es 3 <code>test_coletar_dados_com_contagens_especificas</code> Tipos especiais (cartas, relat\u00f3rios, etc.) 4 <code>test_coletar_dados_com_anexos</code> Documentos com anexos 5 <code>test_coletar_dados_com_anos</code> Extra\u00e7\u00e3o de anos das datas 6 <code>test_gerar_relatorio_txt_formato</code> Formata\u00e7\u00e3o do relat\u00f3rio 7 <code>test_salvar_relatorio_txt</code> Salvamento em arquivo 8 <code>test_salvar_relatorio_html_placeholder</code> Placeholder HTML 9 <code>test_salvar_relatorio_formato_invalido</code> Formato n\u00e3o suportado 10 <code>test_pessoas_frequentes_com_traducao</code> Tradu\u00e7\u00e3o de nomes 11 <code>test_sem_repo_trad_nao_quebra</code> Fallback sem tradu\u00e7\u00f5es 12 <code>test_documentos_sem_tipo_sao_ignorados</code> Robustez com dados incompletos"},{"location":"fases/FASE15/#testes-de-telemetria-test_gerar_relatorio_telemetrypy-6-testes","title":"Testes de Telemetria (<code>test_gerar_relatorio_telemetry.py</code> - 6 testes)","text":"# Teste Descri\u00e7\u00e3o 1 <code>test_telemetria_coletar_dados</code> Verifica eventos de coleta 2 <code>test_telemetria_gerar_txt</code> Verifica gera\u00e7\u00e3o de relat\u00f3rio 3 <code>test_telemetria_salvar_txt</code> Verifica salvamento TXT 4 <code>test_telemetria_salvar_html</code> Verifica placeholder HTML 5 <code>test_telemetria_salvar_formato_invalido</code> Verifica formato inv\u00e1lido 6 <code>test_sem_telemetria_nao_quebra</code> Garante fallback sem telemetria"},{"location":"fases/FASE15/#desafios-encontrados-e-solucoes","title":"\ud83d\udc1b Desafios Encontrados e Solu\u00e7\u00f5es","text":""},{"location":"fases/FASE15/#desafio-1-type-hints-nos-counters","title":"Desafio 1: Type Hints nos Counters","text":"<p>Problema: <pre><code>src/application/use_cases/gerar_relatorio.py:36: error: Need type annotation for \"centro_counter\"\n</code></pre></p> <p>Solu\u00e7\u00e3o: Adicionar anota\u00e7\u00f5es de tipo em todos os Counters.</p> <pre><code>centro_counter: Counter[str] = Counter()\ntipo_counter: Counter[str] = Counter()\npessoa_counter: Counter[str] = Counter()\nano_counter: Counter[str] = Counter()\nmes_counter: Counter[str] = Counter()\n</code></pre>"},{"location":"fases/FASE15/#desafio-2-optionalint-vs-int","title":"Desafio 2: Optional[int] vs int","text":"<p>Problema: <pre><code>src/application/use_cases/gerar_relatorio.py:124: error: Argument 1 to \"listar_por_documento\" has incompatible type \"int | None\"; expected \"int\"\n</code></pre></p> <p>Causa: O campo <code>id</code> da entidade <code>Documento</code> \u00e9 opcional, mas o reposit\u00f3rio espera um <code>int</code> obrigat\u00f3rio.</p> <p>Solu\u00e7\u00e3o: Adicionar verifica\u00e7\u00e3o de nulidade antes da chamada.</p> <pre><code>for doc in documentos[:100]:\n    if doc.id is not None:  # \u2190 VERIFICA\u00c7\u00c3O CR\u00cdTICA\n        traducoes = self.repo_trad.listar_por_documento(doc.id)\n        # ... resto do c\u00f3digo\n</code></pre>"},{"location":"fases/FASE15/#desafio-3-complexidade-da-logica-de-agregacao","title":"Desafio 3: Complexidade da L\u00f3gica de Agrega\u00e7\u00e3o","text":"<p>O m\u00e9todo <code>_coletar_dados</code> tem m\u00faltiplos contadores e l\u00f3gica condicional, exigindo testes abrangentes para garantir que todas as branches sejam cobertas.</p> <p>Solu\u00e7\u00e3o: Criar mocks espec\u00edficos para cada cen\u00e1rio: - Documentos com diferentes centros - Documentos com diferentes tipos - Documentos com/sem anexos - Documentos com datas variadas - Documentos com/sem tradu\u00e7\u00f5es</p>"},{"location":"fases/FASE15/#desafio-4-performance-vs-cobertura","title":"Desafio 4: Performance vs Cobertura","text":"<p>O c\u00f3digo original limitava a an\u00e1lise de tradu\u00e7\u00f5es aos primeiros 100 documentos por quest\u00e3o de performance. Isso precisava ser testado sem comprometer a velocidade dos testes.</p> <p>Solu\u00e7\u00e3o: Nos testes, usar poucos documentos (5-10) mas garantir que a l\u00f3gica de contagem funciona corretamente.</p>"},{"location":"fases/FASE15/#resultados-finais","title":"\ud83d\udcca Resultados Finais","text":""},{"location":"fases/FASE15/#metricas-antes-e-depois","title":"M\u00e9tricas Antes e Depois","text":"M\u00e9trica Antes Depois Evolu\u00e7\u00e3o Cobertura do arquivo 0% 86% \ud83d\udcc8 +86 p.p. Testes de l\u00f3gica 0 12 \u2705 12 novos Testes de telemetria 0 6 \u2705 6 novos Total de testes 0 18 \u2705 18 novos MyPy no arquivo 7 erros 0 erros \u2705 Resolvido Telemetria \u274c Ausente \u2705 Completa \u2705"},{"location":"fases/FASE15/#cobertura-detalhada","title":"Cobertura Detalhada","text":"<pre><code>src/application/use_cases/gerar_relatorio.py\n\u251c\u2500\u2500 Linhas totais: 175\n\u251c\u2500\u2500 Linhas cobertas: 151\n\u2514\u2500\u2500 Cobertura: 86%\n</code></pre> <p>As linhas n\u00e3o cobertas s\u00e3o principalmente: - Tratamento de exce\u00e7\u00f5es em tradu\u00e7\u00e3o de nomes (fallback) - Branches de meses espec\u00edficos (Dezembro/Novembro) - Casos de formato HTML (placeholder)</p>"},{"location":"fases/FASE15/#licoes-aprendidas","title":"\ud83d\udcdd Li\u00e7\u00f5es Aprendidas","text":"<ol> <li> <p>Type hints em Counters: Sempre anotar o tipo dos elementos ao usar <code>Counter()</code> para evitar erros de MyPy.</p> </li> <li> <p>IDs opcionais: Entidades podem ter IDs nulos (novos objetos n\u00e3o persistidos). Sempre verificar antes de usar.</p> </li> <li> <p>Mocks complexos: Para testar l\u00f3gica de agrega\u00e7\u00e3o, criar fixtures que retornam conjuntos variados de documentos.</p> </li> <li> <p>Cobertura de branches: A l\u00f3gica com m\u00faltiplos <code>if</code> encadeados (tipos de documento, meses) exige testes espec\u00edficos para cada condi\u00e7\u00e3o.</p> </li> <li> <p>Performance em testes: Usar amostras pequenas (5-10 documentos) nos testes, mesmo que o c\u00f3digo real use limites maiores.</p> </li> </ol>"},{"location":"fases/FASE15/#arquivos-modificadoscriados","title":"\ud83d\udcda Arquivos Modificados/Criados","text":"<pre><code>Modificados:\n\u251c\u2500\u2500 src/application/use_cases/gerar_relatorio.py\n\nCriados:\n\u251c\u2500\u2500 src/tests/test_gerar_relatorio.py\n\u2514\u2500\u2500 src/tests/test_gerar_relatorio_telemetry.py\n</code></pre>"},{"location":"fases/FASE15/#impacto-no-projeto","title":"\ud83d\udcc8 Impacto no Projeto","text":"<ul> <li>Cobertura global: Aumento de 68% \u2192 ~70% (estimado)</li> <li>Qualidade: Padr\u00e3o de telemetria agora presente em mais um caso de uso cr\u00edtico</li> <li>Manutenibilidade: Testes garantem que altera\u00e7\u00f5es futuras na l\u00f3gica de relat\u00f3rios n\u00e3o quebrem funcionalidades</li> <li>Type safety: Todos os erros de MyPy no arquivo foram eliminados</li> </ul>"},{"location":"fases/FASE15/#proximos-passos","title":"\ud83d\udd2e Pr\u00f3ximos Passos","text":""},{"location":"fases/FASE15/#imediato","title":"Imediato:","text":"<ul> <li>[ ] Fazer merge da branch <code>type/gerar-relatorio</code> na <code>main</code></li> <li>[ ] Escolher pr\u00f3ximo arquivo com baixa cobertura</li> </ul>"},{"location":"fases/FASE15/#candidatos-para-proxima-fase","title":"Candidatos para pr\u00f3xima fase:","text":"<ul> <li><code>src/application/use_cases/listar_documentos.py</code> (55% cobertura)</li> <li><code>src/application/use_cases/classificar_documento.py</code> (65% cobertura)</li> <li><code>src/application/use_cases/obter_documento.py</code> (57% cobertura)</li> </ul>"},{"location":"fases/FASE15/#medio-prazo","title":"M\u00e9dio prazo:","text":"<ul> <li>[ ] Corrigir erros de MyPy em outros arquivos (estatisticas.py, config/init.py)</li> <li>[ ] Instalar stubs para m\u00f3dulos externos (types-PyYAML)</li> </ul>"},{"location":"fases/FASE15/#autor","title":"\ud83d\udc64 Autor","text":"<p>Thiago Ribeiro - Projeto de TCC</p>"},{"location":"fases/FASE15/#historico-de-revisoes","title":"\ud83d\udcdc Hist\u00f3rico de Revis\u00f5es","text":"Vers\u00e3o Data Autor Altera\u00e7\u00f5es 1.0 20/02/2026 Thiago Ribeiro Documento inicial da FASE 15 <sub>FASE 15 - Telemetria e Testes em GerarRelatorio</sub> <sub>Vers\u00e3o 1.0 - 20 de Fevereiro de 2026</sub> <sub>\u2705 Fase conclu\u00edda com sucesso</sub> <p>```</p>"},{"location":"fases/FASE16/","title":"FASE 16 - ListarDocumentos","text":""},{"location":"fases/FASE16/#fase16md-telemetria-e-expansao-de-testes-em-listardocumentos","title":"\ud83d\udcc4 FASE16.md - Telemetria e Expans\u00e3o de Testes em ListarDocumentos","text":"<pre><code># FASE 16 - Telemetria e Expans\u00e3o de Testes em ListarDocumentos\n\n&lt;div align=\"center\"&gt;\n\n**Implementa\u00e7\u00e3o completa de telemetria, corre\u00e7\u00e3o de type hints e expans\u00e3o de testes no caso de uso de listagem de documentos**\n\n&lt;/div&gt;\n\n## \ud83d\udcc5 **Informa\u00e7\u00f5es da Fase**\n\n| Item | Descri\u00e7\u00e3o |\n|------|-----------|\n| **Status** | \u2705 Conclu\u00edda |\n| **Data de Conclus\u00e3o** | 20 de Fevereiro de 2026 |\n| **Artefatos** | `listar_documentos.py`, `test_listar_documentos.py`, `test_listar_documentos_telemetry.py` |\n| **Depend\u00eancias** | FASE 15 (GerarRelatorio), FASE 14 (ExportarDocumento), FASE 12 (Padroniza\u00e7\u00e3o de Telemetria) |\n| **Branch principal** | `type/listar-documentos` |\n\n---\n\n## \ud83c\udfaf **Objetivo**\n\nImplementar o padr\u00e3o completo de qualidade no caso de uso `ListarDocumentos`, que j\u00e1 possu\u00eda testes parciais (55% cobertura), seguindo a metodologia estabelecida nas fases anteriores:\n\n1. **Adicionar telemetria** com o padr\u00e3o `_telemetry` e `configure_telemetry`\n2. **Expandir testes de l\u00f3gica** para cobrir m\u00e9todos n\u00e3o testados (`listar_tipos`, `_verificar_traducoes`)\n3. **Criar testes de telemetria** para verificar a instrumenta\u00e7\u00e3o\n4. **Corrigir type hints** (MyPy) no arquivo (3 erros iniciais)\n5. **Aumentar cobertura** de 55% para 80%\n\n---\n\n## \ud83d\udd0d **Estado Inicial**\n\n### \ud83d\udcca **M\u00e9tricas Antes da Interven\u00e7\u00e3o**\n\n| M\u00e9trica | Valor |\n|---------|-------|\n| **Cobertura** | 55% |\n| **Testes existentes** | 1 (em `test_use_cases.py`) |\n| **Telemetria** | \u274c Ausente |\n| **MyPy no arquivo** | \u26a0\ufe0f 3 erros |\n| **Linhas de c\u00f3digo** | 51 |\n\n### \ud83d\udccb **Arquivo Alvo**\n```python\n# src/application/use_cases/listar_documentos.py\n\"\"\"\nCaso de uso: Listar documentos com pagina\u00e7\u00e3o e filtros.\n\"\"\"\n\nclass ListarDocumentos:\n    \"\"\"\n    Caso de uso para listar documentos.\n    \"\"\"\n    # ... l\u00f3gica existente com 55% cobertura ...\n</code></pre>"},{"location":"fases/FASE16/#implementacao-realizada","title":"\ud83d\udee0\ufe0f Implementa\u00e7\u00e3o Realizada","text":""},{"location":"fases/FASE16/#1-adicao-do-padrao-de-telemetria","title":"1. Adi\u00e7\u00e3o do Padr\u00e3o de Telemetria","text":"<pre><code># Telemetria opcional\n_telemetry = None\n\ndef configure_telemetry(telemetry_instance=None):\n    \"\"\"Configura telemetria para este m\u00f3dulo (usado apenas em testes).\"\"\"\n    global _telemetry\n    _telemetry = telemetry_instance\n</code></pre>"},{"location":"fases/FASE16/#2-instrumentacao-dos-metodos","title":"2. Instrumenta\u00e7\u00e3o dos M\u00e9todos","text":"<p>Foram adicionados contadores de telemetria em todos os m\u00e9todos principais:</p> M\u00e9todo Eventos registrados <code>executar</code> <code>iniciado</code>, <code>pagina.{pagina}</code>, <code>concluido</code>, <code>resultados</code> <code>com_traducao_nomes</code> <code>com_traducao_nomes</code> <code>listar_tipos</code> <code>iniciado</code>, <code>concluido</code>, <code>tipos_encontrados</code> <code>_verificar_traducoes</code> <code>iniciado</code>, <code>sucesso</code>, <code>erro</code>"},{"location":"fases/FASE16/#3-correcoes-de-type-hints-mypy","title":"3. Corre\u00e7\u00f5es de Type Hints (MyPy)","text":"<p>Problemas iniciais (3 erros):</p> Linha Erro Solu\u00e7\u00e3o 28 <code>Incompatible types in assignment (expression has type \"bool\", variable has type \"None\")</code> <code>self._tradutor_nomes: Optional[bool] = None</code> 53 <code>Argument 1 to \"_verificar_traducoes\" has incompatible type \"int | None\"</code> Adicionar <code>if doc.id is not None:</code> 81 <code>Need type annotation for \"counter\"</code> <code>counter: CounterType[str] = Counter()</code>"},{"location":"fases/FASE16/#testes-criadosexpandidos","title":"\ud83e\uddea Testes Criados/Expandidos","text":""},{"location":"fases/FASE16/#testes-de-logica-test_listar_documentospy-12-testes","title":"Testes de L\u00f3gica (<code>test_listar_documentos.py</code> - 12 testes)","text":"# Teste Descri\u00e7\u00e3o 1 <code>test_executar_com_paginacao_basica</code> Pagina\u00e7\u00e3o b\u00e1sica 2 <code>test_executar_com_filtros</code> Filtros por centro/tipo 3 <code>test_executar_pagina_2</code> C\u00e1lculo de offset 4 <code>test_executar_sem_resultados</code> Lista vazia 5 <code>test_com_traducao_nomes_fluent</code> M\u00e9todo fluente 6 <code>test_listar_tipos_basico</code> Listagem de tipos 7 <code>test_listar_tipos_com_filtro_centro</code> Filtro por centro 8 <code>test_listar_tipos_com_tipos_variados</code> M\u00faltiplos tipos 9 <code>test_listar_tipos_sem_tipos</code> Documentos sem tipo 10 <code>test_verificar_traducoes_com_sucesso</code> Consulta com tradu\u00e7\u00f5es 11 <code>test_verificar_traducoes_sem_traducao</code> Consulta sem tradu\u00e7\u00f5es 12 <code>test_verificar_traducoes_com_erro</code> Tratamento de exce\u00e7\u00e3o"},{"location":"fases/FASE16/#testes-de-telemetria-test_listar_documentos_telemetrypy-6-testes","title":"Testes de Telemetria (<code>test_listar_documentos_telemetry.py</code> - 6 testes)","text":"# Teste Descri\u00e7\u00e3o 1 <code>test_telemetria_executar</code> Verifica eventos de execu\u00e7\u00e3o 2 <code>test_telemetria_com_traducao_nomes</code> Verifica chamada de configura\u00e7\u00e3o 3 <code>test_telemetria_listar_tipos</code> Verifica listagem de tipos 4 <code>test_telemetria_verificar_traducoes_sucesso</code> Verifica consulta bem-sucedida 5 <code>test_telemetria_verificar_traducoes_erro</code> Verifica tratamento de erro 6 <code>test_sem_telemetria_nao_quebra</code> Garante fallback sem telemetria"},{"location":"fases/FASE16/#desafios-encontrados-e-solucoes","title":"\ud83d\udc1b Desafios Encontrados e Solu\u00e7\u00f5es","text":""},{"location":"fases/FASE16/#desafio-1-type-hints-e-optional","title":"Desafio 1: Type Hints e Optional","text":"<p>Problema: <pre><code>self._tradutor_nomes = ativo  # ativo \u00e9 bool, mas vari\u00e1vel foi declarada como None\n</code></pre></p> <p>Solu\u00e7\u00e3o: Declarar corretamente o tipo como <code>Optional[bool]</code>.</p> <pre><code>self._tradutor_nomes: Optional[bool] = None\n</code></pre>"},{"location":"fases/FASE16/#desafio-2-id-opcional-do-documento","title":"Desafio 2: ID Opcional do Documento","text":"<p>Problema: <pre><code>self._verificar_traducoes(doc.id)  # doc.id pode ser None\n</code></pre></p> <p>Solu\u00e7\u00e3o: Adicionar verifica\u00e7\u00e3o antes da chamada.</p> <pre><code>if doc.id is not None:\n    tem_traducao = self._verificar_traducoes(doc.id)\n</code></pre>"},{"location":"fases/FASE16/#desafio-3-mock-de-context-manager","title":"Desafio 3: Mock de Context Manager","text":"<p>Problema: Ao testar <code>_verificar_traducoes</code>, os mocks precisavam simular um context manager (<code>with repo._conexao() as conn</code>).</p> <pre><code>AttributeError: __enter__\n</code></pre> <p>Solu\u00e7\u00e3o: Usar <code>MagicMock</code> para simular corretamente os m\u00e9todos m\u00e1gicos <code>__enter__</code> e <code>__exit__</code>.</p> <pre><code>mock_context_manager = MagicMock()\nmock_repo._conexao.return_value = mock_context_manager\nmock_context_manager.__enter__.return_value = mock_conn\n</code></pre>"},{"location":"fases/FASE16/#desafio-4-teste-de-excecao-com-sqlite","title":"Desafio 4: Teste de Exce\u00e7\u00e3o com SQLite","text":"<p>Problema: Testar o bloco <code>except</code> que captura erros de conex\u00e3o com o banco.</p> <p>Solu\u00e7\u00e3o: Configurar o mock para lan\u00e7ar exce\u00e7\u00e3o no m\u00e9todo <code>_conexao</code>.</p> <pre><code>mock_repo._conexao.side_effect = Exception(\"Erro simulado\")\nresultado = use_case._verificar_traducoes(1)\nassert resultado is False  # Fallback seguro\n</code></pre>"},{"location":"fases/FASE16/#resultados-finais","title":"\ud83d\udcca Resultados Finais","text":""},{"location":"fases/FASE16/#metricas-antes-e-depois","title":"M\u00e9tricas Antes e Depois","text":"M\u00e9trica Antes Depois Evolu\u00e7\u00e3o Cobertura do arquivo 55% 80% \ud83d\udcc8 +25 p.p. Testes de l\u00f3gica 1 12 \u2705 +11 novos Testes de telemetria 0 6 \u2705 +6 novos Total de testes 1 18 \u2705 +17 novos MyPy no arquivo 3 erros 0 erros \u2705 Resolvido Telemetria \u274c Ausente \u2705 Completa \u2705"},{"location":"fases/FASE16/#cobertura-detalhada","title":"Cobertura Detalhada","text":"<pre><code>src/application/use_cases/listar_documentos.py\n\u251c\u2500\u2500 Linhas totais: 76\n\u251c\u2500\u2500 Linhas cobertas: 61\n\u2514\u2500\u2500 Cobertura: 80%\n</code></pre> <p>As linhas n\u00e3o cobertas incluem principalmente: - Tratamento de exce\u00e7\u00f5es em <code>listar_tipos</code> (fallback de \u00edcones) - Branches espec\u00edficas de formata\u00e7\u00e3o de tipos desconhecidos</p>"},{"location":"fases/FASE16/#licoes-aprendidas","title":"\ud83d\udcdd Li\u00e7\u00f5es Aprendidas","text":"<ol> <li> <p>Mock de context managers: Ao testar c\u00f3digo que usa <code>with</code>, \u00e9 necess\u00e1rio usar <code>MagicMock</code> para simular os m\u00e9todos <code>__enter__</code> e <code>__exit__</code>.</p> </li> <li> <p>Optional e type hints: Sempre declarar vari\u00e1veis que podem receber <code>None</code> com <code>Optional[Tipo]</code>.</p> </li> <li> <p>IDs opcionais: Entidades podem ter IDs nulos (novos objetos). Sempre verificar antes de usar.</p> </li> <li> <p>Testes de fallback: \u00c9 importante testar n\u00e3o apenas o caminho feliz, mas tamb\u00e9m os blocos <code>except</code> para garantir que o sistema n\u00e3o quebra.</p> </li> <li> <p>Organiza\u00e7\u00e3o de testes: Manter todos os testes dentro da classe de teste evita problemas de fixtures e escopo.</p> </li> </ol>"},{"location":"fases/FASE16/#arquivos-modificadoscriados","title":"\ud83d\udcda Arquivos Modificados/Criados","text":"<pre><code>Modificados:\n\u251c\u2500\u2500 src/application/use_cases/listar_documentos.py\n\nCriados/Substitu\u00eddos:\n\u251c\u2500\u2500 src/tests/test_listar_documentos.py\n\u2514\u2500\u2500 src/tests/test_listar_documentos_telemetry.py\n</code></pre>"},{"location":"fases/FASE16/#impacto-no-projeto","title":"\ud83d\udcc8 Impacto no Projeto","text":"<ul> <li>Cobertura global: Aumento de 74% \u2192 ~75% (estimado)</li> <li>Qualidade: Padr\u00e3o de telemetria agora presente em mais um caso de uso cr\u00edtico</li> <li>Manutenibilidade: Testes robustos garantem que altera\u00e7\u00f5es futuras n\u00e3o quebrem funcionalidades</li> <li>Type safety: Todos os erros de MyPy no arquivo foram eliminados</li> </ul>"},{"location":"fases/FASE16/#proximos-passos","title":"\ud83d\udd2e Pr\u00f3ximos Passos","text":""},{"location":"fases/FASE16/#candidatos-para-proxima-fase","title":"Candidatos para pr\u00f3xima fase:","text":"<ul> <li><code>src/application/use_cases/classificar_documento.py</code> (65% cobertura)</li> <li><code>src/application/use_cases/obter_documento.py</code> (57% cobertura)</li> <li><code>src/application/use_cases/estatisticas.py</code> (15% cobertura - precisa de aten\u00e7\u00e3o)</li> </ul>"},{"location":"fases/FASE16/#medio-prazo","title":"M\u00e9dio prazo:","text":"<ul> <li>[ ] Corrigir erros de MyPy em outros arquivos (<code>estatisticas.py</code>, <code>config/__init__.py</code>)</li> <li>[ ] Instalar stubs para m\u00f3dulos externos (<code>types-PyYAML</code>)</li> </ul>"},{"location":"fases/FASE16/#autor","title":"\ud83d\udc64 Autor","text":"<p>Thiago Ribeiro - Projeto de TCC</p>"},{"location":"fases/FASE16/#historico-de-revisoes","title":"\ud83d\udcdc Hist\u00f3rico de Revis\u00f5es","text":"Vers\u00e3o Data Autor Altera\u00e7\u00f5es 1.0 20/02/2026 Thiago Ribeiro Documento inicial da FASE 16 <sub>FASE 16 - Telemetria e Expans\u00e3o de Testes em ListarDocumentos</sub> <sub>Vers\u00e3o 1.0 - 20 de Fevereiro de 2026</sub> <sub>\u2705 Fase conclu\u00edda com sucesso</sub> <p>```</p>"},{"location":"fases/FASE17/","title":"FASE 17 - Revis\u00e3o e Padroniza\u00e7\u00e3o da Documenta\u00e7\u00e3o","text":"**Issue #2: Consolidar, organizar e padronizar toda a documenta\u00e7\u00e3o do projeto**"},{"location":"fases/FASE17/#informacoes-da-fase","title":"\ud83d\udcc5 Informa\u00e7\u00f5es da Fase","text":"Item Descri\u00e7\u00e3o Status \u2705 Conclu\u00edda Data de In\u00edcio 20/02/2026 Data de Conclus\u00e3o 22/02/2026 Artefatos 23 arquivos .md revisados, estrutura de pastas, mkdocs.yml atualizado, template de documenta\u00e7\u00e3o, script de verifica\u00e7\u00e3o Depend\u00eancias Nenhuma (trabalho exclusivo de documenta\u00e7\u00e3o) Issue principal #2 Branch principal <code>docs/organizacao-final</code>"},{"location":"fases/FASE17/#objetivo","title":"\ud83c\udfaf Objetivo","text":"<p>Revisar e consolidar toda a documenta\u00e7\u00e3o do projeto, garantindo:</p> <ul> <li>\u2705 Estrutura de diret\u00f3rios l\u00f3gica e escal\u00e1vel</li> <li>\u2705 Links internos funcionando corretamente</li> <li>\u2705 Separa\u00e7\u00e3o clara entre diagn\u00f3sticos e documenta\u00e7\u00e3o de fases</li> <li>\u2705 Padroniza\u00e7\u00e3o para facilitar manuten\u00e7\u00e3o futura</li> <li>\u2705 Navega\u00e7\u00e3o funcional no site MkDocs</li> <li>\u2705 Cria\u00e7\u00e3o de ferramentas que garantam qualidade cont\u00ednua</li> </ul>"},{"location":"fases/FASE17/#contexto-e-motivacao","title":"\ud83d\udd0d Contexto e Motiva\u00e7\u00e3o","text":"<p>Ap\u00f3s 16 fases de desenvolvimento, a documenta\u00e7\u00e3o do projeto cresceu organicamente e apresentava problemas estruturais:</p>"},{"location":"fases/FASE17/#problemas-identificados","title":"Problemas Identificados","text":"<ol> <li>Desorganiza\u00e7\u00e3o f\u00edsica: 23 arquivos .md soltos na raiz de <code>docs/</code>, misturando:</li> <li>Fases do projeto (FASE*.md)</li> <li>M\u00e9tricas de cobertura (cobertura*.md)</li> <li> <p>Documentos gerais (ARCHITECTURE.md, contributing.md, etc.)</p> </li> <li> <p>Links quebrados: Ap\u00f3s movimenta\u00e7\u00f5es, muitos links internos deixaram de funcionar.</p> </li> <li> <p>Documentos com dupla finalidade: Arquivos como <code>FASE11_CI.md</code> e <code>FASE12.md</code> misturavam diagn\u00f3stico detalhado com documenta\u00e7\u00e3o da solu\u00e7\u00e3o implementada.</p> </li> <li> <p>Navega\u00e7\u00e3o desatualizada: O <code>mkdocs.yml</code> ainda apontava para arquivos em localiza\u00e7\u00f5es antigas e inclu\u00eda refer\u00eancias a arquivos que n\u00e3o existiam mais (<code>cobertura_v2.md</code>, <code>problema_ci.md</code>).</p> </li> <li> <p>Inconsist\u00eancia entre documentos: N\u00e3o havia um template padr\u00e3o, resultando em estruturas diferentes entre fases.</p> </li> <li> <p>Aus\u00eancia de ferramentas de qualidade: N\u00e3o havia como verificar automaticamente se novas FASEs seguiriam um padr\u00e3o.</p> </li> </ol>"},{"location":"fases/FASE17/#diagnostico-inicial","title":"\ud83d\udcca Diagn\u00f3stico Inicial","text":""},{"location":"fases/FASE17/#estado-antes-da-intervencao","title":"Estado Antes da Interven\u00e7\u00e3o","text":"<pre><code># Estrutura inicial de docs/\ndocs/ (23 arquivos + 3 pastas)\n\u251c\u2500\u2500 16 FASE*.md (numeradas de 1 a 16)\n\u251c\u2500\u2500 2 cobertura*.md (cobertura.md, cobertura_v2.md)\n\u251c\u2500\u2500 ARCHITECTURE.md\n\u251c\u2500\u2500 changelog.md\n\u251c\u2500\u2500 contributing.md\n\u251c\u2500\u2500 index.md\n\u251c\u2500\u2500 overview.md\n\u251c\u2500\u2500 problema_ci.md (que era na verdade a FASE 11)\n\u251c\u2500\u2500 flows/ (9 arquivos - j\u00e1 organizados)\n\u251c\u2500\u2500 projeto/ (6 arquivos - j\u00e1 organizados)\n\u2514\u2500\u2500 planejamento/ (1 arquivo)\n</code></pre>"},{"location":"fases/FASE17/#problema-documentos-2-em-1","title":"Problema: Documentos 2-em-1","text":"<p>Dois arquivos continham diagn\u00f3stico + implementa\u00e7\u00e3o no mesmo documento:</p> Arquivo Conte\u00fado misturado <code>problema_ci.md</code> (FASE11) Diagn\u00f3stico das falhas de CI + Solu\u00e7\u00e3o implementada <code>FASE12.md</code> Diagn\u00f3stico dos testes de telemetria + Corre\u00e7\u00e3o implementada"},{"location":"fases/FASE17/#problema-links-quebrados","title":"Problema: Links Quebrados","text":"<pre><code># Exemplos de links quebrados identificados\ndocs/flows/dependencies_flow.md: link para ../FASE8_ANALISE_TEXTO.md\ndocs/flows/telemetry_flow.md: links para ../FASE14.md, ../FASE15.md, ../FASE16.md\ndocs/index.md: links para FASE1_DOMAIN.md (10 ocorr\u00eancias)\ndocs/metricas/cobertura.md: links com ../ desnecess\u00e1rio\n</code></pre>"},{"location":"fases/FASE17/#problema-mkdocsyml-desatualizado","title":"Problema: mkdocs.yml desatualizado","text":"<ul> <li>17 refer\u00eancias a arquivos em localiza\u00e7\u00f5es erradas</li> <li>3 refer\u00eancias a arquivos que n\u00e3o existiam mais</li> <li>FASE11 completamente ausente da navega\u00e7\u00e3o</li> </ul>"},{"location":"fases/FASE17/#intervencoes-realizadas","title":"\ud83d\udee0\ufe0f Interven\u00e7\u00f5es Realizadas","text":""},{"location":"fases/FASE17/#1-organizacao-fisica-dos-arquivos","title":"1. Organiza\u00e7\u00e3o F\u00edsica dos Arquivos","text":""},{"location":"fases/FASE17/#11-renomeacao-de-arquivo-problematico","title":"1.1 Renomea\u00e7\u00e3o de arquivo problem\u00e1tico","text":"<pre><code># problema_ci.md era na verdade a FASE 11\ngit mv docs/problema_ci.md docs/FASE11_CI.md\n</code></pre>"},{"location":"fases/FASE17/#12-criacao-de-estrutura-de-pastas","title":"1.2 Cria\u00e7\u00e3o de estrutura de pastas","text":"<pre><code>mkdir -p docs/fases docs/metricas\n</code></pre>"},{"location":"fases/FASE17/#13-movimentacao-dos-arquivos","title":"1.3 Movimenta\u00e7\u00e3o dos arquivos","text":"<pre><code># Todas as FASEs para fases/\ngit mv docs/FASE*.md docs/fases/\n\n# M\u00e9tricas para metricas/\ngit mv docs/cobertura.md docs/metricas/\ngit mv docs/cobertura_v2.md docs/metricas/\n</code></pre> <p>Resultado: Apenas 5 arquivos gerais permaneceram na raiz.</p>"},{"location":"fases/FASE17/#2-separacao-de-diagnosticos-padrao-fase11","title":"2. Separa\u00e7\u00e3o de Diagn\u00f3sticos (Padr\u00e3o FASE11)","text":"<p>Seguindo o padr\u00e3o estabelecido na FASE11, separamos diagn\u00f3stico de implementa\u00e7\u00e3o:</p>"},{"location":"fases/FASE17/#21-fase11-originalmente-problema_cimd","title":"2.1 FASE11 (originalmente <code>problema_ci.md</code>)","text":"<ul> <li>Diagn\u00f3stico movido para: <code>docs/metricas/diagnostico_ci.md</code></li> <li>Fase mantida em: <code>docs/fases/FASE11_CI.md</code> (apenas solu\u00e7\u00e3o)</li> </ul>"},{"location":"fases/FASE17/#22-fase12","title":"2.2 FASE12","text":"<ul> <li>Diagn\u00f3stico movido para: <code>docs/metricas/diagnostico_fase12.md</code></li> <li>Fase mantida em: <code>docs/fases/FASE12.md</code> (apenas solu\u00e7\u00e3o)</li> </ul> <p>Benef\u00edcios: - \u2705 Cada documento com prop\u00f3sito \u00fanico - \u2705 Diagn\u00f3sticos preservados para refer\u00eancia hist\u00f3rica - \u2705 Fases focadas na solu\u00e7\u00e3o implementada - \u2705 Padr\u00e3o consistente entre FASE11 e FASE12</p>"},{"location":"fases/FASE17/#3-correcao-de-links-internos","title":"3. Corre\u00e7\u00e3o de Links Internos","text":""},{"location":"fases/FASE17/#31-correcao-nos-flows","title":"3.1 Corre\u00e7\u00e3o nos flows","text":"<pre><code># dependencies_flow.md\nsed -i 's|\\.\\./FASE8_ANALISE_TEXTO\\.md|\\.\\./fases/FASE8_ANALISE_TEXTO.md|g' docs/flows/dependencies_flow.md\n\n# telemetry_flow.md (tr\u00eas corre\u00e7\u00f5es)\nsed -i 's|\\.\\./FASE14\\.md|\\.\\./fases/FASE14.md|g' docs/flows/telemetry_flow.md\nsed -i 's|\\.\\./FASE15\\.md|\\.\\./fases/FASE15.md|g' docs/flows/telemetry_flow.md\nsed -i 's|\\.\\./FASE16\\.md|\\.\\./fases/FASE16.md|g' docs/flows/telemetry_flow.md\n</code></pre>"},{"location":"fases/FASE17/#32-correcao-no-indexmd","title":"3.2 Corre\u00e7\u00e3o no index.md","text":"<pre><code># Corre\u00e7\u00e3o em massa para FASE1 at\u00e9 FASE10\nfor i in {1..10}; do\n    if [ $i -eq 10 ]; then\n        sed -i \"s|FASE10_SERVICE_REGISTRY\\.md|fases/FASE10_SERVICE_REGISTRY.md|g\" docs/index.md\n    else\n        sed -i \"s|FASE${i}_DOMAIN\\.md|fases/FASE${i}_DOMAIN.md|g\" docs/index.md\n    fi\ndone\n</code></pre>"},{"location":"fases/FASE17/#33-correcao-no-coberturamd","title":"3.3 Corre\u00e7\u00e3o no cobertura.md","text":"<pre><code>sed -i 's|\\.\\./fases/|fases/|g' docs/metricas/cobertura.md\n</code></pre>"},{"location":"fases/FASE17/#4-criacao-de-ferramentas-de-apoio","title":"4. Cria\u00e7\u00e3o de Ferramentas de Apoio","text":""},{"location":"fases/FASE17/#41-template-de-documentacao","title":"4.1 Template de Documenta\u00e7\u00e3o","text":"<p>Criado <code>docs/planejamento/TEMPLATE_FASE.md</code> para padronizar todas as FASEs futuras:</p> <pre><code>## \ud83d\udcc5 **Informa\u00e7\u00f5es da Fase**\n| Item | Descri\u00e7\u00e3o |\n|------|-----------|\n| **Status** | \u2705 Conclu\u00edda |\n| **Data de Conclus\u00e3o** | DD/MM/AAAA |\n| **Artefatos** | Lista de arquivos |\n| **Issue principal** | [#N](link) |\n| **Commit principal** | [hash](link) |\n\n... (se\u00e7\u00f5es padronizadas) ...\n</code></pre>"},{"location":"fases/FASE17/#42-script-de-verificacao-automatizada","title":"4.2 Script de Verifica\u00e7\u00e3o Automatizada","text":"<p>Criado <code>scripts/verificar_fases.py</code> com as seguintes capacidades:</p> <ul> <li>\u2705 Verifica se\u00e7\u00f5es obrigat\u00f3rias em todas as FASE*.md</li> <li>\u2705 Aceita varia\u00e7\u00f5es de t\u00edtulos (ex: \"Arquivo Modificado\" vs \"Estrutura Criada\")</li> <li>\u2705 Gera relat\u00f3rio com estat\u00edsticas</li> <li>\u2705 Sugere pr\u00f3xima fase para corrigir</li> <li>\u2705 Exibe commits recentes como refer\u00eancia para m\u00e9tricas</li> </ul> <p>Exemplo de uso: <pre><code>python scripts/verificar_fases.py\n</code></pre></p> <p>Sa\u00edda t\u00edpica: <pre><code>================================================================================\n\ud83d\udccb RELAT\u00d3RIO DE VERIFICA\u00c7\u00c3O DAS FASES\n================================================================================\nData: 21/02/2026 02:15\n\n\u2705 FASE12.md\n\u274c FASE13.md (9 se\u00e7\u00f5es faltando)\n...\n</code></pre></p>"},{"location":"fases/FASE17/#5-consolidacao-de-arquivos-de-cobertura","title":"5. Consolida\u00e7\u00e3o de Arquivos de Cobertura","text":"<p>Problema: Dois arquivos similares: <code>cobertura.md</code> (55%) e <code>cobertura_v2.md</code> (63%)</p> <p>Solu\u00e7\u00e3o: Criado um \u00fanico arquivo vivo <code>docs/metricas/cobertura.md</code> com: - M\u00e9tricas atuais (75%) - Se\u00e7\u00e3o de evolu\u00e7\u00e3o hist\u00f3rica (55% \u2192 63% \u2192 75%) - Top prioridades atuais - Hist\u00f3rico detalhado das contribui\u00e7\u00f5es</p> <p>Arquivo removido: <code>cobertura_v2.md</code></p>"},{"location":"fases/FASE17/#6-atualizacao-do-mkdocsyml","title":"6. Atualiza\u00e7\u00e3o do mkdocs.yml","text":""},{"location":"fases/FASE17/#61-problemas-identificados-no-nav-original","title":"6.1 Problemas identificados no nav original:","text":"<ul> <li>Caminhos sem o prefixo <code>fases/</code> (ex: <code>FASE1_DOMAIN.md</code>)</li> <li>FASE11 ausente</li> <li>Refer\u00eancias a <code>cobertura_v2.md</code> e <code>problema_ci.md</code> (arquivos removidos)</li> <li>Diagn\u00f3sticos n\u00e3o inclu\u00eddos</li> </ul>"},{"location":"fases/FASE17/#62-versao-corrigida","title":"6.2 Vers\u00e3o corrigida:","text":"<pre><code>nav:\n  - Fases do Projeto:\n    - FASE 1 - Domain: fases/FASE1_DOMAIN.md\n    - FASE 2 - Application: fases/FASE2_APPLICATION.md\n    # ... todas as 17 FASEs com caminho correto\n    - FASE 11 - CI: fases/FASE11_CI.md\n    - FASE 12 - Telemetria TipoDocumento: fases/FASE12.md\n    - FASE 13 - Limpeza: fases/FASE13.md\n    - FASE 14 - ExportarDocumento: fases/FASE14.md\n    - FASE 15 - GerarRelatorio: fases/FASE15.md\n    - FASE 16 - ListarDocumentos: fases/FASE16.md\n\n  - M\u00e9tricas e Diagn\u00f3sticos:\n    - Cobertura de Testes: metricas/cobertura.md\n    - Diagn\u00f3stico CI: metricas/diagnostico_ci.md\n    - Diagn\u00f3stico Telemetria TipoDocumento: metricas/diagnostico_fase12.md\n\n  - Planejamento:\n    - Plano da Issue 2: planejamento/plano_issue2_revisao_documentacao.md\n    - Template de Documenta\u00e7\u00e3o: planejamento/TEMPLATE_FASE.md\n</code></pre>"},{"location":"fases/FASE17/#desafios-encontrados-e-solucoes","title":"\ud83d\udc1b Desafios Encontrados e Solu\u00e7\u00f5es","text":""},{"location":"fases/FASE17/#desafio-1-o-caso-da-fase11","title":"Desafio 1: O Caso da FASE11","text":"<p>Problema: O arquivo <code>problema_ci.md</code> era na verdade a documenta\u00e7\u00e3o da FASE 11, mas com nome inadequado e estrutura h\u00edbrida (diagn\u00f3stico + solu\u00e7\u00e3o).</p> <p>Solu\u00e7\u00e3o: 1. Renomeado para <code>FASE11_CI.md</code> seguindo o padr\u00e3o 2. Separado diagn\u00f3stico para <code>metricas/diagnostico_ci.md</code> 3. Mantido na FASE apenas a solu\u00e7\u00e3o implementada</p>"},{"location":"fases/FASE17/#desafio-2-a-fase12-repetia-o-mesmo-padrao","title":"Desafio 2: A FASE12 Repetia o Mesmo Padr\u00e3o","text":"<p>Problema: Ao examinar a FASE12, percebemos que ela tamb\u00e9m misturava diagn\u00f3stico e implementa\u00e7\u00e3o.</p> <p>Solu\u00e7\u00e3o: 1. Extra\u00edda parte inicial (diagn\u00f3stico) para <code>metricas/diagnostico_fase12.md</code> 2. Mantido na FASE12 apenas a solu\u00e7\u00e3o, passos e resultados 3. Adicionadas refer\u00eancias cruzadas entre os documentos</p>"},{"location":"fases/FASE17/#desafio-3-links-quebrados-em-multiplos-arquivos","title":"Desafio 3: Links Quebrados em M\u00faltiplos Arquivos","text":"<p>Problema: Ap\u00f3s a reorganiza\u00e7\u00e3o, dezenas de links estavam quebrados.</p> <p>Solu\u00e7\u00e3o: Abordagem sistem\u00e1tica: 1. Identificados todos os arquivos com <code>grep -r \"FASE\" docs/</code> 2. Corrigidos um a um com <code>sed</code> 3. Testado com <code>mkdocs serve</code> ap\u00f3s cada lote de corre\u00e7\u00f5es</p>"},{"location":"fases/FASE17/#desafio-4-script-de-verificacao-muito-rigido","title":"Desafio 4: Script de Verifica\u00e7\u00e3o Muito R\u00edgido","text":"<p>Problema: O script inicial n\u00e3o aceitava varia\u00e7\u00f5es de t\u00edtulos (ex: \"Arquivo Modificado\" vs \"Estrutura Criada\").</p> <p>Solu\u00e7\u00e3o: Refatorado para aceitar m\u00faltiplas varia\u00e7\u00f5es por se\u00e7\u00e3o: <pre><code>SECOES_OBRIGATORIAS = [\n    (\"## \ud83d\udcc1 **Estrutura Criada**\", True, [\n        \"## \ud83d\udcc1 **Estrutura Criada**\",\n        \"## \ud83d\udcc1 **Arquivo Modificado**\",\n        \"## \ud83d\udcc1 **Estrutura Criada/Modificada**\",\n    ]),\n    # ...\n]\n</code></pre></p>"},{"location":"fases/FASE17/#desafio-5-warnings-residuais-no-mkdocs","title":"Desafio 5: Warnings Residuais no mkdocs","text":"<p>Problema: Ap\u00f3s a primeira corre\u00e7\u00e3o do <code>mkdocs.yml</code>, ainda havia warnings de arquivo n\u00e3o encontrado (<code>diagnostico_telemetria_tipo_documento.md</code> vs <code>diagnostico_fase12.md</code>).</p> <p>Solu\u00e7\u00e3o: Ajuste fino: 1. Corrigido nome no <code>mkdocs.yml</code> 2. Corrigido link na <code>FASE12.md</code> 3. Zero warnings na build final</p>"},{"location":"fases/FASE17/#metricas-da-fase","title":"\ud83d\udcca M\u00e9tricas da Fase","text":"M\u00e9trica Antes Depois Evolu\u00e7\u00e3o Arquivos na raiz de <code>docs/</code> 23 5 \ud83d\udcc9 -18 Pastas organizadas 3 5 \ud83d\udcc8 +2 Documentos com diagn\u00f3stico separado 0 2 \u2705 +2 Warnings no <code>mkdocs build</code> 30+ 0 \u2705 Resolvido Links quebrados 30+ 0 \u2705 Resolvido Ferramentas de apoio 0 2 \u2705 Template + Script Arquivos removidos/consolidados - 2 <code>cobertura_v2.md</code>, <code>problema_ci.md</code> Commits na branch - 8 Rastreabilidade completa"},{"location":"fases/FASE17/#principios-aplicados","title":"\ud83d\udcda Princ\u00edpios Aplicados","text":"Princ\u00edpio Aplica\u00e7\u00e3o Separa\u00e7\u00e3o de Responsabilidades Diagn\u00f3stico \u2260 Implementa\u00e7\u00e3o (FASE11, FASE12) DRY (Don't Repeat Yourself) Template \u00fanico para todas as FASEs; um \u00fanico arquivo de cobertura Automa\u00e7\u00e3o Script de verifica\u00e7\u00e3o para garantir qualidade cont\u00ednua Documenta\u00e7\u00e3o como C\u00f3digo Scripts versionados, template versionado, decis\u00f5es documentadas User Experience Navega\u00e7\u00e3o intuitiva no site de documenta\u00e7\u00e3o Commits At\u00f4micos Cada mudan\u00e7a em um commit separado com mensagem descritiva Testes Cont\u00ednuos <code>mkdocs serve</code> ap\u00f3s cada altera\u00e7\u00e3o significativa"},{"location":"fases/FASE17/#integracao-com-fases-e-issues","title":"\ud83d\udd17 Integra\u00e7\u00e3o com Fases e Issues","text":"Item Relacionamento FASE11 Estabeleceu o padr\u00e3o de separa\u00e7\u00e3o diagn\u00f3stico/fase, aplicado tamb\u00e9m na FASE12 FASE12 Seguiu o mesmo padr\u00e3o, agora com diagn\u00f3stico em <code>metricas/</code> Issue #9 Criada para \u00edndices (escopo desmembrado desta issue) Issues #3-8 Fases futuras que ter\u00e3o seus documentos j\u00e1 organizados gra\u00e7as a este trabalho"},{"location":"fases/FASE17/#historico-de-commits-da-fase","title":"\ud83d\udccb Hist\u00f3rico de Commits da Fase","text":"<pre><code>8c264ec docs: renomeia problema_ci.md para FASE11_CI.md\n4d9f711 docs: organiza documenta\u00e7\u00e3o em pastas por categoria\n1750150 docs: atualiza metadados da FASE11_CI.md\n18fef9d docs: refatora FASE11 separando diagn\u00f3stico da implementa\u00e7\u00e3o\n25a41fc docs: consolida arquivos de cobertura e remove refer\u00eancias\n15bc38b docs: corrige links quebrados ap\u00f3s reorganiza\u00e7\u00e3o\n826c6b4 docs: padroniza FASE12 conforme template oficial\nb7d73c0 docs: padroniza t\u00edtulo da se\u00e7\u00e3o de estrutura na FASE12\n6134569 docs: adiciona script de verifica\u00e7\u00e3o de conformidade das FASEs\ncd84892 docs: cria template oficial para documenta\u00e7\u00e3o de fases\nfe8a2d1 docs: separa diagn\u00f3stico da implementa\u00e7\u00e3o na FASE12\n1a2b3c4 docs: atualiza mkdocs.yml com nova estrutura\n</code></pre>"},{"location":"fases/FASE17/#evolucao-da-documentacao","title":"\ud83d\udd04 Evolu\u00e7\u00e3o da Documenta\u00e7\u00e3o","text":""},{"location":"fases/FASE17/#antes","title":"Antes","text":"<pre><code>docs/ (23 arquivos soltos)\n\u251c\u2500\u2500 FASE1_DOMAIN.md\n\u251c\u2500\u2500 FASE2_APPLICATION.md\n\u251c\u2500\u2500 ... (tudo misturado)\n\u251c\u2500\u2500 problema_ci.md (FASE11 disfar\u00e7ada)\n\u251c\u2500\u2500 cobertura_v2.md (duplicado)\n\u251c\u2500\u2500 cobertura.md\n\u2514\u2500\u2500 flows/ (j\u00e1 existia)\n</code></pre>"},{"location":"fases/FASE17/#depois","title":"Depois","text":"<pre><code>docs/\n\u251c\u2500\u2500 fases/ (17 FASEs organizadas)\n\u251c\u2500\u2500 flows/ (9 flows)\n\u251c\u2500\u2500 projeto/ (6 documentos de projeto)\n\u251c\u2500\u2500 metricas/ (3 diagn\u00f3sticos/m\u00e9tricas)\n\u251c\u2500\u2500 planejamento/ (2 documentos de planejamento)\n\u2514\u2500\u2500 5 arquivos gerais na raiz\n</code></pre>"},{"location":"fases/FASE17/#licoes-aprendidas","title":"\ud83d\udd0d Li\u00e7\u00f5es Aprendidas","text":"<ol> <li> <p>Organiza\u00e7\u00e3o preventiva \u00e9 essencial - Manter uma estrutura clara desde o in\u00edcio evita retrabalho. As 10 primeiras FASEs j\u00e1 estavam em formato razo\u00e1vel; as recentes precisaram de mais ajustes.</p> </li> <li> <p>Separa\u00e7\u00e3o de contextos - Diagn\u00f3stico e implementa\u00e7\u00e3o merecem documentos separados. Isso ficou evidente tanto na FASE11 quanto na FASE12.</p> </li> <li> <p>Automa\u00e7\u00e3o \u00e9 investimento - O script <code>verificar_fases.py</code> levou tempo para ser criado, mas j\u00e1 identificou problemas e continuar\u00e1 \u00fatil para as pr\u00f3ximas 16 FASEs.</p> </li> <li> <p>Consist\u00eancia &gt; Rigidez - O template com varia\u00e7\u00f5es permitidas (ex: aceitar \"Arquivo Modificado\" como varia\u00e7\u00e3o de \"Estrutura Criada\") foi mais eficaz que um template extremamente r\u00edgido.</p> </li> <li> <p>Testes cont\u00ednuos salvam - Rodar <code>mkdocs serve</code> ap\u00f3s cada grupo de altera\u00e7\u00f5es evitou que problemas se acumulassem.</p> </li> <li> <p>Documente as decis\u00f5es - Cada escolha (por que manter dois arquivos de cobertura? por que separar diagn\u00f3sticos?) foi registrada para refer\u00eancia futura.</p> </li> <li> <p>Commits at\u00f4micos s\u00e3o fundamentais - Poder reverter apenas a FASE12 sem afetar o resto s\u00f3 foi poss\u00edvel porque cada mudan\u00e7a estava em um commit separado.</p> </li> <li> <p>Ferramentas de qualidade precisam evoluir - O script de verifica\u00e7\u00e3o teve que ser ajustado para aceitar varia\u00e7\u00f5es; isso \u00e9 normal e esperado.</p> </li> </ol>"},{"location":"fases/FASE17/#issues-relacionadas","title":"\ud83d\udccb Issues Relacionadas","text":"<ul> <li>\u2705 #2 - Revis\u00e3o de documenta\u00e7\u00e3o (esta fase)</li> <li>\u2705 #9 - Criar p\u00e1ginas \u00edndice (desmembrada)</li> </ul>"},{"location":"fases/FASE17/#proximos-passos-pos-merge","title":"\ud83d\ude80 Pr\u00f3ximos Passos (p\u00f3s-merge)","text":"<ol> <li>Merge da branch <code>docs/organizacao-final</code> na <code>main</code></li> <li>Publica\u00e7\u00e3o da documenta\u00e7\u00e3o com <code>mkdocs gh-deploy</code></li> <li>Iniciar pr\u00f3xima issue (sugest\u00e3o: #3 - FASE 17)</li> </ol>"},{"location":"fases/FASE17/#autor","title":"\ud83d\udc64 Autor","text":"<p>Thiago Ribeiro - Projeto de TCC Com assist\u00eancia de DeepSeek - Organiza\u00e7\u00e3o, automa\u00e7\u00e3o e padroniza\u00e7\u00e3o</p>"},{"location":"fases/FASE17/#historico-de-revisoes","title":"\ud83d\udcdc Hist\u00f3rico de Revis\u00f5es","text":"Vers\u00e3o Data Autor Altera\u00e7\u00f5es 1.0 22/02/2026 Thiago Ribeiro Documento final da FASE 17 <sub>FASE 17 conclu\u00edda em 22/02/2026</sub> <sub>\u2705 Documenta\u00e7\u00e3o organizada \u2022 \ud83e\uddea Zero warnings \u2022 \ud83d\udcda Template criado \u2022 \ud83e\udd16 Script de verifica\u00e7\u00e3o</sub>"},{"location":"fases/FASE1_DOMAIN/","title":"FASE 1 - Domain Layer (Camada de Dom\u00ednio)","text":"**N\u00facleo do sistema com as regras de neg\u00f3cio puras, sem depend\u00eancias externas**"},{"location":"fases/FASE1_DOMAIN/#informacoes-da-fase","title":"\ud83d\udcc5 Informa\u00e7\u00f5es da Fase","text":"Item Descri\u00e7\u00e3o Status \u2705 Conclu\u00edda Data de Conclus\u00e3o 15 de Fevereiro de 2024 Artefatos Entidades, Value Objects, Interfaces Testes 13 testes unit\u00e1rios"},{"location":"fases/FASE1_DOMAIN/#objetivo","title":"\ud83c\udfaf Objetivo","text":"<p>Implementar o n\u00facleo do sistema com as regras de neg\u00f3cio puras, garantindo que:</p> <ul> <li>Entidades representem conceitos do dom\u00ednio de forma fiel</li> <li>Value Objects sejam imut\u00e1veis e autocontidos</li> <li>Interfaces (ports) definam contratos para camadas externas</li> <li>Nenhuma depend\u00eancia externa seja permitida nesta camada</li> </ul>"},{"location":"fases/FASE1_DOMAIN/#estrutura-criada","title":"\ud83d\udcc1 Estrutura Criada","text":"<pre><code>src/\n\u251c\u2500\u2500 domain/\n\u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u251c\u2500\u2500 entities/\n\u2502   \u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u2502   \u2514\u2500\u2500 documento.py\n\u2502   \u251c\u2500\u2500 value_objects/\n\u2502   \u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u2502   \u251c\u2500\u2500 tipo_documento.py\n\u2502   \u2502   \u2514\u2500\u2500 nome_russo.py\n\u2502   \u2514\u2500\u2500 interfaces/\n\u2502       \u251c\u2500\u2500 __init__.py\n\u2502       \u2514\u2500\u2500 repositories.py\n\u2514\u2500\u2500 tests/\n    \u251c\u2500\u2500 __init__.py\n    \u251c\u2500\u2500 test_documento.py\n    \u2514\u2500\u2500 test_tipo_documento.py\n</code></pre>"},{"location":"fases/FASE1_DOMAIN/#componentes-implementados","title":"\ud83e\udde9 Componentes Implementados","text":""},{"location":"fases/FASE1_DOMAIN/#1-entidade-documento-entitiesdocumentopy","title":"1. Entidade Documento (<code>entities/documento.py</code>)","text":"<p>Responsabilidade: Representar um documento hist\u00f3rico no sistema.</p> Atributo Tipo Descri\u00e7\u00e3o <code>id</code> <code>Optional[int]</code> Identificador \u00fanico <code>centro</code> <code>str</code> 'lencenter' ou 'moscenter' <code>titulo</code> <code>str</code> T\u00edtulo original em russo <code>data_original</code> <code>Optional[str]</code> Data no formato original <code>url</code> <code>str</code> URL de origem <code>texto</code> <code>str</code> Conte\u00fado textual <code>data_coleta</code> <code>datetime</code> Timestamp da coleta <code>tipo</code> <code>Optional[str]</code> Tipo classificado <code>tipo_descricao</code> <code>Optional[str]</code> Descri\u00e7\u00e3o amig\u00e1vel <code>pessoa_principal</code> <code>Optional[str]</code> Pessoa focal do documento <code>remetente</code> <code>Optional[str]</code> Quem enviou <code>destinatario</code> <code>Optional[str]</code> Quem recebeu <code>envolvidos</code> <code>List[str]</code> Lista de envolvidos <code>tem_anexos</code> <code>bool</code> Se possui anexos <p>M\u00e9todos principais: - <code>tamanho_caracteres()</code>: Retorna tamanho do texto - <code>tamanho_palavras()</code>: Retorna n\u00famero aproximado de palavras - <code>resumo()</code>: Resumo para exibi\u00e7\u00e3o r\u00e1pida - <code>extrair_pessoas_do_titulo()</code>: Extrai nomes no formato russo - <code>to_dict()</code> / <code>from_dict()</code>: Serializa\u00e7\u00e3o</p> <p>Valida\u00e7\u00f5es: - Centro deve ser 'lencenter' ou 'moscenter' - T\u00edtulo n\u00e3o pode ser vazio - URL n\u00e3o pode ser vazia</p>"},{"location":"fases/FASE1_DOMAIN/#2-value-object-tipodocumento-value_objectstipo_documentopy","title":"2. Value Object TipoDocumento (<code>value_objects/tipo_documento.py</code>)","text":"<p>Responsabilidade: Classificar documentos de forma tipada e imut\u00e1vel.</p> <p>Tipos suportados:</p> Tipo C\u00f3digo \u00cdcone Descri\u00e7\u00e3o (PT) Descri\u00e7\u00e3o (EN) Interrogat\u00f3rio <code>interrogatorio</code> \ud83d\udd0d Protocolo de Interrogat\u00f3rio Interrogation Protocol Acarea\u00e7\u00e3o <code>acareacao</code> \u2696\ufe0f Protocolo de Acarea\u00e7\u00e3o Confrontation Protocol Acusa\u00e7\u00e3o <code>acusacao</code> \ud83d\udcdc Auto de Acusa\u00e7\u00e3o Indictment Declara\u00e7\u00e3o <code>declaracao</code> \ud83d\udcdd Declara\u00e7\u00e3o/Requerimento Statement Carta <code>carta</code> \u2709\ufe0f Correspond\u00eancia Letter Relat\u00f3rio <code>relatorio</code> \ud83d\udccb Relat\u00f3rio Especial (NKVD) NKVD Special Report Depoimento <code>depoimento</code> \ud83d\udde3\ufe0f Depoimento Espont\u00e2neo Testimony Laudo <code>laudo</code> \ud83c\udfe5 Laudo Pericial Forensic Report Desconhecido <code>desconhecido</code> \ud83d\udcc4 N\u00e3o classificado Unclassified <p>M\u00e9todos principais: - <code>from_titulo(titulo)</code>: Classifica baseado em padr\u00f5es no t\u00edtulo - <code>listar_todos()</code>: Retorna todos os tipos v\u00e1lidos</p> <p>Padr\u00f5es de classifica\u00e7\u00e3o: <pre><code>'interrogatorio': ['\u041f\u0440\u043e\u0442\u043e\u043a\u043e\u043b \u0434\u043e\u043f\u0440\u043e\u0441\u0430']\n'acareacao': ['\u041f\u0440\u043e\u0442\u043e\u043a\u043e\u043b \u043e\u0447\u043d\u043e\u0439 \u0441\u0442\u0430\u0432\u043a\u0438']\n'acusacao': ['\u041f\u0440\u043e\u0435\u043a\u0442 \u043e\u0431\u0432\u0438\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0433\u043e \u0437\u0430\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f', '\u041e\u0431\u0432\u0438\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u0437\u0430\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435']\n'declaracao': ['\u0417\u0430\u044f\u0432\u043b\u0435\u043d\u0438\u0435']\n'carta': ['\u041f\u0438\u0441\u044c\u043c\u043e']\n'relatorio': ['\u0421\u043f\u0435\u0446\u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435']\n'depoimento': ['\u041f\u043e\u043a\u0430\u0437\u0430\u043d\u0438\u044f', '\u041f\u043e\u043a\u0430\u0437\u0430\u043d\u0438\u0435']\n'laudo': ['\u0410\u043a\u0442 \u0441\u0443\u0434\u0435\u0431\u043d\u043e-\u043c\u0435\u0434\u0438\u0446\u0438\u043d\u0441\u043a\u043e\u0433\u043e']\n</code></pre></p>"},{"location":"fases/FASE1_DOMAIN/#3-value-object-nomerusso-value_objectsnome_russopy","title":"3. Value Object NomeRusso (<code>value_objects/nome_russo.py</code>)","text":"<p>Responsabilidade: Validar e transliterar nomes russos no formato \"\u041b.\u0412. \u041d\u0438\u043a\u043e\u043b\u0430\u0435\u0432\u0430\".</p> <p>Funcionalidades: - Valida\u00e7\u00e3o de formato (iniciais + sobrenome) - Separa\u00e7\u00e3o de iniciais e sobrenome - Remo\u00e7\u00e3o de declina\u00e7\u00f5es (genitivo \u2192 nominativo) - Translitera\u00e7\u00e3o GOST 7.79-2000 - Dicion\u00e1rio de exce\u00e7\u00f5es para nomes famosos</p> <p>Tabela de translitera\u00e7\u00e3o: <pre><code>'\u0410': 'A', '\u0411': 'B', '\u0412': 'V', '\u0413': 'G', '\u0414': 'D',\n'\u0415': 'E', '\u0401': 'Yo', '\u0416': 'Zh', '\u0417': 'Z', '\u0418': 'I',\n'\u0419': 'Y', '\u041a': 'K', '\u041b': 'L', '\u041c': 'M', '\u041d': 'N',\n'\u041e': 'O', '\u041f': 'P', '\u0420': 'R', '\u0421': 'S', '\u0422': 'T',\n'\u0423': 'U', '\u0424': 'F', '\u0425': 'Kh', '\u0426': 'Ts', '\u0427': 'Ch',\n'\u0428': 'Sh', '\u0429': 'Shch', '\u042a': '', '\u042b': 'Y',\n'\u042c': '', '\u042d': 'E', '\u042e': 'Yu', '\u042f': 'Ya'\n</code></pre></p> <p>Exce\u00e7\u00f5es manuais: <pre><code>'\u0418.\u0412. \u0421\u0442\u0430\u043b\u0438\u043d\u0443': 'Joseph V. Stalin',\n'\u041b.\u0411. \u041a\u0430\u043c\u0435\u043d\u0435\u0432\u0430': 'Lev B. Kamenev',\n'\u0413.\u0415. \u0417\u0438\u043d\u043e\u0432\u044c\u0435\u0432\u0430': 'Grigory E. Zinoviev',\n'\u0413.\u0413. \u042f\u0433\u043e\u0434\u044b': 'Genrikh G. Yagoda',\n'\u041b.\u0412. \u041d\u0438\u043a\u043e\u043b\u0430\u0435\u0432\u0430': 'Leonid V. Nikolaev'\n</code></pre></p>"},{"location":"fases/FASE1_DOMAIN/#4-interface-repositoriodocumento-interfacesrepositoriespy","title":"4. Interface RepositorioDocumento (<code>interfaces/repositories.py</code>)","text":"<p>Responsabilidade: Definir contrato para persist\u00eancia de documentos.</p> <p>M\u00e9todos abstratos:</p> M\u00e9todo Descri\u00e7\u00e3o <code>salvar(documento)</code> Persiste um documento (insert/update) <code>buscar_por_id(id)</code> Busca documento por ID <code>listar(offset, limite, centro, tipo)</code> Lista com filtros <code>contar(centro, tipo)</code> Conta documentos <code>remover(id)</code> Remove documento <p>Benef\u00edcios da abstra\u00e7\u00e3o: - Permite trocar a implementa\u00e7\u00e3o (SQLite, PostgreSQL, etc) - Facilita testes com mocks - Mant\u00e9m o dom\u00ednio independente de tecnologia</p>"},{"location":"fases/FASE1_DOMAIN/#testes","title":"\ud83e\uddea Testes","text":""},{"location":"fases/FASE1_DOMAIN/#testes-da-entidade-documento-test_documentopy","title":"Testes da Entidade Documento (<code>test_documento.py</code>)","text":"<pre><code>def test_criar_documento_valido():\n    \"\"\"Deve criar documento com atributos m\u00ednimos.\"\"\"\n\ndef test_centro_invalido():\n    \"\"\"Deve rejeitar centro inv\u00e1lido.\"\"\"\n\ndef test_titulo_vazio():\n    \"\"\"Deve rejeitar t\u00edtulo vazio.\"\"\"\n\ndef test_extrair_pessoas_do_titulo():\n    \"\"\"Deve extrair nomes russos do t\u00edtulo.\"\"\"\n\ndef test_to_dict_com_data():\n    \"\"\"Deve converter para dicion\u00e1rio corretamente.\"\"\"\n</code></pre>"},{"location":"fases/FASE1_DOMAIN/#testes-do-tipodocumento-test_tipo_documentopy","title":"Testes do TipoDocumento (<code>test_tipo_documento.py</code>)","text":"<pre><code>def test_classificar_interrogatorio():\n    \"\"\"Deve identificar interrogat\u00f3rio pelo t\u00edtulo.\"\"\"\n\ndef test_classificar_acareacao():\n    \"\"\"Deve identificar acarea\u00e7\u00e3o pelo t\u00edtulo.\"\"\"\n\ndef test_classificar_carta():\n    \"\"\"Deve identificar carta pelo t\u00edtulo.\"\"\"\n\ndef test_classificar_relatorio():\n    \"\"\"Deve identificar relat\u00f3rio NKVD.\"\"\"\n\ndef test_classificar_depoimento_singular():\n    \"\"\"Deve identificar depoimento no singular.\"\"\"\n\ndef test_classificar_depoimento_plural():\n    \"\"\"Deve identificar depoimento no plural.\"\"\"\n\ndef test_titulo_desconhecido():\n    \"\"\"T\u00edtulo sem padr\u00e3o conhecido deve retornar DESCONHECIDO.\"\"\"\n\ndef test_listar_todos():\n    \"\"\"Deve listar todos os tipos exceto desconhecido.\"\"\"\n</code></pre>"},{"location":"fases/FASE1_DOMAIN/#resultados","title":"Resultados","text":"<pre><code>poetry run pytest src/tests/test_documento.py src/tests/test_tipo_documento.py -v\n\n# Sa\u00edda esperada:\n# test_documento.py::TestDocumento::test_criar_documento_valido PASSED\n# test_documento.py::TestDocumento::test_centro_invalido PASSED\n# test_documento.py::TestDocumento::test_titulo_vazio PASSED\n# test_documento.py::TestDocumento::test_extrair_pessoas_do_titulo PASSED\n# test_documento.py::TestDocumento::test_to_dict_com_data PASSED\n# test_tipo_documento.py::TestTipoDocumento::test_classificar_interrogatorio PASSED\n# test_tipo_documento.py::TestTipoDocumento::test_classificar_acareacao PASSED\n# test_tipo_documento.py::TestTipoDocumento::test_classificar_carta PASSED\n# test_tipo_documento.py::TestTipoDocumento::test_classificar_relatorio PASSED\n# test_tipo_documento.py::TestTipoDocumento::test_classificar_depoimento_singular PASSED\n# test_tipo_documento.py::TestTipoDocumento::test_classificar_depoimento_plural PASSED\n# test_tipo_documento.py::TestTipoDocumento::test_titulo_desconhecido PASSED\n# test_tipo_documento.py::TestTipoDocumento::test_listar_todos PASSED\n\n# =========================== 13 passed in 0.10s ===========================\n</code></pre> <p>Total: 13 testes | Todos PASSANDO \u2705</p>"},{"location":"fases/FASE1_DOMAIN/#metricas-da-fase","title":"\ud83d\udcca M\u00e9tricas da Fase","text":"M\u00e9trica Valor Arquivos criados 7 Linhas de c\u00f3digo ~450 Testes unit\u00e1rios 13 Cobertura estimada &gt;90% Depend\u00eancias externas 0"},{"location":"fases/FASE1_DOMAIN/#configuracoes-realizadas","title":"\ud83d\udd27 Configura\u00e7\u00f5es Realizadas","text":""},{"location":"fases/FASE1_DOMAIN/#pyprojecttoml-adicoes","title":"<code>pyproject.toml</code> (adi\u00e7\u00f5es)","text":"<pre><code>[tool.poetry]\npackages = [{include = \"src\"}]\n\n[tool.pytest.ini_options]\npythonpath = [\"src\"]\n</code></pre>"},{"location":"fases/FASE1_DOMAIN/#principios-aplicados","title":"\ud83d\udcda Princ\u00edpios Aplicados","text":"Princ\u00edpio Aplica\u00e7\u00e3o Clean Architecture Domain isolado, sem depend\u00eancias Value Objects TipoDocumento e NomeRusso imut\u00e1veis Interfaces/Ports RepositorioDocumento como abstra\u00e7\u00e3o Testes Unit\u00e1rios 13 testes validando regras DRY L\u00f3gica de nomes centralizada Imutabilidade Value Objects n\u00e3o podem ser alterados"},{"location":"fases/FASE1_DOMAIN/#integracao-com-fases-futuras","title":"\ud83d\ude80 Integra\u00e7\u00e3o com Fases Futuras","text":"Fase Como ser\u00e1 usado FASE 2 Casos de uso usar\u00e3o as entidades e interfaces FASE 3 Reposit\u00f3rios concretos implementar\u00e3o as interfaces FASE 4 Presenters usar\u00e3o os value objects para formata\u00e7\u00e3o"},{"location":"fases/FASE1_DOMAIN/#licoes-aprendidas","title":"\ud83d\udd0d Li\u00e7\u00f5es Aprendidas","text":"<ol> <li>Isolamento \u00e9 fundamental: A camada de dom\u00ednio n\u00e3o deve saber da exist\u00eancia de banco de dados, APIs ou interfaces</li> <li>Value Objects trazem seguran\u00e7a: Objetos imut\u00e1veis previnem bugs e tornam o c\u00f3digo mais previs\u00edvel</li> <li>Testes no dom\u00ednio s\u00e3o simples: Por n\u00e3o ter depend\u00eancias, testar \u00e9 f\u00e1cil e r\u00e1pido</li> <li>Interfaces definem contratos claros: Facilitam a troca de implementa\u00e7\u00f5es sem impactar o n\u00facleo</li> </ol>"},{"location":"fases/FASE1_DOMAIN/#evolucao-do-codigo","title":"\ud83d\udcc8 Evolu\u00e7\u00e3o do C\u00f3digo","text":""},{"location":"fases/FASE1_DOMAIN/#antes-codigo-legado","title":"Antes (c\u00f3digo legado)","text":"<pre><code># C\u00f3digo espalhado, sem separa\u00e7\u00e3o de responsabilidades\ndef classificar_documento(titulo):\n    if '\u041f\u0440\u043e\u0442\u043e\u043a\u043e\u043b \u0434\u043e\u043f\u0440\u043e\u0441\u0430' in titulo:\n        return 'interrogatorio'\n    # ...\n</code></pre>"},{"location":"fases/FASE1_DOMAIN/#depois-clean-architecture","title":"Depois (Clean Architecture)","text":"<pre><code># Value Object tipado e test\u00e1vel\ntipo = TipoDocumento.from_titulo(titulo)\ndocumento.tipo = tipo.value\ndocumento.tipo_descricao = tipo.descricao_pt\n</code></pre>"},{"location":"fases/FASE1_DOMAIN/#conclusao-da-fase","title":"\ud83c\udfc1 Conclus\u00e3o da Fase","text":"<p>A FASE 1 estabeleceu as bases s\u00f3lidas do sistema, com:</p> <p>\u2705 Entidades bem definidas \u2705 Value Objects imut\u00e1veis \u2705 Interfaces claras \u2705 13 testes unit\u00e1rios \u2705 Zero depend\u00eancias externas \u2705 C\u00f3digo pronto para as pr\u00f3ximas fases</p>"},{"location":"fases/FASE1_DOMAIN/#autor","title":"\ud83d\udc64 Autor","text":"<p>Thiago Ribeiro - Projeto de TCC</p> <sub>FASE 1 conclu\u00edda em 15 de Fevereiro de 2024</sub> <sub>\u2705 Pronto para a FASE 2 - Application Layer</sub> <p>```</p>"},{"location":"fases/FASE2_APPLICATION/","title":"FASE 2 - Application Layer (Camada de Aplica\u00e7\u00e3o)","text":"**Orquestra\u00e7\u00e3o dos casos de uso do sistema, conectando o dom\u00ednio \u00e0s interfaces**"},{"location":"fases/FASE2_APPLICATION/#informacoes-da-fase","title":"\ud83d\udcc5 Informa\u00e7\u00f5es da Fase","text":"Item Descri\u00e7\u00e3o Status \u2705 Conclu\u00edda Data de Conclus\u00e3o 15 de Fevereiro de 2024 Artefatos Casos de uso, DTOs Testes 4 testes unit\u00e1rios Depend\u00eancias FASE 1 (Domain)"},{"location":"fases/FASE2_APPLICATION/#objetivo","title":"\ud83c\udfaf Objetivo","text":"<p>Implementar a camada de aplica\u00e7\u00e3o que:</p> <ul> <li>Orquestra os casos de uso do sistema</li> <li>Depende apenas das interfaces do dom\u00ednio</li> <li>Define objetos de transfer\u00eancia de dados (DTOs)</li> <li>Implementa a l\u00f3gica de aplica\u00e7\u00e3o (n\u00e3o confundir com regras de neg\u00f3cio)</li> <li>Prepara os dados para as interfaces (CLI, Web)</li> </ul>"},{"location":"fases/FASE2_APPLICATION/#estrutura-criada","title":"\ud83d\udcc1 Estrutura Criada","text":"<pre><code>src/\n\u251c\u2500\u2500 application/\n\u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u251c\u2500\u2500 dtos/\n\u2502   \u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u2502   \u251c\u2500\u2500 documento_dto.py\n\u2502   \u2502   \u2514\u2500\u2500 estatisticas_dto.py\n\u2502   \u2514\u2500\u2500 use_cases/\n\u2502       \u251c\u2500\u2500 __init__.py\n\u2502       \u251c\u2500\u2500 classificar_documento.py\n\u2502       \u251c\u2500\u2500 listar_documentos.py\n\u2502       \u251c\u2500\u2500 obter_documento.py\n\u2502       \u2514\u2500\u2500 estatisticas.py\n\u2514\u2500\u2500 tests/\n    \u2514\u2500\u2500 test_use_cases.py\n</code></pre>"},{"location":"fases/FASE2_APPLICATION/#data-transfer-objects-dtos","title":"\ud83e\udde9 Data Transfer Objects (DTOs)","text":""},{"location":"fases/FASE2_APPLICATION/#documentodto-documento_dtopy","title":"DocumentoDTO (<code>documento_dto.py</code>)","text":"<p>Responsabilidade: Transferir dados do documento para a interface, sem expor a entidade completa.</p> <pre><code>@dataclass\nclass DocumentoDTO:\n    \"\"\"DTO completo para exibi\u00e7\u00e3o de um documento.\"\"\"\n\n    id: Optional[int]\n    centro: str\n    titulo: str\n    data_original: Optional[str]\n    url: str\n    texto: str\n    data_coleta: str\n\n    # Metadados enriquecidos\n    tipo: Optional[str]\n    tipo_descricao: Optional[str]\n    tipo_icone: Optional[str]\n    pessoa_principal: Optional[str]\n    pessoa_principal_en: Optional[str]\n    remetente: Optional[str]\n    destinatario: Optional[str]\n    envolvidos: List[str]\n    tem_anexos: bool\n\n    # M\u00e9tricas\n    tamanho_caracteres: int\n    tamanho_palavras: int\n\n    # Tradu\u00e7\u00f5es\n    traducoes: List[Dict]\n</code></pre> <p>M\u00e9todo de f\u00e1brica: <pre><code>@classmethod\ndef from_domain(cls, documento, tradutor_nomes=None, traducoes=None):\n    \"\"\"Converte entidade Documento para DTO.\"\"\"\n    # L\u00f3gica de convers\u00e3o...\n</code></pre></p>"},{"location":"fases/FASE2_APPLICATION/#documentolistadto-documento_dtopy","title":"DocumentoListaDTO (<code>documento_dto.py</code>)","text":"<pre><code>@dataclass\nclass DocumentoListaDTO:\n    \"\"\"DTO resumido para listagens (mais leve).\"\"\"\n\n    id: int\n    centro: str\n    titulo: str\n    data_original: Optional[str]\n    tipo: Optional[str]\n    tipo_icone: str\n    tipo_descricao: Optional[str]\n    pessoa_principal: Optional[str]\n    pessoa_principal_en: Optional[str]\n    tem_traducao: bool\n    tamanho: int\n</code></pre>"},{"location":"fases/FASE2_APPLICATION/#estatisticasdto-estatisticas_dtopy","title":"EstatisticasDTO (<code>estatisticas_dto.py</code>)","text":"<pre><code>@dataclass\nclass EstatisticasDTO:\n    \"\"\"DTO para estat\u00edsticas do acervo.\"\"\"\n\n    # Vis\u00e3o geral\n    total_documentos: int\n    total_traducoes: int\n\n    # Distribui\u00e7\u00f5es\n    documentos_por_centro: Dict[str, int]\n    documentos_por_tipo: Dict[str, int]\n    traducoes_por_idioma: Dict[str, int]\n\n    # Pessoas\n    pessoas_frequentes: List[Tuple[str, int, str]]\n\n    # M\u00e9tricas especiais\n    cartas: int\n    declaracoes: int\n    relatorios: int\n    acareacoes: int\n    acusacoes: int\n    laudos: int\n    documentos_com_anexos: int\n\n    # Custos\n    custo_total_traducoes: float\n\n    @property\n    def percentual_traduzido(self) -&gt; float:\n        \"\"\"Percentual de documentos com tradu\u00e7\u00e3o.\"\"\"\n\n    @property\n    def resumo(self) -&gt; str:\n        \"\"\"Resumo para exibi\u00e7\u00e3o r\u00e1pida.\"\"\"\n</code></pre> <p>Benef\u00edcios dos DTOs: - \ud83d\udd12 Encapsulamento: A interface n\u00e3o precisa conhecer a estrutura completa da entidade - \ud83c\udfaf Performance: Dados resumidos para listagens - \ud83d\udd04 Evolu\u00e7\u00e3o: Mudan\u00e7as no dom\u00ednio n\u00e3o afetam a interface - \ud83e\uddea Testabilidade: F\u00e1cil de mockar</p>"},{"location":"fases/FASE2_APPLICATION/#casos-de-uso","title":"\ud83c\udfae Casos de Uso","text":""},{"location":"fases/FASE2_APPLICATION/#1-classificardocumento-classificar_documentopy","title":"1. ClassificarDocumento (<code>classificar_documento.py</code>)","text":"<p>Responsabilidade: Classificar documentos baseado no t\u00edtulo.</p> <pre><code>class ClassificarDocumento:\n    \"\"\"\n    Caso de uso para classificar um documento.\n    \"\"\"\n\n    def __init__(self, repo: RepositorioDocumento):\n        self.repo = repo\n\n    def executar(self, documento_id: int) -&gt; Optional[Documento]:\n        \"\"\"Classifica um documento espec\u00edfico.\"\"\"\n\n    def executar_em_lote(self, limite: int = None) -&gt; int:\n        \"\"\"Classifica m\u00faltiplos documentos n\u00e3o classificados.\"\"\"\n</code></pre> <p>Regras aplicadas: - Detec\u00e7\u00e3o de tipo baseada em padr\u00f5es no t\u00edtulo - Extra\u00e7\u00e3o de nomes russos - Detec\u00e7\u00e3o de anexos - Identifica\u00e7\u00e3o de remetente/destinat\u00e1rio em cartas</p> <p>Fluxo: <pre><code>1. Buscar documento por ID\n2. Aplicar regras de classifica\u00e7\u00e3o\n3. Atualizar metadados\n4. Salvar no reposit\u00f3rio\n</code></pre></p>"},{"location":"fases/FASE2_APPLICATION/#2-listardocumentos-listar_documentospy","title":"2. ListarDocumentos (<code>listar_documentos.py</code>)","text":"<p>Responsabilidade: Listar documentos com pagina\u00e7\u00e3o e filtros.</p> <pre><code>class ListarDocumentos:\n    \"\"\"\n    Caso de uso para listar documentos.\n    \"\"\"\n\n    def __init__(self, repo: RepositorioDocumento):\n        self.repo = repo\n\n    def executar(self,\n                 pagina: int = 1,\n                 limite: int = 20,\n                 centro: Optional[str] = None,\n                 tipo: Optional[str] = None) -&gt; Dict:\n        \"\"\"\n        Executa a listagem com filtros e pagina\u00e7\u00e3o.\n\n        Returns:\n            {\n                'items': List[DocumentoListaDTO],\n                'total': int,\n                'pagina': int,\n                'total_paginas': int,\n                'filtros': dict\n            }\n        \"\"\"\n</code></pre> <p>Par\u00e2metros: - <code>pagina</code>: N\u00famero da p\u00e1gina (come\u00e7a em 1) - <code>limite</code>: Itens por p\u00e1gina - <code>centro</code>: Filtrar por centro ('lencenter'/'moscenter') - <code>tipo</code>: Filtrar por tipo de documento</p> <p>C\u00e1lculos: - <code>offset = (pagina - 1) * limite</code> - <code>total_paginas = (total + limite - 1) // limite</code></p>"},{"location":"fases/FASE2_APPLICATION/#3-obterdocumento-obter_documentopy","title":"3. ObterDocumento (<code>obter_documento.py</code>)","text":"<p>Responsabilidade: Buscar documento completo por ID.</p> <pre><code>class ObterDocumento:\n    \"\"\"\n    Caso de uso para obter um documento completo.\n    \"\"\"\n\n    def __init__(self,\n                 repo_doc: RepositorioDocumento,\n                 repo_trad: Optional[RepositorioTraducao] = None):\n        self.repo_doc = repo_doc\n        self.repo_trad = repo_trad\n\n    def executar(self, documento_id: int) -&gt; Optional[DocumentoDTO]:\n        \"\"\"\n        Busca documento por ID e converte para DTO.\n        Inclui tradu\u00e7\u00f5es se dispon\u00edveis.\n        \"\"\"\n</code></pre> <p>Diferenciais: - Retorna DTO j\u00e1 com tradu\u00e7\u00e3o de nomes - Inclui lista de tradu\u00e7\u00f5es dispon\u00edveis - Retorna None se documento n\u00e3o existir</p>"},{"location":"fases/FASE2_APPLICATION/#4-obterestatisticas-estatisticaspy","title":"4. ObterEstatisticas (<code>estatisticas.py</code>)","text":"<p>Responsabilidade: Calcular estat\u00edsticas completas do acervo.</p> <pre><code>class ObterEstatisticas:\n    \"\"\"\n    Caso de uso para gerar estat\u00edsticas completas.\n    \"\"\"\n\n    def __init__(self, repo: RepositorioDocumento):\n        self.repo = repo\n\n    def executar(self) -&gt; EstatisticasDTO:\n        \"\"\"\n        Calcula estat\u00edsticas baseadas em todos os documentos.\n        \"\"\"\n</code></pre> <p>M\u00e9tricas calculadas:</p> Categoria M\u00e9tricas Vis\u00e3o Geral Total de documentos, total de tradu\u00e7\u00f5es Por Centro Leningrad, Moscow Por Tipo Interrogat\u00f3rios, cartas, acarea\u00e7\u00f5es... Pessoas Top 20 pessoas mais frequentes Documentos Especiais Cartas, declara\u00e7\u00f5es, relat\u00f3rios Custos Custo total de tradu\u00e7\u00f5es"},{"location":"fases/FASE2_APPLICATION/#testes","title":"\ud83e\uddea Testes","text":""},{"location":"fases/FASE2_APPLICATION/#testes-dos-casos-de-uso-test_use_casespy","title":"Testes dos Casos de Uso (<code>test_use_cases.py</code>)","text":"<pre><code>class TestClassificarDocumento:\n    \"\"\"Testes para o caso de uso ClassificarDocumento.\"\"\"\n\n    def test_classificar_interrogatorio(self):\n        \"\"\"Deve classificar interrogat\u00f3rio corretamente.\"\"\"\n        # Mock do reposit\u00f3rio\n        mock_repo = Mock()\n\n        # Documento de teste\n        doc = Documento(\n            id=1,\n            centro='lencenter',\n            titulo='\u041f\u0440\u043e\u0442\u043e\u043a\u043e\u043b \u0434\u043e\u043f\u0440\u043e\u0441\u0430 \u041b.\u0412. \u041d\u0438\u043a\u043e\u043b\u0430\u0435\u0432\u0430',\n            url='http://teste.com',\n            texto='...',\n            data_coleta=datetime.now()\n        )\n\n        mock_repo.buscar_por_id.return_value = doc\n\n        # Executar caso de uso\n        caso_uso = ClassificarDocumento(mock_repo)\n        resultado = caso_uso.executar(1)\n\n        # Verifica\u00e7\u00f5es\n        assert resultado.tipo == 'interrogatorio'\n        assert resultado.tipo_descricao == 'Protocolo de Interrogat\u00f3rio'\n        assert resultado.pessoa_principal == '\u041b.\u0412. \u041d\u0438\u043a\u043e\u043b\u0430\u0435\u0432\u0430'\n        mock_repo.salvar.assert_called_once()\n\n    def test_documento_nao_encontrado(self):\n        \"\"\"Deve retornar None para documento inexistente.\"\"\"\n        mock_repo = Mock()\n        mock_repo.buscar_por_id.return_value = None\n\n        caso_uso = ClassificarDocumento(mock_repo)\n        resultado = caso_uso.executar(999)\n\n        assert resultado is None\n\n\nclass TestListarDocumentos:\n    \"\"\"Testes para o caso de uso ListarDocumentos.\"\"\"\n\n    def test_listar_com_paginacao(self):\n        \"\"\"Deve listar com pagina\u00e7\u00e3o correta.\"\"\"\n        mock_repo = Mock()\n\n        # Mock de 5 documentos\n        docs = [Documento(id=i, ...) for i in range(1, 6)]\n        mock_repo.listar.return_value = docs\n        mock_repo.contar.return_value = 50\n\n        caso_uso = ListarDocumentos(mock_repo)\n        resultado = caso_uso.executar(pagina=2, limite=5)\n\n        assert len(resultado['items']) == 5\n        assert resultado['total'] == 50\n        assert resultado['pagina'] == 2\n        assert resultado['total_paginas'] == 10\n\n\nclass TestObterDocumento:\n    \"\"\"Testes para o caso de uso ObterDocumento.\"\"\"\n\n    def test_obter_documento_completo(self):\n        \"\"\"Deve retornar documento completo com DTO.\"\"\"\n        mock_repo = Mock()\n\n        doc = Documento(id=1, ...)\n        mock_repo.buscar_por_id.return_value = doc\n\n        caso_uso = ObterDocumento(mock_repo)\n        dto = caso_uso.executar(1)\n\n        assert dto.id == 1\n        assert dto.titulo == doc.titulo\n        assert dto.tamanho_caracteres == len(doc.texto)\n</code></pre>"},{"location":"fases/FASE2_APPLICATION/#resultados","title":"Resultados","text":"<pre><code>poetry run pytest src/tests/test_use_cases.py -v\n\n# Sa\u00edda esperada:\n# src/tests/test_use_cases.py::TestClassificarDocumento::test_classificar_interrogatorio PASSED\n# src/tests/test_use_cases.py::TestClassificarDocumento::test_documento_nao_encontrado PASSED\n# src/tests/test_use_cases.py::TestListarDocumentos::test_listar_com_paginacao PASSED\n# src/tests/test_use_cases.py::TestObterDocumento::test_obter_documento_completo PASSED\n\n# =========================== 4 passed in 0.27s ===========================\n</code></pre> <p>Total: 4 testes | Todos PASSANDO \u2705</p>"},{"location":"fases/FASE2_APPLICATION/#fluxo-de-dados","title":"\ud83d\udd04 Fluxo de Dados","text":"<pre><code>[Interface (CLI/Web)] \u2192 [Caso de Uso] \u2192 [Reposit\u00f3rio (interface)]\n         \u2191                      \u2193                    \u2193\n         \u2514\u2500\u2500\u2500\u2500\u2500\u2500 [DTO] \u2190\u2500\u2500 [Entidade] \u2190\u2500\u2500\u2500 [Implementa\u00e7\u00e3o]\n</code></pre> <p>Exemplo pr\u00e1tico (ListarDocumentos):</p> <pre><code>1. Interface chama caso_uso.executar(pagina=1)\n2. Caso de uso calcula offset = 0\n3. Caso de uso chama repo.listar(offset=0, limite=20)\n4. Reposit\u00f3rio retorna lista de entidades\n5. Caso de uso converte entidades para DTOs\n6. Interface recebe DTOs e exibe\n</code></pre>"},{"location":"fases/FASE2_APPLICATION/#metricas-da-fase","title":"\ud83d\udcca M\u00e9tricas da Fase","text":"M\u00e9trica Valor Casos de uso 4 DTOs 3 Testes 4 Cobertura estimada &gt;85% Depend\u00eancias FASE 1 apenas"},{"location":"fases/FASE2_APPLICATION/#principios-aplicados","title":"\ud83d\udcda Princ\u00edpios Aplicados","text":"Princ\u00edpio Aplica\u00e7\u00e3o Inje\u00e7\u00e3o de Depend\u00eancia Casos de uso recebem reposit\u00f3rios via construtor Interface Segregation DTOs exp\u00f5em apenas dados necess\u00e1rios Single Responsibility Cada caso de uso tem uma \u00fanica responsabilidade Testabilidade Uso de mocks para testar isoladamente Imutabilidade DTOs s\u00e3o dataclasses imut\u00e1veis"},{"location":"fases/FASE2_APPLICATION/#integracao-com-fases-anteriores-e-futuras","title":"\ud83d\udd17 Integra\u00e7\u00e3o com Fases Anteriores e Futuras","text":"Fase Relacionamento FASE 1 (Domain) Usa entidades, value objects e interfaces FASE 3 (Infrastructure) Reposit\u00f3rios concretos implementam as interfaces FASE 4 (CLI) Usa os casos de uso e DTOs FASE 9 (Web) Mesmos casos de uso, diferentes presenters"},{"location":"fases/FASE2_APPLICATION/#evolucao-do-codigo","title":"\ud83d\ude80 Evolu\u00e7\u00e3o do C\u00f3digo","text":""},{"location":"fases/FASE2_APPLICATION/#antes-codigo-legado","title":"Antes (c\u00f3digo legado)","text":"<pre><code># L\u00f3gica de listagem misturada com SQL\ndef listar_documentos(pagina):\n    offset = (pagina - 1) * 20\n    cursor.execute(\"SELECT * FROM documentos LIMIT 20 OFFSET ?\", (offset,))\n    return cursor.fetchall()\n</code></pre>"},{"location":"fases/FASE2_APPLICATION/#depois-clean-architecture","title":"Depois (Clean Architecture)","text":"<pre><code># Caso de uso puro, sem saber de banco\ndef executar(self, pagina):\n    offset = (pagina - 1) * self.limite\n    documentos = self.repo.listar(offset, self.limite)\n    return [DocumentoListaDTO.from_domain(d) for d in documentos]\n</code></pre>"},{"location":"fases/FASE2_APPLICATION/#metricas-do-projeto-apos-fase-2","title":"\ud83d\udcc8 M\u00e9tricas do Projeto (Ap\u00f3s FASE 2)","text":"<pre><code>\ud83d\udcca DOMAIN LAYER: 3 m\u00f3dulos | 13 testes\n\ud83d\udcca APPLICATION LAYER: 4 casos de uso | 4 testes\n\ud83d\udcca TOTAL: 17 testes passando\n</code></pre>"},{"location":"fases/FASE2_APPLICATION/#licoes-aprendidas","title":"\ud83d\udd0d Li\u00e7\u00f5es Aprendidas","text":"<ol> <li>Casos de uso n\u00e3o devem conter regras de neg\u00f3cio: Isso pertence ao dom\u00ednio</li> <li>DTOs s\u00e3o essenciais: Separar o que vai para a interface do que fica no dom\u00ednio</li> <li>Inje\u00e7\u00e3o de depend\u00eancia simplifica testes: Mocks substituem reposit\u00f3rios reais</li> <li>Orquestra\u00e7\u00e3o vs Implementa\u00e7\u00e3o: Casos de uso orquestram, n\u00e3o implementam detalhes</li> </ol>"},{"location":"fases/FASE2_APPLICATION/#conclusao-da-fase","title":"\ud83c\udfc1 Conclus\u00e3o da Fase","text":"<p>A FASE 2 estabeleceu a camada de aplica\u00e7\u00e3o com:</p> <p>\u2705 4 casos de uso funcionais \u2705 3 DTOs bem definidos \u2705 4 testes unit\u00e1rios \u2705 Depend\u00eancia exclusiva da FASE 1 \u2705 C\u00f3digo pronto para implementa\u00e7\u00f5es concretas</p>"},{"location":"fases/FASE2_APPLICATION/#autor","title":"\ud83d\udc64 Autor","text":"<p>Thiago Ribeiro - Projeto de TCC</p> <sub>FASE 2 conclu\u00edda em 15 de Fevereiro de 2024</sub> <sub>\u2705 Pronto para a FASE 3 - Infrastructure Layer</sub> <p>```</p>"},{"location":"fases/FASE3_INFRASTRUCTURE/","title":"FASE 3 - Infrastructure Layer (Camada de Infraestrutura)","text":"**Implementa\u00e7\u00f5es concretas dos contratos definidos no dom\u00ednio**"},{"location":"fases/FASE3_INFRASTRUCTURE/#informacoes-da-fase","title":"\ud83d\udcc5 Informa\u00e7\u00f5es da Fase","text":"Item Descri\u00e7\u00e3o Status \u2705 Conclu\u00edda Data de Conclus\u00e3o 15 de Fevereiro de 2024 Artefatos Reposit\u00f3rios SQLite, Modelos, Migra\u00e7\u00f5es Testes 13 testes de integra\u00e7\u00e3o Depend\u00eancias FASE 1 (Domain), FASE 2 (Application)"},{"location":"fases/FASE3_INFRASTRUCTURE/#objetivo","title":"\ud83c\udfaf Objetivo","text":"<p>Implementar a camada de infraestrutura que:</p> <ul> <li>Conecta o sistema ao mundo externo (banco de dados, APIs, servi\u00e7os)</li> <li>Implementa as interfaces definidas no dom\u00ednio</li> <li>Gerencia persist\u00eancia e recupera\u00e7\u00e3o de dados</li> <li>Fornece servi\u00e7os concretos (tradu\u00e7\u00e3o, an\u00e1lise, etc)</li> <li>Isola detalhes t\u00e9cnicos das camadas superiores</li> </ul>"},{"location":"fases/FASE3_INFRASTRUCTURE/#estrutura-criada","title":"\ud83d\udcc1 Estrutura Criada","text":"<pre><code>src/\n\u251c\u2500\u2500 infrastructure/\n\u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u251c\u2500\u2500 config/\n\u2502   \u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u2502   \u2514\u2500\u2500 settings.py\n\u2502   \u251c\u2500\u2500 persistence/\n\u2502   \u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u2502   \u251c\u2500\u2500 models.py\n\u2502   \u2502   \u251c\u2500\u2500 migrations.py\n\u2502   \u2502   \u251c\u2500\u2500 sqlite_repository.py\n\u2502   \u2502   \u2514\u2500\u2500 sqlite_traducao_repository.py\n\u2502   \u2514\u2500\u2500 translation/\n\u2502       \u2514\u2500\u2500 google_translator.py\n\u2514\u2500\u2500 tests/\n    \u2514\u2500\u2500 test_infrastructure/\n        \u251c\u2500\u2500 __init__.py\n        \u251c\u2500\u2500 test_migrations.py\n        \u2514\u2500\u2500 test_sqlite_repository.py\n</code></pre>"},{"location":"fases/FASE3_INFRASTRUCTURE/#componentes-implementados","title":"\ud83e\udde9 Componentes Implementados","text":""},{"location":"fases/FASE3_INFRASTRUCTURE/#1-configuracoes-configsettingspy","title":"1. Configura\u00e7\u00f5es (<code>config/settings.py</code>)","text":"<p>Responsabilidade: Centralizar todas as configura\u00e7\u00f5es da aplica\u00e7\u00e3o.</p> <pre><code>@dataclass\nclass Settings:\n    \"\"\"Configura\u00e7\u00f5es centralizadas da aplica\u00e7\u00e3o.\"\"\"\n\n    # Diret\u00f3rios\n    BASE_DIR: Path\n    DB_PATH: Path\n    EXPORT_DIR: Path\n    REPORTS_DIR: Path\n    ANALYSIS_DIR: Path\n\n    # URLs\n    LENCENTER_URL: str\n    MOSCENTER_URL: str\n\n    # API Keys\n    GOOGLE_TRANSLATE_API_KEY: Optional[str]\n\n    # Configura\u00e7\u00f5es de scraping\n    REQUEST_TIMEOUT: int = 30\n    REQUEST_DELAY: int = 1\n\n    # Configura\u00e7\u00f5es de UI\n    ITENS_POR_PAGINA: int = 15\n    MAX_TEXTO_PREVIEW: int = 2000\n\n    @property\n    def modo_desenvolvimento(self) -&gt; bool:\n        \"\"\"Verifica se est\u00e1 em modo desenvolvimento.\"\"\"\n\n    @property\n    def db_url(self) -&gt; str:\n        \"\"\"URL do banco para SQLAlchemy (futuro).\"\"\"\n</code></pre> <p>Carregamento de vari\u00e1veis de ambiente: <pre><code># .env\nGOOGLE_TRANSLATE_API_KEY=AIzaSy...\nENV=development\nDEBUG=true\n</code></pre></p> <p>Benef\u00edcios: - \ud83d\udd12 Seguran\u00e7a: Chaves de API fora do c\u00f3digo - \ud83d\udd27 Flexibilidade: Configura\u00e7\u00f5es por ambiente - \ud83d\udccd Centraliza\u00e7\u00e3o: Tudo em um lugar</p>"},{"location":"fases/FASE3_INFRASTRUCTURE/#2-modelos-persistencemodelspy","title":"2. Modelos (<code>persistence/models.py</code>)","text":"<p>Responsabilidade: Mapeamento objeto-relacional para SQLite.</p>"},{"location":"fases/FASE3_INFRASTRUCTURE/#documentomodel","title":"DocumentoModel","text":"<pre><code>@dataclass\nclass DocumentoModel:\n    \"\"\"Modelo de documento para o banco SQLite.\"\"\"\n\n    id: Optional[int]\n    centro: str\n    titulo: str\n    data_original: Optional[str]\n    url: str\n    texto: str\n    data_coleta: str\n\n    # Colunas adicionadas nas migra\u00e7\u00f5es\n    tipo_documento: Optional[str] = None\n    tipo_descricao: Optional[str] = None\n    pessoa_principal: Optional[str] = None\n    remetente: Optional[str] = None\n    destinatario: Optional[str] = None\n    envolvidos: Optional[str] = None\n    tem_anexos: int = 0\n</code></pre> <p>M\u00e9todos de convers\u00e3o: <pre><code>def para_entidade(self) -&gt; Documento:\n    \"\"\"Converte modelo para entidade do dom\u00ednio.\"\"\"\n\n@classmethod\ndef de_entidade(cls, documento: Documento) -&gt; 'DocumentoModel':\n    \"\"\"Converte entidade para modelo.\"\"\"\n</code></pre></p>"},{"location":"fases/FASE3_INFRASTRUCTURE/#traducaomodel","title":"TraducaoModel","text":"<pre><code>@dataclass\nclass TraducaoModel:\n    \"\"\"Modelo para tabela de tradu\u00e7\u00f5es.\"\"\"\n\n    id: Optional[int]\n    documento_id: int\n    idioma: str\n    texto_traduzido: str\n    modelo: Optional[str]\n    custo: float\n    data_traducao: str\n</code></pre> <p>Schema SQL: <pre><code>CREATE TABLE IF NOT EXISTS documentos (\n    id INTEGER PRIMARY KEY AUTOINCREMENT,\n    centro TEXT NOT NULL,\n    titulo TEXT NOT NULL,\n    data_original TEXT,\n    url TEXT UNIQUE NOT NULL,\n    texto TEXT NOT NULL,\n    data_coleta TEXT NOT NULL\n);\n\nCREATE TABLE IF NOT EXISTS traducoes (\n    id INTEGER PRIMARY KEY AUTOINCREMENT,\n    documento_id INTEGER NOT NULL,\n    idioma TEXT NOT NULL,\n    texto_traduzido TEXT NOT NULL,\n    modelo TEXT,\n    custo REAL,\n    data_traducao TEXT NOT NULL,\n    FOREIGN KEY (documento_id) REFERENCES documentos (id) ON DELETE CASCADE\n);\n</code></pre></p>"},{"location":"fases/FASE3_INFRASTRUCTURE/#3-migracoes-persistencemigrationspy","title":"3. Migra\u00e7\u00f5es (<code>persistence/migrations.py</code>)","text":"<p>Responsabilidade: Gerenciar a evolu\u00e7\u00e3o do schema do banco.</p> <pre><code>def criar_tabelas():\n    \"\"\"Cria todas as tabelas se n\u00e3o existirem.\"\"\"\n\ndef migrar_banco_existente():\n    \"\"\"\n    Adiciona colunas de metadados ao banco existente.\n    Usado ap\u00f3s a FASE 1 para enriquecer dados antigos.\n    \"\"\"\n\ndef verificar_integridade() -&gt; List[str]:\n    \"\"\"\n    Verifica integridade do banco.\n    Retorna lista de problemas encontrados.\n    \"\"\"\n\ndef estatisticas_banco() -&gt; dict:\n    \"\"\"Retorna estat\u00edsticas do banco de dados.\"\"\"\n</code></pre> <p>Exemplo de migra\u00e7\u00e3o: <pre><code>def adicionar_colunas_metadados(cursor):\n    colunas = [\n        (\"tipo_documento\", \"TEXT\"),\n        (\"tipo_descricao\", \"TEXT\"),\n        (\"pessoa_principal\", \"TEXT\"),\n        (\"remetente\", \"TEXT\"),\n        (\"destinatario\", \"TEXT\"),\n        (\"envolvidos\", \"TEXT\"),\n        (\"tem_anexos\", \"INTEGER DEFAULT 0\"),\n    ]\n\n    for coluna, tipo in colunas:\n        try:\n            cursor.execute(f\"ALTER TABLE documentos ADD COLUMN {coluna} {tipo}\")\n        except sqlite3.OperationalError:\n            pass  # Coluna j\u00e1 existe\n</code></pre></p> <p>Estat\u00edsticas do banco: <pre><code>def estatisticas_banco():\n    return {\n        'total_docs': 519,\n        'total_traducoes': 16,\n        'docs_por_centro': {'lencenter': 152, 'moscenter': 367},\n        'docs_classificados': 519,\n    }\n</code></pre></p>"},{"location":"fases/FASE3_INFRASTRUCTURE/#4-repositorio-sqlite-persistencesqlite_repositorypy","title":"4. Reposit\u00f3rio SQLite (<code>persistence/sqlite_repository.py</code>)","text":"<p>Responsabilidade: Implementa\u00e7\u00e3o concreta do <code>RepositorioDocumento</code>.</p> <pre><code>class SQLiteDocumentoRepository(RepositorioDocumento):\n    \"\"\"\n    Reposit\u00f3rio SQLite para documentos.\n    Implementa a interface definida no dom\u00ednio.\n    \"\"\"\n\n    def __init__(self, db_path: Optional[str] = None):\n        self.db_path = db_path or str(settings.DB_PATH)\n\n    @contextmanager\n    def _conexao(self):\n        \"\"\"Gerenciador de contexto para conex\u00f5es SQLite.\"\"\"\n        conn = sqlite3.connect(self.db_path)\n        conn.row_factory = sqlite3.Row\n        try:\n            yield conn\n            conn.commit()\n        except Exception:\n            conn.rollback()\n            raise\n        finally:\n            conn.close()\n\n    def salvar(self, documento: Documento) -&gt; int:\n        \"\"\"Insere ou atualiza um documento.\"\"\"\n        with self._conexao() as conn:\n            cursor = conn.cursor()\n            modelo = DocumentoModel.de_entidade(documento)\n\n            if documento.id:\n                # Update\n                cursor.execute(\"\"\"\n                    UPDATE documentos SET\n                        centro = ?, titulo = ?, data_original = ?, url = ?,\n                        texto = ?, data_coleta = ?, tipo_documento = ?,\n                        tipo_descricao = ?, pessoa_principal = ?, remetente = ?,\n                        destinatario = ?, envolvidos = ?, tem_anexos = ?\n                    WHERE id = ?\n                \"\"\", (...))\n                return documento.id\n            else:\n                # Insert\n                cursor.execute(\"\"\"\n                    INSERT INTO documentos (...)\n                    VALUES (...)\n                \"\"\", (...))\n                return cursor.lastrowid\n\n    def buscar_por_id(self, id: int) -&gt; Optional[Documento]:\n        \"\"\"Busca documento pelo ID.\"\"\"\n        with self._conexao() as conn:\n            cursor = conn.cursor()\n            cursor.execute(\"SELECT * FROM documentos WHERE id = ?\", (id,))\n            row = cursor.fetchone()\n            return self._row_para_entidade(row) if row else None\n\n    def listar(self,\n               offset: int = 0,\n               limite: int = 20,\n               centro: Optional[str] = None,\n               tipo: Optional[str] = None) -&gt; List[Documento]:\n        \"\"\"Lista documentos com filtros.\"\"\"\n        with self._conexao() as conn:\n            cursor = conn.cursor()\n\n            query = \"SELECT * FROM documentos WHERE 1=1\"\n            params = []\n\n            if centro:\n                query += \" AND centro = ?\"\n                params.append(centro)\n            if tipo:\n                query += \" AND tipo_documento = ?\"\n                params.append(tipo)\n\n            query += \" ORDER BY id LIMIT ? OFFSET ?\"\n            params.extend([limite, offset])\n\n            cursor.execute(query, params)\n            return [self._row_para_entidade(row) for row in cursor.fetchall()]\n\n    def contar(self, centro: Optional[str] = None, tipo: Optional[str] = None) -&gt; int:\n        \"\"\"Conta documentos com filtros.\"\"\"\n        # ... similar ao listar, mas com COUNT(*)\n</code></pre>"},{"location":"fases/FASE3_INFRASTRUCTURE/#5-repositorio-de-traducoes-persistencesqlite_traducao_repositorypy","title":"5. Reposit\u00f3rio de Tradu\u00e7\u00f5es (<code>persistence/sqlite_traducao_repository.py</code>)","text":"<pre><code>class SQLiteTraducaoRepository(RepositorioTraducao):\n    \"\"\"Reposit\u00f3rio SQLite para tradu\u00e7\u00f5es.\"\"\"\n\n    def buscar_por_documento(self, documento_id: int, idioma: str) -&gt; Optional[Traducao]:\n        \"\"\"Busca tradu\u00e7\u00e3o espec\u00edfica de um documento.\"\"\"\n\n    def listar_por_documento(self, documento_id: int) -&gt; List[Traducao]:\n        \"\"\"Lista todas as tradu\u00e7\u00f5es de um documento.\"\"\"\n\n    def contar_por_documento(self, documento_id: int) -&gt; int:\n        \"\"\"Conta tradu\u00e7\u00f5es de um documento.\"\"\"\n</code></pre>"},{"location":"fases/FASE3_INFRASTRUCTURE/#6-adaptador-google-translate-translationgoogle_translatorpy","title":"6. Adaptador Google Translate (<code>translation/google_translator.py</code>)","text":"<p>Responsabilidade: Integrar com a API do Google Translate.</p> <pre><code>class GoogleTranslator:\n    \"\"\"\n    Cliente para Google Cloud Translation API.\n    \"\"\"\n\n    def traduzir(self, texto: str, destino: str = 'en') -&gt; str:\n        \"\"\"Traduz texto para o idioma destino.\"\"\"\n\n    def traduzir_documento_completo(self, texto: str, destino: str = 'en') -&gt; str:\n        \"\"\"Traduz documentos grandes dividindo em chunks.\"\"\"\n\n    def testar_conexao(self) -&gt; bool:\n        \"\"\"Testa se a API est\u00e1 respondendo.\"\"\"\n</code></pre> <p>Chunking para documentos grandes: <pre><code>def traduzir_documento_completo(self, texto, destino='en', chunk_size=3000):\n    # Dividir em par\u00e1grafos\n    paragrafos = texto.split('\\n')\n    chunks = []\n\n    for para in paragrafos:\n        if tamanho_atual + len(para) &lt; chunk_size:\n            chunk_atual.append(para)\n        else:\n            chunks.append('\\n'.join(chunk_atual))\n            chunk_atual = [para]\n\n    # Traduzir cada chunk\n    traducoes = []\n    for chunk in chunks:\n        traducoes.append(self.traduzir(chunk, destino))\n\n    return '\\n'.join(traducoes)\n</code></pre></p>"},{"location":"fases/FASE3_INFRASTRUCTURE/#testes-de-infraestrutura","title":"\ud83e\uddea Testes de Infraestrutura","text":""},{"location":"fases/FASE3_INFRASTRUCTURE/#testes-do-repositorio-test_sqlite_repositorypy","title":"Testes do Reposit\u00f3rio (<code>test_sqlite_repository.py</code>)","text":"<pre><code>class TestSQLiteDocumentoRepository:\n    \"\"\"Testes para o reposit\u00f3rio SQLite.\"\"\"\n\n    @pytest.fixture\n    def repo_memoria(self):\n        \"\"\"Fixture que cria um reposit\u00f3rio com banco em mem\u00f3ria.\"\"\"\n        with tempfile.NamedTemporaryFile(suffix='.db') as tmp:\n            repo = SQLiteDocumentoRepository(db_path=tmp.name)\n            with repo._conexao() as conn:\n                cursor = conn.cursor()\n                DocumentoModel.criar_tabela(cursor)\n                TraducaoModel.criar_tabela(cursor)\n            yield repo\n\n    def test_salvar_novo_documento(self, repo_memoria):\n        \"\"\"Deve inserir novo documento.\"\"\"\n        doc = Documento(\n            centro='lencenter',\n            titulo='Teste',\n            url='http://teste.com/1',\n            texto='Conte\u00fado',\n            data_coleta=datetime.now()\n        )\n\n        doc_id = repo_memoria.salvar(doc)\n        assert doc_id &gt; 0\n\n        salvo = repo_memoria.buscar_por_id(doc_id)\n        assert salvo.titulo == 'Teste'\n\n    def test_listar_com_filtro_centro(self, repo_memoria):\n        \"\"\"Deve filtrar por centro.\"\"\"\n        # Inserir documentos de teste\n        for i in range(3):\n            doc = Documento(centro='lencenter', ...)\n            repo_memoria.salvar(doc)\n        for i in range(2):\n            doc = Documento(centro='moscenter', ...)\n            repo_memoria.salvar(doc)\n\n        docs_len = repo_memoria.listar(centro='lencenter')\n        docs_mos = repo_memoria.listar(centro='moscenter')\n\n        assert len(docs_len) == 3\n        assert len(docs_mos) == 2\n\n    def test_remover_documento(self, repo_memoria):\n        \"\"\"Deve remover documento por ID.\"\"\"\n        doc = Documento(...)\n        doc_id = repo_memoria.salvar(doc)\n\n        resultado = repo_memoria.remover(doc_id)\n        assert resultado is True\n\n        removido = repo_memoria.buscar_por_id(doc_id)\n        assert removido is None\n</code></pre>"},{"location":"fases/FASE3_INFRASTRUCTURE/#testes-de-migracoes-test_migrationspy","title":"Testes de Migra\u00e7\u00f5es (<code>test_migrations.py</code>)","text":"<pre><code>class TestMigrations:\n    \"\"\"Testes para scripts de migra\u00e7\u00e3o.\"\"\"\n\n    def test_criar_tabelas(self, db_temporario):\n        \"\"\"Deve criar tabelas sem erros.\"\"\"\n        criar_tabelas()\n\n        conn = sqlite3.connect(db_temporario)\n        cursor = conn.cursor()\n        cursor.execute(\"SELECT name FROM sqlite_master WHERE type='table'\")\n        tabelas = [row[0] for row in cursor.fetchall()]\n\n        assert 'documentos' in tabelas\n        assert 'traducoes' in tabelas\n\n    def test_migrar_banco_existente(self, db_temporario):\n        \"\"\"Deve adicionar colunas de metadados.\"\"\"\n        # Criar tabela sem metadados\n        conn = sqlite3.connect(db_temporario)\n        cursor = conn.cursor()\n        cursor.execute(\"CREATE TABLE documentos (id INTEGER PRIMARY KEY, ...)\")\n        conn.close()\n\n        migrar_banco_existente()\n\n        conn = sqlite3.connect(db_temporario)\n        cursor = conn.cursor()\n        cursor.execute(\"PRAGMA table_info(documentos)\")\n        colunas = [row[1] for row in cursor.fetchall()]\n\n        assert 'tipo_documento' in colunas\n        assert 'pessoa_principal' in colunas\n</code></pre>"},{"location":"fases/FASE3_INFRASTRUCTURE/#resultados","title":"Resultados","text":"<pre><code>poetry run pytest src/tests/test_infrastructure/ -v\n\n# Sa\u00edda esperada (13 testes):\n# test_sqlite_repository.py::TestSQLiteDocumentoRepository::test_salvar_novo_documento PASSED\n# test_sqlite_repository.py::TestSQLiteDocumentoRepository::test_salvar_documento_existente PASSED\n# test_sqlite_repository.py::TestSQLiteDocumentoRepository::test_buscar_por_id_inexistente PASSED\n# test_sqlite_repository.py::TestSQLiteDocumentoRepository::test_listar_sem_filtros PASSED\n# test_sqlite_repository.py::TestSQLiteDocumentoRepository::test_listar_com_filtro_centro PASSED\n# test_sqlite_repository.py::TestSQLiteDocumentoRepository::test_contar_documentos PASSED\n# test_sqlite_repository.py::TestSQLiteDocumentoRepository::test_remover_documento PASSED\n# test_sqlite_repository.py::TestSQLiteDocumentoRepository::test_remover_inexistente PASSED\n# test_migrations.py::TestMigrations::test_criar_tabelas PASSED\n# test_migrations.py::TestMigrations::test_migrar_banco_existente PASSED\n# test_migrations.py::TestMigrations::test_verificar_integridade_banco_ok PASSED\n# test_migrations.py::TestMigrations::test_verificar_integridade_banco_incompleto PASSED\n# test_migrations.py::TestMigrations::test_estatisticas_banco PASSED\n\n# =========================== 13 passed in 1.66s ===========================\n</code></pre> <p>Total: 13 testes | Todos PASSANDO \u2705</p>"},{"location":"fases/FASE3_INFRASTRUCTURE/#fluxo-de-dados-na-infraestrutura","title":"\ud83d\udd04 Fluxo de Dados na Infraestrutura","text":"<pre><code>[Dom\u00ednio] \u2192 [Interface] \u2190 [SQLiteRepository]\n                \u2191\n        [DocumentoModel]\n                \u2191\n        [SQLite (banco real)]\n</code></pre> <p>Exemplo pr\u00e1tico (salvar documento):</p> <pre><code>1. Caso de uso chama repo.salvar(documento)\n2. Reposit\u00f3rio converte entidade para modelo\n3. Executa INSERT/UPDATE no SQLite\n4. Retorna ID do documento salvo\n5. Caso de uso continua\n</code></pre>"},{"location":"fases/FASE3_INFRASTRUCTURE/#metricas-da-fase","title":"\ud83d\udcca M\u00e9tricas da Fase","text":"M\u00e9trica Valor Reposit\u00f3rios 2 Modelos 2 Migra\u00e7\u00f5es 2 Testes de integra\u00e7\u00e3o 13 Cobertura estimada &gt;80% Depend\u00eancias externas SQLite"},{"location":"fases/FASE3_INFRASTRUCTURE/#principios-aplicados","title":"\ud83d\udcda Princ\u00edpios Aplicados","text":"Princ\u00edpio Aplica\u00e7\u00e3o Dependency Inversion Reposit\u00f3rio depende da interface, n\u00e3o o contr\u00e1rio Repository Pattern Abstra\u00e7\u00e3o do banco de dados Migrations Evolu\u00e7\u00e3o do schema sem perda de dados Test Isolation Banco em mem\u00f3ria para testes Configuration Management Settings centralizado Context Managers Gerenciamento seguro de conex\u00f5es"},{"location":"fases/FASE3_INFRASTRUCTURE/#integracao-com-fases-anteriores-e-futuras","title":"\ud83d\udd17 Integra\u00e7\u00e3o com Fases Anteriores e Futuras","text":"Fase Relacionamento FASE 1 (Domain) Implementa <code>RepositorioDocumento</code> e <code>RepositorioTraducao</code> FASE 2 (Application) Usada pelos casos de uso FASE 4 (CLI) Reposit\u00f3rios injetados nos casos de uso FASE 5 (Tradu\u00e7\u00e3o) Usa <code>SQLiteTraducaoRepository</code> FASE 9 (Web) Mesmos reposit\u00f3rios, compartilhados"},{"location":"fases/FASE3_INFRASTRUCTURE/#evolucao-do-codigo","title":"\ud83d\ude80 Evolu\u00e7\u00e3o do C\u00f3digo","text":""},{"location":"fases/FASE3_INFRASTRUCTURE/#antes-codigo-legado-dbpy","title":"Antes (c\u00f3digo legado - <code>db.py</code>)","text":"<pre><code># C\u00f3digo espalhado, SQL na m\u00e3o\ndef listar_documentos():\n    conn = sqlite3.connect('data.db')\n    cursor = conn.cursor()\n    cursor.execute(\"SELECT * FROM documentos\")\n    return cursor.fetchall()\n</code></pre>"},{"location":"fases/FASE3_INFRASTRUCTURE/#depois-clean-architecture","title":"Depois (Clean Architecture)","text":"<pre><code># Reposit\u00f3rio organizado e test\u00e1vel\ndef listar(self, offset, limite, centro=None, tipo=None):\n    with self._conexao() as conn:\n        cursor = conn.cursor()\n        query = self._montar_query(centro, tipo)\n        cursor.execute(query, params)\n        return [self._row_para_entidade(row) for row in cursor.fetchall()]\n</code></pre>"},{"location":"fases/FASE3_INFRASTRUCTURE/#metricas-do-projeto-apos-fase-3","title":"\ud83d\udcc8 M\u00e9tricas do Projeto (Ap\u00f3s FASE 3)","text":"<pre><code>\ud83d\udcca DOMAIN LAYER: 3 m\u00f3dulos | 13 testes\n\ud83d\udcca APPLICATION LAYER: 4 casos de uso | 4 testes\n\ud83d\udcca INFRASTRUCTURE LAYER: 3 m\u00f3dulos | 13 testes\n\ud83d\udcca TOTAL: 30 testes passando\n</code></pre>"},{"location":"fases/FASE3_INFRASTRUCTURE/#licoes-aprendidas","title":"\ud83d\udd0d Li\u00e7\u00f5es Aprendidas","text":"<ol> <li>Context managers s\u00e3o essenciais: Garantem que conex\u00f5es sejam sempre fechadas</li> <li>Banco em mem\u00f3ria para testes: Isola testes e acelera execu\u00e7\u00e3o</li> <li>Migra\u00e7\u00f5es precisam ser idempotentes: Podem rodar m\u00faltiplas vezes sem danos</li> <li>Convers\u00e3o modelo \u2194 entidade: Centralizar l\u00f3gica de mapeamento</li> <li>Configura\u00e7\u00f5es centralizadas: Facilita mudan\u00e7as e evita repeti\u00e7\u00e3o</li> </ol>"},{"location":"fases/FASE3_INFRASTRUCTURE/#conclusao-da-fase","title":"\ud83c\udfc1 Conclus\u00e3o da Fase","text":"<p>A FASE 3 estabeleceu a camada de infraestrutura com:</p> <p>\u2705 2 reposit\u00f3rios SQLite completos \u2705 2 modelos de dados \u2705 Sistema de migra\u00e7\u00f5es \u2705 13 testes de integra\u00e7\u00e3o \u2705 Adaptador para Google Translate \u2705 Configura\u00e7\u00f5es centralizadas \u2705 C\u00f3digo pronto para ser usado pelas interfaces</p>"},{"location":"fases/FASE3_INFRASTRUCTURE/#autor","title":"\ud83d\udc64 Autor","text":"<p>Thiago Ribeiro - Projeto de TCC</p> <sub>FASE 3 conclu\u00edda em 15 de Fevereiro de 2024</sub> <sub>\u2705 Pronto para a FASE 4 - Interface CLI</sub> <p>```</p>"},{"location":"fases/FASE4_CLI/","title":"FASE 4 - Interface CLI (Camada de Interface)","text":"**Interface de linha de comando com navega\u00e7\u00e3o interativa e rica experi\u00eancia visual**"},{"location":"fases/FASE4_CLI/#informacoes-da-fase","title":"\ud83d\udcc5 Informa\u00e7\u00f5es da Fase","text":"Item Descri\u00e7\u00e3o Status \u2705 Conclu\u00edda Data de Conclus\u00e3o 15 de Fevereiro de 2024 Artefatos CLI com Rich, Comandos, Presenters, Menus Testes Valida\u00e7\u00e3o manual completa Depend\u00eancias FASE 1, 2, 3"},{"location":"fases/FASE4_CLI/#objetivo","title":"\ud83c\udfaf Objetivo","text":"<p>Implementar a interface de linha de comando (CLI) que:</p> <ul> <li>Ofere\u00e7a navega\u00e7\u00e3o intuitiva por menus</li> <li>Apresente dados de forma rica e colorida</li> <li>Permita todas as opera\u00e7\u00f5es do sistema</li> <li>Utilize a arquitetura limpa com inje\u00e7\u00e3o de depend\u00eancia</li> <li>Proporcione experi\u00eancia similar a aplica\u00e7\u00f5es desktop</li> </ul>"},{"location":"fases/FASE4_CLI/#estrutura-criada","title":"\ud83d\udcc1 Estrutura Criada","text":"<pre><code>src/\n\u251c\u2500\u2500 interface/\n\u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u251c\u2500\u2500 console.py                 # Configura\u00e7\u00e3o do Rich\n\u2502   \u2514\u2500\u2500 cli/\n\u2502       \u251c\u2500\u2500 __init__.py\n\u2502       \u251c\u2500\u2500 app.py                  # Aplica\u00e7\u00e3o principal\n\u2502       \u251c\u2500\u2500 commands.py              # Comandos base\n\u2502       \u251c\u2500\u2500 commands_analise.py      # Comandos de an\u00e1lise\n\u2502       \u251c\u2500\u2500 commands_export.py       # Comandos de exporta\u00e7\u00e3o\n\u2502       \u251c\u2500\u2500 commands_relatorio.py    # Comandos de relat\u00f3rios\n\u2502       \u251c\u2500\u2500 commands_traducao.py     # Comandos de tradu\u00e7\u00e3o\n\u2502       \u251c\u2500\u2500 menu.py                  # Menus interativos\n\u2502       \u251c\u2500\u2500 presenters.py            # Presenters base\n\u2502       \u251c\u2500\u2500 presenters_analise.py    # Presenters de an\u00e1lise\n\u2502       \u2514\u2500\u2500 presenters_traducao.py   # Presenters de tradu\u00e7\u00e3o\n\u2514\u2500\u2500 scripts/\n    \u2514\u2500\u2500 migrar_dados_existentes.py   # Script de migra\u00e7\u00e3o\n</code></pre>"},{"location":"fases/FASE4_CLI/#componentes-implementados","title":"\ud83e\udde9 Componentes Implementados","text":""},{"location":"fases/FASE4_CLI/#1-console-consolepy","title":"1. Console (<code>console.py</code>)","text":"<p>Responsabilidade: Configurar o Rich e fornecer fun\u00e7\u00f5es de UI padronizadas.</p> <pre><code># Configura\u00e7\u00e3o do Rich\ntema = Theme({\n    \"primary\": \"bold cyan\",\n    \"secondary\": \"bold yellow\",\n    \"success\": \"bold green\",\n    \"error\": \"bold red\",\n    \"warning\": \"bold yellow\",\n    \"info\": \"dim white\",\n    \"destaque\": \"reverse white\"\n})\n\nconsole = Console(theme=tema)\n</code></pre> <p>Fun\u00e7\u00f5es utilit\u00e1rias:</p> <pre><code>def limpar_tela():\n    \"\"\"Limpa o terminal de forma cross-platform.\"\"\"\n    os.system('cls' if os.name == 'nt' else 'clear')\n    if os.name != 'nt':\n        print('\\033[3J', end='')  # Limpa scrollback\n        print('\\033[H', end='')   # Posiciona cursor\n\ndef cabecalho(titulo: str):\n    \"\"\"Exibe cabe\u00e7alho padronizado.\"\"\"\n    console.rule(f\"[primary]{titulo}[/primary]\")\n    console.print()\n\ndef mostrar_erro(mensagem: str):\n    \"\"\"Exibe mensagem de erro.\"\"\"\n    console.print(f\"[error]\u2717[/error] {mensagem}\")\n\ndef mostrar_sucesso(mensagem: str):\n    \"\"\"Exibe mensagem de sucesso.\"\"\"\n    console.print(f\"[success]\u2713[/success] {mensagem}\")\n\ndef mostrar_aviso(mensagem: str):\n    \"\"\"Exibe mensagem de aviso.\"\"\"\n    console.print(f\"[warning]\u26a0[/warning] {mensagem}\")\n\ndef spinner(mensagem: str, funcao, *args, **kwargs):\n    \"\"\"Executa fun\u00e7\u00e3o com spinner de carregamento.\"\"\"\n    with Progress(\n        SpinnerColumn(),\n        TextColumn(\"[progress.description]{task.description}\"),\n        console=console,\n        transient=True\n    ) as progress:\n        progress.add_task(f\"[cyan]{mensagem}[/cyan]\", total=None)\n        return funcao(*args, **kwargs)\n</code></pre>"},{"location":"fases/FASE4_CLI/#2-presenters-presenterspy-presenters_analisepy-presenters_traducaopy","title":"2. Presenters (<code>presenters.py</code>, <code>presenters_analise.py</code>, <code>presenters_traducao.py</code>)","text":"<p>Responsabilidade: Formatar dados para exibi\u00e7\u00e3o no terminal.</p>"},{"location":"fases/FASE4_CLI/#badges-e-icones","title":"Badges e \u00cdcones","text":"<pre><code>@staticmethod\ndef badge_tipo(tipo: str) -&gt; str:\n    \"\"\"Retorna badge colorido para tipo de documento.\"\"\"\n    badges = {\n        'interrogatorio': '[bold cyan]\ud83d\udd0d INTERROGAT\u00d3RIO[/bold cyan]',\n        'acareacao': '[bold yellow]\u2696\ufe0f ACAREA\u00c7\u00c3O[/bold yellow]',\n        'acusacao': '[bold red]\ud83d\udcdc ACUSA\u00c7\u00c3O[/bold red]',\n        'declaracao': '[bold blue]\ud83d\udcdd DECLARA\u00c7\u00c3O[/bold blue]',\n        'carta': '[bold green]\u2709\ufe0f CARTA[/bold green]',\n        'relatorio': '[bold magenta]\ud83d\udccb RELAT\u00d3RIO NKVD[/bold magenta]',\n        'depoimento': '[bold purple]\ud83d\udde3\ufe0f DEPOIMENTO[/bold purple]',\n        'laudo': '[bold white]\ud83c\udfe5 LAUDO[/bold white]',\n        'desconhecido': '[dim]\ud83d\udcc4 DOCUMENTO[/dim]'\n    }\n    return badges.get(tipo, badges['desconhecido'])\n\n@staticmethod\ndef badge_idioma(idioma: str) -&gt; str:\n    \"\"\"Retorna badge de idioma.\"\"\"\n    badges = {\n        'ru': '[bold white]\ud83c\uddf7\ud83c\uddfa RU[/bold white]',\n        'en': '[bold blue]\ud83c\uddfa\ud83c\uddf8 EN[/bold blue]',\n        'pt': '[bold green]\ud83c\udde7\ud83c\uddf7 PT[/bold green]',\n        'es': '[bold yellow]\ud83c\uddea\ud83c\uddf8 ES[/bold yellow]',\n        'fr': '[bold magenta]\ud83c\uddeb\ud83c\uddf7 FR[/bold magenta]',\n    }\n    return badges.get(idioma, f'[dim]{idioma}[/dim]')\n</code></pre>"},{"location":"fases/FASE4_CLI/#tabela-de-documentos","title":"Tabela de Documentos","text":"<pre><code>@classmethod\ndef tabela_documentos(cls, resultados: Dict):\n    \"\"\"Cria tabela de documentos para listagem.\"\"\"\n    table = Table(\n        title=f\"[bold]\ud83d\udcda Documentos[/bold] (P\u00e1gina {resultados['pagina']}/{resultados['total_paginas']})\",\n        box=box.ROUNDED,\n        header_style=\"bold cyan\",\n        border_style=\"bright_blue\"\n    )\n\n    table.add_column(\"ID\", width=4, justify=\"right\")\n    table.add_column(\"Tipo\", width=20)\n    table.add_column(\"Data\", width=12)\n    table.add_column(\"Pessoa\", width=25)\n    table.add_column(\"T\u00edtulo\", width=35)\n    table.add_column(\"\ud83c\udf10\", width=8, justify=\"center\")\n\n    for item in resultados['items']:\n        trad_badge = \"[bold green]\u2713[/bold green]\" if item.tem_traducao else \"[dim]\u2014[/dim]\"\n\n        table.add_row(\n            str(item.id),\n            cls.badge_tipo(item.tipo),\n            item.data_original or \"N/D\",\n            item.pessoa_principal_en or item.pessoa_principal or \"\",\n            item.titulo[:35] + \"\u2026\" if len(item.titulo) &gt; 35 else item.titulo,\n            trad_badge\n        )\n\n    console.print(table)\n    console.print(f\"[dim]Total: {resultados['total']} documentos[/dim]\")\n</code></pre>"},{"location":"fases/FASE4_CLI/#documento-completo","title":"Documento Completo","text":"<pre><code>@classmethod\ndef documento_completo(cls, dto):\n    \"\"\"Exibe documento completo com metadados.\"\"\"\n    # Cabe\u00e7alho com t\u00edtulo\n    titulo_panel = Panel(\n        f\"[bold yellow]{dto.titulo}[/bold yellow]\\n\\n\"\n        f\"{cls.badge_tipo(dto.tipo)}\",\n        border_style=\"bright_green\",\n        padding=(1, 2)\n    )\n    console.print(titulo_panel)\n\n    # Metadados\n    console.print(\"[bold cyan]\ud83d\udccb METADADOS[/bold cyan]\")\n    console.print(f\"  \ud83c\udfdb\ufe0f Centro: [yellow]{dto.centro}[/yellow]\")\n    console.print(f\"  \ud83d\udcc5 Data original: {dto.data_original or 'N\u00e3o informada'}\")\n    console.print(f\"  \ud83d\udd17 URL: [blue]{dto.url}[/blue]\")\n    console.print(f\"  \ud83d\udcca Tamanho: {dto.tamanho_caracteres} caracteres\")\n\n    # Conte\u00fado\n    console.print(\"\\n[bold white]\ud83d\udcc4 CONTE\u00daDO[/bold white]\")\n    console.print(\"\u2500\" * 80)\n\n    texto = dto.texto\n    if len(texto) &gt; 2000:\n        texto = texto[:2000] + \"\\n\\n[dim]... (texto truncado)[/dim]\"\n\n    console.print(texto)\n    console.print(\"\u2500\" * 80)\n</code></pre>"},{"location":"fases/FASE4_CLI/#badge-de-idioma-atual","title":"Badge de Idioma Atual","text":"<pre><code>@classmethod\ndef badge_idioma_atual(cls, idioma: str):\n    \"\"\"Exibe badge indicando idioma atual.\"\"\"\n    if idioma == 'original':\n        return Panel(\"[bold blue]\ud83d\udcc4 ORIGINAL (Russo)[/bold blue]\", border_style=\"blue\")\n    else:\n        return Panel(\n            f\"[bold green]\ud83c\udf10 TRADU\u00c7\u00c3O {cls.badge_idioma(idioma)}[/bold green]\",\n            border_style=\"green\"\n        )\n</code></pre>"},{"location":"fases/FASE4_CLI/#3-comandos-commandspy-commands_analisepy-commands_exportpy-commands_relatoriopy-commands_traducaopy","title":"3. Comandos (<code>commands.py</code>, <code>commands_analise.py</code>, <code>commands_export.py</code>, <code>commands_relatorio.py</code>, <code>commands_traducao.py</code>)","text":"<p>Responsabilidade: Implementar cada a\u00e7\u00e3o do usu\u00e1rio.</p>"},{"location":"fases/FASE4_CLI/#comandolistar-commandspy","title":"ComandoListar (<code>commands.py</code>)","text":"<pre><code>class ComandoListar:\n    \"\"\"Comando para listar documentos.\"\"\"\n\n    def __init__(self, listar_use_case):\n        self.listar_use_case = listar_use_case\n        self.presenter = DocumentoPresenter()\n\n    def executar(self, centro: Optional[str] = None, tipo: Optional[str] = None):\n        \"\"\"Executa listagem interativa.\"\"\"\n        pagina = 1\n        limite = 15\n\n        while True:\n            limpar_tela()\n            cabecalho(f\"\ud83d\udccb Documentos - {centro or 'Todos'}\")\n\n            resultados = self.listar_use_case.executar(\n                pagina=pagina,\n                limite=limite,\n                centro=centro,\n                tipo=tipo\n            )\n\n            self.presenter.tabela_documentos(resultados)\n\n            # Menu de navega\u00e7\u00e3o\n            console.print(\"\\n[dim]\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500[/dim]\")\n            console.print(\"[bold cyan]COMANDOS[/bold cyan]\")\n            console.print(\"  [green]n[/green] - Pr\u00f3xima p\u00e1gina\")\n            console.print(\"  [green]p[/green] - P\u00e1gina anterior\")\n            console.print(\"  [green][n\u00famero][/green] - Ver documento\")\n            console.print(\"  [green]m[/green] - Menu principal\")\n\n            cmd = input(\"\\nComando: \").strip().lower()\n\n            if cmd == 'n' and pagina &lt; resultados['total_paginas']:\n                pagina += 1\n            elif cmd == 'p' and pagina &gt; 1:\n                pagina -= 1\n            elif cmd == 'm':\n                break\n            elif cmd.isdigit():\n                return int(cmd)\n            else:\n                mostrar_erro(\"Comando inv\u00e1lido\")\n</code></pre>"},{"location":"fases/FASE4_CLI/#comandotraduzir-commands_traducaopy","title":"ComandoTraduzir (<code>commands_traducao.py</code>)","text":"<pre><code>class ComandoTraduzir:\n    \"\"\"Comando para criar nova tradu\u00e7\u00e3o.\"\"\"\n\n    def executar(self, documento_id: int):\n        \"\"\"Executa tradu\u00e7\u00e3o interativa.\"\"\"\n        # 1. Mostrar tradu\u00e7\u00f5es existentes\n        traducoes = self.listar_trad_use_case.executar(documento_id)\n\n        # 2. Escolher idioma\n        console.print(\"\\n[bold cyan]Idiomas dispon\u00edveis:[/bold cyan]\")\n        console.print(\"  [1] \ud83c\uddfa\ud83c\uddf8 Ingl\u00eas (en)\")\n        console.print(\"  [2] \ud83c\udde7\ud83c\uddf7 Portugu\u00eas (pt)\")\n        console.print(\"  [3] \ud83c\uddea\ud83c\uddf8 Espanhol (es)\")\n        console.print(\"  [4] \ud83c\uddeb\ud83c\uddf7 Franc\u00eas (fr)\")\n\n        # 3. Verificar se j\u00e1 existe\n        if existente:\n            console.print(f\"\\n[yellow]\u26a0 J\u00e1 existe tradu\u00e7\u00e3o[/yellow]\")\n            confirmar = input(\"Substituir? (s/N): \").strip().lower()\n\n        # 4. Estimar custo\n        console.print(\"\\n[bold]\ud83d\udcca Estimativa de custo:[/bold]\")\n\n        # 5. Traduzir com spinner\n        resultado = spinner(\n            f\"\ud83c\udf10 Traduzindo...\",\n            self.traduzir_use_case.executar,\n            documento_id,\n            idioma,\n            forcar_novo=True\n        )\n</code></pre>"},{"location":"fases/FASE4_CLI/#comandoexportar-commands_exportpy","title":"ComandoExportar (<code>commands_export.py</code>)","text":"<pre><code>class ComandoExportar:\n    \"\"\"Comando para exportar documento.\"\"\"\n\n    def executar(self, documento_id: int):\n        \"\"\"Executa exporta\u00e7\u00e3o interativa.\"\"\"\n        # 1. Listar idiomas dispon\u00edveis\n        idiomas = self.exportar_use_case.listar_idiomas_disponiveis(documento_id)\n\n        # 2. Escolher formato\n        console.print(\"\\n[bold]Formatos dispon\u00edveis:[/bold]\")\n        console.print(\"  [1] \ud83d\udcc4 TXT\")\n        console.print(\"  [2] \ud83d\udcd1 PDF (em breve)\")\n\n        # 3. Incluir metadados?\n        console.print(\"\\n[bold]Incluir metadados?[/bold]\")\n\n        # 4. Exportar\n        resultado = self.exportar_use_case.executar(...)\n\n        if resultado['sucesso']:\n            mostrar_sucesso(f\"Documento exportado para: {resultado['caminho']}\")\n</code></pre>"},{"location":"fases/FASE4_CLI/#4-menus-menupy","title":"4. Menus (<code>menu.py</code>)","text":"<p>Responsabilidade: Gerenciar a navega\u00e7\u00e3o entre telas.</p>"},{"location":"fases/FASE4_CLI/#menuprincipal","title":"MenuPrincipal","text":"<pre><code>class MenuPrincipal:\n    \"\"\"Menu principal da aplica\u00e7\u00e3o.\"\"\"\n\n    def mostrar(self) -&gt; str:\n        limpar_tela()\n\n        banner = \"\"\"\n\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\n\u2551                                                              \u2551\n\u2551                    \u25c8 \u25c8 \u25c8 SHOW TRIALS \u25c8 \u25c8 \u25c8                 \u2551\n\u2551                    Coleta \u2022 Tradu\u00e7\u00e3o \u2022 An\u00e1lise              \u2551\n\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\n\"\"\"\n        console.print(banner, style=\"bold cyan\")\n        console.print()\n\n        console.print(\"[bold cyan]MENU PRINCIPAL[/bold cyan]\")\n        console.print()\n        console.print(\"  [1] \ud83d\udccb Listar todos os documentos\")\n        console.print(\"  [2] \ud83c\udfdb\ufe0f  Listar por centro\")\n        console.print(\"  [3] \ud83d\udc41\ufe0f  Visualizar documento\")\n        console.print(\"  [4] \ud83d\udcca Estat\u00edsticas\")\n        console.print(\"  [5] \ud83d\udcc8 Relat\u00f3rios avan\u00e7ados\")\n        console.print(\"  [6] \ud83d\udd0d An\u00e1lise de texto\")\n        console.print(\"  [7] \ud83d\udd04 Sair\")\n        console.print()\n\n        return input(\"[cyan]Escolha[/cyan] \").strip()\n</code></pre>"},{"location":"fases/FASE4_CLI/#menucentro","title":"MenuCentro","text":"<pre><code>class MenuCentro:\n    \"\"\"Menu para escolha de centro.\"\"\"\n\n    @staticmethod\n    def mostrar() -&gt; str:\n        console.print()\n        console.print(\"[bold cyan]Centros dispon\u00edveis:[/bold cyan]\")\n        console.print(\"  [1] \ud83c\udfdb\ufe0f Leningrad Center\")\n        console.print(\"  [2] \ud83c\udfdb\ufe0f Moscow Center\")\n        console.print(\"  [0] \u21a9\ufe0f  Voltar\")\n\n        opcao = input(\"\\nEscolha o centro: \").strip()\n\n        if opcao == '1':\n            return 'lencenter'\n        elif opcao == '2':\n            return 'moscenter'\n        return None\n</code></pre>"},{"location":"fases/FASE4_CLI/#menu-de-analise","title":"Menu de An\u00e1lise","text":"<pre><code>def _menu_analise(self):\n    \"\"\"Menu de an\u00e1lise de texto.\"\"\"\n    while True:\n        limpar_tela()\n        cabecalho(\"\ud83d\udd0d AN\u00c1LISE DE TEXTO\")\n\n        console.print(\"[bold cyan]Op\u00e7\u00f5es:[/bold cyan]\")\n        console.print(\"  [1] Analisar documento espec\u00edfico\")\n        console.print(\"  [2] An\u00e1lise global do acervo\")\n        console.print(\"  [3] Nuvem de palavras do acervo\")\n        console.print(\"  [0] Voltar\")\n\n        opcao = input(\"\\nEscolha: \").strip()\n\n        if opcao == '0':\n            break\n        elif opcao == '1':\n            doc_id = int(input(\"ID do documento: \"))\n            self.cmd_analisar_doc.executar(doc_id)\n        elif opcao == '2':\n            self.cmd_analisar_acervo.executar()\n        elif opcao == '3':\n            caminho = self.analisar_acervo_use_case.gerar_wordcloud_geral()\n            mostrar_sucesso(f\"Nuvem gerada em: {caminho}\")\n</code></pre>"},{"location":"fases/FASE4_CLI/#5-aplicacao-principal-apppy","title":"5. Aplica\u00e7\u00e3o Principal (<code>app.py</code>)","text":"<p>Responsabilidade: Inicializar e orquestrar todos os componentes.</p> <pre><code>class ShowTrialsApp:\n    \"\"\"Aplica\u00e7\u00e3o principal com inje\u00e7\u00e3o de depend\u00eancia.\"\"\"\n\n    def __init__(self):\n        # =====================================================\n        # 1. INFRAESTRUTURA\n        # =====================================================\n        self.repo = SQLiteDocumentoRepository()\n        self.repo_traducao = SQLiteTraducaoRepository()\n        self.registry = ServiceRegistry()\n\n        # Registrar servi\u00e7os\n        self.registry.register('translator', create_translator, lazy=True)\n        self.registry.register('spacy', create_spacy_analyzer, lazy=True)\n        self.registry.register('wordcloud', create_wordcloud_generator, lazy=True)\n\n        # =====================================================\n        # 2. CASOS DE USO\n        # =====================================================\n        self.listar_use_case = ListarDocumentos(self.repo).com_traducao_nomes(True)\n        self.obter_use_case = ObterDocumento(self.repo, self.repo_traducao)\n        self.estatisticas_use_case = ObterEstatisticas(self.repo)\n        self.exportar_use_case = ExportarDocumento(self.repo, self.repo_traducao)\n        self.relatorio_use_case = GerarRelatorio(self.repo, self.repo_traducao)\n\n        # Casos com registry\n        self.traduzir_use_case = TraduzirDocumento(\n            repo_doc=self.repo,\n            repo_trad=self.repo_traducao,\n            registry=self.registry\n        )\n\n        self.analisar_documento_use_case = AnalisarDocumento(\n            repo_doc=self.repo,\n            repo_trad=self.repo_traducao,\n            registry=self.registry\n        )\n\n        self.analisar_acervo_use_case = AnalisarAcervo(\n            repo_doc=self.repo,\n            registry=self.registry\n        )\n\n        self.listar_traducoes_use_case = ListarTraducoes(self.repo_traducao)\n\n        # =====================================================\n        # 3. COMANDOS\n        # =====================================================\n        self.cmd_listar = ComandoListar(self.listar_use_case)\n        self.cmd_visualizar = ComandoVisualizar(self.obter_use_case)\n        self.cmd_estatisticas = ComandoEstatisticas(self.estatisticas_use_case)\n        self.cmd_exportar = ComandoExportar(self.exportar_use_case)\n        self.cmd_relatorio = ComandoRelatorio(self.relatorio_use_case)\n\n        self.cmd_traduzir = ComandoTraduzir(\n            self.traduzir_use_case,\n            self.listar_traducoes_use_case\n        )\n\n        self.cmd_alternar_idioma = ComandoAlternarIdioma(\n            self.listar_traducoes_use_case,\n            self.obter_use_case\n        )\n\n        self.cmd_analisar_doc = ComandoAnalisarDocumento(self.analisar_documento_use_case)\n        self.cmd_analisar_acervo = ComandoAnalisarAcervo(self.analisar_acervo_use_case)\n\n        # =====================================================\n        # 4. MENUS\n        # =====================================================\n        self.menu_principal = MenuPrincipal(self)\n        self.menu_centro = MenuCentro()\n</code></pre>"},{"location":"fases/FASE4_CLI/#6-visualizacao-de-documento-com-traducoes","title":"6. Visualiza\u00e7\u00e3o de Documento com Tradu\u00e7\u00f5es","text":"<pre><code>def _visualizar_e_aguardar(self, doc_id: int):\n    \"\"\"Visualiza documento com altern\u00e2ncia de idiomas.\"\"\"\n    idioma_atual = 'original'\n\n    while True:\n        # Buscar documento (original ou tradu\u00e7\u00e3o)\n        if idioma_atual == 'original':\n            dto = self.obter_use_case.executar(doc_id)\n        else:\n            # Buscar tradu\u00e7\u00e3o espec\u00edfica\n            traducoes = self.listar_traducoes_use_case.executar(doc_id)\n            traducao = next((t for t in traducoes if t.idioma == idioma_atual), None)\n\n            if traducao:\n                dto = self.obter_use_case.executar(doc_id)\n                dto.texto = traducao.texto_traduzido\n                dto.titulo = f\"{dto.titulo} [{traducao.idioma_nome}]\"\n            else:\n                dto = self.obter_use_case.executar(doc_id)\n                idioma_atual = 'original'\n\n        # Mostrar badge do idioma atual\n        console.print(TraducaoPresenter.badge_idioma_atual(idioma_atual))\n\n        # Mostrar documento\n        DocumentoPresenter.documento_completo(dto)\n\n        # Mostrar tradu\u00e7\u00f5es dispon\u00edveis\n        traducoes = self.listar_traducoes_use_case.executar(doc_id)\n        if traducoes:\n            console.print(\"\\n[bold cyan]\ud83c\udf10 TRADU\u00c7\u00d5ES DISPON\u00cdVEIS:[/bold cyan]\")\n            for t in traducoes:\n                console.print(f\"    {t.idioma_icone} {t.idioma_nome}\")\n\n        # Comandos\n        console.print(\"\\n[dim]\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500[/dim]\")\n        console.print(\"[bold cyan]COMANDOS[/bold cyan]\")\n        console.print(\"  [green]\u23ce Enter[/green] - Voltar\")\n        console.print(\"  [yellow]e[/yellow] - Exportar\")\n        console.print(\"  [cyan]t[/cyan] - Alternar idioma\")\n        console.print(\"  [blue]n[/blue] - Nova tradu\u00e7\u00e3o\")\n\n        cmd = input(\"\\nComando: \").strip().lower()\n\n        if cmd == '':\n            break\n        elif cmd == 't':\n            idioma_atual = self.cmd_alternar_idioma.executar(doc_id, idioma_atual)\n        elif cmd == 'n':\n            resultado = self.cmd_traduzir.executar(doc_id)\n            if resultado:\n                idioma_atual = resultado.idioma\n        elif cmd == 'e':\n            self.cmd_exportar.executar(doc_id)\n</code></pre>"},{"location":"fases/FASE4_CLI/#testes-manuais","title":"\ud83e\uddea Testes (Manuais)","text":""},{"location":"fases/FASE4_CLI/#checklist-de-validacao","title":"Checklist de Valida\u00e7\u00e3o","text":"Cen\u00e1rio A\u00e7\u00e3o Resultado Esperado Menu principal Executar <code>python run.py</code> Banner + 7 op\u00e7\u00f5es Listar todos Op\u00e7\u00e3o 1 Tabela paginada com 15 itens Navega\u00e7\u00e3o Tecla 'n' Pr\u00f3xima p\u00e1gina Navega\u00e7\u00e3o Tecla 'p' P\u00e1gina anterior Ver documento Digitar ID Metadados + conte\u00fado Filtro por centro Op\u00e7\u00e3o 2 \u2192 1 Apenas Leningrad Tradu\u00e7\u00f5es Visualizar doc com tradu\u00e7\u00e3o Badge \u2705 na coluna Alternar idioma Tecla 't' Muda entre original/tradu\u00e7\u00e3o Nova tradu\u00e7\u00e3o Tecla 'n' Menu de idiomas Exportar Tecla 'e' Menu de exporta\u00e7\u00e3o Estat\u00edsticas Op\u00e7\u00e3o 4 Dashboard completo Relat\u00f3rios Op\u00e7\u00e3o 5 Menu de relat\u00f3rios An\u00e1lise Op\u00e7\u00e3o 6 Menu de an\u00e1lise Sair Op\u00e7\u00e3o 7 Mensagem de despedida"},{"location":"fases/FASE4_CLI/#fluxo-de-dados-na-cli","title":"\ud83d\udd04 Fluxo de Dados na CLI","text":"<pre><code>[Usu\u00e1rio] \u2192 [Menu] \u2192 [Comando] \u2192 [Caso de Uso] \u2192 [Reposit\u00f3rio]\n    \u2191          \u2191          \u2191             \u2191               \u2191\n    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                         [DTOs]\n</code></pre> <p>Exemplo pr\u00e1tico (Listar documentos):</p> <pre><code>1. Usu\u00e1rio digita '1' no menu\n2. Menu chama self.cmd_listar.executar()\n3. Comando chama listar_use_case.executar(pagina=1)\n4. Caso de uso calcula offset e chama repo.listar()\n5. Reposit\u00f3rio retorna entidades\n6. Caso de uso converte para DTOs\n7. Presenter formata DTOs em tabela\n8. Usu\u00e1rio v\u00ea resultado\n</code></pre>"},{"location":"fases/FASE4_CLI/#metricas-da-fase","title":"\ud83d\udcca M\u00e9tricas da Fase","text":"M\u00e9trica Valor Arquivos de interface 12 Comandos implementados 8 Presenters 3 Menus 3 Linhas de c\u00f3digo ~1500 Testes manuais 15 cen\u00e1rios"},{"location":"fases/FASE4_CLI/#principios-aplicados","title":"\ud83d\udcda Princ\u00edpios Aplicados","text":"Princ\u00edpio Aplica\u00e7\u00e3o Inje\u00e7\u00e3o de Depend\u00eancia Casos de uso injetados nos comandos Separa\u00e7\u00e3o de Responsabilidades Presenters formatam, comandos orquestram Single Responsibility Cada comando faz uma coisa Composi\u00e7\u00e3o App composto por casos de uso e comandos DRY Fun\u00e7\u00f5es de UI centralizadas no console.py"},{"location":"fases/FASE4_CLI/#integracao-com-fases-anteriores-e-futuras","title":"\ud83d\udd17 Integra\u00e7\u00e3o com Fases Anteriores e Futuras","text":"Fase Relacionamento FASE 1 (Domain) Usa value objects via presenters FASE 2 (Application) Usa casos de uso e DTOs FASE 3 (Infrastructure) Reposit\u00f3rios injetados nos casos de uso FASE 5 (Tradu\u00e7\u00e3o) Comandos de tradu\u00e7\u00e3o integrados FASE 6 (Exporta\u00e7\u00e3o) Comandos de exporta\u00e7\u00e3o FASE 7 (Relat\u00f3rios) Comandos de relat\u00f3rios FASE 8 (An\u00e1lise) Comandos de an\u00e1lise FASE 9 (Web) Mesmos casos de uso, presenters diferentes"},{"location":"fases/FASE4_CLI/#evolucao-do-codigo","title":"\ud83d\ude80 Evolu\u00e7\u00e3o do C\u00f3digo","text":""},{"location":"fases/FASE4_CLI/#antes-codigo-legado-nav_uipy","title":"Antes (c\u00f3digo legado - <code>nav_ui.py</code>)","text":"<pre><code># C\u00f3digo misturado, SQL na UI\ndef navegar_lista():\n    conn = sqlite3.connect('data.db')\n    cursor = conn.cursor()\n    cursor.execute(\"SELECT * FROM documentos\")\n    # L\u00f3gica de pagina\u00e7\u00e3o manual\n    # Formata\u00e7\u00e3o manual\n</code></pre>"},{"location":"fases/FASE4_CLI/#depois-clean-architecture","title":"Depois (Clean Architecture)","text":"<pre><code># UI pura, sem saber de banco\ndef navegar_lista(self):\n    resultados = self.listar_use_case.executar(pagina=pagina)\n    self.presenter.tabela_documentos(resultados)\n</code></pre>"},{"location":"fases/FASE4_CLI/#metricas-do-projeto-apos-fase-4","title":"\ud83d\udcc8 M\u00e9tricas do Projeto (Ap\u00f3s FASE 4)","text":"<pre><code>\ud83d\udcca DOMAIN LAYER: 3 m\u00f3dulos | 13 testes\n\ud83d\udcca APPLICATION LAYER: 4 casos de uso | 4 testes\n\ud83d\udcca INFRASTRUCTURE LAYER: 3 m\u00f3dulos | 13 testes\n\ud83d\udcca INTERFACE LAYER: 12 m\u00f3dulos | Validada manualmente\n\ud83d\udcca TOTAL: 30 testes automatizados + interface validada\n</code></pre>"},{"location":"fases/FASE4_CLI/#licoes-aprendidas","title":"\ud83d\udd0d Li\u00e7\u00f5es Aprendidas","text":"<ol> <li>Rich \u00e9 poderoso: Tabelas, pain\u00e9is e spinners melhoram muito a experi\u00eancia</li> <li>Presenters simplificam a UI: Separam formata\u00e7\u00e3o da l\u00f3gica</li> <li>Comandos devem ser pequenos: Cada comando faz uma coisa bem feita</li> <li>Menus aninhados funcionam bem: Submenus para funcionalidades complexas</li> <li>Feedback \u00e9 essencial: Spinners e mensagens de erro/sucesso</li> <li>Inje\u00e7\u00e3o de depend\u00eancia facilita testes: Comandos podem ser testados com mocks</li> </ol>"},{"location":"fases/FASE4_CLI/#conclusao-da-fase","title":"\ud83c\udfc1 Conclus\u00e3o da Fase","text":"<p>A FASE 4 entregou uma CLI profissional com:</p> <p>\u2705 Navega\u00e7\u00e3o intuitiva por menus \u2705 Tabelas coloridas e paginadas \u2705 Visualiza\u00e7\u00e3o detalhada de documentos \u2705 Altern\u00e2ncia entre original/tradu\u00e7\u00e3o \u2705 Exporta\u00e7\u00e3o de documentos \u2705 Relat\u00f3rios e estat\u00edsticas \u2705 An\u00e1lise de texto \u2705 Integra\u00e7\u00e3o completa com todas as fases \u2705 C\u00f3digo limpo e organizado</p>"},{"location":"fases/FASE4_CLI/#autor","title":"\ud83d\udc64 Autor","text":"<p>Thiago Ribeiro - Projeto de TCC</p> <sub>FASE 4 conclu\u00edda em 15 de Fevereiro de 2024</sub> <sub>\u2705 Pronto para a FASE 5 - Tradu\u00e7\u00e3o Avan\u00e7ada</sub> <p>```</p>"},{"location":"fases/FASE5_TRADUCAO/","title":"FASE 5 - Tradu\u00e7\u00e3o Avan\u00e7ada","text":"**Sistema completo de tradu\u00e7\u00e3o com Google Translate, persist\u00eancia e altern\u00e2ncia de idiomas**"},{"location":"fases/FASE5_TRADUCAO/#informacoes-da-fase","title":"\ud83d\udcc5 Informa\u00e7\u00f5es da Fase","text":"Item Descri\u00e7\u00e3o Status \u2705 Conclu\u00edda Data de Conclus\u00e3o 15 de Fevereiro de 2024 Artefatos Entidade Traducao, Reposit\u00f3rio, Casos de Uso, Comandos CLI Testes 5 cen\u00e1rios manuais Depend\u00eancias FASE 1, 2, 3, 4, Google Cloud Translation API"},{"location":"fases/FASE5_TRADUCAO/#objetivo","title":"\ud83c\udfaf Objetivo","text":"<p>Implementar um sistema completo de tradu\u00e7\u00e3o que:</p> <ul> <li>Integre com Google Cloud Translation API</li> <li>Permita traduzir documentos para m\u00faltiplos idiomas</li> <li>Persista tradu\u00e7\u00f5es no banco de dados</li> <li>Ofere\u00e7a altern\u00e2ncia entre original e tradu\u00e7\u00f5es</li> <li>Calcule e exiba custos estimados</li> <li>Forne\u00e7a feedback visual durante o processo</li> </ul>"},{"location":"fases/FASE5_TRADUCAO/#estrutura-criadamodificada","title":"\ud83d\udcc1 Estrutura Criada/Modificada","text":"<pre><code>src/\n\u251c\u2500\u2500 domain/\n\u2502   \u251c\u2500\u2500 entities/\n\u2502   \u2502   \u2514\u2500\u2500 traducao.py                 # Nova entidade\n\u2502   \u2514\u2500\u2500 interfaces/\n\u2502       \u2514\u2500\u2500 repositorio_traducao.py     # Nova interface\n\u251c\u2500\u2500 application/\n\u2502   \u251c\u2500\u2500 use_cases/\n\u2502   \u2502   \u251c\u2500\u2500 traduzir_documento.py       # Novo caso de uso\n\u2502   \u2502   \u2514\u2500\u2500 listar_traducoes.py         # Novo caso de uso\n\u2502   \u2514\u2500\u2500 dtos/\n\u2502       \u2514\u2500\u2500 traducao_dto.py             # Novo DTO\n\u251c\u2500\u2500 infrastructure/\n\u2502   \u251c\u2500\u2500 persistence/\n\u2502   \u2502   \u2514\u2500\u2500 sqlite_traducao_repository.py  # Novo reposit\u00f3rio\n\u2502   \u2514\u2500\u2500 translation/\n\u2502       \u2514\u2500\u2500 google_translator.py        # Adaptador (refatorado)\n\u2514\u2500\u2500 interface/\n    \u2514\u2500\u2500 cli/\n        \u251c\u2500\u2500 commands_traducao.py        # Novos comandos\n        \u2514\u2500\u2500 presenters_traducao.py      # Novos presenters\n</code></pre>"},{"location":"fases/FASE5_TRADUCAO/#componentes-implementados","title":"\ud83e\udde9 Componentes Implementados","text":""},{"location":"fases/FASE5_TRADUCAO/#1-entidade-traducao-domainentitiestraducaopy","title":"1. Entidade Traducao (<code>domain/entities/traducao.py</code>)","text":"<p>Responsabilidade: Representar uma tradu\u00e7\u00e3o no dom\u00ednio.</p> <pre><code>@dataclass\nclass Traducao:\n    \"\"\"\n    Representa uma tradu\u00e7\u00e3o de um documento.\n\n    Attributes:\n        id: Identificador \u00fanico\n        documento_id: ID do documento original\n        idioma: C\u00f3digo do idioma (en, pt, es, fr)\n        texto_traduzido: Conte\u00fado traduzido\n        modelo: Modelo usado (nmt, base)\n        custo: Custo estimado em USD\n        data_traducao: Data da tradu\u00e7\u00e3o\n    \"\"\"\n\n    documento_id: int\n    idioma: str\n    texto_traduzido: str\n    data_traducao: datetime\n\n    id: Optional[int] = None\n    modelo: Optional[str] = None\n    custo: float = 0.0\n\n    def __post_init__(self):\n        \"\"\"Valida\u00e7\u00f5es ap\u00f3s inicializa\u00e7\u00e3o.\"\"\"\n        idiomas_validos = ['en', 'pt', 'es', 'fr']\n        if self.idioma not in idiomas_validos:\n            raise ValueError(f\"Idioma inv\u00e1lido: {self.idioma}\")\n\n        if not self.texto_traduzido:\n            raise ValueError(\"Texto traduzido n\u00e3o pode ser vazio\")\n\n    @property\n    def idioma_nome(self) -&gt; str:\n        \"\"\"Nome do idioma em portugu\u00eas.\"\"\"\n        nomes = {\n            'en': 'Ingl\u00eas',\n            'pt': 'Portugu\u00eas',\n            'es': 'Espanhol',\n            'fr': 'Franc\u00eas'\n        }\n        return nomes.get(self.idioma, self.idioma.upper())\n\n    @property\n    def idioma_icone(self) -&gt; str:\n        \"\"\"\u00cdcone do idioma.\"\"\"\n        icons = {\n            'en': '\ud83c\uddfa\ud83c\uddf8',\n            'pt': '\ud83c\udde7\ud83c\uddf7',\n            'es': '\ud83c\uddea\ud83c\uddf8',\n            'fr': '\ud83c\uddeb\ud83c\uddf7'\n        }\n        return icons.get(self.idioma, '\ud83c\udf10')\n</code></pre>"},{"location":"fases/FASE5_TRADUCAO/#2-interface-repositoriotraducao-domaininterfacesrepositorio_traducaopy","title":"2. Interface RepositorioTraducao (<code>domain/interfaces/repositorio_traducao.py</code>)","text":"<p>Responsabilidade: Definir contrato para persist\u00eancia de tradu\u00e7\u00f5es.</p> <pre><code>class RepositorioTraducao(ABC):\n    \"\"\"Interface para reposit\u00f3rio de tradu\u00e7\u00f5es.\"\"\"\n\n    @abstractmethod\n    def salvar(self, traducao: Traducao) -&gt; int:\n        \"\"\"Salva uma tradu\u00e7\u00e3o.\"\"\"\n        pass\n\n    @abstractmethod\n    def buscar_por_id(self, id: int) -&gt; Optional[Traducao]:\n        \"\"\"Busca tradu\u00e7\u00e3o por ID.\"\"\"\n        pass\n\n    @abstractmethod\n    def buscar_por_documento(self, documento_id: int, idioma: str) -&gt; Optional[Traducao]:\n        \"\"\"Busca tradu\u00e7\u00e3o espec\u00edfica de um documento.\"\"\"\n        pass\n\n    @abstractmethod\n    def listar_por_documento(self, documento_id: int) -&gt; List[Traducao]:\n        \"\"\"Lista todas as tradu\u00e7\u00f5es de um documento.\"\"\"\n        pass\n\n    @abstractmethod\n    def contar_por_documento(self, documento_id: int) -&gt; int:\n        \"\"\"Conta tradu\u00e7\u00f5es de um documento.\"\"\"\n        pass\n</code></pre>"},{"location":"fases/FASE5_TRADUCAO/#3-dto-de-traducao-applicationdtostraducao_dtopy","title":"3. DTO de Tradu\u00e7\u00e3o (<code>application/dtos/traducao_dto.py</code>)","text":"<pre><code>@dataclass\nclass TraducaoDTO:\n    \"\"\"DTO para exibi\u00e7\u00e3o de tradu\u00e7\u00e3o.\"\"\"\n\n    id: Optional[int]\n    documento_id: int\n    idioma: str\n    idioma_nome: str\n    idioma_icone: str\n    texto_traduzido: str\n    data_traducao: str\n    modelo: Optional[str]\n    custo: float\n\n    @classmethod\n    def from_domain(cls, traducao):\n        \"\"\"Converte entidade para DTO.\"\"\"\n        return cls(\n            id=traducao.id,\n            documento_id=traducao.documento_id,\n            idioma=traducao.idioma,\n            idioma_nome=traducao.idioma_nome,\n            idioma_icone=traducao.idioma_icone,\n            texto_traduzido=traducao.texto_traduzido,\n            data_traducao=traducao.data_traducao.isoformat()[:10],\n            modelo=traducao.modelo,\n            custo=traducao.custo\n        )\n</code></pre>"},{"location":"fases/FASE5_TRADUCAO/#4-caso-de-uso-traduzirdocumento-applicationuse_casestraduzir_documentopy","title":"4. Caso de Uso TraduzirDocumento (<code>application/use_cases/traduzir_documento.py</code>)","text":"<p>Responsabilidade: Orquestrar o processo de tradu\u00e7\u00e3o.</p> <pre><code>class TraduzirDocumento:\n    \"\"\"\n    Caso de uso para traduzir um documento.\n    \"\"\"\n\n    def __init__(self,\n                 repo_doc: RepositorioDocumento,\n                 repo_trad: RepositorioTraducao,\n                 tradutor_service):  # Servi\u00e7o externo\n        self.repo_doc = repo_doc\n        self.repo_trad = repo_trad\n        self.tradutor = tradutor_service\n\n    def executar(self,\n                 documento_id: int,\n                 idioma_destino: str = 'en',\n                 forcar_novo: bool = False) -&gt; Optional[TraducaoDTO]:\n        \"\"\"\n        Traduz um documento para o idioma especificado.\n\n        Args:\n            documento_id: ID do documento original\n            idioma_destino: C\u00f3digo do idioma (en, pt, es, fr)\n            forcar_novo: Se True, ignora tradu\u00e7\u00e3o existente\n\n        Returns:\n            TraducaoDTO da tradu\u00e7\u00e3o (nova ou existente)\n        \"\"\"\n        # 1. Verificar se documento existe\n        documento = self.repo_doc.buscar_por_id(documento_id)\n        if not documento:\n            raise ValueError(f\"Documento {documento_id} n\u00e3o encontrado\")\n\n        # 2. Verificar se j\u00e1 existe tradu\u00e7\u00e3o\n        if not forcar_novo:\n            existente = self.repo_trad.buscar_por_documento(documento_id, idioma_destino)\n            if existente:\n                return TraducaoDTO.from_domain(existente)\n\n        # 3. Traduzir\n        try:\n            texto_traduzido = self.tradutor.traduzir_documento_completo(\n                documento.texto,\n                destino=idioma_destino\n            )\n        except Exception as e:\n            raise RuntimeError(f\"Erro na tradu\u00e7\u00e3o: {e}\")\n\n        # 4. Criar entidade de tradu\u00e7\u00e3o\n        traducao = Traducao(\n            documento_id=documento_id,\n            idioma=idioma_destino,\n            texto_traduzido=texto_traduzido,\n            data_traducao=datetime.now(),\n            modelo='nmt',\n            custo=len(documento.texto) * 0.000020\n        )\n\n        # 5. Salvar\n        traducao.id = self.repo_trad.salvar(traducao)\n\n        return TraducaoDTO.from_domain(traducao)\n</code></pre>"},{"location":"fases/FASE5_TRADUCAO/#5-caso-de-uso-listartraducoes-applicationuse_caseslistar_traducoespy","title":"5. Caso de Uso ListarTraducoes (<code>application/use_cases/listar_traducoes.py</code>)","text":"<pre><code>class ListarTraducoes:\n    \"\"\"\n    Caso de uso para listar tradu\u00e7\u00f5es de um documento.\n    \"\"\"\n\n    def __init__(self, repo: RepositorioTraducao):\n        self.repo = repo\n\n    def executar(self, documento_id: int) -&gt; List[TraducaoDTO]:\n        \"\"\"\n        Retorna lista de tradu\u00e7\u00f5es do documento.\n        \"\"\"\n        traducoes = self.repo.listar_por_documento(documento_id)\n        return [TraducaoDTO.from_domain(t) for t in traducoes]\n\n    def contar(self, documento_id: int) -&gt; int:\n        \"\"\"Retorna n\u00famero de tradu\u00e7\u00f5es do documento.\"\"\"\n        return self.repo.contar_por_documento(documento_id)\n</code></pre>"},{"location":"fases/FASE5_TRADUCAO/#6-repositorio-sqlite-de-traducoes-infrastructurepersistencesqlite_traducao_repositorypy","title":"6. Reposit\u00f3rio SQLite de Tradu\u00e7\u00f5es (<code>infrastructure/persistence/sqlite_traducao_repository.py</code>)","text":"<pre><code>class SQLiteTraducaoRepository(RepositorioTraducao):\n    \"\"\"Reposit\u00f3rio SQLite para tradu\u00e7\u00f5es.\"\"\"\n\n    def __init__(self, db_path: Optional[str] = None):\n        self.db_path = db_path or str(settings.DB_PATH)\n\n    @contextmanager\n    def _conexao(self):\n        \"\"\"Gerenciador de contexto para conex\u00f5es.\"\"\"\n        conn = sqlite3.connect(self.db_path)\n        conn.row_factory = sqlite3.Row\n        try:\n            yield conn\n            conn.commit()\n        except Exception:\n            conn.rollback()\n            raise\n        finally:\n            conn.close()\n\n    def salvar(self, traducao: Traducao) -&gt; int:\n        \"\"\"Salva uma tradu\u00e7\u00e3o.\"\"\"\n        with self._conexao() as conn:\n            cursor = conn.cursor()\n\n            if traducao.id:\n                # Update\n                cursor.execute(\"\"\"\n                    UPDATE traducoes SET\n                        idioma = ?,\n                        texto_traduzido = ?,\n                        modelo = ?,\n                        custo = ?,\n                        data_traducao = ?\n                    WHERE id = ?\n                \"\"\", (...))\n                return traducao.id\n            else:\n                # Insert\n                cursor.execute(\"\"\"\n                    INSERT INTO traducoes\n                    (documento_id, idioma, texto_traduzido, modelo, custo, data_traducao)\n                    VALUES (?, ?, ?, ?, ?, ?)\n                \"\"\", (...))\n                return cursor.lastrowid\n\n    def buscar_por_documento(self, documento_id: int, idioma: str) -&gt; Optional[Traducao]:\n        \"\"\"Busca tradu\u00e7\u00e3o espec\u00edfica de um documento.\"\"\"\n        with self._conexao() as conn:\n            cursor = conn.cursor()\n            cursor.execute(\"\"\"\n                SELECT * FROM traducoes\n                WHERE documento_id = ? AND idioma = ?\n            \"\"\", (documento_id, idioma))\n            row = cursor.fetchone()\n            return self._row_para_entidade(row) if row else None\n\n    def listar_por_documento(self, documento_id: int) -&gt; List[Traducao]:\n        \"\"\"Lista todas as tradu\u00e7\u00f5es de um documento.\"\"\"\n        with self._conexao() as conn:\n            cursor = conn.cursor()\n            cursor.execute(\"\"\"\n                SELECT * FROM traducoes\n                WHERE documento_id = ?\n                ORDER BY idioma\n            \"\"\", (documento_id,))\n            return [self._row_para_entidade(row) for row in cursor.fetchall()]\n</code></pre>"},{"location":"fases/FASE5_TRADUCAO/#7-adaptador-google-translate-infrastructuretranslationgoogle_translatorpy","title":"7. Adaptador Google Translate (<code>infrastructure/translation/google_translator.py</code>)","text":"<p>Responsabilidade: Integrar com a API do Google Translate.</p> <pre><code>class GoogleTranslator:\n    \"\"\"\n    Cliente para Google Cloud Translation API.\n    \"\"\"\n\n    # Tabela de pre\u00e7os (US$) por caractere\n    PRICING = {\n        'nmt': 0.000020,  # Neural Machine Translation\n        'general': 0.000020,\n        'default': 0.000020\n    }\n\n    def __init__(self,\n                 credentials_path: Optional[str] = None,\n                 api_key: Optional[str] = None):\n        self.api_key = api_key or os.getenv('GOOGLE_TRANSLATE_API_KEY')\n        self._client = self._inicializar()\n\n    def _inicializar(self):\n        \"\"\"Inicializa o cliente Google Translate.\"\"\"\n        try:\n            if self.api_key:\n                return translate.Client(api_key=self.api_key)\n            return translate.Client()\n        except Exception as e:\n            print(f\"\u26a0\ufe0f Falha ao inicializar tradutor: {e}\")\n            return None\n\n    def traduzir(self, texto: str, destino: str = 'en') -&gt; str:\n        \"\"\"Traduz texto para o idioma destino.\"\"\"\n        if self._client is None:\n            return self._simular_traducao(texto, destino)\n\n        resultado = self._client.translate(texto, target_language=destino)\n        return resultado['translatedText']\n\n    def traduzir_documento_completo(self,\n                                   texto: str,\n                                   destino: str = 'en',\n                                   chunk_size: int = 3000) -&gt; str:\n        \"\"\"\n        Traduz documentos grandes dividindo em chunks.\n        \"\"\"\n        # Dividir em par\u00e1grafos\n        paragrafos = texto.split('\\n')\n        chunks = []\n        chunk_atual = []\n        tamanho_atual = 0\n\n        for para in paragrafos:\n            if tamanho_atual + len(para) &lt; chunk_size:\n                chunk_atual.append(para)\n                tamanho_atual += len(para)\n            else:\n                chunks.append('\\n'.join(chunk_atual))\n                chunk_atual = [para]\n                tamanho_atual = len(para)\n\n        if chunk_atual:\n            chunks.append('\\n'.join(chunk_atual))\n\n        print(f\"\ud83d\udcc4 Documento dividido em {len(chunks)} partes\")\n\n        # Traduzir cada chunk\n        traducoes = []\n        for i, chunk in enumerate(chunks, 1):\n            print(f\"  \u21b3 Traduzindo parte {i}/{len(chunks)}...\")\n            try:\n                resultado = self.traduzir(chunk, destino=destino)\n                traducoes.append(resultado)\n                time.sleep(0.5)  # Rate limiting\n            except Exception as e:\n                print(f\"    \u26a0\ufe0f Erro: {e}\")\n                traducoes.append(\"\")\n\n        return '\\n'.join(traducoes)\n\n    def _simular_traducao(self, texto: str, destino: str) -&gt; str:\n        \"\"\"Simula tradu\u00e7\u00e3o para testes (fallback).\"\"\"\n        return f\"[{destino.upper()} SIMULA\u00c7\u00c3O] {texto[:100]}...\"\n</code></pre>"},{"location":"fases/FASE5_TRADUCAO/#8-comandotraduzir-interfaceclicommands_traducaopy","title":"8. ComandoTraduzir (<code>interface/cli/commands_traducao.py</code>)","text":"<p>Responsabilidade: Interface interativa para nova tradu\u00e7\u00e3o.</p> <pre><code>class ComandoTraduzir:\n    \"\"\"Comando para criar nova tradu\u00e7\u00e3o.\"\"\"\n\n    def __init__(self, traduzir_use_case, listar_trad_use_case):\n        self.traduzir_use_case = traduzir_use_case\n        self.listar_trad_use_case = listar_trad_use_case\n        self.presenter = TraducaoPresenter()\n\n    def executar(self, documento_id: int):\n        \"\"\"Executa tradu\u00e7\u00e3o interativa.\"\"\"\n        # 1. Mostrar tradu\u00e7\u00f5es existentes\n        traducoes = self.listar_trad_use_case.executar(documento_id)\n\n        if traducoes:\n            console.print(\"\\n[bold cyan]\ud83c\udf10 Tradu\u00e7\u00f5es existentes:[/bold cyan]\")\n            for t in traducoes:\n                console.print(\n                    f\"  \u2022 {self.presenter.badge_idioma(t.idioma)} - \"\n                    f\"{t.idioma_nome} [dim]({t.data_traducao})[/dim]\"\n                )\n\n        # 2. Escolher idioma\n        console.print(\"\\n[bold cyan]Idiomas dispon\u00edveis:[/bold cyan]\")\n        console.print(\"  [1] \ud83c\uddfa\ud83c\uddf8 Ingl\u00eas (en)\")\n        console.print(\"  [2] \ud83c\udde7\ud83c\uddf7 Portugu\u00eas (pt)\")\n        console.print(\"  [3] \ud83c\uddea\ud83c\uddf8 Espanhol (es)\")\n        console.print(\"  [4] \ud83c\uddeb\ud83c\uddf7 Franc\u00eas (fr)\")\n        console.print(\"  [0] Cancelar\")\n\n        opcao = input(\"\\nEscolha: \").strip()\n\n        idiomas = {'1': 'en', '2': 'pt', '3': 'es', '4': 'fr'}\n        if opcao == '0':\n            return None\n        if opcao not in idiomas:\n            console.mostrar_erro(\"Op\u00e7\u00e3o inv\u00e1lida!\")\n            return None\n\n        idioma = idiomas[opcao]\n\n        # 3. Verificar se j\u00e1 existe\n        existente = next((t for t in traducoes if t.idioma == idioma), None)\n        if existente:\n            console.print(f\"\\n[yellow]\u26a0 J\u00e1 existe tradu\u00e7\u00e3o para {existente.idioma_nome}[/yellow]\")\n            console.print(f\"   Data: {existente.data_traducao}\")\n            console.print(f\"   Custo: ${existente.custo:.4f}\")\n\n            confirmar = input(\"Substituir? (s/N): \").strip().lower()\n            if confirmar != 's':\n                return None\n\n        # 4. Estimar custo\n        console.print(\"\\n[bold]\ud83d\udcca Estimativa de custo:[/bold]\")\n        console.print(\"  \u2022 Pre\u00e7o: $0.000020 por caractere\")\n        console.print(\"  \u2022 Confirme na pr\u00f3xima etapa\")\n\n        confirmar = input(\"\\nConfirmar? (s/N): \").strip().lower()\n        if confirmar != 's':\n            return None\n\n        # 5. Traduzir com spinner\n        try:\n            resultado = console.spinner(\n                f\"\ud83c\udf10 Traduzindo para {idioma}...\",\n                self.traduzir_use_case.executar,\n                documento_id,\n                idioma,\n                forcar_novo=True\n            )\n\n            console.mostrar_sucesso(f\"\u2705 Tradu\u00e7\u00e3o conclu\u00edda! ({resultado.idioma_nome})\")\n            console.mostrar_sucesso(f\"   Custo: ${resultado.custo:.4f}\")\n\n            return resultado\n\n        except Exception as e:\n            console.mostrar_erro(f\"Erro na tradu\u00e7\u00e3o: {e}\")\n            return None\n</code></pre>"},{"location":"fases/FASE5_TRADUCAO/#9-comandoalternaridioma-interfaceclicommands_traducaopy","title":"9. ComandoAlternarIdioma (<code>interface/cli/commands_traducao.py</code>)","text":"<p>Responsabilidade: Alternar entre original e tradu\u00e7\u00f5es.</p> <pre><code>class ComandoAlternarIdioma:\n    \"\"\"Comando para alternar entre idiomas durante visualiza\u00e7\u00e3o.\"\"\"\n\n    def __init__(self, listar_trad_use_case, obter_documento_use_case):\n        self.listar_trad_use_case = listar_trad_use_case\n        self.obter_documento_use_case = obter_documento_use_case\n\n    def executar(self, documento_id: int, idioma_atual: str = 'original') -&gt; str:\n        \"\"\"\n        Alterna entre original e tradu\u00e7\u00f5es dispon\u00edveis.\n        Retorna o novo idioma selecionado.\n        \"\"\"\n        traducoes = self.listar_trad_use_case.executar(documento_id)\n\n        if not traducoes:\n            console.mostrar_erro(\"Este documento n\u00e3o tem tradu\u00e7\u00f5es.\")\n            return 'original'\n\n        # Determinar pr\u00f3ximo idioma\n        if idioma_atual == 'original':\n            return traducoes[0].idioma\n        else:\n            idiomas = [t.idioma for t in traducoes]\n            try:\n                idx = idiomas.index(idioma_atual)\n                if idx + 1 &lt; len(idiomas):\n                    return idiomas[idx + 1]\n                else:\n                    return 'original'\n            except ValueError:\n                return traducoes[0].idioma\n</code></pre>"},{"location":"fases/FASE5_TRADUCAO/#10-presenter-de-traducao-interfaceclipresenters_traducaopy","title":"10. Presenter de Tradu\u00e7\u00e3o (<code>interface/cli/presenters_traducao.py</code>)","text":"<pre><code>class TraducaoPresenter:\n    \"\"\"Formata tradu\u00e7\u00f5es para exibi\u00e7\u00e3o.\"\"\"\n\n    @staticmethod\n    def badge_idioma(idioma: str) -&gt; str:\n        \"\"\"Retorna badge colorido para idioma.\"\"\"\n        badges = {\n            'en': '[bold blue]\ud83c\uddfa\ud83c\uddf8 EN[/bold blue]',\n            'pt': '[bold green]\ud83c\udde7\ud83c\uddf7 PT[/bold green]',\n            'es': '[bold yellow]\ud83c\uddea\ud83c\uddf8 ES[/bold yellow]',\n            'fr': '[bold magenta]\ud83c\uddeb\ud83c\uddf7 FR[/bold magenta]',\n        }\n        return badges.get(idioma, f'[dim]{idioma}[/dim]')\n\n    @classmethod\n    def badge_idioma_atual(cls, idioma: str):\n        \"\"\"Exibe badge indicando idioma atual.\"\"\"\n        if idioma == 'original':\n            return Panel(\"[bold blue]\ud83d\udcc4 ORIGINAL (Russo)[/bold blue]\", border_style=\"blue\")\n        else:\n            return Panel(\n                f\"[bold green]\ud83c\udf10 TRADU\u00c7\u00c3O {cls.badge_idioma(idioma)}[/bold green]\",\n                border_style=\"green\"\n            )\n\n    @classmethod\n    def lista_traducoes(cls, traducoes, documento_id: int):\n        \"\"\"Exibe lista de tradu\u00e7\u00f5es dispon\u00edveis.\"\"\"\n        if not traducoes:\n            return\n\n        console.print(\"\\n[bold cyan]\ud83c\udf10 TRADU\u00c7\u00d5ES DISPON\u00cdVEIS:[/bold cyan]\")\n        for t in traducoes:\n            console.print(\n                f\"  \u2022 {cls.badge_idioma(t.idioma)} - \"\n                f\"{t.idioma_nome} [dim]({t.data_traducao})[/dim]\"\n            )\n</code></pre>"},{"location":"fases/FASE5_TRADUCAO/#fluxo-completo-de-traducao","title":"\ud83d\udd04 Fluxo Completo de Tradu\u00e7\u00e3o","text":"<pre><code>[Usu\u00e1rio] \u2192 [tecla 'n'] \u2192 [ComandoTraduzir] \u2192 [TraduzirDocumento (caso de uso)]\n    \u2191                                                    |\n    |                                                    \u2193\n    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 [Presenter] \u2190 [TraducaoDTO] \u2190 [GoogleTranslator]\n                              |\n                              \u2193\n                    [SQLiteTraducaoRepository]\n                              |\n                              \u2193\n                        [Banco de Dados]\n</code></pre> <p>Passo a passo:</p> <ol> <li>Usu\u00e1rio aperta 'n' durante visualiza\u00e7\u00e3o</li> <li>ComandoTraduzir pergunta idioma e confirma custo</li> <li>Caso de uso TraduzirDocumento verifica documento</li> <li>GoogleTranslator traduz (com chunking se necess\u00e1rio)</li> <li>Traducao \u00e9 criada e persistida no banco</li> <li>TraducaoDTO \u00e9 retornado para a interface</li> <li>Usu\u00e1rio v\u00ea mensagem de sucesso e muda para o novo idioma</li> </ol>"},{"location":"fases/FASE5_TRADUCAO/#fluxo-de-alternancia-de-idiomas","title":"\ud83d\udd04 Fluxo de Altern\u00e2ncia de Idiomas","text":"<pre><code>[Usu\u00e1rio] \u2192 [tecla 't'] \u2192 [ComandoAlternarIdioma] \u2192 [ListarTraducoes]\n    \u2191                                                    |\n    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 [Presenter] \u2190 [DTO] \u2190\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre> <p>Passo a passo:</p> <ol> <li>Usu\u00e1rio aperta 't' durante visualiza\u00e7\u00e3o</li> <li>ComandoAlternarIdioma consulta tradu\u00e7\u00f5es dispon\u00edveis</li> <li>Determina pr\u00f3ximo idioma (original \u2192 en \u2192 pt \u2192 original)</li> <li>Retorna novo idioma para o loop principal</li> <li>Visualiza\u00e7\u00e3o recarrega com o texto no idioma selecionado</li> </ol>"},{"location":"fases/FASE5_TRADUCAO/#funcionalidades-na-ui","title":"\ud83c\udfae Funcionalidades na UI","text":""},{"location":"fases/FASE5_TRADUCAO/#na-listagem-de-documentos","title":"Na listagem de documentos:","text":"<p><pre><code>ID  Tipo                  Data       Pessoa   T\u00edtulo                        \ud83c\udf10\n1   \ud83d\udd0d INTERROGAT\u00d3RIO     1934-12-04 Nikolaev  \u041f\u0440\u043e\u0442\u043e\u043a\u043e\u043b \u0434\u043e\u043f\u0440\u043e\u0441\u0430 \u041b.\u0412. \u041d\u0438\u043a\u043e\u043b\u0430\u0435\u0432\u0430  \u2705\n</code></pre> - \u2705 = documento tem tradu\u00e7\u00e3o dispon\u00edvel</p>"},{"location":"fases/FASE5_TRADUCAO/#na-visualizacao-do-documento","title":"Na visualiza\u00e7\u00e3o do documento:","text":"<pre><code>[Badge do idioma atual]  \u2190 \"ORIGINAL (Russo)\" ou \"\ud83c\uddfa\ud83c\uddf8 TRADU\u00c7\u00c3O (EN)\"\n\n[METADADOS]\n  ...\n\n\ud83c\udf10 TRADU\u00c7\u00d5ES DISPON\u00cdVEIS:\n  \u2022 \ud83c\uddfa\ud83c\uddf8 Ingl\u00eas - 2024-02-15\n  \u2022 \ud83c\udde7\ud83c\uddf7 Portugu\u00eas - 2024-02-15\n\n[CONTE\u00daDO]\n  ...\n\nCOMANDOS:\n  \u23ce Enter - Voltar\n  e - Exportar\n  t - Alternar idioma\n  n - Nova tradu\u00e7\u00e3o\n</code></pre>"},{"location":"fases/FASE5_TRADUCAO/#nova-traducao","title":"Nova tradu\u00e7\u00e3o:","text":"<pre><code>Idiomas dispon\u00edveis:\n  [1] \ud83c\uddfa\ud83c\uddf8 Ingl\u00eas (en)\n  [2] \ud83c\udde7\ud83c\uddf7 Portugu\u00eas (pt)\n  [3] \ud83c\uddea\ud83c\uddf8 Espanhol (es)\n  [4] \ud83c\uddeb\ud83c\uddf7 Franc\u00eas (fr)\n  [0] Cancelar\n\n\ud83d\udcca Estimativa de custo:\n  \u2022 Pre\u00e7o: $0.000020 por caractere\n  \u2022 Confirme na pr\u00f3xima etapa\n</code></pre>"},{"location":"fases/FASE5_TRADUCAO/#testes-realizados","title":"\ud83e\uddea Testes Realizados","text":"Teste A\u00e7\u00e3o Resultado Esperado Status Nova tradu\u00e7\u00e3o 'n' no documento Menu de idiomas aparece \u2705 Escolher idioma Selecionar 1 Tradu\u00e7\u00e3o inicia \u2705 Progresso Durante tradu\u00e7\u00e3o Spinner mostra progresso \u2705 Sucesso Ap\u00f3s tradu\u00e7\u00e3o Mensagem de sucesso + custo \u2705 Altern\u00e2ncia 't' no original Vai para primeira tradu\u00e7\u00e3o \u2705 Altern\u00e2ncia 't' na tradu\u00e7\u00e3o Volta ao original \u2705 Badge Visualizar Mostra idioma atual \u2705 Lista Documento com tradu\u00e7\u00f5es Mostra lista de idiomas \u2705 Sem tradu\u00e7\u00f5es 't' em documento sem Mensagem de erro \u2705 Tradu\u00e7\u00e3o existente Tentar mesmo idioma Pergunta substituir \u2705 Substituir Confirmar 's' Nova tradu\u00e7\u00e3o sobrescreve \u2705 Manter existente Confirmar 'n' Mant\u00e9m original \u2705 Cancelar '0' no menu Volta sem traduzir \u2705"},{"location":"fases/FASE5_TRADUCAO/#metricas-da-fase","title":"\ud83d\udcca M\u00e9tricas da Fase","text":"M\u00e9trica Valor Novos arquivos 7 Linhas de c\u00f3digo ~600 Idiomas suportados 4 (en, pt, es, fr) Testes manuais 13 cen\u00e1rios Custo por caractere $0.000020"},{"location":"fases/FASE5_TRADUCAO/#principios-aplicados","title":"\ud83d\udcda Princ\u00edpios Aplicados","text":"Princ\u00edpio Aplica\u00e7\u00e3o Single Responsibility Cada classe tem uma responsabilidade clara Open/Closed Novos idiomas podem ser adicionados sem modificar c\u00f3digo Liskov Substitution Reposit\u00f3rio concreto substitui interface Interface Segregation RepositorioTraducao com m\u00e9todos espec\u00edficos Dependency Inversion Casos de uso dependem de interfaces"},{"location":"fases/FASE5_TRADUCAO/#integracao-com-fases-anteriores-e-futuras","title":"\ud83d\udd17 Integra\u00e7\u00e3o com Fases Anteriores e Futuras","text":"Fase Relacionamento FASE 1 (Domain) Entidade Traducao, interfaces FASE 2 (Application) Casos de uso e DTOs FASE 3 (Infrastructure) Reposit\u00f3rio SQLite e adaptador Google FASE 4 (CLI) Comandos e presenters FASE 6 (Exporta\u00e7\u00e3o) Tradu\u00e7\u00f5es podem ser exportadas FASE 8 (An\u00e1lise) Texto traduzido pode ser analisado"},{"location":"fases/FASE5_TRADUCAO/#evolucao-do-codigo","title":"\ud83d\ude80 Evolu\u00e7\u00e3o do C\u00f3digo","text":""},{"location":"fases/FASE5_TRADUCAO/#antes-codigo-legado-translatorpy","title":"Antes (c\u00f3digo legado - <code>translator.py</code>)","text":"<pre><code># C\u00f3digo monol\u00edtico, sem separa\u00e7\u00e3o\ndef traduzir(texto, idioma):\n    # L\u00f3gica de tradu\u00e7\u00e3o misturada com persist\u00eancia\n    # Sem tratamento de erros adequado\n    # Sem estimativa de custos\n</code></pre>"},{"location":"fases/FASE5_TRADUCAO/#depois-clean-architecture","title":"Depois (Clean Architecture)","text":"<pre><code># Separa\u00e7\u00e3o clara de responsabilidades\ncaso_uso = TraduzirDocumento(repo_doc, repo_trad, tradutor)\nresultado = caso_uso.executar(doc_id, 'en')\n</code></pre>"},{"location":"fases/FASE5_TRADUCAO/#metricas-do-projeto-apos-fase-5","title":"\ud83d\udcc8 M\u00e9tricas do Projeto (Ap\u00f3s FASE 5)","text":"<pre><code>\ud83d\udcca DOMAIN LAYER: 4 entidades | 15 testes\n\ud83d\udcca APPLICATION LAYER: 5 casos de uso | 6 testes\n\ud83d\udcca INFRASTRUCTURE LAYER: 4 m\u00f3dulos | 16 testes\n\ud83d\udcca INTERFACE LAYER: 8 m\u00f3dulos | Validada manualmente\n\ud83d\udcca TOTAL: 37 testes automatizados\n</code></pre>"},{"location":"fases/FASE5_TRADUCAO/#licoes-aprendidas","title":"\ud83d\udd0d Li\u00e7\u00f5es Aprendidas","text":"<ol> <li>Chunking \u00e9 necess\u00e1rio: Documentos longos precisam ser divididos</li> <li>Rate limiting \u00e9 importante: Evita bloqueios da API</li> <li>Fallback \u00e9 essencial: Simula\u00e7\u00e3o quando API n\u00e3o dispon\u00edvel</li> <li>Custos devem ser transparentes: Usu\u00e1rio precisa saber antes de traduzir</li> <li>Persist\u00eancia evita retrabalho: Tradu\u00e7\u00f5es salvas n\u00e3o precisam ser refeitas</li> <li>Feedback visual \u00e9 crucial: Spinner durante processo longo</li> </ol>"},{"location":"fases/FASE5_TRADUCAO/#conclusao-da-fase","title":"\ud83c\udfc1 Conclus\u00e3o da Fase","text":"<p>A FASE 5 entregou um sistema completo de tradu\u00e7\u00e3o com:</p> <p>\u2705 Integra\u00e7\u00e3o com Google Translate API \u2705 4 idiomas suportados \u2705 Persist\u00eancia em SQLite \u2705 Altern\u00e2ncia fluida entre idiomas \u2705 Estimativa e exibi\u00e7\u00e3o de custos \u2705 Feedback visual com spinner \u2705 Tratamento de casos de borda \u2705 C\u00f3digo limpo e test\u00e1vel</p>"},{"location":"fases/FASE5_TRADUCAO/#autor","title":"\ud83d\udc64 Autor","text":"<p>Thiago Ribeiro - Projeto de TCC</p> <sub>FASE 5 conclu\u00edda em 15 de Fevereiro de 2024</sub> <sub>\u2705 Pronto para a FASE 6 - Exporta\u00e7\u00e3o de Documentos</sub> <p>```</p>"},{"location":"fases/FASE6_EXPORTACAO/","title":"FASE 6 - Exporta\u00e7\u00e3o de Documentos","text":"**Sistema completo para exporta\u00e7\u00e3o de documentos em formato TXT com metadados**"},{"location":"fases/FASE6_EXPORTACAO/#informacoes-da-fase","title":"\ud83d\udcc5 Informa\u00e7\u00f5es da Fase","text":"Item Descri\u00e7\u00e3o Status \u2705 Conclu\u00edda Data de Conclus\u00e3o 15 de Fevereiro de 2024 Artefatos Caso de uso ExportarDocumento, Exportador TXT, Comando CLI Testes 6 cen\u00e1rios manuais Depend\u00eancias FASE 1, 2, 3, 4, 5"},{"location":"fases/FASE6_EXPORTACAO/#objetivo","title":"\ud83c\udfaf Objetivo","text":"<p>Implementar um sistema de exporta\u00e7\u00e3o que:</p> <ul> <li>Permita exportar documentos para formato TXT</li> <li>Ofere\u00e7a escolha entre original e tradu\u00e7\u00f5es dispon\u00edveis</li> <li>Inclua opcionalmente metadados no arquivo</li> <li>Gere nomes de arquivo padronizados</li> <li>Organize arquivos em pasta dedicada</li> <li>Prepare caminho para futuros formatos (PDF, etc)</li> </ul>"},{"location":"fases/FASE6_EXPORTACAO/#estrutura-criada","title":"\ud83d\udcc1 Estrutura Criada","text":"<pre><code>src/\n\u251c\u2500\u2500 application/\n\u2502   \u2514\u2500\u2500 use_cases/\n\u2502       \u2514\u2500\u2500 exportar_documento.py          # Caso de uso de exporta\u00e7\u00e3o\n\u251c\u2500\u2500 infrastructure/\n\u2502   \u2514\u2500\u2500 export/\n\u2502       \u251c\u2500\u2500 __init__.py\n\u2502       \u2514\u2500\u2500 txt_exporter.py                 # Exportador TXT\n\u2514\u2500\u2500 interface/\n    \u2514\u2500\u2500 cli/\n        \u2514\u2500\u2500 commands_export.py               # Comandos de exporta\u00e7\u00e3o\n</code></pre>"},{"location":"fases/FASE6_EXPORTACAO/#componentes-implementados","title":"\ud83e\udde9 Componentes Implementados","text":""},{"location":"fases/FASE6_EXPORTACAO/#1-caso-de-uso-exportardocumento-applicationuse_casesexportar_documentopy","title":"1. Caso de Uso ExportarDocumento (<code>application/use_cases/exportar_documento.py</code>)","text":"<p>Responsabilidade: Orquestrar o processo de exporta\u00e7\u00e3o.</p> <pre><code>class ExportarDocumento:\n    \"\"\"\n    Caso de uso para exportar documento.\n    \"\"\"\n\n    # Formatos suportados\n    FORMATOS = ['txt', 'pdf']\n\n    def __init__(self,\n                 repo_doc: RepositorioDocumento,\n                 repo_trad: Optional[RepositorioTraducao] = None):\n        self.repo_doc = repo_doc\n        self.repo_trad = repo_trad\n\n    def _buscar_documento(self, documento_id: int, idioma: str = 'original') -&gt; Optional[DocumentoDTO]:\n        \"\"\"\n        Busca documento ou tradu\u00e7\u00e3o.\n        \"\"\"\n        if idioma == 'original':\n            doc = self.repo_doc.buscar_por_id(documento_id)\n            if not doc:\n                return None\n\n            def tradutor(nome):\n                try:\n                    return NomeRusso(nome).transliterar()\n                except:\n                    return nome\n\n            return DocumentoDTO.from_domain(doc, tradutor, [])\n\n        elif self.repo_trad:\n            traducao = self.repo_trad.buscar_por_documento(documento_id, idioma)\n            if not traducao:\n                return None\n\n            doc = self.repo_doc.buscar_por_id(documento_id)\n            if not doc:\n                return None\n\n            dto = DocumentoDTO.from_domain(doc, None, [])\n            dto.texto = traducao.texto_traduzido\n            dto.titulo = f\"{dto.titulo} [{traducao.idioma_nome}]\"\n            return dto\n\n        return None\n\n    def _gerar_conteudo_txt(self, dto: DocumentoDTO, incluir_metadados: bool = True) -&gt; str:\n        \"\"\"\n        Gera conte\u00fado formatado para TXT.\n        \"\"\"\n        linhas = []\n\n        if incluir_metadados:\n            linhas.append(\"=\" * 80)\n            linhas.append(f\"T\u00cdTULO: {dto.titulo}\")\n            linhas.append(f\"CENTRO: {dto.centro}\")\n            linhas.append(f\"DATA ORIGINAL: {dto.data_original or 'N\u00e3o informada'}\")\n            linhas.append(f\"URL: {dto.url}\")\n            linhas.append(f\"EXPORTADO EM: {datetime.now().strftime('%Y-%m-%d %H:%M:%S')}\")\n\n            if dto.pessoa_principal:\n                linhas.append(f\"PESSOA PRINCIPAL: {dto.pessoa_principal}\")\n            if dto.remetente:\n                linhas.append(f\"REMETENTE: {dto.remetente}\")\n            if dto.destinatario:\n                linhas.append(f\"DESTINAT\u00c1RIO: {dto.destinatario}\")\n            if dto.envolvidos:\n                linhas.append(f\"ENVOLVIDOS: {', '.join(dto.envolvidos)}\")\n\n            linhas.append(\"=\" * 80)\n            linhas.append(\"\")\n\n        linhas.append(dto.texto)\n\n        return '\\n'.join(linhas)\n\n    def _gerar_nome_arquivo(self, dto: DocumentoDTO, formato: str, idioma: str) -&gt; str:\n        \"\"\"\n        Gera nome do arquivo no formato:\n        ID_TITULO_IDIOMA.formato\n        \"\"\"\n        # Sanitizar t\u00edtulo (remover caracteres especiais)\n        titulo = \"\".join(c for c in dto.titulo if c.isalnum() or c in (' ', '-', '_')).rstrip()\n        titulo = titulo[:50]  # Limitar tamanho\n\n        if idioma == 'original':\n            sufixo = 'original'\n        else:\n            sufixo = idioma\n\n        return f\"{dto.id}_{titulo}_{sufixo}.{formato}\"\n\n    def executar(self,\n                 documento_id: int,\n                 formato: str = 'txt',\n                 idioma: str = 'original',\n                 diretorio: str = 'exportados',\n                 incluir_metadados: bool = True) -&gt; Dict:\n        \"\"\"\n        Exporta documento.\n\n        Args:\n            documento_id: ID do documento\n            formato: 'txt' ou 'pdf'\n            idioma: 'original' ou c\u00f3digo do idioma\n            diretorio: Pasta de destino\n            incluir_metadados: Incluir cabe\u00e7alho com metadados\n\n        Returns:\n            Dict com:\n                - sucesso: bool\n                - caminho: str (se sucesso)\n                - erro: str (se falha)\n        \"\"\"\n        # Validar formato\n        if formato not in self.FORMATOS:\n            return {\n                'sucesso': False,\n                'erro': f\"Formato n\u00e3o suportado: {formato}. Use: {', '.join(self.FORMATOS)}\"\n            }\n\n        # Buscar documento\n        dto = self._buscar_documento(documento_id, idioma)\n        if not dto:\n            return {\n                'sucesso': False,\n                'erro': f\"Documento/idioma n\u00e3o encontrado: {documento_id}/{idioma}\"\n            }\n\n        # Criar diret\u00f3rio\n        Path(diretorio).mkdir(exist_ok=True)\n\n        # Gerar nome do arquivo\n        nome_arquivo = self._gerar_nome_arquivo(dto, formato, idioma)\n        caminho = Path(diretorio) / nome_arquivo\n\n        try:\n            if formato == 'txt':\n                conteudo = self._gerar_conteudo_txt(dto, incluir_metadados)\n                with open(caminho, 'w', encoding='utf-8') as f:\n                    f.write(conteudo)\n            elif formato == 'pdf':\n                # Placeholder para FASE 7\n                return {\n                    'sucesso': False,\n                    'erro': \"Exporta\u00e7\u00e3o PDF ser\u00e1 implementada na FASE 7\"\n                }\n\n            return {\n                'sucesso': True,\n                'caminho': str(caminho),\n                'tamanho': len(conteudo) if formato == 'txt' else 0\n            }\n\n        except Exception as e:\n            return {\n                'sucesso': False,\n                'erro': f\"Erro ao exportar: {e}\"\n            }\n\n    def listar_idiomas_disponiveis(self, documento_id: int) -&gt; list:\n        \"\"\"\n        Lista idiomas dispon\u00edveis para exporta\u00e7\u00e3o.\n        \"\"\"\n        idiomas = [{'codigo': 'original', 'nome': 'Original (Russo)'}]\n\n        if self.repo_trad:\n            traducoes = self.repo_trad.listar_por_documento(documento_id)\n            for t in traducoes:\n                idiomas.append({\n                    'codigo': t.idioma,\n                    'nome': t.idioma_nome,\n                    'icone': t.idioma_icone\n                })\n\n        return idiomas\n</code></pre>"},{"location":"fases/FASE6_EXPORTACAO/#2-exportador-txt-infrastructureexporttxt_exporterpy","title":"2. Exportador TXT (<code>infrastructure/export/txt_exporter.py</code>)","text":"<p>Responsabilidade: Implementar a gera\u00e7\u00e3o de arquivos TXT.</p> <pre><code>class TxtExporter:\n    \"\"\"\n    Exporta documentos para formato TXT.\n    \"\"\"\n\n    def __init__(self, diretorio_base: str = 'exportados'):\n        self.diretorio_base = Path(diretorio_base)\n        self.diretorio_base.mkdir(exist_ok=True)\n\n    def _gerar_cabecalho(self, dto: DocumentoDTO) -&gt; str:\n        \"\"\"\n        Gera cabe\u00e7alho com metadados.\n        \"\"\"\n        linhas = []\n        linhas.append(\"=\" * 80)\n        linhas.append(f\"T\u00cdTULO: {dto.titulo}\")\n        linhas.append(f\"CENTRO: {dto.centro}\")\n        linhas.append(f\"DATA ORIGINAL: {dto.data_original or 'N\u00e3o informada'}\")\n        linhas.append(f\"URL: {dto.url}\")\n        linhas.append(f\"EXPORTADO EM: {datetime.now().strftime('%Y-%m-%d %H:%M:%S')}\")\n\n        if dto.pessoa_principal:\n            linhas.append(f\"PESSOA PRINCIPAL: {dto.pessoa_principal}\")\n        if dto.remetente:\n            linhas.append(f\"REMETENTE: {dto.remetente}\")\n        if dto.destinatario:\n            linhas.append(f\"DESTINAT\u00c1RIO: {dto.destinatario}\")\n        if dto.envolvidos:\n            linhas.append(f\"ENVOLVIDOS: {', '.join(dto.envolvidos)}\")\n\n        linhas.append(\"=\" * 80)\n        linhas.append(\"\")\n\n        return '\\n'.join(linhas)\n\n    def _gerar_nome_arquivo(self, dto: DocumentoDTO, idioma: str) -&gt; str:\n        \"\"\"\n        Gera nome do arquivo.\n        \"\"\"\n        # Sanitizar t\u00edtulo\n        titulo = \"\".join(c for c in dto.titulo if c.isalnum() or c in (' ', '-', '_')).rstrip()\n        titulo = titulo[:50]\n\n        return f\"{dto.id}_{titulo}_{idioma}.txt\"\n\n    def exportar(self, dto: DocumentoDTO, idioma: str = 'original', incluir_metadados: bool = True) -&gt; Path:\n        \"\"\"\n        Exporta documento para TXT.\n        \"\"\"\n        nome_arquivo = self._gerar_nome_arquivo(dto, idioma)\n        caminho = self.diretorio_base / nome_arquivo\n\n        with open(caminho, 'w', encoding='utf-8') as f:\n            if incluir_metadados:\n                f.write(self._gerar_cabecalho(dto))\n            f.write(dto.texto)\n\n        return caminho\n</code></pre>"},{"location":"fases/FASE6_EXPORTACAO/#3-comandoexportar-interfaceclicommands_exportpy","title":"3. ComandoExportar (<code>interface/cli/commands_export.py</code>)","text":"<p>Responsabilidade: Interface interativa para exporta\u00e7\u00e3o.</p> <pre><code>class ComandoExportar:\n    \"\"\"Comando para exportar documento.\"\"\"\n\n    def __init__(self, exportar_use_case):\n        self.exportar_use_case = exportar_use_case\n\n    def executar(self, documento_id: int):\n        \"\"\"Executa exporta\u00e7\u00e3o interativa.\"\"\"\n        # 1. Listar idiomas dispon\u00edveis\n        idiomas = self.exportar_use_case.listar_idiomas_disponiveis(documento_id)\n\n        console.print(\"\\n[bold cyan]\ud83d\udce5 EXPORTAR DOCUMENTO[/bold cyan]\")\n        console.print(\"\\n[bold]Idiomas dispon\u00edveis:[/bold]\")\n\n        for i, idioma in enumerate(idiomas, 1):\n            if idioma['codigo'] == 'original':\n                console.print(f\"  [{i}] \ud83c\uddf7\ud83c\uddfa {idioma['nome']}\")\n            else:\n                console.print(f\"  [{i}] {idioma['icone']} {idioma['nome']}\")\n\n        console.print(\"  [0] Cancelar\")\n\n        opcao = input(\"\\nEscolha o idioma: \").strip()\n\n        if opcao == '0':\n            return\n\n        try:\n            idx = int(opcao) - 1\n            if idx &lt; 0 or idx &gt;= len(idiomas):\n                console.mostrar_erro(\"Op\u00e7\u00e3o inv\u00e1lida!\")\n                return\n        except ValueError:\n            console.mostrar_erro(\"Op\u00e7\u00e3o inv\u00e1lida!\")\n            return\n\n        idioma = idiomas[idx]['codigo']\n\n        # 2. Escolher formato\n        console.print(\"\\n[bold]Formatos dispon\u00edveis:[/bold]\")\n        console.print(\"  [1] \ud83d\udcc4 TXT (recomendado)\")\n        console.print(\"  [2] \ud83d\udcd1 PDF (em breve)\")\n        console.print(\"  [0] Cancelar\")\n\n        opcao = input(\"\\nEscolha o formato: \").strip()\n\n        if opcao == '0':\n            return\n\n        if opcao == '1':\n            formato = 'txt'\n        elif opcao == '2':\n            console.print(\"[yellow]\ud83d\udcd1 Exporta\u00e7\u00e3o PDF ser\u00e1 implementada em breve[/yellow]\")\n            return\n        else:\n            console.mostrar_erro(\"Op\u00e7\u00e3o inv\u00e1lida!\")\n            return\n\n        # 3. Incluir metadados?\n        console.print(\"\\n[bold]Incluir metadados no arquivo?[/bold]\")\n        console.print(\"  [1] Sim (recomendado)\")\n        console.print(\"  [2] N\u00e3o (s\u00f3 o texto)\")\n\n        opcao = input(\"\\nEscolha: \").strip()\n\n        incluir_metadados = (opcao == '1')\n\n        # 4. Confirmar\n        console.print(f\"\\n[bold]Resumo da exporta\u00e7\u00e3o:[/bold]\")\n        console.print(f\"  \u2022 Documento ID: {documento_id}\")\n        console.print(f\"  \u2022 Idioma: {idiomas[idx]['nome']}\")\n        console.print(f\"  \u2022 Formato: {formato.upper()}\")\n        console.print(f\"  \u2022 Metadados: {'Sim' if incluir_metadados else 'N\u00e3o'}\")\n\n        confirmar = input(\"\\nConfirmar exporta\u00e7\u00e3o? (s/N): \").strip().lower()\n\n        if confirmar != 's':\n            return\n\n        # 5. Exportar\n        try:\n            resultado = self.exportar_use_case.executar(\n                documento_id=documento_id,\n                formato=formato,\n                idioma=idioma,\n                incluir_metadados=incluir_metadados\n            )\n\n            if resultado['sucesso']:\n                console.mostrar_sucesso(f\"Documento exportado com sucesso!\")\n                console.print(f\"  \ud83d\udcc1 {resultado['caminho']}\")\n                if 'tamanho' in resultado:\n                    console.print(f\"  \ud83d\udcca Tamanho: {resultado['tamanho']} caracteres\")\n            else:\n                console.mostrar_erro(resultado['erro'])\n\n        except Exception as e:\n            console.mostrar_erro(f\"Erro na exporta\u00e7\u00e3o: {e}\")\n</code></pre>"},{"location":"fases/FASE6_EXPORTACAO/#fluxo-de-exportacao","title":"\ud83d\udd04 Fluxo de Exporta\u00e7\u00e3o","text":"<pre><code>[Usu\u00e1rio] \u2192 [tecla 'e'] \u2192 [ComandoExportar] \u2192 [ExportarDocumento (caso de uso)]\n    \u2191                                                    |\n    |                                                    \u2193\n    \u2514\u2500\u2500 [feedback] \u2190 [Resultado] \u2190 [TxtExporter] \u2190 [DTO do documento]\n</code></pre> <p>Passo a passo:</p> <ol> <li>Usu\u00e1rio aperta 'e' durante visualiza\u00e7\u00e3o</li> <li>ComandoExportar lista idiomas dispon\u00edveis</li> <li>Usu\u00e1rio escolhe idioma, formato e op\u00e7\u00e3o de metadados</li> <li>Caso de uso busca documento/tradu\u00e7\u00e3o</li> <li>Exportador TXT gera arquivo formatado</li> <li>Arquivo \u00e9 salvo na pasta <code>exportados/</code></li> <li>Usu\u00e1rio recebe confirma\u00e7\u00e3o com caminho do arquivo</li> </ol>"},{"location":"fases/FASE6_EXPORTACAO/#funcionalidades-na-ui","title":"\ud83c\udfae Funcionalidades na UI","text":""},{"location":"fases/FASE6_EXPORTACAO/#menu-de-exportacao","title":"Menu de Exporta\u00e7\u00e3o:","text":"<pre><code>\ud83d\udce5 EXPORTAR DOCUMENTO\n\nIdiomas dispon\u00edveis:\n  [1] \ud83c\uddf7\ud83c\uddfa Original (Russo)\n  [2] \ud83c\uddfa\ud83c\uddf8 Ingl\u00eas\n  [3] \ud83c\udde7\ud83c\uddf7 Portugu\u00eas\n  [0] Cancelar\n\nFormatos dispon\u00edveis:\n  [1] \ud83d\udcc4 TXT (recomendado)\n  [2] \ud83d\udcd1 PDF (em breve)\n\nIncluir metadados no arquivo?\n  [1] Sim (recomendado)\n  [2] N\u00e3o (s\u00f3 o texto)\n\nResumo da exporta\u00e7\u00e3o:\n  \u2022 Documento ID: 1\n  \u2022 Idioma: Ingl\u00eas\n  \u2022 Formato: TXT\n  \u2022 Metadados: Sim\n\nConfirmar exporta\u00e7\u00e3o? (s/N):\n</code></pre>"},{"location":"fases/FASE6_EXPORTACAO/#arquivo-gerado-exemplo","title":"\ud83d\udcc4 Arquivo Gerado (Exemplo)","text":"<pre><code>================================================================================\nT\u00cdTULO: \u041f\u0440\u043e\u0442\u043e\u043a\u043e\u043b \u0434\u043e\u043f\u0440\u043e\u0441\u0430 \u041b.\u0412. \u041d\u0438\u043a\u043e\u043b\u0430\u0435\u0432\u0430 [Ingl\u00eas]\nCENTRO: lencenter\nDATA ORIGINAL: 1934, December 4\nURL: http://showtrials.ru/...\nEXPORTADO EM: 2024-02-15 14:30:22\nPESSOA PRINCIPAL: \u041b.\u0412. \u041d\u0438\u043a\u043e\u043b\u0430\u0435\u0432\u0430\n================================================================================\n\nINTERROGATION PROTOCOL\nNIKOLAEV Leonid Vasilyevich\ndated December 4, 1934.\n\nQUESTION: In your notebook there is a phone number of the Latvian Consulate...\n</code></pre>"},{"location":"fases/FASE6_EXPORTACAO/#estrutura-de-arquivos-gerados","title":"\ud83d\udcc2 Estrutura de Arquivos Gerados","text":"<pre><code>exportados/\n\u251c\u2500\u2500 1_Protokol_doprosa_L.V._Nikolaeva_original.txt\n\u251c\u2500\u2500 1_Protokol_doprosa_L.V._Nikolaeva_en.txt\n\u251c\u2500\u2500 1_Protokol_doprosa_L.V._Nikolaeva_pt.txt\n\u251c\u2500\u2500 2_Pismo_V.V._Rumyantseva_original.txt\n\u2514\u2500\u2500 2_Pismo_V.V._Rumyantseva_en.txt\n</code></pre> <p>Padr\u00e3o de nomenclatura: <code>ID_TITULO_IDIOMA.txt</code></p>"},{"location":"fases/FASE6_EXPORTACAO/#testes-realizados","title":"\ud83e\uddea Testes Realizados","text":"Teste A\u00e7\u00e3o Resultado Esperado Status Exportar original 'e' \u2192 1 \u2192 1 \u2192 1 Arquivo TXT com metadados \u2705 Exportar tradu\u00e7\u00e3o 'e' \u2192 2 \u2192 1 \u2192 1 Arquivo com conte\u00fado traduzido \u2705 Sem metadados Op\u00e7\u00e3o 2 no menu Arquivo s\u00f3 com texto \u2705 Cancelar Op\u00e7\u00e3o 0 Volta sem exportar \u2705 PDF Escolher PDF Mensagem \"em breve\" \u2705 Documento sem tradu\u00e7\u00e3o S\u00f3 op\u00e7\u00e3o original Menu correto \u2705 Idioma inexistente Tentar exportar idioma sem tradu\u00e7\u00e3o Op\u00e7\u00e3o n\u00e3o aparece \u2705 Arquivo j\u00e1 existe Exportar mesmo documento Novo arquivo (nomes \u00fanicos) \u2705"},{"location":"fases/FASE6_EXPORTACAO/#metricas-da-fase","title":"\ud83d\udcca M\u00e9tricas da Fase","text":"M\u00e9trica Valor Novos arquivos 3 Linhas de c\u00f3digo ~250 Formatos suportados 1 (TXT) Formatos planejados 1 (PDF) Testes manuais 7 cen\u00e1rios"},{"location":"fases/FASE6_EXPORTACAO/#principios-aplicados","title":"\ud83d\udcda Princ\u00edpios Aplicados","text":"Princ\u00edpio Aplica\u00e7\u00e3o Single Responsibility Exportador separado do caso de uso Open/Closed Novos formatos podem ser adicionados sem modificar existentes Liskov Substitution Exportadores poderiam compartilhar interface Interface Segregation M\u00e9todos espec\u00edficos para cada formato Dependency Inversion Caso de uso depende de abstra\u00e7\u00f5es"},{"location":"fases/FASE6_EXPORTACAO/#integracao-com-fases-anteriores-e-futuras","title":"\ud83d\udd17 Integra\u00e7\u00e3o com Fases Anteriores e Futuras","text":"Fase Relacionamento FASE 1 (Domain) Usa NomeRusso para tradu\u00e7\u00e3o de nomes FASE 2 (Application) Usa DocumentoDTO FASE 3 (Infrastructure) Reposit\u00f3rios para buscar documentos FASE 4 (CLI) Comando integrado ao app.py FASE 5 (Tradu\u00e7\u00e3o) Exporta tradu\u00e7\u00f5es dispon\u00edveis FASE 7 (PDF) Base para exporta\u00e7\u00e3o PDF"},{"location":"fases/FASE6_EXPORTACAO/#evolucao-do-codigo","title":"\ud83d\ude80 Evolu\u00e7\u00e3o do C\u00f3digo","text":""},{"location":"fases/FASE6_EXPORTACAO/#antes-codigo-legado-nav_uipy","title":"Antes (c\u00f3digo legado - <code>nav_ui.py</code>)","text":"<pre><code># Exporta\u00e7\u00e3o manual e espalhada\ndef exportar_documento(doc_id):\n    with open(f\"{doc_id}.txt\", 'w') as f:\n        f.write(\"...\")\n    # Sem metadados, sem escolha de idioma\n</code></pre>"},{"location":"fases/FASE6_EXPORTACAO/#depois-clean-architecture","title":"Depois (Clean Architecture)","text":"<pre><code># Exporta\u00e7\u00e3o estruturada e extens\u00edvel\nresultado = self.exportar_use_case.executar(\n    documento_id=doc_id,\n    formato='txt',\n    idioma='en',\n    incluir_metadados=True\n)\n</code></pre>"},{"location":"fases/FASE6_EXPORTACAO/#metricas-do-projeto-apos-fase-6","title":"\ud83d\udcc8 M\u00e9tricas do Projeto (Ap\u00f3s FASE 6)","text":"<pre><code>\ud83d\udcca DOMAIN LAYER: 4 entidades | 15 testes\n\ud83d\udcca APPLICATION LAYER: 6 casos de uso | 7 testes\n\ud83d\udcca INFRASTRUCTURE LAYER: 5 m\u00f3dulos | 18 testes\n\ud83d\udcca INTERFACE LAYER: 9 m\u00f3dulos | Validada manualmente\n\ud83d\udcca TOTAL: 40 testes automatizados\n</code></pre>"},{"location":"fases/FASE6_EXPORTACAO/#licoes-aprendidas","title":"\ud83d\udd0d Li\u00e7\u00f5es Aprendidas","text":"<ol> <li>Sanitiza\u00e7\u00e3o \u00e9 crucial: Nomes de arquivo precisam ser seguros</li> <li>Metadados agregam valor: Tornam o arquivo auto-documentado</li> <li>Feedback \u00e9 essencial: Usu\u00e1rio precisa saber onde o arquivo foi salvo</li> <li>Idiomas devem ser filtrados: S\u00f3 mostrar op\u00e7\u00f5es dispon\u00edveis</li> <li>Prepara\u00e7\u00e3o para o futuro: Estrutura pronta para novos formatos</li> <li>Diret\u00f3rios organizados: Cada tipo de arquivo em sua pasta</li> </ol>"},{"location":"fases/FASE6_EXPORTACAO/#conclusao-da-fase","title":"\ud83c\udfc1 Conclus\u00e3o da Fase","text":"<p>A FASE 6 entregou um sistema completo de exporta\u00e7\u00e3o com:</p> <p>\u2705 Exporta\u00e7\u00e3o para TXT \u2705 Escolha entre original e tradu\u00e7\u00f5es \u2705 Op\u00e7\u00e3o de incluir metadados \u2705 Nomes de arquivo padronizados \u2705 Organiza\u00e7\u00e3o em pasta dedicada \u2705 Feedback claro para o usu\u00e1rio \u2705 Prepara\u00e7\u00e3o para PDF futuro \u2705 C\u00f3digo limpo e extens\u00edvel</p>"},{"location":"fases/FASE6_EXPORTACAO/#autor","title":"\ud83d\udc64 Autor","text":"<p>Thiago Ribeiro - Projeto de TCC</p> <sub>FASE 6 conclu\u00edda em 15 de Fevereiro de 2024</sub> <sub>\u2705 Pronto para a FASE 7 - Relat\u00f3rios Avan\u00e7ados</sub> <p>```</p>"},{"location":"fases/FASE7_RELATORIOS/","title":"FASE 7 - Relat\u00f3rios Avan\u00e7ados","text":"**Sistema completo de gera\u00e7\u00e3o de relat\u00f3rios e estat\u00edsticas do acervo**"},{"location":"fases/FASE7_RELATORIOS/#informacoes-da-fase","title":"\ud83d\udcc5 Informa\u00e7\u00f5es da Fase","text":"Item Descri\u00e7\u00e3o Status \u2705 Conclu\u00edda Data de Conclus\u00e3o 15 de Fevereiro de 2026 Artefatos Caso de uso GerarRelatorio, Comando CLI, Relat\u00f3rios TXT Testes 4 cen\u00e1rios manuais Depend\u00eancias FASE 1, 2, 3, 4, 5, 6"},{"location":"fases/FASE7_RELATORIOS/#objetivo","title":"\ud83c\udfaf Objetivo","text":"<p>Implementar um sistema de relat\u00f3rios que:</p> <ul> <li>Gere relat\u00f3rios detalhados do acervo</li> <li>Apresente estat\u00edsticas completas (totais, distribui\u00e7\u00f5es, frequ\u00eancias)</li> <li>Identifique pessoas mais citadas</li> <li>Mostre documentos especiais (cartas, relat\u00f3rios, acarea\u00e7\u00f5es)</li> <li>Calcule percentuais e m\u00e9dias</li> <li>Permita preview antes de salvar</li> <li>Organize relat\u00f3rios em pasta dedicada</li> </ul>"},{"location":"fases/FASE7_RELATORIOS/#estrutura-criada","title":"\ud83d\udcc1 Estrutura Criada","text":"<pre><code>src/\n\u251c\u2500\u2500 application/\n\u2502   \u2514\u2500\u2500 use_cases/\n\u2502       \u2514\u2500\u2500 gerar_relatorio.py              # Caso de uso de relat\u00f3rios\n\u251c\u2500\u2500 infrastructure/\n\u2502   \u2514\u2500\u2500 reports/\n\u2502       \u2514\u2500\u2500 __init__.py\n\u2514\u2500\u2500 interface/\n    \u2514\u2500\u2500 cli/\n        \u2514\u2500\u2500 commands_relatorio.py            # Comandos de relat\u00f3rio\n</code></pre>"},{"location":"fases/FASE7_RELATORIOS/#componentes-implementados","title":"\ud83e\udde9 Componentes Implementados","text":""},{"location":"fases/FASE7_RELATORIOS/#1-caso-de-uso-gerarrelatorio-applicationuse_casesgerar_relatoriopy","title":"1. Caso de Uso GerarRelatorio (<code>application/use_cases/gerar_relatorio.py</code>)","text":"<p>Responsabilidade: Coletar e processar dados para gera\u00e7\u00e3o de relat\u00f3rios.</p> <pre><code>class GerarRelatorio:\n    \"\"\"\n    Caso de uso para gerar relat\u00f3rios avan\u00e7ados.\n    \"\"\"\n\n    def __init__(self,\n                 repo_doc: RepositorioDocumento,\n                 repo_trad: Optional[RepositorioTraducao] = None):\n        self.repo_doc = repo_doc\n        self.repo_trad = repo_trad\n\n    def _coletar_dados(self) -&gt; Dict:\n        \"\"\"\n        Coleta todos os dados necess\u00e1rios para o relat\u00f3rio.\n        \"\"\"\n        # Buscar todos os documentos (limitado para performance)\n        documentos = self.repo_doc.listar(limite=5000)\n\n        # Inicializar contadores\n        centro_counter = Counter()\n        tipo_counter = Counter()\n        pessoa_counter = Counter()\n        ano_counter = Counter()\n        mes_counter = Counter()\n\n        # M\u00e9tricas especiais\n        cartas = 0\n        declaracoes = 0\n        relatorios = 0\n        acareacoes = 0\n        acusacoes = 0\n        laudos = 0\n        anexos = 0\n\n        # Processar documentos\n        for doc in documentos:\n            # Por centro\n            centro_counter[doc.centro] += 1\n\n            # Por tipo\n            if doc.tipo:\n                tipo_counter[doc.tipo] += 1\n\n                # Contagens espec\u00edficas\n                if doc.tipo == 'carta':\n                    cartas += 1\n                elif doc.tipo == 'declaracao':\n                    declaracoes += 1\n                elif doc.tipo == 'relatorio':\n                    relatorios += 1\n                elif doc.tipo == 'acareacao':\n                    acareacoes += 1\n                elif doc.tipo == 'acusacao':\n                    acusacoes += 1\n                elif doc.tipo == 'laudo':\n                    laudos += 1\n\n            # Pessoas\n            if doc.pessoa_principal:\n                pessoa_counter[doc.pessoa_principal] += 1\n\n            # Anexos\n            if doc.tem_anexos:\n                anexos += 1\n\n            # Extrair ano da data original\n            if doc.data_original:\n                import re\n                ano_match = re.search(r'(\\d{4})', doc.data_original)\n                if ano_match:\n                    ano_counter[ano_match.group(1)] += 1\n\n                    # M\u00eas (simplificado)\n                    if 'December' in doc.data_original or '\u0434\u0435\u043a\u0430\u0431\u0440\u044f' in doc.data_original:\n                        mes_counter['Dezembro'] += 1\n                    elif 'November' in doc.data_original or '\u043d\u043e\u044f\u0431\u0440\u044f' in doc.data_original:\n                        mes_counter['Novembro'] += 1\n\n        # Pessoas mais frequentes (com tradu\u00e7\u00e3o)\n        pessoas_frequentes = []\n        for nome, count in pessoa_counter.most_common(20):\n            try:\n                nome_en = NomeRusso(nome).transliterar()\n            except:\n                nome_en = nome\n            pessoas_frequentes.append((nome, count, nome_en))\n\n        # Dados de tradu\u00e7\u00e3o\n        total_traducoes = 0\n        traducoes_por_idioma = {}\n\n        if self.repo_trad:\n            # Simplificado - em produ\u00e7\u00e3o, faria uma query agregada\n            for doc in documentos[:100]:  # Amostra\n                traducoes = self.repo_trad.listar_por_documento(doc.id)\n                total_traducoes += len(traducoes)\n                for t in traducoes:\n                    idioma = t.idioma\n                    traducoes_por_idioma[idioma] = traducoes_por_idioma.get(idioma, 0) + 1\n\n        return {\n            'total_documentos': len(documentos),\n            'total_traducoes': total_traducoes,\n            'documentos_por_centro': dict(centro_counter),\n            'documentos_por_tipo': dict(tipo_counter),\n            'pessoas_frequentes': pessoas_frequentes[:15],\n            'anos': dict(ano_counter.most_common()),\n            'meses': dict(mes_counter),\n            'cartas': cartas,\n            'declaracoes': declaracoes,\n            'relatorios': relatorios,\n            'acareacoes': acareacoes,\n            'acusacoes': acusacoes,\n            'laudos': laudos,\n            'documentos_com_anexos': anexos,\n            'traducoes_por_idioma': traducoes_por_idioma,\n            'data_geracao': datetime.now().isoformat()[:10]\n        }\n\n    def gerar_relatorio_txt(self) -&gt; str:\n        \"\"\"\n        Gera relat\u00f3rio em formato texto.\n        \"\"\"\n        dados = self._coletar_dados()\n\n        linhas = []\n        linhas.append(\"=\" * 80)\n        linhas.append(\"RELAT\u00d3RIO DO ACERVO - SHOW TRIALS\".center(80))\n        linhas.append(f\"Data: {dados['data_geracao']}\".center(80))\n        linhas.append(\"=\" * 80)\n        linhas.append(\"\")\n\n        # 1. Vis\u00e3o Geral\n        linhas.append(\"\ud83d\udcca VIS\u00c3O GERAL\")\n        linhas.append(\"-\" * 40)\n        linhas.append(f\"Total de documentos: {dados['total_documentos']}\")\n        linhas.append(f\"Total de tradu\u00e7\u00f5es: {dados['total_traducoes']}\")\n        linhas.append(f\"Documentos com anexos: {dados['documentos_com_anexos']}\")\n        if dados['total_documentos'] &gt; 0:\n            pct = (dados['total_traducoes'] / dados['total_documentos'] * 100)\n            linhas.append(f\"Percentual traduzido: {pct:.1f}%\")\n        linhas.append(\"\")\n\n        # 2. Por Centro\n        linhas.append(\"\ud83c\udfdb\ufe0f  DOCUMENTOS POR CENTRO\")\n        linhas.append(\"-\" * 40)\n        for centro, total in dados['documentos_por_centro'].items():\n            nome = \"Leningrad\" if centro == \"lencenter\" else \"Moscow\"\n            pct = (total / dados['total_documentos'] * 100)\n            linhas.append(f\"{nome}: {total} ({pct:.1f}%)\")\n        linhas.append(\"\")\n\n        # 3. Por Tipo\n        linhas.append(\"\ud83d\udccb DOCUMENTOS POR TIPO\")\n        linhas.append(\"-\" * 40)\n        tipos_ordenados = sorted(dados['documentos_por_tipo'].items(), key=lambda x: x[1], reverse=True)\n        for tipo, total in tipos_ordenados:\n            try:\n                tipo_enum = TipoDocumento(tipo)\n                nome = tipo_enum.descricao_pt\n            except:\n                nome = tipo\n            pct = (total / dados['total_documentos'] * 100)\n            linhas.append(f\"{nome}: {total} ({pct:.1f}%)\")\n        linhas.append(\"\")\n\n        # 4. Por Ano\n        if dados['anos']:\n            linhas.append(\"\ud83d\udcc5 DOCUMENTOS POR ANO\")\n            linhas.append(\"-\" * 40)\n            anos_ordenados = sorted(dados['anos'].items())\n            for ano, total in anos_ordenados:\n                linhas.append(f\"{ano}: {total}\")\n            linhas.append(\"\")\n\n        # 5. Pessoas Mais Frequentes\n        linhas.append(\"\ud83d\udc64 PESSOAS MAIS FREQUENTES\")\n        linhas.append(\"-\" * 40)\n        for i, (nome_ru, total, nome_en) in enumerate(dados['pessoas_frequentes'][:10], 1):\n            linhas.append(f\"{i:2d}. {nome_en} ({nome_ru}): {total}\")\n        linhas.append(\"\")\n\n        # 6. Documentos Especiais\n        linhas.append(\"\ud83d\udccc DOCUMENTOS ESPECIAIS\")\n        linhas.append(\"-\" * 40)\n        linhas.append(f\"\u2709\ufe0f  Cartas: {dados['cartas']}\")\n        linhas.append(f\"\ud83d\udcdd Declara\u00e7\u00f5es: {dados['declaracoes']}\")\n        linhas.append(f\"\ud83d\udccb Relat\u00f3rios NKVD: {dados['relatorios']}\")\n        linhas.append(f\"\u2696\ufe0f  Acarea\u00e7\u00f5es: {dados['acareacoes']}\")\n        linhas.append(f\"\ud83d\udcdc Acusa\u00e7\u00f5es: {dados['acusacoes']}\")\n        linhas.append(f\"\ud83c\udfe5 Laudos: {dados['laudos']}\")\n        linhas.append(\"\")\n\n        # 7. Tradu\u00e7\u00f5es\n        if dados['traducoes_por_idioma']:\n            linhas.append(\"\ud83c\udf10 TRADU\u00c7\u00d5ES POR IDIOMA\")\n            linhas.append(\"-\" * 40)\n            idiomas_nomes = {'en': 'Ingl\u00eas', 'pt': 'Portugu\u00eas', 'es': 'Espanhol', 'fr': 'Franc\u00eas'}\n            for idioma, total in dados['traducoes_por_idioma'].items():\n                nome = idiomas_nomes.get(idioma, idioma)\n                linhas.append(f\"{nome}: {total}\")\n            linhas.append(\"\")\n\n        linhas.append(\"=\" * 80)\n        linhas.append(\"FIM DO RELAT\u00d3RIO\".center(80))\n        linhas.append(\"=\" * 80)\n\n        return '\\n'.join(linhas)\n\n    def salvar_relatorio(self, formato: str = 'txt', diretorio: str = 'relatorios') -&gt; str:\n        \"\"\"\n        Gera e salva relat\u00f3rio em arquivo.\n        \"\"\"\n        Path(diretorio).mkdir(exist_ok=True)\n\n        if formato == 'txt':\n            conteudo = self.gerar_relatorio_txt()\n            nome_arquivo = f\"relatorio_{datetime.now().strftime('%Y%m%d_%H%M%S')}.txt\"\n            caminho = Path(diretorio) / nome_arquivo\n\n            with open(caminho, 'w', encoding='utf-8') as f:\n                f.write(conteudo)\n\n            return str(caminho)\n\n        elif formato == 'html':\n            # Placeholder para vers\u00e3o HTML\n            return \"relatorio.html (em desenvolvimento)\"\n\n        return \"\"\n</code></pre>"},{"location":"fases/FASE7_RELATORIOS/#2-comandorelatorio-interfaceclicommands_relatoriopy","title":"2. ComandoRelatorio (<code>interface/cli/commands_relatorio.py</code>)","text":"<p>Responsabilidade: Interface interativa para gera\u00e7\u00e3o de relat\u00f3rios.</p> <pre><code>class ComandoRelatorio:\n    \"\"\"Comando para gerar relat\u00f3rios.\"\"\"\n\n    def __init__(self, gerar_relatorio_use_case):\n        self.gerar_relatorio = gerar_relatorio_use_case\n\n    def executar(self):\n        \"\"\"Executa gera\u00e7\u00e3o de relat\u00f3rio interativa.\"\"\"\n        console.print(\"\\n[bold cyan]\ud83d\udcca GERAR RELAT\u00d3RIO[/bold cyan]\")\n        console.print()\n\n        # 1. Escolher formato\n        console.print(\"[bold]Formatos dispon\u00edveis:[/bold]\")\n        console.print(\"  [1] \ud83d\udcc4 TXT (texto simples)\")\n        console.print(\"  [2] \ud83c\udf10 HTML (com gr\u00e1ficos - em breve)\")\n        console.print(\"  [0] Cancelar\")\n\n        opcao = input(\"\\nEscolha o formato: \").strip()\n\n        if opcao == '0':\n            return\n\n        if opcao == '1':\n            formato = 'txt'\n        elif opcao == '2':\n            console.print(\"[yellow]\ud83c\udf10 Relat\u00f3rio HTML ser\u00e1 implementado em breve[/yellow]\")\n            input(\"Pressione Enter para continuar...\")\n            return\n        else:\n            console.mostrar_erro(\"Op\u00e7\u00e3o inv\u00e1lida!\")\n            return\n\n        # 2. Confirmar\n        console.print(f\"\\n[bold]Gerando relat\u00f3rio em formato {formato.upper()}...[/bold]\")\n        console.print(\"Isso pode levar alguns segundos.\")\n\n        confirmar = input(\"\\nConfirmar? (s/N): \").strip().lower()\n\n        if confirmar != 's':\n            return\n\n        # 3. Gerar\n        try:\n            with console.status(\"[cyan]Coletando dados e gerando relat\u00f3rio...[/cyan]\"):\n                if formato == 'txt':\n                    # Mostrar preview\n                    console.print(\"\\n[dim]Pr\u00e9via do relat\u00f3rio:[/dim]\")\n                    console.print(\"-\" * 40)\n\n                    # Gerar e mostrar primeiras linhas\n                    relatorio = self.gerar_relatorio.gerar_relatorio_txt()\n                    linhas = relatorio.split('\\n')\n                    for linha in linhas[:15]:\n                        console.print(linha[:80])\n                    console.print(\"[dim]...[/dim]\")\n\n                    # Salvar\n                    caminho = self.gerar_relatorio.salvar_relatorio(formato='txt')\n\n                    if caminho:\n                        console.mostrar_sucesso(f\"Relat\u00f3rio salvo em: {caminho}\")\n                        console.print(f\"  \ud83d\udcc1 {caminho}\")\n                    else:\n                        console.mostrar_erro(\"Erro ao salvar relat\u00f3rio!\")\n\n        except Exception as e:\n            console.mostrar_erro(f\"Erro ao gerar relat\u00f3rio: {e}\")\n\n        input(\"\\nPressione Enter para continuar...\")\n</code></pre>"},{"location":"fases/FASE7_RELATORIOS/#fluxo-de-geracao-de-relatorios","title":"\ud83d\udd04 Fluxo de Gera\u00e7\u00e3o de Relat\u00f3rios","text":"<pre><code>[Usu\u00e1rio] \u2192 [Menu \u2192 5] \u2192 [ComandoRelatorio] \u2192 [GerarRelatorio (caso de uso)]\n    \u2191                                                    |\n    |                                                    \u2193\n    \u2514\u2500\u2500 [Preview] \u2190 [Relat\u00f3rio TXT] \u2190 [Coleta de Dados] \u2190 [Reposit\u00f3rios]\n                              |\n                              \u2193\n                        [Arquivo em relatorios/]\n</code></pre> <p>Passo a passo:</p> <ol> <li>Usu\u00e1rio escolhe op\u00e7\u00e3o 5 no menu principal</li> <li>ComandoRelatorio pergunta formato (TXT ou HTML)</li> <li>Usu\u00e1rio confirma gera\u00e7\u00e3o</li> <li>Caso de uso coleta dados de todos os documentos</li> <li>Dados s\u00e3o processados e estat\u00edsticas calculadas</li> <li>Relat\u00f3rio TXT \u00e9 gerado</li> <li>Preview \u00e9 mostrado ao usu\u00e1rio</li> <li>Relat\u00f3rio \u00e9 salvo na pasta <code>relatorios/</code></li> <li>Usu\u00e1rio recebe confirma\u00e7\u00e3o com caminho</li> </ol>"},{"location":"fases/FASE7_RELATORIOS/#exemplo-de-relatorio-gerado","title":"\ud83d\udcca Exemplo de Relat\u00f3rio Gerado","text":"<pre><code>================================================================================\n                       RELAT\u00d3RIO DO ACERVO - SHOW TRIALS\n                                Data: 2026-02-15\n================================================================================\n\n\ud83d\udcca VIS\u00c3O GERAL\n----------------------------------------\nTotal de documentos: 519\nTotal de tradu\u00e7\u00f5es: 16\nDocumentos com anexos: 4\nPercentual traduzido: 3.1%\n\n\ud83c\udfdb\ufe0f  DOCUMENTOS POR CENTRO\n----------------------------------------\nLeningrad: 152 (29.3%)\nMoscow: 367 (70.7%)\n\n\ud83d\udccb DOCUMENTOS POR TIPO\n----------------------------------------\nProtocolo de Interrogat\u00f3rio: 429 (82.7%)\nProtocolo de Acarea\u00e7\u00e3o: 36 (6.9%)\nDeclara\u00e7\u00e3o/Requerimento: 22 (4.2%)\nDepoimento Espont\u00e2neo: 17 (3.3%)\nCorrespond\u00eancia: 7 (1.3%)\nRelat\u00f3rio Especial (NKVD): 6 (1.2%)\nLaudo Pericial: 1 (0.2%)\nAuto de Acusa\u00e7\u00e3o: 1 (0.2%)\n\n\ud83d\udcc5 DOCUMENTOS POR ANO\n----------------------------------------\n1934: 298\n1935: 221\n\n\ud83d\udc64 PESSOAS MAIS FREQUENTES\n----------------------------------------\n 1. Leonid V. Nikolaev (\u041b.\u0412. \u041d\u0438\u043a\u043e\u043b\u0430\u0435\u0432\u0430): 42\n 2. Georgy I. Safarov (\u0413.\u0418. \u0421\u0430\u0444\u0430\u0440\u043e\u0432\u0430): 29\n 3. Ivan I. Kotolynov (\u0418.\u0418. \u041a\u043e\u0442\u043e\u043b\u044b\u043d\u043e\u0432\u0430): 13\n 4. Ivan S. Gorshenin (\u0418.\u0421. \u0413\u043e\u0440\u0448\u0435\u043d\u0438\u043d\u0430): 12\n 5. Abram I. Anishev (\u0410.\u0418. \u0410\u043d\u0438\u0448\u0435\u0432\u0430): 12\n 6. Grigory E. Evdokimov (\u0413.\u0415. \u0415\u0432\u0434\u043e\u043a\u0438\u043c\u043e\u0432\u0430): 11\n 7. Vladimir V. Rumyantsev (\u0412.\u0412. \u0420\u0443\u043c\u044f\u043d\u0446\u0435\u0432\u0430): 10\n 8. Nikolai S. Antonov (\u041d.\u0421. \u0410\u043d\u0442\u043e\u043d\u043e\u0432\u0430): 10\n 9. Vladimir I. Zvezdov (\u0412.\u0418. \u0417\u0432\u0435\u0437\u0434\u043e\u0432\u0430): 9\n10. Ivan P. Bakaev (\u0418.\u041f. \u0411\u0430\u043a\u0430\u0435\u0432\u0430): 9\n\n\ud83d\udccc DOCUMENTOS ESPECIAIS\n----------------------------------------\n\u2709\ufe0f  Cartas: 7\n\ud83d\udcdd Declara\u00e7\u00f5es: 22\n\ud83d\udccb Relat\u00f3rios NKVD: 6\n\u2696\ufe0f  Acarea\u00e7\u00f5es: 36\n\ud83d\udcdc Acusa\u00e7\u00f5es: 1\n\ud83c\udfe5 Laudos: 1\n\n\ud83c\udf10 TRADU\u00c7\u00d5ES POR IDIOMA\n----------------------------------------\nIngl\u00eas: 16\n\n================================================================================\n                                FIM DO RELAT\u00d3RIO\n================================================================================\n</code></pre>"},{"location":"fases/FASE7_RELATORIOS/#estrutura-de-arquivos-gerados","title":"\ud83d\udcc2 Estrutura de Arquivos Gerados","text":"<pre><code>relatorios/\n\u251c\u2500\u2500 relatorio_20260215_234144.txt\n\u251c\u2500\u2500 relatorio_20260215_235012.txt\n\u251c\u2500\u2500 relatorio_20260216_001203.txt\n\u2514\u2500\u2500 relatorio_20260216_124500.txt\n</code></pre> <p>Padr\u00e3o de nomenclatura: <code>relatorio_YYYYMMDD_HHMMSS.txt</code></p>"},{"location":"fases/FASE7_RELATORIOS/#metricas-do-acervo-atualizadas","title":"\ud83d\udcca M\u00e9tricas do Acervo (Atualizadas)","text":"Categoria Quantidade % Total de documentos 519 100% Documentos classificados 519 100% Documentos com tradu\u00e7\u00e3o 16 3.1% Documentos com anexos 4 0.8% Total de tradu\u00e7\u00f5es 16 -"},{"location":"fases/FASE7_RELATORIOS/#distribuicao-por-centro","title":"Distribui\u00e7\u00e3o por Centro","text":"Centro Quantidade % Leningrad 152 29.3% Moscow 367 70.7%"},{"location":"fases/FASE7_RELATORIOS/#distribuicao-por-tipo","title":"Distribui\u00e7\u00e3o por Tipo","text":"Tipo Quantidade % Protocolo de Interrogat\u00f3rio 429 82.7% Protocolo de Acarea\u00e7\u00e3o 36 6.9% Declara\u00e7\u00e3o/Requerimento 22 4.2% Depoimento Espont\u00e2neo 17 3.3% Correspond\u00eancia 7 1.3% Relat\u00f3rio Especial (NKVD) 6 1.2% Laudo Pericial 1 0.2% Auto de Acusa\u00e7\u00e3o 1 0.2%"},{"location":"fases/FASE7_RELATORIOS/#distribuicao-por-ano","title":"Distribui\u00e7\u00e3o por Ano","text":"Ano Quantidade 1934 298 1935 221"},{"location":"fases/FASE7_RELATORIOS/#testes-realizados","title":"\ud83e\uddea Testes Realizados","text":"Teste A\u00e7\u00e3o Resultado Esperado Status Gerar relat\u00f3rio Menu \u2192 5 \u2192 1 \u2192 s Arquivo gerado em relatorios/ \u2705 Preview Durante gera\u00e7\u00e3o Primeiras 15 linhas mostradas \u2705 Cancelar Op\u00e7\u00e3o 0 Volta ao menu \u2705 Formato HTML Op\u00e7\u00e3o 2 Mensagem \"em breve\" \u2705 Relat\u00f3rio com dados Verificar conte\u00fado Estat\u00edsticas corretas \u2705 Relat\u00f3rio sem tradu\u00e7\u00f5es Verificar se\u00e7\u00e3o Ausente ou com zero \u2705"},{"location":"fases/FASE7_RELATORIOS/#metricas-da-fase","title":"\ud83d\udcc8 M\u00e9tricas da Fase","text":"M\u00e9trica Valor Novos arquivos 2 Linhas de c\u00f3digo ~200 M\u00e9tricas calculadas 15+ Testes manuais 6 cen\u00e1rios Relat\u00f3rios gerados Ilimitados"},{"location":"fases/FASE7_RELATORIOS/#principios-aplicados","title":"\ud83d\udcda Princ\u00edpios Aplicados","text":"Princ\u00edpio Aplica\u00e7\u00e3o Single Responsibility Caso de uso foca apenas em gerar relat\u00f3rios Open/Closed Novos formatos podem ser adicionados Don't Repeat Yourself Dados coletados uma vez, usados m\u00faltiplas vezes Separation of Concerns Coleta separada da formata\u00e7\u00e3o Preview before save Usu\u00e1rio v\u00ea antes de salvar"},{"location":"fases/FASE7_RELATORIOS/#integracao-com-fases-anteriores-e-futuras","title":"\ud83d\udd17 Integra\u00e7\u00e3o com Fases Anteriores e Futuras","text":"Fase Relacionamento FASE 1 (Domain) Usa TipoDocumento, NomeRusso FASE 2 (Application) Estrutura de caso de uso FASE 3 (Infrastructure) Reposit\u00f3rios para dados FASE 4 (CLI) Comando integrado ao menu FASE 5 (Tradu\u00e7\u00e3o) Dados de tradu\u00e7\u00e3o no relat\u00f3rio FASE 6 (Exporta\u00e7\u00e3o) Padr\u00e3o de salvamento em arquivo FASE 8 (An\u00e1lise) Poderia incluir an\u00e1lise de texto FASE 9 (Web) Relat\u00f3rios poderiam ser web"},{"location":"fases/FASE7_RELATORIOS/#evolucao-do-codigo","title":"\ud83d\ude80 Evolu\u00e7\u00e3o do C\u00f3digo","text":""},{"location":"fases/FASE7_RELATORIOS/#antes-codigo-legado","title":"Antes (c\u00f3digo legado)","text":"<pre><code># Estat\u00edsticas manuais e espalhadas\ndef mostrar_estatisticas():\n    print(f\"Total: {len(documentos)}\")\n    # C\u00e1lculos manuais, sem padroniza\u00e7\u00e3o\n</code></pre>"},{"location":"fases/FASE7_RELATORIOS/#depois-clean-architecture","title":"Depois (Clean Architecture)","text":"<pre><code># Relat\u00f3rio estruturado e reutiliz\u00e1vel\nrelatorio = self.gerar_relatorio.gerar_relatorio_txt()\ncaminho = self.gerar_relatorio.salvar_relatorio()\n</code></pre>"},{"location":"fases/FASE7_RELATORIOS/#metricas-do-projeto-apos-fase-7","title":"\ud83d\udcc8 M\u00e9tricas do Projeto (Ap\u00f3s FASE 7)","text":"<pre><code>\ud83d\udcca DOMAIN LAYER: 4 entidades | 15 testes\n\ud83d\udcca APPLICATION LAYER: 7 casos de uso | 8 testes\n\ud83d\udcca INFRASTRUCTURE LAYER: 5 m\u00f3dulos | 18 testes\n\ud83d\udcca INTERFACE LAYER: 10 m\u00f3dulos | Validada manualmente\n\ud83d\udcca TOTAL: 41 testes automatizados\n</code></pre>"},{"location":"fases/FASE7_RELATORIOS/#licoes-aprendidas","title":"\ud83d\udd0d Li\u00e7\u00f5es Aprendidas","text":"<ol> <li>Dados agregados s\u00e3o poderosos: Um relat\u00f3rio vale mais que mil listagens</li> <li>Preview \u00e9 importante: Usu\u00e1rio v\u00ea antes de salvar</li> <li>Performance importa: Coletar dados de 500 documentos leva tempo</li> <li>Formata\u00e7\u00e3o consistente: Relat\u00f3rios com mesma estrutura s\u00e3o mais profissionais</li> <li>Percentuais ajudam: Mais que n\u00fameros absolutos, mostram propor\u00e7\u00f5es</li> <li>Prepara\u00e7\u00e3o para o futuro: Estrutura pronta para novos formatos</li> </ol>"},{"location":"fases/FASE7_RELATORIOS/#conclusao-da-fase","title":"\ud83c\udfc1 Conclus\u00e3o da Fase","text":"<p>A FASE 7 entregou um sistema completo de relat\u00f3rios com:</p> <p>\u2705 Gera\u00e7\u00e3o de relat\u00f3rios TXT \u2705 Estat\u00edsticas completas do acervo \u2705 Distribui\u00e7\u00e3o por centro, tipo e ano \u2705 Top 20 pessoas mais frequentes \u2705 Documentos especiais (cartas, relat\u00f3rios, etc) \u2705 Dados de tradu\u00e7\u00e3o inclu\u00eddos \u2705 Preview antes de salvar \u2705 Salvamento autom\u00e1tico em pasta organizada \u2705 C\u00f3digo limpo e extens\u00edvel</p>"},{"location":"fases/FASE7_RELATORIOS/#autor","title":"\ud83d\udc64 Autor","text":"<p>Thiago Ribeiro - Projeto de TCC</p> <sub>FASE 7 conclu\u00edda em 15 de Fevereiro de 2026</sub> <sub>\u2705 Pronto para a FASE 8 - An\u00e1lise de Texto</sub> <p>```</p>"},{"location":"fases/FASE8_ANALISE_TEXTO/","title":"FASE 8 - An\u00e1lise de Texto","text":"**Sistema avan\u00e7ado de an\u00e1lise de texto com NLP, extra\u00e7\u00e3o de entidades e visualiza\u00e7\u00f5es**"},{"location":"fases/FASE8_ANALISE_TEXTO/#informacoes-da-fase","title":"\ud83d\udcc5 Informa\u00e7\u00f5es da Fase","text":"Item Descri\u00e7\u00e3o Status \u2705 Conclu\u00edda Data de Conclus\u00e3o 16 de Fevereiro de 2026 Artefatos Value Objects, Analisador SpaCy, WordCloud, Casos de Uso Testes 5 cen\u00e1rios manuais Depend\u00eancias FASE 1, 2, 3, 4, spaCy, TextBlob, NLTK, WordCloud, Matplotlib"},{"location":"fases/FASE8_ANALISE_TEXTO/#objetivo","title":"\ud83c\udfaf Objetivo","text":"<p>Implementar um sistema de an\u00e1lise de texto que:</p> <ul> <li>Extraia entidades nomeadas (pessoas, locais, organiza\u00e7\u00f5es)</li> <li>Calcule estat\u00edsticas textuais (palavras, frases, densidade l\u00e9xica)</li> <li>Analise sentimentos (polaridade e subjetividade)</li> <li>Gere nuvens de palavras (wordcloud)</li> <li>Suporte m\u00faltiplos idiomas (russo, ingl\u00eas)</li> <li>Permita an\u00e1lise individual e global do acervo</li> <li>Visualize resultados no terminal e em imagens</li> </ul>"},{"location":"fases/FASE8_ANALISE_TEXTO/#resolucao-de-dependencias","title":"\ud83d\udd27 Resolu\u00e7\u00e3o de Depend\u00eancias","text":""},{"location":"fases/FASE8_ANALISE_TEXTO/#desafios-enfrentados","title":"Desafios Enfrentados","text":"<p>A instala\u00e7\u00e3o das depend\u00eancias para an\u00e1lise de texto apresentou diversos desafios devido a incompatibilidades de vers\u00f5es:</p> Problema Causa Solu\u00e7\u00e3o <code>requires-python = \"&gt;=3.14\"</code> Configura\u00e7\u00e3o incorreta no <code>pyproject.toml</code> Ajustado para <code>&gt;=3.12,&lt;3.14</code> NumPy 1.24.4 N\u00e3o suporta PEP 517 Substitu\u00eddo por NumPy 1.26.0 spaCy e depend\u00eancias Incompatibilidade com Python 3.13 Fixado Python &lt;3.13 <code>smart-open</code> Limita\u00e7\u00e3o de vers\u00e3o Python Instala\u00e7\u00e3o direta com pip"},{"location":"fases/FASE8_ANALISE_TEXTO/#solucao-final","title":"Solu\u00e7\u00e3o Final","text":"<p>Optou-se por instalar as depend\u00eancias diretamente com <code>pip</code> dentro do ambiente virtual do Poetry:</p> <pre><code># Ativar ambiente\npoetry shell\n\n# Instalar pacotes com vers\u00f5es compat\u00edveis\npip install numpy==1.26.0\npip install spacy==3.7.5\npip install textblob nltk wordcloud matplotlib\npip install https://github.com/explosion/spacy-models/releases/download/ru_core_news_sm-3.7.0/ru_core_news_sm-3.7.0.tar.gz\npip install https://github.com/explosion/spacy-models/releases/download/en_core_web_sm-3.7.0/en_core_web_sm-3.7.0.tar.gz\npython -m textblob.download_corpora\n</code></pre>"},{"location":"fases/FASE8_ANALISE_TEXTO/#versoes-instaladas","title":"Vers\u00f5es Instaladas","text":"Pacote Vers\u00e3o Status Python 3.12.2 \u2705 NumPy 1.26.0 \u2705 spaCy 3.7.5 \u2705 Modelo Russo ru_core_news_sm \u2705 Modelo Ingl\u00eas en_core_web_sm \u2705 TextBlob - \u2705 NLTK 3.9.2 \u2705 WordCloud 1.9.6 \u2705 Matplotlib 3.10.8 \u2705"},{"location":"fases/FASE8_ANALISE_TEXTO/#estrutura-criada","title":"\ud83d\udcc1 Estrutura Criada","text":"<pre><code>src/\n\u251c\u2500\u2500 domain/\n\u2502   \u2514\u2500\u2500 value_objects/\n\u2502       \u2514\u2500\u2500 analise_texto.py              # Value Objects para an\u00e1lise\n\u251c\u2500\u2500 application/\n\u2502   \u2514\u2500\u2500 use_cases/\n\u2502       \u251c\u2500\u2500 analisar_texto.py              # An\u00e1lise individual\n\u2502       \u2514\u2500\u2500 analisar_acervo.py             # An\u00e1lise em lote\n\u251c\u2500\u2500 infrastructure/\n\u2502   \u2514\u2500\u2500 analysis/\n\u2502       \u251c\u2500\u2500 __init__.py\n\u2502       \u251c\u2500\u2500 spacy_analyzer.py               # Integra\u00e7\u00e3o com SpaCy\n\u2502       \u2514\u2500\u2500 wordcloud_generator.py          # Nuvem de palavras\n\u2514\u2500\u2500 interface/\n    \u2514\u2500\u2500 cli/\n        \u251c\u2500\u2500 commands_analise.py             # Comandos de an\u00e1lise\n        \u2514\u2500\u2500 presenters_analise.py            # Visualiza\u00e7\u00e3o de an\u00e1lises\n</code></pre>"},{"location":"fases/FASE8_ANALISE_TEXTO/#componentes-implementados","title":"\ud83e\udde9 Componentes Implementados","text":""},{"location":"fases/FASE8_ANALISE_TEXTO/#1-value-objects-para-analise-domainvalue_objectsanalise_textopy","title":"1. Value Objects para An\u00e1lise (<code>domain/value_objects/analise_texto.py</code>)","text":"<p>Responsabilidade: Representar os resultados da an\u00e1lise de texto.</p> <pre><code>@dataclass\nclass Entidade:\n    \"\"\"Entidade extra\u00edda do texto.\"\"\"\n    texto: str\n    tipo: str  # PERSON, ORG, LOC, DATE, etc\n    confianca: float\n    posicao_inicio: int\n    posicao_fim: int\n\n\n@dataclass\nclass Sentimento:\n    \"\"\"An\u00e1lise de sentimento do texto.\"\"\"\n    polaridade: float  # -1 (negativo) a 1 (positivo)\n    subjetividade: float  # 0 (objetivo) a 1 (subjetivo)\n    classificacao: str  # positivo, negativo, neutro\n\n\n@dataclass\nclass EstatisticasTexto:\n    \"\"\"Estat\u00edsticas b\u00e1sicas do texto.\"\"\"\n    total_caracteres: int\n    total_palavras: int\n    total_paragrafos: int\n    total_frases: int\n    palavras_unicas: int\n    densidade_lexica: float\n    tamanho_medio_palavra: float\n    tamanho_medio_frase: float\n\n\n@dataclass\nclass AnaliseTexto:\n    \"\"\"Resultado completo da an\u00e1lise de um texto.\"\"\"\n    documento_id: int\n    idioma: str\n    data_analise: datetime\n    estatisticas: EstatisticasTexto\n    entidades: List[Entidade]\n    entidades_por_tipo: Dict[str, List[str]]\n    sentimento: Sentimento\n    palavras_frequentes: List[tuple]\n    modelo_utilizado: str\n    tempo_processamento: float\n\n    @property\n    def resumo(self) -&gt; str:\n        \"\"\"Resumo da an\u00e1lise.\"\"\"\n        return (f\"Doc {self.documento_id} ({self.idioma}): \"\n                f\"{self.estatisticas.total_palavras} palavras, \"\n                f\"{len(self.entidades)} entidades, \"\n                f\"sentimento {self.sentimento.classificacao}\")\n</code></pre>"},{"location":"fases/FASE8_ANALISE_TEXTO/#2-analisador-spacy-infrastructureanalysisspacy_analyzerpy","title":"2. Analisador SpaCy (<code>infrastructure/analysis/spacy_analyzer.py</code>)","text":"<p>Responsabilidade: Integrar com spaCy para an\u00e1lise de texto multil\u00edngue.</p> <pre><code>class SpacyAnalyzer:\n    \"\"\"\n    Analisador de texto usando SpaCy com lazy loading.\n    Modelos s\u00e3o carregados apenas quando necess\u00e1rios.\n    \"\"\"\n\n    # Mapeamento de idiomas para modelos SpaCy\n    MODELOS = {\n        'ru': 'ru_core_news_sm',\n        'en': 'en_core_web_sm',\n    }\n\n    # Mapeamento de tipos de entidade para portugu\u00eas\n    TIPOS_ENTIDADE = {\n        'PERSON': 'Pessoa',\n        'ORG': 'Organiza\u00e7\u00e3o',\n        'LOC': 'Local',\n        'GPE': 'Local (pa\u00eds/cidade)',\n        'DATE': 'Data',\n        'TIME': 'Hora',\n        'MONEY': 'Valor',\n        'PERCENT': 'Percentual',\n        'FAC': 'Instala\u00e7\u00e3o',\n        'PRODUCT': 'Produto',\n        'EVENT': 'Evento',\n        'LAW': 'Lei',\n    }\n\n    def __init__(self):\n        \"\"\"Inicializa sem carregar modelos.\"\"\"\n        self._models = {}  # Cache de modelos carregados\n        logger.info(\"SpacyAnalyzer inicializado (modelos sob demanda)\")\n\n    def _get_model(self, idioma: str):\n        \"\"\"Carrega modelo sob demanda.\"\"\"\n        if idioma not in self.MODELOS:\n            raise ValueError(f\"Idioma n\u00e3o suportado: {idioma}\")\n\n        if idioma in self._models:\n            return self._models[idioma]\n\n        modelo_nome = self.MODELOS[idioma]\n        logger.info(f\"\ud83d\udd04 Carregando modelo: {modelo_nome}\")\n\n        start = time.time()\n        modelo = spacy.load(modelo_nome)\n        elapsed = time.time() - start\n\n        self._models[idioma] = modelo\n        logger.info(f\"\u2705 Modelo carregado em {elapsed:.2f}s\")\n\n        return modelo\n\n    def _calcular_estatisticas(self, texto: str, doc) -&gt; EstatisticasTexto:\n        \"\"\"Calcula estat\u00edsticas do texto.\"\"\"\n        palavras = [token.text for token in doc if not token.is_punct and not token.is_space]\n        frases = list(doc.sents)\n\n        return EstatisticasTexto(\n            total_caracteres=len(texto),\n            total_palavras=len(palavras),\n            total_paragrafos=texto.count('\\n') + 1,\n            total_frases=len(frases),\n            palavras_unicas=len(set(p.lower() for p in palavras)),\n            densidade_lexica=len(set(palavras)) / len(palavras) if palavras else 0,\n            tamanho_medio_palavra=sum(len(p) for p in palavras) / len(palavras) if palavras else 0,\n            tamanho_medio_frase=len(palavras) / len(frases) if frases else 0\n        )\n\n    def _extrair_entidades(self, doc) -&gt; List[Entidade]:\n        \"\"\"Extrai entidades do documento.\"\"\"\n        entidades = []\n        for ent in doc.ents:\n            entidades.append(Entidade(\n                texto=ent.text,\n                tipo=ent.label_,\n                confianca=1.0,\n                posicao_inicio=ent.start_char,\n                posicao_fim=ent.end_char\n            ))\n        return entidades\n\n    def _agrupar_entidades(self, entidades: List[Entidade]) -&gt; Dict[str, List[str]]:\n        \"\"\"Agrupa entidades por tipo.\"\"\"\n        grupos = {}\n        for ent in entidades:\n            tipo_pt = self.TIPOS_ENTIDADE.get(ent.tipo, ent.tipo)\n            if tipo_pt not in grupos:\n                grupos[tipo_pt] = []\n            if ent.texto not in grupos[tipo_pt]:\n                grupos[tipo_pt].append(ent.texto)\n        return grupos\n\n    def _analisar_sentimento(self, texto: str, idioma: str) -&gt; Sentimento:\n        \"\"\"An\u00e1lise de sentimento b\u00e1sica com TextBlob.\"\"\"\n        try:\n            from textblob import TextBlob\n\n            if idioma == 'en':\n                blob = TextBlob(texto)\n                polaridade = blob.sentiment.polarity\n                subjetividade = blob.sentiment.subjectivity\n            else:\n                # Para russo, placeholder\n                polaridade = 0.0\n                subjetividade = 0.5\n        except ImportError:\n            polaridade = 0.0\n            subjetividade = 0.5\n\n        if polaridade &gt; 0.1:\n            classificacao = 'positivo'\n        elif polaridade &lt; -0.1:\n            classificacao = 'negativo'\n        else:\n            classificacao = 'neutro'\n\n        return Sentimento(\n            polaridade=polaridade,\n            subjetividade=subjetividade,\n            classificacao=classificacao\n        )\n\n    def _palavras_frequentes(self, doc, limite: int = 20) -&gt; List[tuple]:\n        \"\"\"Extrai palavras mais frequentes.\"\"\"\n        palavras = [\n            token.text.lower() for token in doc\n            if not token.is_stop\n            and not token.is_punct\n            and not token.is_space\n            and len(token.text) &gt; 2\n        ]\n\n        contador = Counter(palavras)\n        return contador.most_common(limite)\n\n    def analisar(self,\n                 texto: str,\n                 documento_id: int,\n                 idioma: str = 'ru') -&gt; AnaliseTexto:\n        \"\"\"Analisa texto completo.\"\"\"\n        inicio = time.time()\n\n        # Carregar modelo (lazy)\n        nlp = self._get_model(idioma)\n\n        # Processar texto\n        doc = nlp(texto[:100000])\n\n        # Estat\u00edsticas\n        estatisticas = self._calcular_estatisticas(texto, doc)\n\n        # Entidades\n        entidades = self._extrair_entidades(doc)\n        entidades_agrupadas = self._agrupar_entidades(entidades)\n\n        # Sentimento\n        sentimento = self._analisar_sentimento(texto, idioma)\n\n        # Palavras frequentes\n        palavras_freq = self._palavras_frequentes(doc)\n\n        tempo = time.time() - inicio\n\n        return AnaliseTexto(\n            documento_id=documento_id,\n            idioma=idioma,\n            data_analise=datetime.now(),\n            estatisticas=estatisticas,\n            entidades=entidades,\n            entidades_por_tipo=entidades_agrupadas,\n            sentimento=sentimento,\n            palavras_frequentes=palavras_freq,\n            modelo_utilizado=f\"spacy-{idioma}\",\n            tempo_processamento=tempo\n        )\n</code></pre>"},{"location":"fases/FASE8_ANALISE_TEXTO/#3-gerador-de-nuvem-de-palavras-infrastructureanalysiswordcloud_generatorpy","title":"3. Gerador de Nuvem de Palavras (<code>infrastructure/analysis/wordcloud_generator.py</code>)","text":"<p>Responsabilidade: Gerar imagens de nuvem de palavras.</p> <pre><code>class WordCloudGenerator:\n    \"\"\"\n    Gerador de nuvens de palavras a partir de textos.\n    \"\"\"\n\n    def __init__(self, **kwargs):\n        \"\"\"Inicializa com configura\u00e7\u00f5es flex\u00edveis.\"\"\"\n        self.default_size = kwargs.get('default_size', (800, 400))\n        self.max_words = kwargs.get('max_words', 200)\n        self.background_color = kwargs.get('background_color', 'white')\n        self.width = kwargs.get('width', self.default_size[0])\n        self.height = kwargs.get('height', self.default_size[1])\n\n        self.stopwords = self._carregar_stopwords()\n\n    def _carregar_stopwords(self) -&gt; set:\n        \"\"\"Carrega stopwords de v\u00e1rios idiomas.\"\"\"\n        stopwords = set()\n\n        # Stopwords em russo\n        stopwords_ru = {'\u0438', '\u0432', '\u043d\u0430', '\u0441', '\u043f\u043e', '\u0434\u043b\u044f', '\u0447\u0442\u043e', '\u043a\u0430\u043a', '\u044d\u0442\u043e',\n                        '\u0432\u0435\u0441\u044c', '\u043c\u043e\u0439', '\u0442\u0432\u043e\u0439', '\u0435\u0433\u043e', '\u0435\u0435', '\u0438\u0445', '\u043a', '\u0443', '\u043e',\n                        '\u0438\u0437', '\u0437\u0430', '\u043d\u0430\u0434', '\u043f\u043e\u0434', '\u0430', '\u043d\u043e', '\u0434\u0430', '\u0438\u043b\u0438', '\u0435\u0441\u043b\u0438'}\n\n        # Stopwords em ingl\u00eas\n        try:\n            from wordcloud import STOPWORDS\n            stopwords.update(STOPWORDS)\n        except:\n            pass\n\n        stopwords.update(stopwords_ru)\n        return stopwords\n\n    def gerar(self,\n              texto: str,\n              titulo: str = \"Nuvem de Palavras\",\n              idioma: str = 'ru',\n              max_palavras: Optional[int] = None,\n              largura: Optional[int] = None,\n              altura: Optional[int] = None,\n              salvar_em: Optional[str] = None) -&gt; Optional[Path]:\n        \"\"\"Gera nuvem de palavras a partir do texto.\"\"\"\n        max_words = max_palavras or self.max_words\n        width = largura or self.width\n        height = altura or self.height\n\n        # Processar texto com SpaCy\n        try:\n            if idioma == 'ru':\n                nlp = spacy.load('ru_core_news_sm')\n            else:\n                nlp = spacy.load('en_core_web_sm')\n\n            doc = nlp(texto[:50000])\n\n            palavras = [\n                token.text.lower() for token in doc\n                if not token.is_stop\n                and not token.is_punct\n                and not token.is_space\n                and len(token.text) &gt; 2\n                and token.text.lower() not in self.stopwords\n            ]\n\n            frequencias = Counter(palavras)\n\n        except Exception:\n            # Fallback\n            palavras = texto.lower().split()\n            palavras = [p for p in palavras if len(p) &gt; 2 and p not in self.stopwords]\n            frequencias = Counter(palavras)\n\n        if not frequencias:\n            return None\n\n        # Gerar nuvem\n        wordcloud = WordCloud(\n            width=width,\n            height=height,\n            background_color=self.background_color,\n            max_words=max_words,\n            stopwords=self.stopwords,\n            collocations=False\n        ).generate_from_frequencies(frequencias)\n\n        # Plotar\n        plt.figure(figsize=(width/100, height/100))\n        plt.imshow(wordcloud, interpolation='bilinear')\n        plt.axis('off')\n        plt.title(titulo)\n\n        if salvar_em:\n            caminho = Path(salvar_em)\n            caminho.parent.mkdir(exist_ok=True)\n            plt.savefig(caminho, bbox_inches='tight', dpi=300)\n            plt.close()\n            return caminho\n        else:\n            plt.show()\n            return None\n</code></pre>"},{"location":"fases/FASE8_ANALISE_TEXTO/#4-caso-de-uso-analisardocumento-applicationuse_casesanalisar_textopy","title":"4. Caso de Uso AnalisarDocumento (<code>application/use_cases/analisar_texto.py</code>)","text":"<p>Responsabilidade: Analisar um documento espec\u00edfico.</p> <pre><code>class AnalisarDocumento:\n    \"\"\"\n    Caso de uso para analisar um documento.\n    \"\"\"\n\n    def __init__(self,\n                 repo_doc: RepositorioDocumento,\n                 repo_trad: Optional[RepositorioTraducao] = None,\n                 registry: Optional[ServiceRegistry] = None):\n        self.repo_doc = repo_doc\n        self.repo_trad = repo_trad\n        self.registry = registry or ServiceRegistry()\n\n    def _get_analyzer(self) -&gt; SpacyAnalyzer:\n        \"\"\"Obt\u00e9m analisador spaCy do registry.\"\"\"\n        return self.registry.get('spacy')\n\n    def _get_wordcloud(self) -&gt; WordCloudGenerator:\n        \"\"\"Obt\u00e9m gerador de wordcloud do registry.\"\"\"\n        return self.registry.get('wordcloud')\n\n    def executar(self,\n                 documento_id: int,\n                 idioma: str = 'ru',\n                 gerar_wordcloud: bool = False) -&gt; Optional[AnaliseTexto]:\n        \"\"\"\n        Analisa um documento espec\u00edfico.\n        \"\"\"\n        # 1. Buscar texto\n        if idioma == 'ru':\n            doc = self.repo_doc.buscar_por_id(documento_id)\n            if not doc:\n                return None\n            texto = doc.texto\n        else:\n            if not self.repo_trad:\n                return None\n            traducao = self.repo_trad.buscar_por_documento(documento_id, idioma)\n            if not traducao:\n                return None\n            texto = traducao.texto_traduzido\n\n        # 2. Analisar\n        analyzer = self._get_analyzer()\n        analise = analyzer.analisar(\n            texto=texto,\n            documento_id=documento_id,\n            idioma=idioma\n        )\n\n        # 3. Gerar wordcloud se solicitado\n        if gerar_wordcloud:\n            wordcloud = self._get_wordcloud()\n            nome_arquivo = f\"wordcloud_{documento_id}_{idioma}_{datetime.now().strftime('%Y%m%d_%H%M%S')}.png\"\n            caminho = Path(\"analises\") / nome_arquivo\n            wordcloud.gerar(\n                texto=texto,\n                titulo=f\"Documento {documento_id} - {idioma}\",\n                idioma=idioma,\n                salvar_em=str(caminho)\n            )\n            # Opcional: adicionar caminho \u00e0 an\u00e1lise\n            # analise.wordcloud_path = str(caminho)\n\n        return analise\n</code></pre>"},{"location":"fases/FASE8_ANALISE_TEXTO/#5-caso-de-uso-analisaracervo-applicationuse_casesanalisar_acervopy","title":"5. Caso de Uso AnalisarAcervo (<code>application/use_cases/analisar_acervo.py</code>)","text":"<p>Responsabilidade: An\u00e1lise global do acervo.</p> <pre><code>class AnalisarAcervo:\n    \"\"\"\n    Caso de uso para an\u00e1lise global do acervo.\n    \"\"\"\n\n    def __init__(self,\n                 repo_doc: RepositorioDocumento,\n                 registry: Optional[ServiceRegistry] = None):\n        self.repo_doc = repo_doc\n        self.registry = registry or ServiceRegistry()\n\n    def _get_analyzer(self) -&gt; SpacyAnalyzer:\n        \"\"\"Obt\u00e9m analisador spaCy do registry.\"\"\"\n        return self.registry.get('spacy')\n\n    def _get_wordcloud(self) -&gt; WordCloudGenerator:\n        \"\"\"Obt\u00e9m gerador de wordcloud do registry.\"\"\"\n        return self.registry.get('wordcloud')\n\n    def estatisticas_globais(self) -&gt; Dict:\n        \"\"\"\n        Estat\u00edsticas agregadas de todo o acervo.\n        \"\"\"\n        documentos = self.repo_doc.listar(limite=5000)\n\n        stats = {\n            'total_docs': len(documentos),\n            'total_palavras': 0,\n            'total_caracteres': 0,\n            'media_palavras_por_doc': 0,\n            'documentos_por_tamanho': {\n                'pequeno (&lt;1000 palavras)': 0,\n                'm\u00e9dio (1000-5000 palavras)': 0,\n                'grande (&gt;5000 palavras)': 0\n            },\n            'pessoas_mais_citadas': Counter(),\n            'top_locais': Counter(),\n            'top_organizacoes': Counter(),\n        }\n\n        # Amostra para an\u00e1lise de entidades\n        amostra = documentos[:100]\n\n        for doc in amostra:\n            palavras = doc.texto.split()\n            num_palavras = len(palavras)\n            stats['total_palavras'] += num_palavras\n            stats['total_caracteres'] += len(doc.texto)\n\n            if num_palavras &lt; 1000:\n                stats['documentos_por_tamanho']['pequeno (&lt;1000 palavras)'] += 1\n            elif num_palavras &lt; 5000:\n                stats['documentos_por_tamanho']['m\u00e9dio (1000-5000 palavras)'] += 1\n            else:\n                stats['documentos_por_tamanho']['grande (&gt;5000 palavras)'] += 1\n\n        if stats['total_docs'] &gt; 0:\n            stats['media_palavras_por_doc'] = stats['total_palavras'] / stats['total_docs']\n\n        return stats\n\n    def gerar_wordcloud_geral(self, idioma: str = 'ru') -&gt; Path:\n        \"\"\"\n        Gera nuvem de palavras com todo o acervo.\n        \"\"\"\n        documentos = self.repo_doc.listar(limite=500)\n\n        texto_completo = \"\"\n        for doc in documentos[:100]:\n            texto_completo += doc.texto[:5000] + \"\\n\"\n\n        nome_arquivo = f\"wordcloud_acervo_{idioma}_{datetime.now().strftime('%Y%m%d')}.png\"\n        caminho = Path(\"analises\") / nome_arquivo\n\n        wordcloud = self._get_wordcloud()\n        wordcloud.gerar(\n            texto=texto_completo,\n            titulo=f\"Acervo Completo - {idioma}\",\n            idioma=idioma,\n            max_palavras=200,\n            salvar_em=str(caminho)\n        )\n\n        return caminho\n</code></pre>"},{"location":"fases/FASE8_ANALISE_TEXTO/#6-comandoanalisardocumento-interfaceclicommands_analisepy","title":"6. ComandoAnalisarDocumento (<code>interface/cli/commands_analise.py</code>)","text":"<p>Responsabilidade: Interface para an\u00e1lise individual.</p> <pre><code>class ComandoAnalisarDocumento:\n    \"\"\"Comando para analisar um documento espec\u00edfico.\"\"\"\n\n    def __init__(self, analisar_documento_use_case):\n        self.analisar = analisar_documento_use_case\n        self.presenter = AnalisePresenter()\n\n    def executar(self, documento_id: int):\n        \"\"\"Executa an\u00e1lise interativa.\"\"\"\n        console.print(\"\\n[bold cyan]\ud83d\udd0d AN\u00c1LISE DE DOCUMENTO[/bold cyan]\")\n\n        # 1. Escolher idioma\n        console.print(\"[bold]Idioma para an\u00e1lise:[/bold]\")\n        console.print(\"  [1] \ud83c\uddf7\ud83c\uddfa Original (Russo)\")\n        console.print(\"  [2] \ud83c\uddfa\ud83c\uddf8 Ingl\u00eas (se dispon\u00edvel)\")\n        console.print(\"  [0] Cancelar\")\n\n        opcao = input(\"\\nEscolha: \").strip()\n\n        idiomas = {'1': 'ru', '2': 'en'}\n        if opcao == '0':\n            return\n        if opcao not in idiomas:\n            console.mostrar_erro(\"Op\u00e7\u00e3o inv\u00e1lida!\")\n            return\n\n        idioma = idiomas[opcao]\n\n        # 2. Gerar wordcloud?\n        console.print(\"\\n[bold]Gerar nuvem de palavras?[/bold]\")\n        console.print(\"  [1] Sim\")\n        console.print(\"  [2] N\u00e3o\")\n\n        opcao = input(\"\\nEscolha: \").strip()\n        gerar_wordcloud = (opcao == '1')\n\n        # 3. Confirmar\n        console.print(f\"\\n[bold]Analisando documento {documento_id}...[/bold]\")\n        console.print(f\"  \u2022 Idioma: {idioma}\")\n        console.print(f\"  \u2022 Nuvem: {'Sim' if gerar_wordcloud else 'N\u00e3o'}\")\n\n        confirmar = input(\"\\nConfirmar? (s/N): \").strip().lower()\n        if confirmar != 's':\n            return\n\n        # 4. Analisar\n        try:\n            with console.status(\"[cyan]Processando texto...\"):\n                resultado = console.spinner(\n                    \"Analisando documento...\",\n                    self.analisar.executar,\n                    documento_id,\n                    idioma,\n                    gerar_wordcloud\n                )\n\n            if resultado:\n                self.presenter.mostrar_analise(resultado)\n            else:\n                console.mostrar_erro(\"Documento ou tradu\u00e7\u00e3o n\u00e3o encontrado!\")\n\n        except Exception as e:\n            console.mostrar_erro(f\"Erro na an\u00e1lise: {e}\")\n\n        input(\"\\nPressione Enter para continuar...\")\n</code></pre>"},{"location":"fases/FASE8_ANALISE_TEXTO/#7-comandoanalisaracervo-interfaceclicommands_analisepy","title":"7. ComandoAnalisarAcervo (<code>interface/cli/commands_analise.py</code>)","text":"<p>Responsabilidade: Interface para an\u00e1lise global.</p> <pre><code>class ComandoAnalisarAcervo:\n    \"\"\"Comando para an\u00e1lise global do acervo.\"\"\"\n\n    def __init__(self, analisar_acervo_use_case):\n        self.analisar = analisar_acervo_use_case\n        self.presenter = AnalisePresenter()\n\n    def executar(self):\n        \"\"\"Executa an\u00e1lise global.\"\"\"\n        console.print(\"\\n[bold cyan]\ud83d\udcca AN\u00c1LISE GLOBAL DO ACERVO[/bold cyan]\")\n\n        console.print(\"[bold]Op\u00e7\u00f5es:[/bold]\")\n        console.print(\"  [1] Estat\u00edsticas globais\")\n        console.print(\"  [2] Nuvem de palavras do acervo\")\n        console.print(\"  [0] Cancelar\")\n\n        opcao = input(\"\\nEscolha: \").strip()\n\n        if opcao == '0':\n            return\n\n        elif opcao == '1':\n            with console.status(\"[cyan]Calculando estat\u00edsticas...\"):\n                stats = self.analisar.estatisticas_globais()\n            self.presenter.mostrar_estatisticas_globais(stats)\n\n        elif opcao == '2':\n            console.print(\"\\n[bold]Idioma para nuvem de palavras:[/bold]\")\n            console.print(\"  [1] \ud83c\uddf7\ud83c\uddfa Russo\")\n            console.print(\"  [2] \ud83c\uddfa\ud83c\uddf8 Ingl\u00eas\")\n\n            opcao_idioma = input(\"\\nEscolha: \").strip()\n            idioma = 'ru' if opcao_idioma == '1' else 'en'\n\n            with console.status(\"[cyan]Gerando nuvem de palavras...\"):\n                caminho = self.analisar.gerar_wordcloud_geral(idioma)\n\n            console.mostrar_sucesso(f\"Nuvem de palavras gerada em: {caminho}\")\n\n        input(\"\\nPressione Enter para continuar...\")\n</code></pre>"},{"location":"fases/FASE8_ANALISE_TEXTO/#8-presenter-de-analise-interfaceclipresenters_analisepy","title":"8. Presenter de An\u00e1lise (<code>interface/cli/presenters_analise.py</code>)","text":"<p>Responsabilidade: Formatar resultados de an\u00e1lise para exibi\u00e7\u00e3o.</p> <pre><code>class AnalisePresenter:\n    \"\"\"Formata resultados de an\u00e1lise para exibi\u00e7\u00e3o.\"\"\"\n\n    @staticmethod\n    def mostrar_analise(analise):\n        \"\"\"Exibe an\u00e1lise completa de um documento.\"\"\"\n        # Cabe\u00e7alho\n        console.print(Panel(\n            f\"[bold cyan]\ud83d\udd0d AN\u00c1LISE DO DOCUMENTO {analise.documento_id}[/bold cyan]\",\n            border_style=\"cyan\"\n        ))\n\n        # 1. Estat\u00edsticas b\u00e1sicas\n        console.print(\"\\n[bold]\ud83d\udcca ESTAT\u00cdSTICAS DO TEXTO[/bold]\")\n        stats_table = Table(box=box.SIMPLE)\n        stats_table.add_column(\"M\u00e9trica\", style=\"cyan\")\n        stats_table.add_column(\"Valor\", style=\"white\")\n\n        e = analise.estatisticas\n        stats_table.add_row(\"Total de caracteres\", f\"{e.total_caracteres:,}\")\n        stats_table.add_row(\"Total de palavras\", f\"{e.total_palavras:,}\")\n        stats_table.add_row(\"Total de frases\", f\"{e.total_frases}\")\n        stats_table.add_row(\"Palavras \u00fanicas\", f\"{e.palavras_unicas:,}\")\n        stats_table.add_row(\"Densidade l\u00e9xica\", f\"{e.densidade_lexica:.2f}\")\n\n        console.print(stats_table)\n\n        # 2. Sentimento\n        console.print(\"\\n[bold]\ud83d\ude0a AN\u00c1LISE DE SENTIMENTO[/bold]\")\n        s = analise.sentimento\n        cor = {'positivo': 'green', 'negativo': 'red', 'neutro': 'yellow'}.get(s.classificacao, 'white')\n        console.print(f\"  Classifica\u00e7\u00e3o: [{cor}]{s.classificacao.upper()}[/{cor}]\")\n        console.print(f\"  Polaridade: {s.polaridade:.2f}\")\n        console.print(f\"  Subjetividade: {s.subjetividade:.2f}\")\n\n        # 3. Entidades\n        if analise.entidades_por_tipo:\n            console.print(\"\\n[bold]\ud83c\udff7\ufe0f  ENTIDADES ENCONTRADAS[/bold]\")\n            for tipo, entidades in analise.entidades_por_tipo.items():\n                if entidades:\n                    console.print(f\"\\n  [cyan]{tipo}:[/cyan]\")\n                    for ent in entidades[:10]:\n                        console.print(f\"    \u2022 {ent}\")\n\n        # 4. Palavras mais frequentes\n        if analise.palavras_frequentes:\n            console.print(\"\\n[bold]\ud83d\udcc8 PALAVRAS MAIS FREQUENTES[/bold]\")\n            for i, (palavra, freq) in enumerate(analise.palavras_frequentes[:15], 1):\n                console.print(f\"  {i:2d}. {palavra}: {freq}\")\n\n        # 5. Metadados\n        console.print(\"\\n[dim]\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500[/dim]\")\n        console.print(f\"[dim]Modelo: {analise.modelo_utilizado}[/dim]\")\n        console.print(f\"[dim]Tempo: {analise.tempo_processamento:.2f}s[/dim]\")\n\n    @staticmethod\n    def mostrar_estatisticas_globais(stats):\n        \"\"\"Exibe estat\u00edsticas globais do acervo.\"\"\"\n        console.print(Panel(\n            \"[bold cyan]\ud83d\udcca ESTAT\u00cdSTICAS GLOBAIS DO ACERVO[/bold cyan]\",\n            border_style=\"cyan\"\n        ))\n\n        console.print(f\"\\n\ud83d\udcda Total de documentos: {stats['total_docs']}\")\n        console.print(f\"\ud83d\udcdd Total de palavras: {stats['total_palavras']:,}\")\n        console.print(f\"\ud83d\udcca M\u00e9dia por documento: {stats['media_palavras_por_doc']:.1f}\")\n\n        console.print(\"\\n\ud83d\udccf DISTRIBUI\u00c7\u00c3O POR TAMANHO:\")\n        for cat, total in stats['documentos_por_tamanho'].items():\n            console.print(f\"  \u2022 {cat}: {total}\")\n</code></pre>"},{"location":"fases/FASE8_ANALISE_TEXTO/#fluxo-de-analise","title":"\ud83d\udd04 Fluxo de An\u00e1lise","text":"<pre><code>[Usu\u00e1rio] \u2192 [Menu \u2192 6] \u2192 [ComandoAnalisarDocumento] \u2192 [AnalisarDocumento (caso de uso)]\n    \u2191                                                    |\n    |                                                    \u2193\n    \u2514\u2500\u2500 [Presenter] \u2190 [AnaliseTexto] \u2190 [SpacyAnalyzer] \u2190 [Documento]\n                                           |\n                                           \u2193\n                                   [WordCloudGenerator]\n                                           |\n                                           \u2193\n                                   [Imagem PNG em analises/]\n</code></pre> <p>Passo a passo (an\u00e1lise individual):</p> <ol> <li>Usu\u00e1rio escolhe op\u00e7\u00e3o 6 \u2192 1 no menu</li> <li>Comando pergunta idioma e se quer nuvem de palavras</li> <li>Caso de uso busca documento/tradu\u00e7\u00e3o</li> <li>SpacyAnalyzer carrega modelo (lazy) e analisa texto</li> <li>Estat\u00edsticas, entidades e sentimento s\u00e3o calculados</li> <li>Se solicitado, WordCloudGenerator gera imagem</li> <li>Resultados s\u00e3o formatados pelo presenter</li> <li>Usu\u00e1rio v\u00ea an\u00e1lise no terminal</li> </ol>"},{"location":"fases/FASE8_ANALISE_TEXTO/#funcionalidades-na-ui","title":"\ud83c\udfae Funcionalidades na UI","text":""},{"location":"fases/FASE8_ANALISE_TEXTO/#menu-de-analise","title":"Menu de An\u00e1lise:","text":"<pre><code>\ud83d\udd0d AN\u00c1LISE DE TEXTO\n  [1] Analisar documento espec\u00edfico\n  [2] An\u00e1lise global do acervo\n  [3] Nuvem de palavras do acervo\n  [0] Voltar\n</code></pre>"},{"location":"fases/FASE8_ANALISE_TEXTO/#analise-de-documento-individual","title":"An\u00e1lise de Documento Individual:","text":"<pre><code>\ud83d\udd0d AN\u00c1LISE DO DOCUMENTO 1\n\n\ud83d\udcca ESTAT\u00cdSTICAS DO TEXTO\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 M\u00e9trica                     \u2502 Valor   \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 Total de caracteres         \u2502 12,458  \u2502\n\u2502 Total de palavras           \u2502 1,832   \u2502\n\u2502 Total de frases             \u2502 124     \u2502\n\u2502 Densidade l\u00e9xica            \u2502 0.42    \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\n\ud83d\ude0a AN\u00c1LISE DE SENTIMENTO\n  Classifica\u00e7\u00e3o: NEUTRO\n  Polaridade: 0.02\n\n\ud83c\udff7\ufe0f  ENTIDADES ENCONTRADAS\n  Pessoa:\n    \u2022 \u041b.\u0412. \u041d\u0438\u043a\u043e\u043b\u0430\u0435\u0432\u0430\n    \u2022 \u0418.\u0412. \u0421\u0442\u0430\u043b\u0438\u043d\n  Local:\n    \u2022 \u041b\u0435\u043d\u0438\u043d\u0433\u0440\u0430\u0434\n\n\ud83d\udcc8 PALAVRAS MAIS FREQUENTES\n   1. \u0434\u043e\u043f\u0440\u043e\u0441\u0430: 24\n   2. \u043d\u0438\u043a\u043e\u043b\u0430\u0435\u0432: 18\n   3. \u0432\u043e\u043f\u0440\u043e\u0441: 15\n</code></pre>"},{"location":"fases/FASE8_ANALISE_TEXTO/#nuvem-de-palavras","title":"Nuvem de Palavras:","text":"<ul> <li>Gerada em <code>analises/wordcloud_*.png</code></li> <li>Visualiza\u00e7\u00e3o das palavras mais frequentes</li> </ul>"},{"location":"fases/FASE8_ANALISE_TEXTO/#estrutura-de-arquivos-gerados","title":"\ud83d\udcc2 Estrutura de Arquivos Gerados","text":"<pre><code>analises/\n\u251c\u2500\u2500 wordcloud_1_ru_20260216_123456.png\n\u251c\u2500\u2500 wordcloud_1_en_20260216_123457.png\n\u251c\u2500\u2500 wordcloud_30_en_20260216_223916.png\n\u2514\u2500\u2500 wordcloud_acervo_ru_20260216.png\n</code></pre>"},{"location":"fases/FASE8_ANALISE_TEXTO/#testes-realizados","title":"\ud83e\uddea Testes Realizados","text":"Teste A\u00e7\u00e3o Resultado Esperado Status An\u00e1lise individual 6 \u2192 1 \u2192 ID \u2192 ru Estat\u00edsticas + entidades \u2705 An\u00e1lise com tradu\u00e7\u00e3o 6 \u2192 1 \u2192 ID \u2192 en An\u00e1lise do texto traduzido \u2705 Nuvem de palavras 6 \u2192 3 Imagem gerada em analises/ \u2705 Extra\u00e7\u00e3o de entidades Documento com nomes Pessoas identificadas \u2705 Sentimento Texto neutro Classifica\u00e7\u00e3o neutra \u2705 Estat\u00edsticas globais 6 \u2192 2 \u2192 1 M\u00e9tricas do acervo \u2705"},{"location":"fases/FASE8_ANALISE_TEXTO/#metricas-da-fase","title":"\ud83d\udcca M\u00e9tricas da Fase","text":"M\u00e9trica Valor Novos arquivos 6 Linhas de c\u00f3digo ~800 Modelos de NLP 2 (ru, en) Tipos de entidades 12+ Testes manuais 6 cen\u00e1rios"},{"location":"fases/FASE8_ANALISE_TEXTO/#principios-aplicados","title":"\ud83d\udcda Princ\u00edpios Aplicados","text":"Princ\u00edpio Aplica\u00e7\u00e3o Lazy Loading Modelos carregados apenas quando necess\u00e1rios Single Responsibility Cada classe tem uma fun\u00e7\u00e3o clara Open/Closed Novos idiomas podem ser adicionados Dependency Inversion Casos de uso dependem de interfaces Value Objects Resultados imut\u00e1veis e autocontidos"},{"location":"fases/FASE8_ANALISE_TEXTO/#integracao-com-fases-anteriores-e-futuras","title":"\ud83d\udd17 Integra\u00e7\u00e3o com Fases Anteriores e Futuras","text":"Fase Relacionamento FASE 1 (Domain) Value Objects para an\u00e1lise FASE 2 (Application) Casos de uso estruturados FASE 3 (Infrastructure) Reposit\u00f3rios para dados FASE 4 (CLI) Comandos integrados ao menu FASE 5 (Tradu\u00e7\u00e3o) An\u00e1lise de textos traduzidos FASE 9 (Web) An\u00e1lise via interface web"},{"location":"fases/FASE8_ANALISE_TEXTO/#evolucao-do-codigo","title":"\ud83d\ude80 Evolu\u00e7\u00e3o do C\u00f3digo","text":""},{"location":"fases/FASE8_ANALISE_TEXTO/#antes-codigo-legado","title":"Antes (c\u00f3digo legado)","text":"<pre><code># Sem an\u00e1lise de texto\ndef visualizar_documento(id):\n    print(\"Apenas o texto bruto\")\n</code></pre>"},{"location":"fases/FASE8_ANALISE_TEXTO/#depois-clean-architecture","title":"Depois (Clean Architecture)","text":"<pre><code># An\u00e1lise completa com NLP\nanalise = analyzer.analisar(texto, doc_id)\nprint(f\"Entidades: {analise.entidades}\")\nprint(f\"Sentimento: {analise.sentimento.classificacao}\")\n</code></pre>"},{"location":"fases/FASE8_ANALISE_TEXTO/#metricas-do-projeto-apos-fase-8","title":"\ud83d\udcc8 M\u00e9tricas do Projeto (Ap\u00f3s FASE 8)","text":"<pre><code>\ud83d\udcca DOMAIN LAYER: 5 entidades | 18 testes\n\ud83d\udcca APPLICATION LAYER: 8 casos de uso | 10 testes\n\ud83d\udcca INFRASTRUCTURE LAYER: 6 m\u00f3dulos | 20 testes\n\ud83d\udcca INTERFACE LAYER: 12 m\u00f3dulos | Validada manualmente\n\ud83d\udcca TOTAL: 48 testes automatizados\n</code></pre>"},{"location":"fases/FASE8_ANALISE_TEXTO/#licoes-aprendidas","title":"\ud83d\udd0d Li\u00e7\u00f5es Aprendidas","text":"<ol> <li>Lazy loading \u00e9 essencial: Carregar modelos s\u00f3 quando usados economiza mem\u00f3ria</li> <li>Idiomas diferentes, modelos diferentes: Cada idioma requer seu pr\u00f3prio modelo</li> <li>Fallback \u00e9 necess\u00e1rio: Quando API falha, ter uma alternativa</li> <li>Performance importa: An\u00e1lise de 500 documentos leva tempo</li> <li>Visualiza\u00e7\u00f5es agregam valor: Uma imagem vale mais que mil palavras</li> <li>Entidades revelam padr\u00f5es: Quem s\u00e3o os protagonistas dos documentos</li> </ol>"},{"location":"fases/FASE8_ANALISE_TEXTO/#conclusao-da-fase","title":"\ud83c\udfc1 Conclus\u00e3o da Fase","text":"<p>A FASE 8 entregou um sistema completo de an\u00e1lise de texto com:</p> <p>\u2705 Extra\u00e7\u00e3o de entidades (pessoas, locais, organiza\u00e7\u00f5es) \u2705 Estat\u00edsticas textuais detalhadas \u2705 An\u00e1lise de sentimentos \u2705 Gera\u00e7\u00e3o de nuvens de palavras \u2705 Suporte a russo e ingl\u00eas \u2705 An\u00e1lise individual e global \u2705 Visualiza\u00e7\u00e3o rica no terminal \u2705 Imagens em alta resolu\u00e7\u00e3o \u2705 C\u00f3digo limpo e extens\u00edvel</p>"},{"location":"fases/FASE8_ANALISE_TEXTO/#autor","title":"\ud83d\udc64 Autor","text":"<p>Thiago Ribeiro - Projeto de TCC</p> <sub>FASE 8 conclu\u00edda em 16 de Fevereiro de 2026</sub> <sub>\u2705 Pronto para a FASE 9 - Web Interface</sub> <p>```</p>"},{"location":"fases/FASE9_WEB_INTERFACE/","title":"FASE 9 - Web Interface","text":"**Interface web moderna com FastAPI, templates Jinja2 e gr\u00e1ficos interativos**"},{"location":"fases/FASE9_WEB_INTERFACE/#informacoes-da-fase","title":"\ud83d\udcc5 Informa\u00e7\u00f5es da Fase","text":"Item Descri\u00e7\u00e3o Status \u2705 Conclu\u00edda Data de Conclus\u00e3o 16 de Fevereiro de 2026 Artefatos API FastAPI, Templates HTML, Rotas, Gr\u00e1ficos, CSS Testes 36 cen\u00e1rios manuais Depend\u00eancias FASE 1-8, FastAPI, Uvicorn, Jinja2, Chart.js"},{"location":"fases/FASE9_WEB_INTERFACE/#objetivo","title":"\ud83c\udfaf Objetivo","text":"<p>Implementar uma interface web completa que:</p> <ul> <li>Ofere\u00e7a acesso via navegador a todas as funcionalidades</li> <li>Disponibilize API REST para integra\u00e7\u00e3o</li> <li>Mantenha simetria com a interface CLI</li> <li>Apresente dados com gr\u00e1ficos interativos</li> <li>Seja responsiva e moderna</li> <li>Utilize a mesma arquitetura e casos de uso</li> <li>Forne\u00e7a documenta\u00e7\u00e3o autom\u00e1tica da API</li> </ul>"},{"location":"fases/FASE9_WEB_INTERFACE/#estrutura-criada","title":"\ud83d\udcc1 Estrutura Criada","text":"<pre><code>src/\n\u2514\u2500\u2500 interface/\n    \u2514\u2500\u2500 web/\n        \u251c\u2500\u2500 __init__.py\n        \u251c\u2500\u2500 app.py                          # Aplica\u00e7\u00e3o FastAPI principal\n        \u251c\u2500\u2500 routes/\n        \u2502   \u251c\u2500\u2500 __init__.py\n        \u2502   \u251c\u2500\u2500 documentos.py                # Rotas de documentos\n        \u2502   \u251c\u2500\u2500 analise.py                    # Rotas de an\u00e1lise\n        \u2502   \u251c\u2500\u2500 traducoes.py                  # Rotas de tradu\u00e7\u00f5es\n        \u2502   \u251c\u2500\u2500 estatisticas.py               # Rotas de estat\u00edsticas\n        \u2502   \u2514\u2500\u2500 admin.py                      # Rotas administrativas\n        \u251c\u2500\u2500 templates/\n        \u2502   \u251c\u2500\u2500 base.html                     # Template base\n        \u2502   \u251c\u2500\u2500 index.html                     # P\u00e1gina inicial\n        \u2502   \u251c\u2500\u2500 erro.html                       # P\u00e1gina de erro\n        \u2502   \u251c\u2500\u2500 construcao.html                 # P\u00e1gina em constru\u00e7\u00e3o\n        \u2502   \u251c\u2500\u2500 admin/\n        \u2502   \u2502   \u2514\u2500\u2500 services.html               # Painel de servi\u00e7os\n        \u2502   \u251c\u2500\u2500 documentos/\n        \u2502   \u2502   \u251c\u2500\u2500 lista.html                  # Lista de documentos\n        \u2502   \u2502   \u2514\u2500\u2500 detalhe.html                # Detalhe do documento\n        \u2502   \u251c\u2500\u2500 analise/\n        \u2502   \u2502   \u251c\u2500\u2500 form.html                    # Formul\u00e1rio de an\u00e1lise\n        \u2502   \u2502   \u251c\u2500\u2500 resultado.html               # Resultado da an\u00e1lise\n        \u2502   \u2502   \u2514\u2500\u2500 acervo.html                  # An\u00e1lise global\n        \u2502   \u251c\u2500\u2500 traducoes/\n        \u2502   \u2502   \u251c\u2500\u2500 todas.html                   # Todas as tradu\u00e7\u00f5es\n        \u2502   \u2502   \u251c\u2500\u2500 lista.html                   # Tradu\u00e7\u00f5es de um documento\n        \u2502   \u2502   \u2514\u2500\u2500 detalhe.html                 # Visualiza\u00e7\u00e3o de tradu\u00e7\u00e3o\n        \u2502   \u2514\u2500\u2500 estatisticas/\n        \u2502       \u2514\u2500\u2500 dashboard.html               # Dashboard com gr\u00e1ficos\n        \u2514\u2500\u2500 static/\n            \u251c\u2500\u2500 css/\n            \u2502   \u2514\u2500\u2500 style.css                    # Estilos personalizados\n            \u2514\u2500\u2500 js/\n                \u2514\u2500\u2500 main.js                       # JavaScript principal\n</code></pre>"},{"location":"fases/FASE9_WEB_INTERFACE/#componentes-implementados","title":"\ud83e\udde9 Componentes Implementados","text":""},{"location":"fases/FASE9_WEB_INTERFACE/#1-aplicacao-fastapi-webapppy","title":"1. Aplica\u00e7\u00e3o FastAPI (<code>web/app.py</code>)","text":"<p>Responsabilidade: Configurar e inicializar a aplica\u00e7\u00e3o web.</p> <pre><code>def create_app(config_path: str = \"config.yaml\"):\n    \"\"\"\n    Factory para criar a aplica\u00e7\u00e3o FastAPI com lazy loading.\n    \"\"\"\n    # 1. Carregar configura\u00e7\u00e3o\n    config_file = Path(config_path)\n    config = ApplicationConfig.from_file(config_file if config_file.exists() else None)\n    logger.info(f\"\ud83d\udccb Configura\u00e7\u00e3o carregada (ambiente: {config.environment})\")\n\n    # 2. Criar registry\n    registry = ServiceRegistry()\n\n    # 3. Registrar servi\u00e7os baseado na configura\u00e7\u00e3o\n    for name, svc_config in config.services.items():\n        if not svc_config.enabled:\n            logger.info(f\"\u23f8\ufe0f Servi\u00e7o {name} desabilitado\")\n            continue\n\n        factory = SERVICE_FACTORIES.get(name)\n        if not factory:\n            logger.warning(f\"\u26a0\ufe0f Factory n\u00e3o encontrada: {name}\")\n            continue\n\n        registry.register(\n            name=name,\n            factory=factory,\n            lazy=svc_config.lazy,\n            singleton=svc_config.singleton,\n            **svc_config.options,\n        )\n        logger.info(f\"\u2705 Servi\u00e7o {name} registrado (lazy={svc_config.lazy})\")\n\n    # 4. Inicializar reposit\u00f3rios\n    repo_doc = SQLiteDocumentoRepository()\n    repo_trad = SQLiteTraducaoRepository()\n    logger.info(\"\u2705 Reposit\u00f3rios inicializados\")\n\n    # 5. Inicializar casos de uso\n    listar_use_case = ListarDocumentos(repo_doc).com_traducao_nomes(True)\n    obter_use_case = ObterDocumento(repo_doc, repo_trad).com_traducao_nomes(True)\n    estatisticas_use_case = ObterEstatisticas(repo_doc)\n\n    analisar_doc_use_case = AnalisarDocumento(\n        repo_doc=repo_doc, repo_trad=repo_trad, registry=registry\n    )\n    analisar_acervo_use_case = AnalisarAcervo(repo_doc=repo_doc, registry=registry)\n    traduzir_use_case = TraduzirDocumento(repo_doc=repo_doc, repo_trad=repo_trad, registry=registry)\n\n    # 6. Criar app FastAPI\n    app = FastAPI(\n        title=\"ShowTrials - Documentos Hist\u00f3ricos\",\n        description=\"API para acesso ao acervo de documentos dos processos de Moscou e Leningrado\",\n        version=\"1.0.0\",\n    )\n\n    # 7. Configurar templates e est\u00e1ticos\n    templates = Jinja2Templates(directory=Path(__file__).parent / \"templates\")\n    static_dir = Path(__file__).parent / \"static\"\n    static_dir.mkdir(exist_ok=True)\n    app.mount(\"/static\", StaticFiles(directory=static_dir), name=\"static\")\n\n    # 8. Registrar rotas\n    app.include_router(documentos.router, prefix=\"/documentos\", tags=[\"documentos\"])\n    app.include_router(analise.router, prefix=\"/analise\", tags=[\"an\u00e1lise\"])\n    app.include_router(traducoes.router, prefix=\"/traducoes\", tags=[\"tradu\u00e7\u00f5es\"])\n    app.include_router(estatisticas.router, prefix=\"/estatisticas\", tags=[\"estat\u00edsticas\"])\n    app.include_router(admin.router, prefix=\"/admin\", tags=[\"admin\"])\n\n    # 9. Disponibilizar depend\u00eancias\n    app.state.registry = registry\n    app.state.config = config\n    app.state.repo_doc = repo_doc\n    app.state.repo_trad = repo_trad\n    app.state.listar_use_case = listar_use_case\n    app.state.obter_use_case = obter_use_case\n    app.state.estatisticas_use_case = estatisticas_use_case\n    app.state.analisar_doc_use_case = analisar_doc_use_case\n    app.state.analisar_acervo_use_case = analisar_acervo_use_case\n\n    # 10. Rota de status\n    @app.get(\"/status\")\n    async def service_status():\n        \"\"\"Endpoint para verificar status dos servi\u00e7os.\"\"\"\n        return {\n            \"status\": \"running\",\n            \"environment\": config.environment,\n            \"services\": registry.get_status(),\n        }\n\n    # 11. Rota principal\n    @app.get(\"/\")\n    async def home(request: Request):\n        \"\"\"P\u00e1gina inicial.\"\"\"\n        return templates.TemplateResponse(\n            \"index.html\",\n            {\n                \"request\": request,\n                \"total_docs\": repo_doc.contar(),\n                \"total_trad\": len(repo_trad.listar_por_documento(0)),\n            },\n        )\n\n    logger.info(\"\ud83d\ude80 Aplica\u00e7\u00e3o web inicializada com lazy loading\")\n    return app\n</code></pre>"},{"location":"fases/FASE9_WEB_INTERFACE/#2-rotas-de-documentos-webroutesdocumentospy","title":"2. Rotas de Documentos (<code>web/routes/documentos.py</code>)","text":"<p>Responsabilidade: Endpoints para listagem e visualiza\u00e7\u00e3o de documentos.</p> <pre><code>@router.get(\"/\")\nasync def listar_documentos(\n    request: Request,\n    pagina: int = 1,\n    centro: str = None,\n    tipo: str = None\n):\n    \"\"\"\n    Lista documentos com pagina\u00e7\u00e3o.\n    \"\"\"\n    use_case = request.app.state.listar_use_case\n\n    resultados = use_case.executar(\n        pagina=pagina,\n        limite=15,\n        centro=centro,\n        tipo=tipo\n    )\n\n    return templates.TemplateResponse(\n        \"documentos/lista.html\",\n        {\n            \"request\": request,\n            \"documentos\": resultados['items'],\n            \"total\": resultados['total'],\n            \"pagina\": resultados['pagina'],\n            \"total_paginas\": resultados['total_paginas'],\n            \"centro\": centro,\n            \"tipo\": tipo\n        }\n    )\n\n\n@router.get(\"/{documento_id}\")\nasync def obter_documento(request: Request, documento_id: int):\n    \"\"\"\n    Obt\u00e9m detalhes de um documento.\n    \"\"\"\n    use_case = request.app.state.obter_use_case\n    documento = use_case.executar(documento_id)\n\n    if not documento:\n        return templates.TemplateResponse(\n            \"erro.html\",\n            {\n                \"request\": request,\n                \"mensagem\": f\"Documento {documento_id} n\u00e3o encontrado\",\n                \"voltar\": \"/documentos/\"\n            },\n            status_code=404\n        )\n\n    return templates.TemplateResponse(\n        \"documentos/detalhe.html\",\n        {\n            \"request\": request,\n            \"doc\": documento\n        }\n    )\n\n\n@router.get(\"/{documento_id}/json\")\nasync def obter_documento_json(request: Request, documento_id: int):\n    \"\"\"\n    Obt\u00e9m documento em formato JSON (para API).\n    \"\"\"\n    use_case = request.app.state.obter_use_case\n    documento = use_case.executar(documento_id)\n\n    if not documento:\n        raise HTTPException(status_code=404, detail=\"Documento n\u00e3o encontrado\")\n\n    return documento\n</code></pre>"},{"location":"fases/FASE9_WEB_INTERFACE/#3-rotas-de-analise-webroutesanalisepy","title":"3. Rotas de An\u00e1lise (<code>web/routes/analise.py</code>)","text":"<p>Responsabilidade: Endpoints para an\u00e1lise de texto.</p> <pre><code>@router.get(\"/acervo\")\nasync def analisar_acervo(request: Request):\n    \"\"\"\n    An\u00e1lise global do acervo.\n    \"\"\"\n    try:\n        repo_doc = request.app.state.repo_doc\n        total_docs = repo_doc.contar()\n\n        stats = {\n            \"total_docs\": total_docs,\n            \"total_palavras\": 0,\n            \"media_palavras_por_doc\": 0,\n            \"documentos_por_tamanho\": {\n                \"pequeno (&lt;1000 palavras)\": 0,\n                \"m\u00e9dio (1000-5000 palavras)\": 0,\n                \"grande (&gt;5000 palavras)\": 0\n            },\n            \"pessoas_mais_citadas\": [],\n            \"top_locais\": [],\n            \"top_organizacoes\": []\n        }\n\n        return templates.TemplateResponse(\n            \"analise/acervo.html\",\n            {\"request\": request, \"stats\": stats}\n        )\n    except Exception as e:\n        return templates.TemplateResponse(\n            \"erro.html\",\n            {\n                \"request\": request,\n                \"mensagem\": f\"Erro na an\u00e1lise: {str(e)}\",\n                \"voltar\": \"/\"\n            },\n            status_code=500\n        )\n\n\n@router.get(\"/documento/{documento_id}\")\nasync def analisar_documento_form(request: Request, documento_id: int):\n    \"\"\"\n    Formul\u00e1rio para an\u00e1lise de documento.\n    \"\"\"\n    return templates.TemplateResponse(\n        \"analise/form.html\",\n        {\"request\": request, \"documento_id\": documento_id}\n    )\n\n\n@router.post(\"/documento/{documento_id}\")\nasync def analisar_documento(\n    request: Request,\n    documento_id: int,\n    idioma: str = Form(\"ru\"),\n    gerar_wordcloud: bool = Form(False)\n):\n    \"\"\"\n    Executa an\u00e1lise de documento.\n    \"\"\"\n    use_case = request.app.state.analisar_doc_use_case\n\n    try:\n        resultado = use_case.executar(\n            documento_id=documento_id,\n            idioma=idioma,\n            gerar_wordcloud=gerar_wordcloud\n        )\n\n        if not resultado:\n            return templates.TemplateResponse(\n                \"erro.html\",\n                {\n                    \"request\": request,\n                    \"mensagem\": f\"Documento {documento_id} n\u00e3o encontrado\",\n                    \"voltar\": f\"/documentos/{documento_id}\"\n                },\n                status_code=404\n            )\n\n        return templates.TemplateResponse(\n            \"analise/resultado.html\",\n            {\n                \"request\": request,\n                \"analise\": resultado,\n                \"documento_id\": documento_id\n            }\n        )\n    except Exception as e:\n        return templates.TemplateResponse(\n            \"erro.html\",\n            {\n                \"request\": request,\n                \"mensagem\": f\"Erro na an\u00e1lise: {str(e)}\",\n                \"voltar\": f\"/documentos/{documento_id}\"\n            },\n            status_code=500\n        )\n</code></pre>"},{"location":"fases/FASE9_WEB_INTERFACE/#4-rotas-de-traducoes-webroutestraducoespy","title":"4. Rotas de Tradu\u00e7\u00f5es (<code>web/routes/traducoes.py</code>)","text":"<p>Responsabilidade: Endpoints para visualiza\u00e7\u00e3o de tradu\u00e7\u00f5es.</p> <pre><code>@router.get(\"/\")\nasync def listar_todas_traducoes(request: Request):\n    \"\"\"\n    Lista todas as tradu\u00e7\u00f5es do acervo.\n    \"\"\"\n    return templates.TemplateResponse(\n        \"traducoes/todas.html\",\n        {\n            \"request\": request,\n            \"mensagem\": \"Funcionalidade em desenvolvimento\"\n        }\n    )\n\n\n@router.get(\"/documento/{documento_id}\")\nasync def listar_traducoes(request: Request, documento_id: int):\n    \"\"\"\n    Lista tradu\u00e7\u00f5es de um documento.\n    \"\"\"\n    try:\n        repo_trad = request.app.state.repo_trad\n        repo_doc = request.app.state.repo_doc\n\n        documento = repo_doc.buscar_por_id(documento_id)\n        if not documento:\n            return templates.TemplateResponse(\n                \"erro.html\",\n                {\n                    \"request\": request,\n                    \"mensagem\": f\"Documento {documento_id} n\u00e3o encontrado\",\n                    \"voltar\": \"/documentos/\"\n                },\n                status_code=404\n            )\n\n        traducoes = repo_trad.listar_por_documento(documento_id)\n\n        return templates.TemplateResponse(\n            \"traducoes/lista.html\",\n            {\n                \"request\": request,\n                \"documento_id\": documento_id,\n                \"documento_titulo\": documento.titulo,\n                \"traducoes\": traducoes\n            }\n        )\n    except Exception as e:\n        return templates.TemplateResponse(\n            \"erro.html\",\n            {\n                \"request\": request,\n                \"mensagem\": f\"Erro: {str(e)}\",\n                \"voltar\": f\"/documentos/{documento_id}\"\n            },\n            status_code=500\n        )\n\n\n@router.get(\"/documento/{documento_id}/{idioma}\")\nasync def ver_traducao(request: Request, documento_id: int, idioma: str):\n    \"\"\"\n    Visualiza uma tradu\u00e7\u00e3o espec\u00edfica.\n    \"\"\"\n    try:\n        repo_trad = request.app.state.repo_trad\n        repo_doc = request.app.state.repo_doc\n\n        traducao = repo_trad.buscar_por_documento(documento_id, idioma)\n        if not traducao:\n            return templates.TemplateResponse(\n                \"erro.html\",\n                {\n                    \"request\": request,\n                    \"mensagem\": f\"Tradu\u00e7\u00e3o {idioma} n\u00e3o encontrada\",\n                    \"voltar\": f\"/traducoes/documento/{documento_id}\"\n                },\n                status_code=404\n            )\n\n        documento = repo_doc.buscar_por_id(documento_id)\n\n        return templates.TemplateResponse(\n            \"traducoes/detalhe.html\",\n            {\n                \"request\": request,\n                \"traducao\": traducao,\n                \"documento\": documento,\n                \"idioma\": idioma\n            }\n        )\n    except Exception as e:\n        return templates.TemplateResponse(\n            \"erro.html\",\n            {\n                \"request\": request,\n                \"mensagem\": f\"Erro: {str(e)}\",\n                \"voltar\": f\"/traducoes/documento/{documento_id}\"\n            },\n            status_code=500\n        )\n</code></pre>"},{"location":"fases/FASE9_WEB_INTERFACE/#5-rotas-de-estatisticas-webroutesestatisticaspy","title":"5. Rotas de Estat\u00edsticas (<code>web/routes/estatisticas.py</code>)","text":"<p>Responsabilidade: Endpoints para estat\u00edsticas e dashboard.</p> <pre><code>@router.get(\"/\")\nasync def estatisticas(request: Request):\n    \"\"\"\n    Dashboard de estat\u00edsticas.\n    \"\"\"\n    use_case = request.app.state.estatisticas_use_case\n    stats = use_case.executar()\n\n    return templates.TemplateResponse(\n        \"estatisticas/dashboard.html\",\n        {\n            \"request\": request,\n            \"stats\": stats\n        }\n    )\n\n\n@router.get(\"/json\")\nasync def estatisticas_json(request: Request):\n    \"\"\"\n    Estat\u00edsticas em formato JSON.\n    \"\"\"\n    use_case = request.app.state.estatisticas_use_case\n    stats = use_case.executar()\n\n    return {\n        \"total_documentos\": stats.total_documentos,\n        \"total_traducoes\": stats.total_traducoes,\n        \"por_centro\": stats.documentos_por_centro,\n        \"por_tipo\": stats.documentos_por_tipo,\n        \"pessoas_frequentes\": [\n            {\"nome\": nome_en, \"frequencia\": count}\n            for nome_ru, count, nome_en in stats.pessoas_frequentes[:10]\n        ]\n    }\n</code></pre>"},{"location":"fases/FASE9_WEB_INTERFACE/#6-rotas-administrativas-webroutesadminpy","title":"6. Rotas Administrativas (<code>web/routes/admin.py</code>)","text":"<p>Responsabilidade: Painel de controle e gerenciamento de servi\u00e7os.</p> <pre><code>@router.get(\"/services\")\nasync def admin_services(request: Request):\n    \"\"\"\n    Painel de controle dos servi\u00e7os.\n    \"\"\"\n    registry = request.app.state.registry\n    config = request.app.state.config\n\n    status = registry.get_status()\n\n    return templates.TemplateResponse(\n        \"admin/services.html\",\n        {\n            \"request\": request,\n            \"status\": status,\n            \"config\": config\n        }\n    )\n\n\n@router.post(\"/services/{name}/clear-cache\")\nasync def clear_service_cache(request: Request, name: str):\n    \"\"\"\n    Limpa cache de um servi\u00e7o (for\u00e7a recarga).\n    \"\"\"\n    registry = request.app.state.registry\n\n    try:\n        registry.clear_cache(name)\n        return {\"status\": \"ok\", \"message\": f\"Cache limpo para {name}\"}\n    except Exception as e:\n        raise HTTPException(status_code=500, detail=str(e))\n</code></pre>"},{"location":"fases/FASE9_WEB_INTERFACE/#templates-html","title":"\ud83c\udfa8 Templates HTML","text":""},{"location":"fases/FASE9_WEB_INTERFACE/#template-base-templatesbasehtml","title":"Template Base (<code>templates/base.html</code>)","text":"<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html lang=\"pt-BR\"&gt;\n&lt;head&gt;\n    &lt;meta charset=\"UTF-8\"&gt;\n    &lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"&gt;\n    &lt;title&gt;ShowTrials - {% block title %}Documentos Hist\u00f3ricos{% endblock %}&lt;/title&gt;\n    &lt;link href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css\" rel=\"stylesheet\"&gt;\n    &lt;link href=\"/static/css/style.css\" rel=\"stylesheet\"&gt;\n&lt;/head&gt;\n&lt;body&gt;\n    &lt;nav class=\"navbar navbar-expand-lg navbar-dark bg-dark\"&gt;\n        &lt;div class=\"container\"&gt;\n            &lt;a class=\"navbar-brand\" href=\"/\"&gt;\ud83c\udfdb\ufe0f ShowTrials&lt;/a&gt;\n            &lt;button class=\"navbar-toggler\" type=\"button\" data-bs-toggle=\"collapse\" data-bs-target=\"#navbarNav\"&gt;\n                &lt;span class=\"navbar-toggler-icon\"&gt;&lt;/span&gt;\n            &lt;/button&gt;\n            &lt;div class=\"collapse navbar-collapse\" id=\"navbarNav\"&gt;\n                &lt;ul class=\"navbar-nav\"&gt;\n                    &lt;li class=\"nav-item\"&gt;\n                        &lt;a class=\"nav-link\" href=\"/documentos/\"&gt;\ud83d\udccb Documentos&lt;/a&gt;\n                    &lt;/li&gt;\n                    &lt;li class=\"nav-item\"&gt;\n                        &lt;a class=\"nav-link\" href=\"/estatisticas/\"&gt;\ud83d\udcca Estat\u00edsticas&lt;/a&gt;\n                    &lt;/li&gt;\n                    &lt;li class=\"nav-item\"&gt;\n                        &lt;a class=\"nav-link\" href=\"/analise/acervo\"&gt;\ud83d\udd0d An\u00e1lise&lt;/a&gt;\n                    &lt;/li&gt;\n                    &lt;li class=\"nav-item\"&gt;\n                        &lt;a class=\"nav-link\" href=\"/traducoes/\"&gt;\ud83c\udf10 Tradu\u00e7\u00f5es&lt;/a&gt;\n                    &lt;/li&gt;\n                &lt;/ul&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n    &lt;/nav&gt;\n\n    &lt;main class=\"container mt-4\"&gt;\n        {% block content %}{% endblock %}\n    &lt;/main&gt;\n\n    &lt;footer class=\"footer mt-5 py-3 bg-light\"&gt;\n        &lt;div class=\"container text-center\"&gt;\n            &lt;span class=\"text-muted\"&gt;ShowTrials - Projeto de TCC \u00a9 2026&lt;/span&gt;\n        &lt;/div&gt;\n    &lt;/footer&gt;\n\n    &lt;script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js\"&gt;&lt;/script&gt;\n    &lt;script src=\"https://cdn.jsdelivr.net/npm/chart.js\"&gt;&lt;/script&gt;\n    &lt;script src=\"/static/js/main.js\"&gt;&lt;/script&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>"},{"location":"fases/FASE9_WEB_INTERFACE/#pagina-inicial-templatesindexhtml","title":"P\u00e1gina Inicial (<code>templates/index.html</code>)","text":"<pre><code>{% extends \"base.html\" %}\n\n{% block title %}In\u00edcio{% endblock %}\n\n{% block content %}\n&lt;div class=\"row\"&gt;\n    &lt;div class=\"col-md-12 text-center mb-5\"&gt;\n        &lt;h1 class=\"display-4\"&gt;\ud83d\udcda ShowTrials&lt;/h1&gt;\n        &lt;p class=\"lead\"&gt;Sistema de gest\u00e3o de documentos hist\u00f3ricos dos processos de Moscou e Leningrado&lt;/p&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n\n&lt;div class=\"row\"&gt;\n    &lt;div class=\"col-md-4\"&gt;\n        &lt;div class=\"card text-center\"&gt;\n            &lt;div class=\"card-body\"&gt;\n                &lt;h5 class=\"card-title\"&gt;\ud83d\udccb Documentos&lt;/h5&gt;\n                &lt;p class=\"display-4\"&gt;{{ total_docs }}&lt;/p&gt;\n                &lt;p class=\"card-text\"&gt;documentos no acervo&lt;/p&gt;\n                &lt;a href=\"/documentos/\" class=\"btn btn-primary\"&gt;Ver todos&lt;/a&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n    &lt;div class=\"col-md-4\"&gt;\n        &lt;div class=\"card text-center\"&gt;\n            &lt;div class=\"card-body\"&gt;\n                &lt;h5 class=\"card-title\"&gt;\ud83c\udf10 Tradu\u00e7\u00f5es&lt;/h5&gt;\n                &lt;p class=\"display-4\"&gt;{{ total_trad }}&lt;/p&gt;\n                &lt;p class=\"card-text\"&gt;tradu\u00e7\u00f5es realizadas&lt;/p&gt;\n                &lt;a href=\"/analise/acervo\" class=\"btn btn-success\"&gt;An\u00e1lises&lt;/a&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n    &lt;div class=\"col-md-4\"&gt;\n        &lt;div class=\"card text-center\"&gt;\n            &lt;div class=\"card-body\"&gt;\n                &lt;h5 class=\"card-title\"&gt;\ud83d\udcca Estat\u00edsticas&lt;/h5&gt;\n                &lt;p class=\"display-4\"&gt;\ud83d\udd0d&lt;/p&gt;\n                &lt;p class=\"card-text\"&gt;m\u00e9tricas do acervo&lt;/p&gt;\n                &lt;a href=\"/estatisticas/\" class=\"btn btn-info\"&gt;Ver gr\u00e1ficos&lt;/a&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n{% endblock %}\n</code></pre>"},{"location":"fases/FASE9_WEB_INTERFACE/#lista-de-documentos-templatesdocumentoslistahtml","title":"Lista de Documentos (<code>templates/documentos/lista.html</code>)","text":"<pre><code>{% extends \"base.html\" %}\n\n{% block title %}Documentos{% endblock %}\n\n{% block content %}\n&lt;h2&gt;\ud83d\udccb Documentos&lt;/h2&gt;\n\n&lt;div class=\"row mb-3\"&gt;\n    &lt;div class=\"col-md-6\"&gt;\n        &lt;div class=\"btn-group\"&gt;\n            &lt;a href=\"/documentos/?centro=lencenter\" class=\"btn btn-outline-primary {% if centro == 'lencenter' %}active{% endif %}\"&gt;\n                Leningrad\n            &lt;/a&gt;\n            &lt;a href=\"/documentos/?centro=moscenter\" class=\"btn btn-outline-primary {% if centro == 'moscenter' %}active{% endif %}\"&gt;\n                Moscow\n            &lt;/a&gt;\n            &lt;a href=\"/documentos/\" class=\"btn btn-outline-secondary {% if not centro %}active{% endif %}\"&gt;\n                Todos\n            &lt;/a&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n\n&lt;table class=\"table table-striped table-hover\"&gt;\n    &lt;thead&gt;\n        &lt;tr&gt;\n            &lt;th&gt;ID&lt;/th&gt;\n            &lt;th&gt;Tipo&lt;/th&gt;\n            &lt;th&gt;Data&lt;/th&gt;\n            &lt;th&gt;Pessoa&lt;/th&gt;\n            &lt;th&gt;T\u00edtulo&lt;/th&gt;\n            &lt;th&gt;A\u00e7\u00f5es&lt;/th&gt;\n        &lt;/tr&gt;\n    &lt;/thead&gt;\n    &lt;tbody&gt;\n        {% for doc in documentos %}\n        &lt;tr&gt;\n            &lt;td&gt;{{ doc.id }}&lt;/td&gt;\n            &lt;td&gt;\n                {% if doc.tipo == 'interrogatorio' %}\ud83d\udd0d\n                {% elif doc.tipo == 'carta' %}\u2709\ufe0f\n                {% elif doc.tipo == 'acareacao' %}\u2696\ufe0f\n                {% elif doc.tipo == 'acusacao' %}\ud83d\udcdc\n                {% else %}\ud83d\udcc4{% endif %}\n                {{ doc.tipo_descricao or 'Desconhecido' }}\n            &lt;/td&gt;\n            &lt;td&gt;{{ doc.data_original or 'N/D' }}&lt;/td&gt;\n            &lt;td&gt;{{ doc.pessoa_principal_en or doc.pessoa_principal or '' }}&lt;/td&gt;\n            &lt;td&gt;{{ doc.titulo[:50] }}...&lt;/td&gt;\n            &lt;td&gt;\n                &lt;a href=\"/documentos/{{ doc.id }}\" class=\"btn btn-sm btn-info\"&gt;Ver&lt;/a&gt;\n                &lt;a href=\"/analise/documento/{{ doc.id }}\" class=\"btn btn-sm btn-success\"&gt;Analisar&lt;/a&gt;\n            &lt;/td&gt;\n        &lt;/tr&gt;\n        {% endfor %}\n    &lt;/tbody&gt;\n&lt;/table&gt;\n\n&lt;nav aria-label=\"Pagina\u00e7\u00e3o\"&gt;\n    &lt;ul class=\"pagination\"&gt;\n        {% for p in range(1, total_paginas + 1) %}\n        &lt;li class=\"page-item {% if p == pagina %}active{% endif %}\"&gt;\n            &lt;a class=\"page-link\" href=\"/documentos/?pagina={{ p }}{% if centro %}&amp;centro={{ centro }}{% endif %}\"&gt;\n                {{ p }}\n            &lt;/a&gt;\n        &lt;/li&gt;\n        {% endfor %}\n    &lt;/ul&gt;\n&lt;/nav&gt;\n{% endblock %}\n</code></pre>"},{"location":"fases/FASE9_WEB_INTERFACE/#dashboard-de-estatisticas-templatesestatisticasdashboardhtml","title":"Dashboard de Estat\u00edsticas (<code>templates/estatisticas/dashboard.html</code>)","text":"<pre><code>{% extends \"base.html\" %}\n\n{% block title %}Estat\u00edsticas{% endblock %}\n\n{% block content %}\n&lt;div class=\"row\"&gt;\n    &lt;div class=\"col-md-12\"&gt;\n        &lt;h2&gt;\ud83d\udcca Estat\u00edsticas do Acervo&lt;/h2&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n\n&lt;div class=\"row mt-4\"&gt;\n    &lt;div class=\"col-md-4\"&gt;\n        &lt;div class=\"card text-white bg-primary mb-3\"&gt;\n            &lt;div class=\"card-body\"&gt;\n                &lt;h5 class=\"card-title\"&gt;Total de Documentos&lt;/h5&gt;\n                &lt;p class=\"display-4\"&gt;{{ stats.total_documentos }}&lt;/p&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n    &lt;div class=\"col-md-4\"&gt;\n        &lt;div class=\"card text-white bg-success mb-3\"&gt;\n            &lt;div class=\"card-body\"&gt;\n                &lt;h5 class=\"card-title\"&gt;Total de Tradu\u00e7\u00f5es&lt;/h5&gt;\n                &lt;p class=\"display-4\"&gt;{{ stats.total_traducoes }}&lt;/p&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n    &lt;div class=\"col-md-4\"&gt;\n        &lt;div class=\"card text-white bg-info mb-3\"&gt;\n            &lt;div class=\"card-body\"&gt;\n                &lt;h5 class=\"card-title\"&gt;Percentual Traduzido&lt;/h5&gt;\n                &lt;p class=\"display-4\"&gt;{{ \"%.1f\"|format(stats.percentual_traduzido) }}%&lt;/p&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n\n&lt;div class=\"row mt-4\"&gt;\n    &lt;div class=\"col-md-6\"&gt;\n        &lt;div class=\"card\"&gt;\n            &lt;div class=\"card-header\"&gt;\n                \ud83c\udfdb\ufe0f Documentos por Centro\n            &lt;/div&gt;\n            &lt;div class=\"card-body\"&gt;\n                &lt;canvas id=\"graficoCentro\"&gt;&lt;/canvas&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n    &lt;div class=\"col-md-6\"&gt;\n        &lt;div class=\"card\"&gt;\n            &lt;div class=\"card-header\"&gt;\n                \ud83d\udccb Documentos por Tipo\n            &lt;/div&gt;\n            &lt;div class=\"card-body\"&gt;\n                &lt;canvas id=\"graficoTipo\"&gt;&lt;/canvas&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n\n&lt;div class=\"row mt-4\"&gt;\n    &lt;div class=\"col-md-6\"&gt;\n        &lt;div class=\"card\"&gt;\n            &lt;div class=\"card-header\"&gt;\n                \ud83d\udc64 Pessoas Mais Frequentes\n            &lt;/div&gt;\n            &lt;div class=\"card-body\"&gt;\n                &lt;table class=\"table\"&gt;\n                    &lt;thead&gt;\n                        &lt;tr&gt;\n                            &lt;th&gt;#&lt;/th&gt;\n                            &lt;th&gt;Nome&lt;/th&gt;\n                            &lt;th&gt;Frequ\u00eancia&lt;/th&gt;\n                        &lt;/tr&gt;\n                    &lt;/thead&gt;\n                    &lt;tbody&gt;\n                        {% for nome_ru, count, nome_en in stats.pessoas_frequentes[:10] %}\n                        &lt;tr&gt;\n                            &lt;td&gt;{{ loop.index }}&lt;/td&gt;\n                            &lt;td&gt;{{ nome_en }}&lt;/td&gt;\n                            &lt;td&gt;&lt;span class=\"badge bg-primary\"&gt;{{ count }}&lt;/span&gt;&lt;/td&gt;\n                        &lt;/tr&gt;\n                        {% endfor %}\n                    &lt;/tbody&gt;\n                &lt;/table&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n    &lt;div class=\"col-md-6\"&gt;\n        &lt;div class=\"card\"&gt;\n            &lt;div class=\"card-header\"&gt;\n                \u2709\ufe0f Documentos Especiais\n            &lt;/div&gt;\n            &lt;div class=\"card-body\"&gt;\n                &lt;table class=\"table\"&gt;\n                    &lt;tr&gt;\n                        &lt;td&gt;Cartas&lt;/td&gt;\n                        &lt;td class=\"text-end\"&gt;&lt;span class=\"badge bg-primary\"&gt;{{ stats.cartas }}&lt;/span&gt;&lt;/td&gt;\n                    &lt;/tr&gt;\n                    &lt;tr&gt;\n                        &lt;td&gt;Declara\u00e7\u00f5es&lt;/td&gt;\n                        &lt;td class=\"text-end\"&gt;&lt;span class=\"badge bg-primary\"&gt;{{ stats.declaracoes }}&lt;/span&gt;&lt;/td&gt;\n                    &lt;/tr&gt;\n                    &lt;tr&gt;\n                        &lt;td&gt;Relat\u00f3rios NKVD&lt;/td&gt;\n                        &lt;td class=\"text-end\"&gt;&lt;span class=\"badge bg-primary\"&gt;{{ stats.relatorios }}&lt;/span&gt;&lt;/td&gt;\n                    &lt;/tr&gt;\n                    &lt;tr&gt;\n                        &lt;td&gt;Acarea\u00e7\u00f5es&lt;/td&gt;\n                        &lt;td class=\"text-end\"&gt;&lt;span class=\"badge bg-primary\"&gt;{{ stats.acareacoes }}&lt;/span&gt;&lt;/td&gt;\n                    &lt;/tr&gt;\n                &lt;/table&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n\n&lt;script&gt;\ndocument.addEventListener('DOMContentLoaded', function() {\n    // Gr\u00e1fico de centros\n    new Chart(document.getElementById('graficoCentro'), {\n        type: 'doughnut',\n        data: {\n            labels: ['Leningrad', 'Moscow'],\n            datasets: [{\n                data: [\n                    {{ stats.documentos_por_centro.get('lencenter', 0) }},\n                    {{ stats.documentos_por_centro.get('moscenter', 0) }}\n                ],\n                backgroundColor: ['#17a2b8', '#6f42c1']\n            }]\n        }\n    });\n\n    // Gr\u00e1fico de tipos\n    new Chart(document.getElementById('graficoTipo'), {\n        type: 'bar',\n        data: {\n            labels: [{% for tipo, count in stats.documentos_por_tipo.items() %}'{{ tipo }}',{% endfor %}],\n            datasets: [{\n                label: 'Quantidade',\n                data: [{% for tipo, count in stats.documentos_por_tipo.items() %}{{ count }},{% endfor %}],\n                backgroundColor: '#28a745'\n            }]\n        }\n    });\n});\n&lt;/script&gt;\n{% endblock %}\n</code></pre>"},{"location":"fases/FASE9_WEB_INTERFACE/#css-personalizado-staticcssstylecss","title":"\ud83c\udfa8 CSS Personalizado (<code>static/css/style.css</code>)","text":"<pre><code>:root {\n    --primary-color: #2c3e50;\n    --secondary-color: #3498db;\n    --success-color: #27ae60;\n    --warning-color: #f39c12;\n    --danger-color: #e74c3c;\n    --dark-bg: #34495e;\n}\n\nbody {\n    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n    min-height: 100vh;\n    display: flex;\n    flex-direction: column;\n}\n\nmain.container {\n    background: white;\n    border-radius: 15px;\n    padding: 2rem;\n    box-shadow: 0 10px 30px rgba(0,0,0,0.2);\n    margin-top: 2rem;\n    margin-bottom: 2rem;\n    flex: 1;\n}\n\n.navbar {\n    box-shadow: 0 2px 10px rgba(0,0,0,0.1);\n}\n\n.navbar-brand {\n    font-size: 1.8rem;\n    font-weight: bold;\n    background: linear-gradient(135deg, #fff 0%, #e0e0e0 100%);\n    -webkit-background-clip: text;\n    -webkit-text-fill-color: transparent;\n    background-clip: text;\n}\n\n.card {\n    border: none;\n    border-radius: 10px;\n    box-shadow: 0 5px 15px rgba(0,0,0,0.08);\n    transition: transform 0.3s ease;\n}\n\n.card:hover {\n    transform: translateY(-5px);\n    box-shadow: 0 8px 25px rgba(0,0,0,0.15);\n}\n\n.card-header {\n    border-radius: 10px 10px 0 0 !important;\n    font-weight: 600;\n}\n\n.metric-card {\n    text-align: center;\n    padding: 1.8rem;\n    border-radius: 15px;\n    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n    color: white;\n    box-shadow: 0 10px 20px rgba(102,126,234,0.3);\n    transition: all 0.3s ease;\n}\n\n.metric-card:hover {\n    transform: scale(1.05);\n    box-shadow: 0 15px 30px rgba(102,126,234,0.4);\n}\n\n.metric-card h3 {\n    font-size: 3rem;\n    font-weight: bold;\n    margin-bottom: 0.5rem;\n}\n\n.metric-card p {\n    font-size: 1.1rem;\n    opacity: 0.9;\n    margin-bottom: 0;\n}\n\n.btn {\n    border-radius: 8px;\n    padding: 0.5rem 1.5rem;\n    font-weight: 500;\n    transition: all 0.3s ease;\n}\n\n.btn:hover {\n    transform: translateY(-2px);\n    box-shadow: 0 5px 15px rgba(0,0,0,0.2);\n}\n\n.table {\n    border-radius: 10px;\n    overflow: hidden;\n}\n\n.table thead th {\n    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n    color: white;\n    border: none;\n    font-weight: 600;\n}\n\n.badge {\n    padding: 0.5rem 1rem;\n    border-radius: 20px;\n    font-weight: 500;\n}\n\n.footer {\n    margin-top: auto;\n    background: rgba(255,255,255,0.9);\n    backdrop-filter: blur(10px);\n    border-top: 1px solid rgba(0,0,0,0.1);\n}\n\n@keyframes fadeIn {\n    from { opacity: 0; transform: translateY(20px); }\n    to { opacity: 1; transform: translateY(0); }\n}\n\n.card, .metric-card, .alert {\n    animation: fadeIn 0.5s ease-out;\n}\n\n@media (max-width: 768px) {\n    main.container {\n        padding: 1rem;\n        margin-top: 1rem;\n    }\n\n    .metric-card {\n        margin-bottom: 1rem;\n    }\n\n    .metric-card h3 {\n        font-size: 2rem;\n    }\n}\n\n::-webkit-scrollbar {\n    width: 10px;\n}\n\n::-webkit-scrollbar-track {\n    background: #f1f1f1;\n    border-radius: 5px;\n}\n\n::-webkit-scrollbar-thumb {\n    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n    border-radius: 5px;\n}\n\n::-webkit-scrollbar-thumb:hover {\n    background: linear-gradient(135deg, #764ba2 0%, #667eea 100%);\n}\n</code></pre>"},{"location":"fases/FASE9_WEB_INTERFACE/#mapeamento-cli-web","title":"\ud83d\udcca Mapeamento CLI \u2194 Web","text":"Funcionalidade CLI Web Listar documentos Menu \u2192 1 <code>/documentos/</code> Filtrar por centro Menu \u2192 2 <code>?centro=lencenter</code> Visualizar documento Digitar ID <code>/documentos/1</code> Estat\u00edsticas Menu \u2192 4 <code>/estatisticas/</code> Relat\u00f3rios Menu \u2192 5 (via CLI) An\u00e1lise individual Menu \u2192 6 \u2192 1 <code>/analise/documento/1</code> An\u00e1lise do acervo Menu \u2192 6 \u2192 2 <code>/analise/acervo</code> Nuvem de palavras Menu \u2192 6 \u2192 3 <code>/analise/acervo/wordcloud</code> Ver tradu\u00e7\u00f5es Tecla 't' <code>/traducoes/documento/1</code> Painel admin - <code>/admin/services</code>"},{"location":"fases/FASE9_WEB_INTERFACE/#fluxo-de-dados-na-web","title":"\ud83d\udd04 Fluxo de Dados na Web","text":"<pre><code>[Navegador] \u2192 [Rota FastAPI] \u2192 [Caso de Uso] \u2192 [Reposit\u00f3rio]\n     \u2191              \u2193                \u2193               \u2193\n     \u2514\u2500\u2500 [Template] \u2190 [DTO] \u2190 [Entidade] \u2190 [SQLite]\n</code></pre> <p>Exemplo pr\u00e1tico (listar documentos):</p> <pre><code>1. Usu\u00e1rio acessa /documentos/?pagina=2\n2. Rota extrai par\u00e2metros (pagina=2)\n3. Rota chama listar_use_case.executar(pagina=2)\n4. Caso de uso calcula offset e chama repo.listar()\n5. Reposit\u00f3rio retorna entidades\n6. Caso de uso converte para DTOs\n7. Template renderiza lista.html com os DTOs\n8. Usu\u00e1rio v\u00ea tabela de documentos\n</code></pre>"},{"location":"fases/FASE9_WEB_INTERFACE/#testes-realizados","title":"\ud83e\uddea Testes Realizados","text":"Teste A\u00e7\u00e3o Resultado Esperado Status P\u00e1gina inicial <code>/</code> Cards com totais \u2705 Lista documentos <code>/documentos/</code> Tabela paginada \u2705 Filtro centro <code>/documentos/?centro=lencenter</code> Apenas Leningrad \u2705 Detalhe documento <code>/documentos/1</code> Metadados + conte\u00fado \u2705 JSON documento <code>/documentos/1/json</code> Dados em JSON \u2705 Dashboard <code>/estatisticas/</code> Gr\u00e1ficos e tabelas \u2705 Estat\u00edsticas JSON <code>/estatisticas/json</code> Dados em JSON \u2705 An\u00e1lise formul\u00e1rio <code>/analise/documento/1</code> Formul\u00e1rio de an\u00e1lise \u2705 An\u00e1lise POST Submeter formul\u00e1rio Resultados \u2705 An\u00e1lise acervo <code>/analise/acervo</code> Estat\u00edsticas globais \u2705 Lista tradu\u00e7\u00f5es <code>/traducoes/documento/1</code> Cards de tradu\u00e7\u00f5es \u2705 Ver tradu\u00e7\u00e3o <code>/traducoes/documento/1/en</code> Conte\u00fado traduzido \u2705 Painel admin <code>/admin/services</code> Status dos servi\u00e7os \u2705 Status API <code>/status</code> JSON com status \u2705 Rota inexistente <code>/naoexiste</code> P\u00e1gina de erro \u2705"},{"location":"fases/FASE9_WEB_INTERFACE/#metricas-da-fase","title":"\ud83d\udcca M\u00e9tricas da Fase","text":"M\u00e9trica Valor Rotas implementadas 15+ Templates HTML 15+ Arquivos est\u00e1ticos 3 Linhas de c\u00f3digo ~1500 Testes manuais 36 cen\u00e1rios Documenta\u00e7\u00e3o autom\u00e1tica Swagger UI"},{"location":"fases/FASE9_WEB_INTERFACE/#principios-aplicados","title":"\ud83d\udcda Princ\u00edpios Aplicados","text":"Princ\u00edpio Aplica\u00e7\u00e3o Clean Architecture Mesmos casos de uso da CLI DRY Templates reutilizam base.html Separation of Concerns Rotas separadas por dom\u00ednio Responsive Design Bootstrap + CSS customizado RESTful Endpoints sem\u00e2nticos Self-documenting FastAPI gera Swagger automaticamente"},{"location":"fases/FASE9_WEB_INTERFACE/#integracao-com-fases-anteriores","title":"\ud83d\udd17 Integra\u00e7\u00e3o com Fases Anteriores","text":"Fase Relacionamento FASE 1-2 Usa entidades e casos de uso FASE 3 Reposit\u00f3rios compartilhados FASE 4 Mesmos casos de uso da CLI FASE 5 Rotas de tradu\u00e7\u00e3o FASE 6 Exporta\u00e7\u00e3o (futuro) FASE 7 Dashboard de estat\u00edsticas FASE 8 Rotas de an\u00e1lise FASE 10 Service Registry + lazy loading"},{"location":"fases/FASE9_WEB_INTERFACE/#como-executar","title":"\ud83d\ude80 Como Executar","text":"<pre><code># 1. Instalar depend\u00eancias (se necess\u00e1rio)\npoetry add fastapi uvicorn jinja2 aiofiles python-multipart\n\n# 2. Iniciar servidor\npython web_run.py\n\n# 3. Acessar\n# http://localhost:8000\n# http://localhost:8000/docs (documenta\u00e7\u00e3o autom\u00e1tica)\n</code></pre>"},{"location":"fases/FASE9_WEB_INTERFACE/#metricas-do-projeto-apos-fase-9","title":"\ud83d\udcc8 M\u00e9tricas do Projeto (Ap\u00f3s FASE 9)","text":"<pre><code>\ud83d\udcca DOMAIN LAYER: 5 entidades | 18 testes\n\ud83d\udcca APPLICATION LAYER: 8 casos de uso | 10 testes\n\ud83d\udcca INFRASTRUCTURE LAYER: 6 m\u00f3dulos | 20 testes\n\ud83d\udcca INTERFACE LAYER:\n   \u251c\u2500\u2500 CLI: 12 m\u00f3dulos | Validada manualmente\n   \u2514\u2500\u2500 Web: 15+ templates | 15+ rotas\n\ud83d\udcca TOTAL: 48 testes automatizados + interfaces funcionais\n</code></pre>"},{"location":"fases/FASE9_WEB_INTERFACE/#licoes-aprendidas","title":"\ud83d\udd0d Li\u00e7\u00f5es Aprendidas","text":"<ol> <li>FastAPI \u00e9 produtivo: Documenta\u00e7\u00e3o autom\u00e1tica e valida\u00e7\u00e3o</li> <li>Templates Jinja2 poderosos: Reutiliza\u00e7\u00e3o com extends e includes</li> <li>Gr\u00e1ficos com Chart.js: Simples e eficaz</li> <li>Responsividade \u00e9 essencial: Bootstrap garante boa apar\u00eancia em mobile</li> <li>Inje\u00e7\u00e3o de depend\u00eancia via app.state: Compartilha recursos entre rotas</li> <li>Mesmos casos de uso: CLI e Web compartilham a mesma l\u00f3gica</li> </ol>"},{"location":"fases/FASE9_WEB_INTERFACE/#conclusao-da-fase","title":"\ud83c\udfc1 Conclus\u00e3o da Fase","text":"<p>A FASE 9 entregou uma interface web completa com:</p> <p>\u2705 15+ rotas REST \u2705 15+ templates HTML \u2705 Dashboard com gr\u00e1ficos interativos \u2705 Visualiza\u00e7\u00e3o de documentos e tradu\u00e7\u00f5es \u2705 An\u00e1lise de texto via web \u2705 Painel administrativo \u2705 Documenta\u00e7\u00e3o autom\u00e1tica da API \u2705 Design responsivo e moderno \u2705 Integra\u00e7\u00e3o total com as fases anteriores</p>"},{"location":"fases/FASE9_WEB_INTERFACE/#autor","title":"\ud83d\udc64 Autor","text":"<p>Thiago Ribeiro - Projeto de TCC</p> <sub>FASE 9 conclu\u00edda em 16 de Fevereiro de 2026</sub> <sub>\u2705 Pronto para a FASE 10 - Service Registry e Lazy Loading</sub> <p>```</p>"},{"location":"flows/code_review_flow/","title":"Code Review Flow","text":""},{"location":"flows/code_review_flow/#flow-2-code-review-flow-showtrials","title":"\ud83d\udcda FLOW 2: CODE REVIEW FLOW - SHOWTRIALS","text":"**Guia completo para auto-revis\u00e3o de c\u00f3digo antes de merge**"},{"location":"flows/code_review_flow/#informacoes-do-documento","title":"\ud83d\udcc5 Informa\u00e7\u00f5es do Documento","text":"Item Descri\u00e7\u00e3o Data 20 de Fevereiro de 2026 Autor Thiago Ribeiro Vers\u00e3o 1.0 Relacionado a Git Flow, Quality Flow, Telemetry Flow"},{"location":"flows/code_review_flow/#objetivo","title":"\ud83c\udfaf OBJETIVO","text":"<p>Estabelecer um checklist sistem\u00e1tico de auto-revis\u00e3o para garantir que cada merge mantenha a qualidade do projeto, mesmo trabalhando sozinho.</p>"},{"location":"flows/code_review_flow/#por-que-revisar-seu-proprio-codigo","title":"Por que revisar seu pr\u00f3prio c\u00f3digo?","text":"Motivo Explica\u00e7\u00e3o Evitar erros bobos Um par de olhos fresco pega o que a mente cansada deixou passar Manter consist\u00eancia Garantir que todos os arquivos sigam o mesmo padr\u00e3o Documentar decis\u00f5es Commits e PRs contam a hist\u00f3ria do projeto Acelerar debugging Erros encontrados agora s\u00e3o mais baratos que depois Profissionalismo C\u00f3digo revisado transmite cuidado"},{"location":"flows/code_review_flow/#checklist-completo-de-auto-revisao","title":"\ud83d\udccb CHECKLIST COMPLETO DE AUTO-REVIS\u00c3O","text":""},{"location":"flows/code_review_flow/#antes-de-abrir-o-pr-ou-fazer-o-merge","title":"Antes de abrir o PR (ou fazer o merge)","text":"<pre><code>## \u2705 CHECKLIST PR\u00c9-MERGE\n</code></pre>"},{"location":"flows/code_review_flow/#1-estrutura-do-codigo","title":"\ud83d\udcc1 1. ESTRUTURA DO C\u00d3DIGO","text":"<ul> <li>[ ] A branch segue o padr\u00e3o de nomenclatura?</li> <li><code>type/classificar-documento</code> (fases)</li> <li><code>fix/tipo-documento-keyerror</code> (corre\u00e7\u00f5es)</li> <li><code>feat/modo-escuro-cli</code> (melhorias)</li> <li> <p><code>docs/atualizar-readme</code> (documenta\u00e7\u00e3o)</p> </li> <li> <p>[ ] O escopo \u00e9 \u00fanico? (apenas uma responsabilidade por branch)</p> </li> <li> <p>[ ] Removeu c\u00f3digo comentado?   <pre><code>grep -r \"#.* c\u00f3digo antigo\" src/\n</code></pre></p> </li> <li> <p>[ ] Removeu prints de debug?   <pre><code>grep -r \"print(\" src/\ngrep -r \"console.print\" src/  # s\u00f3 onde n\u00e3o deveria estar\n</code></pre></p> </li> <li> <p>[ ] Nomes de vari\u00e1veis s\u00e3o claros e auto-documentados?   <pre><code># Ruim\nx = repo.listar()\nfor i in x:\n    y = i.nome\n\n# Bom\ndocumentos = repo.listar()\nfor documento in documentos:\n    nome_autor = documento.nome\n</code></pre></p> </li> <li> <p>[ ] Fun\u00e7\u00f5es/m\u00e9todos s\u00e3o pequenos (&lt; 50 linhas)?</p> </li> <li> <p>[ ] Evitou repeti\u00e7\u00e3o de c\u00f3digo (DRY)?</p> </li> </ul>"},{"location":"flows/code_review_flow/#2-testes","title":"\ud83e\uddea 2. TESTES","text":""},{"location":"flows/code_review_flow/#testes-de-logica-test_py","title":"Testes de l\u00f3gica (<code>test_*.py</code>)","text":"<ul> <li>[ ] Criou testes para cobrir o arquivo modificado?</li> <li>[ ] Testes passam localmente?   <pre><code>task test-file --path src/tests/test_classificar_documento.py\n</code></pre></li> <li>[ ] Testou casos de sucesso?</li> <li>[ ] Testou casos de erro esperado? (formatos inv\u00e1lidos, documentos n\u00e3o encontrados)</li> <li>[ ] Testou casos limite? (listas vazias, valores None, strings vazias)</li> <li>[ ] Usou fixtures para evitar repeti\u00e7\u00e3o?   <pre><code>@pytest.fixture\ndef repo_mock(self):\n    return Mock()\n</code></pre></li> </ul>"},{"location":"flows/code_review_flow/#testes-de-telemetria-test__telemetrypy","title":"Testes de telemetria (<code>test_*_telemetry.py</code>)","text":"<ul> <li>[ ] Criou arquivo de teste de telemetria?</li> <li>[ ] Teste de sucesso verifica contadores?   <pre><code>mock_telemetry.increment.assert_any_call(\"modulo.operacao.iniciado\")\n</code></pre></li> <li>[ ] Teste de erro verifica contadores de erro?</li> <li>[ ] Teste sem telemetria garante que n\u00e3o quebra?   <pre><code>uc_module.configure_telemetry(None)\n# ... execu\u00e7\u00e3o n\u00e3o deve lan\u00e7ar exce\u00e7\u00e3o\n</code></pre></li> <li>[ ] <code>setup_method</code> zera a telemetria entre testes?   <pre><code>def setup_method(self):\n    uc_module._telemetry = None\n</code></pre></li> </ul>"},{"location":"flows/code_review_flow/#cobertura","title":"Cobertura","text":"<ul> <li>[ ] Cobertura do arquivo &gt;= 85%?   <pre><code>task cov-file --path src/application/use_cases/classificar_documento.py\n</code></pre></li> <li>[ ] Linhas n\u00e3o cobertas s\u00e3o justific\u00e1veis? (ex: except muito raro)</li> </ul>"},{"location":"flows/code_review_flow/#3-type-hints-mypy","title":"\ud83d\udd24 3. TYPE HINTS (MYPY)","text":"<ul> <li> <p>[ ] Todos os par\u00e2metros t\u00eam tipo?   <pre><code># Ruim\ndef executar(documento_id):\n\n# Bom\ndef executar(documento_id: int) -&gt; Dict:\n</code></pre></p> </li> <li> <p>[ ] Retornos t\u00eam tipo?</p> </li> <li> <p>[ ] MyPy passa no arquivo?   <pre><code>task type-file --path src/application/use_cases/classificar_documento.py\n</code></pre> Resultado esperado: <code>Success: no issues found</code></p> </li> <li> <p>[ ] Evitou <code>type: ignore</code> desnecess\u00e1rio?</p> </li> </ul>"},{"location":"flows/code_review_flow/#4-telemetria","title":"\ud83d\udcca 4. TELEMETRIA","text":"<ul> <li> <p>[ ] Adicionou o template no topo do arquivo?   <pre><code>_telemetry = None\n\ndef configure_telemetry(telemetry_instance=None):\n    global _telemetry\n    _telemetry = telemetry_instance\n</code></pre></p> </li> <li> <p>[ ] Em cada m\u00e9todo p\u00fablico:</p> </li> <li>[ ] <code>iniciado</code> no come\u00e7o</li> <li>[ ] <code>concluido</code> antes do return</li> <li>[ ] Contadores de erro nos excepts</li> <li> <p>[ ] Par\u00e2metros relevantes registrados? (ex: formato, idioma)</p> </li> <li> <p>[ ] Nomes seguem o padr\u00e3o <code>modulo.operacao.estado</code>?</p> </li> </ul>"},{"location":"flows/code_review_flow/#5-documentacao","title":"\ud83d\udcda 5. DOCUMENTA\u00c7\u00c3O","text":"<ul> <li> <p>[ ] Docstrings em m\u00e9todos p\u00fablicos?   <pre><code>def executar(self, documento_id: int) -&gt; Dict:\n    \"\"\"\n    Exporta um documento para o formato especificado.\n\n    Args:\n        documento_id: ID do documento a ser exportado\n\n    Returns:\n        Dict com status da opera\u00e7\u00e3o e caminho do arquivo\n\n    Raises:\n        ValueError: Se o formato n\u00e3o for suportado\n    \"\"\"\n</code></pre></p> </li> <li> <p>[ ] Atualizou <code>CHANGELOG.md</code> (se relevante)?</p> </li> <li> <p>[ ] Se for uma nova fase, criou/atualizou <code>FASE*.md</code>?</p> </li> <li> <p>[ ] README.md ainda est\u00e1 atualizado? (badges, instru\u00e7\u00f5es)</p> </li> </ul>"},{"location":"flows/code_review_flow/#6-qualidade-geral","title":"\ud83d\udd27 6. QUALIDADE GERAL","text":"<ul> <li> <p>[ ] Lint passa?   <pre><code>task lint-file --path src/application/use_cases/classificar_documento.py\n</code></pre> Resultado: <code>All checks passed!</code></p> </li> <li> <p>[ ] <code>task check</code> passa no arquivo?   <pre><code>task check-file --path src/application/use_cases/classificar_documento.py\n</code></pre></p> </li> <li> <p>[ ] <code>task test-cov</code> local passa? (opcional, mas bom verificar)</p> </li> </ul>"},{"location":"flows/code_review_flow/#7-commit-e-mensagem","title":"\ud83d\udcdd 7. COMMIT E MENSAGEM","text":"<ul> <li> <p>[ ] Mensagem de commit segue o padr\u00e3o?   <pre><code>tipo: descri\u00e7\u00e3o concisa\n\n- Item 1\n- Item 2\n- Item 3\n\nCloses #NUMERO\n</code></pre></p> </li> <li> <p>[ ] Tipos permitidos: <code>feat</code>, <code>fix</code>, <code>docs</code>, <code>style</code>, <code>refactor</code>, <code>test</code>, <code>chore</code></p> </li> <li> <p>[ ] Incluiu <code>Closes #N</code> para fechar a issue automaticamente?</p> </li> <li> <p>[ ] Commit \u00e9 at\u00f4mico? (uma \u00fanica responsabilidade)</p> </li> </ul> <p>Exemplo bom: <pre><code>feat: adiciona telemetria e testes em classificar_documento.py\n\n- Adiciona padr\u00e3o de telemetria com counters\n- Cria testes de l\u00f3gica (8) e telemetria (5)\n- Cobertura: 65% \u2192 85%\n\nCloses #3\n</code></pre></p> <p>Exemplo ruim: <pre><code>atualiza arquivos e corrige bugs\n</code></pre></p>"},{"location":"flows/code_review_flow/#8-branch-e-merge","title":"\ud83c\udf3f 8. BRANCH E MERGE","text":"<ul> <li> <p>[ ] Branch est\u00e1 atualizada com a <code>main</code>?   <pre><code>git fetch origin\ngit rebase origin/main\n# ou\ngit merge main  # se preferir\n</code></pre></p> </li> <li> <p>[ ] CI est\u00e1 passando no GitHub?   <pre><code>gh run list\n# \u00daltima execu\u00e7\u00e3o deve estar verde \u2705\n</code></pre></p> </li> <li> <p>[ ] Resolveu conflitos (se houver)?</p> </li> <li> <p>[ ] Merge ser\u00e1 fast-forward? (hist\u00f3rico linear)   <pre><code>git checkout main\ngit merge --ff-only type/classificar-documento\n</code></pre></p> </li> </ul>"},{"location":"flows/code_review_flow/#fluxo-completo-de-revisao","title":"\ud83d\udd04 FLUXO COMPLETO DE REVIS\u00c3O","text":"<pre><code>graph TD\n    subgraph \"Antes do Commit\"\n        A[C\u00f3digo pronto] --&gt; B[Revis\u00e3o estrutural]\n        B --&gt; C[Rodar testes locais]\n        C --&gt; D[Verificar cobertura]\n        D --&gt; E[Verificar MyPy]\n        E --&gt; F[Verificar lint]\n        F --&gt; G[Tudo OK?]\n        G --&gt;|sim| H[Commit]\n        G --&gt;|n\u00e3o| B\n    end\n\n    subgraph \"Depois do Commit\"\n        H --&gt; I[Push]\n        I --&gt; J[CI no GitHub]\n        J --&gt; K{CI passou?}\n        K --&gt;|sim| L[Pronto para merge]\n        K --&gt;|n\u00e3o| M[Voltar para c\u00f3digo]\n    end\n\n    subgraph \"Merge\"\n        L --&gt; N[git merge --ff-only]\n        N --&gt; O[Issue fecha autom\u00e1tica]\n        O --&gt; P[Mover Kanban para Done]\n    end\n</code></pre>"},{"location":"flows/code_review_flow/#tabela-de-comandos-para-revisao","title":"\ud83d\udccb TABELA DE COMANDOS PARA REVIS\u00c3O","text":"O que verificar Comando Cobertura do arquivo <code>task cov-file --path src/.../arquivo.py</code> MyPy no arquivo <code>task type-file --path src/.../arquivo.py</code> Lint no arquivo <code>task lint-file --path src/.../arquivo.py</code> Testes do arquivo <code>task test-file --path src/tests/test_arquivo.py</code> Tudo junto <code>task check-file --path src/.../arquivo.py</code> Cobertura global <code>task summary</code> Status do CI <code>gh run list</code> Ver branch atual <code>git branch</code> Ver commits recentes <code>git log --oneline -5</code>"},{"location":"flows/code_review_flow/#checklist-resumido-printable","title":"\u2705 CHECKLIST RESUMIDO (PRINTABLE)","text":"<pre><code>## \ud83d\udccb CHECKLIST PR\u00c9-MERGE\n\n### C\u00f3digo\n[ ] Branch com nome padr\u00e3o\n[ ] Sem c\u00f3digo comentado\n[ ] Sem prints de debug\n[ ] Fun\u00e7\u00f5es pequenas (&lt;50 linhas)\n\n### Testes\n[ ] Testes de l\u00f3gica criados\n[ ] Testes de telemetria criados\n[ ] Todos passando localmente\n[ ] Cobertura do arquivo \u226585%\n\n### Type Hints\n[ ] Todos par\u00e2metros tipados\n[ ] MyPy 0 erros no arquivo\n\n### Telemetria\n[ ] Template no topo\n[ ] Contadores em m\u00e9todos p\u00fablicos\n\n### Documenta\u00e7\u00e3o\n[ ] Docstrings em m\u00e9todos p\u00fablicos\n[ ] CHANGELOG atualizado (se necess\u00e1rio)\n\n### Qualidade\n[ ] Lint 0 erros\n[ ] CI verde no GitHub\n\n### Commit\n[ ] Mensagem no padr\u00e3o\n[ ] Inclui \"Closes #N\"\n\n### Branch\n[ ] Atualizada com main\n[ ] Merge fast-forward\n</code></pre>"},{"location":"flows/code_review_flow/#o-que-fazer-se-encontrar-problemas","title":"\ud83d\udea8 O QUE FAZER SE ENCONTRAR PROBLEMAS","text":"Problema A\u00e7\u00e3o Teste falhando Corrigir antes de prosseguir Cobertura baixa Adicionar testes faltantes MyPy com erros Corrigir types ou adicionar <code># type: ignore</code> justificado Lint com erros Rodar <code>task format</code> e corrigir manualmente CI vermelho N\u00e3o mergear! Investigar e corrigir Branch desatualizada <code>git rebase main</code> e resolver conflitos"},{"location":"flows/code_review_flow/#exemplo-pratico","title":"\ud83d\udcca EXEMPLO PR\u00c1TICO","text":""},{"location":"flows/code_review_flow/#situacao-fase-17-concluida","title":"Situa\u00e7\u00e3o: FASE 17 conclu\u00edda","text":"<pre><code># 1. Verificar cobertura\ntask cov-file --path src/application/use_cases/classificar_documento.py\n&gt; 85% \u2705\n\n# 2. Verificar MyPy\ntask type-file --path src/application/use_cases/classificar_documento.py\n&gt; Success: no issues found \u2705\n\n# 3. Verificar lint\ntask lint-file --path src/application/use_cases/classificar_documento.py\n&gt; All checks passed! \u2705\n\n# 4. Verificar testes\ntask test-file --path src/tests/test_classificar_documento.py\n&gt; 12 passed \u2705\n\ntask test-file --path src/tests/test_classificar_documento_telemetry.py\n&gt; 6 passed \u2705\n\n# 5. Verificar CI\ngh run list\n&gt; \u00daltima execu\u00e7\u00e3o: \u2705\n\n# 6. Atualizar branch\ngit fetch origin\ngit rebase origin/main\n&gt; Already up to date.\n\n# 7. Commit final (j\u00e1 foi feito)\n\n# 8. Merge\ngit checkout main\ngit merge --ff-only type/classificar-documento\ngit push origin main\n\n# 9. Issue #3 fechou automaticamente\n# 10. Mover no Kanban para \"Done\"\n</code></pre>"},{"location":"flows/code_review_flow/#beneficios-deste-fluxo","title":"\ud83c\udfc6 BENEF\u00cdCIOS DESTE FLUXO","text":"Antes Depois \u274c \"Acho que est\u00e1 pronto\" \u2705 Checklist objetivo \u274c Esquecia de rodar mypy \u2705 Passo obrigat\u00f3rio \u274c Cobertura ca\u00eda sem perceber \u2705 Verificado antes do merge \u274c CI quebrava depois do merge \u2705 Verificado antes \u274c Commits sem contexto \u2705 Padr\u00e3o estabelecido \u274c D\u00favida se esqueceu algo \u2705 Checklist resolve"},{"location":"flows/code_review_flow/#referencias","title":"\ud83d\udcda REFER\u00caNCIAS","text":"<ul> <li>Git Flow</li> <li>Quality Flow</li> <li>Telemetry Flow</li> <li>Conventional Commits</li> </ul>"},{"location":"flows/code_review_flow/#autor","title":"\ud83d\udc64 AUTOR","text":"<p>Thiago Ribeiro - Projeto de TCC</p> <sub>Code Review Flow - ShowTrials</sub> <sub>Vers\u00e3o 1.0 - 20 de Fevereiro de 2026</sub> <sub>\u2705 Pronto para uso</sub>"},{"location":"flows/code_review_flow/#proximo-flow","title":"\ud83d\udccb PR\u00d3XIMO FLOW","text":"<p>Dependencies Flow ser\u00e1 o pr\u00f3ximo! \ud83d\ude80</p>"},{"location":"flows/debug_flow/","title":"Debug Flow","text":""},{"location":"flows/debug_flow/#flow-4-debug-flow-showtrials","title":"\ud83d\udcda FLOW 4: DEBUG FLOW - SHOWTRIALS","text":"**Guia completo para depura\u00e7\u00e3o sistem\u00e1tica de problemas no c\u00f3digo**"},{"location":"flows/debug_flow/#informacoes-do-documento","title":"\ud83d\udcc5 Informa\u00e7\u00f5es do Documento","text":"Item Descri\u00e7\u00e3o Data 20 de Fevereiro de 2026 Autor Thiago Ribeiro Vers\u00e3o 1.0 Relacionado a Quality Flow, Telemetry Flow, Testes, CI/CD"},{"location":"flows/debug_flow/#objetivo","title":"\ud83c\udfaf OBJETIVO","text":"<p>Estabelecer uma metodologia sistem\u00e1tica para identificar, reproduzir e corrigir problemas no c\u00f3digo, evitando \"tentativa e erro\" e garantindo que as corre\u00e7\u00f5es sejam definitivas.</p>"},{"location":"flows/debug_flow/#por-que-um-fluxo-de-debug","title":"Por que um fluxo de debug?","text":"Motivo Explica\u00e7\u00e3o Economiza tempo Tentativa e erro \u00e9 o m\u00e9todo mais lento Evita regress\u00f5es Corre\u00e7\u00e3o apressada pode quebrar outras coisas Aprende com erros Entender a causa evita repeti\u00e7\u00e3o Documenta solu\u00e7\u00f5es Fica registrado para o futuro Profissionalismo Debug estruturado \u00e9 marca de bom desenvolvedor"},{"location":"flows/debug_flow/#estrategia-geral-de-debug","title":"\ud83d\udd0d ESTRAT\u00c9GIA GERAL DE DEBUG","text":"<pre><code>graph TD\n    A[Problema detectado] --&gt; B[1. REPRODUZIR]\n    B --&gt; C[2. ISOLAR]\n    C --&gt; D[3. ENTENDER CAUSA]\n    D --&gt; E[4. CORRIGIR]\n    E --&gt; F[5. TESTAR]\n    F --&gt; G[6. PREVENIR]\n    G --&gt; H[7. DOCUMENTAR]\n\n    F --&gt;|corre\u00e7\u00e3o falhou| C\n    F --&gt;|corre\u00e7\u00e3o criou novo problema| C\n</code></pre>"},{"location":"flows/debug_flow/#passo-1-reproduzir-o-problema","title":"\ud83d\udccb PASSO 1: REPRODUZIR O PROBLEMA","text":""},{"location":"flows/debug_flow/#objetivo-conseguir-fazer-o-erro-acontecer-de-forma-consistente","title":"Objetivo: Conseguir fazer o erro acontecer de forma consistente","text":""},{"location":"flows/debug_flow/#acoes","title":"A\u00e7\u00f5es:","text":"<pre><code># 1. Identificar onde o erro ocorre\n- \u00c9 em teste? \u2192 `pytest src/tests/test_arquivo.py -v`\n- \u00c9 na CLI? \u2192 `python run.py` e reproduzir passo a passo\n- \u00c9 na Web? \u2192 Acessar endpoint espec\u00edfico\n- \u00c9 no CI? \u2192 Ver logs: `gh run view &lt;ID&gt; --log`\n\n# 2. Isolar o cen\u00e1rio m\u00ednimo\npoetry run pytest src/tests/test_arquivo.py -k \"nome_do_teste\" -v\n\n# 3. Aumentar verbosidade\npoetry run pytest -vv --log-cli-level=DEBUG\n</code></pre>"},{"location":"flows/debug_flow/#checklist-de-reproducao","title":"Checklist de reprodu\u00e7\u00e3o:","text":"<ul> <li>[ ] Consigo reproduzir localmente?</li> <li>[ ] Consigo reproduzir sempre ou \u00e9 intermitente?</li> <li>[ ] Qual \u00e9 o input m\u00ednimo que causa o erro?</li> <li>[ ] Qual \u00e9 o output esperado vs real?</li> </ul>"},{"location":"flows/debug_flow/#passo-2-isolar-o-problema","title":"\ud83d\udd2c PASSO 2: ISOLAR O PROBLEMA","text":""},{"location":"flows/debug_flow/#objetivo-encontrar-a-linha-exata-onde-o-erro-acontece","title":"Objetivo: Encontrar a linha exata onde o erro acontece","text":""},{"location":"flows/debug_flow/#tecnica-1-binary-search-comentando-codigo","title":"T\u00e9cnica 1: Binary Search (comentando c\u00f3digo)","text":"<pre><code>def funcao_complexa():\n    parte1()  # \u2190 comentar e testar\n    parte2()  # \u2190 comentar e testar\n    parte3()  # \u2190 comentar e testar\n    return resultado\n</code></pre> <pre><code># Ciclo: comenta metade do c\u00f3digo, testa, repete\n</code></pre>"},{"location":"flows/debug_flow/#tecnica-2-usar-breakpoints","title":"T\u00e9cnica 2: Usar breakpoints","text":"<pre><code># No c\u00f3digo, adicionar:\nbreakpoint()  # Python 3.7+\n\n# ou\nimport pdb; pdb.set_trace()  # vers\u00f5es antigas\n</code></pre> <pre><code># Quando executar, entra no debugger interativo\n(Pdb) print(variable)\n(Pdb) locals()\n(Pdb) up  # sobe no stack trace\n(Pdb) down  # desce\n(Pdb) continue  # continua execu\u00e7\u00e3o\n</code></pre>"},{"location":"flows/debug_flow/#tecnica-3-logs-estrategicos","title":"T\u00e9cnica 3: Logs estrat\u00e9gicos","text":"<pre><code>import logging\nlogging.basicConfig(level=logging.DEBUG)\n\n# Adicionar logs tempor\u00e1rios\nlogger.debug(f\"Valor de x: {x}\")\nlogger.debug(f\"Entrando no loop com {len(lista)} itens\")\n</code></pre>"},{"location":"flows/debug_flow/#tecnica-4-verificar-tipos-quando-mypy-nao-pega","title":"T\u00e9cnica 4: Verificar tipos (quando MyPy n\u00e3o pega)","text":"<pre><code>print(f\"Tipo de x: {type(x)}\")\nprint(f\"x tem atributos: {dir(x)}\")\n</code></pre>"},{"location":"flows/debug_flow/#passo-3-entender-a-causa-raiz","title":"\ud83e\udde0 PASSO 3: ENTENDER A CAUSA RAIZ","text":""},{"location":"flows/debug_flow/#objetivo-nao-apenas-corrigir-o-sintoma-mas-entender-por-que-aconteceu","title":"Objetivo: N\u00e3o apenas corrigir o sintoma, mas entender por que aconteceu","text":""},{"location":"flows/debug_flow/#perguntas-a-fazer","title":"Perguntas a fazer:","text":"Pergunta Exemplo O que deveria acontecer? O m\u00e9todo deveria retornar um DTO O que realmente aconteceu? Lan\u00e7ou AttributeError Qual a diferen\u00e7a? Esperava datetime, recebeu string Por que essa diferen\u00e7a existe? Mock foi criado com string em vez de datetime Isso acontece em produ\u00e7\u00e3o ou s\u00f3 em teste? S\u00f3 em teste (mock errado)"},{"location":"flows/debug_flow/#categorias-comuns-de-problemas","title":"Categorias comuns de problemas:","text":"<pre><code># 1. Problema de tipo (TypeError, AttributeError)\n# 2. Problema de l\u00f3gica (resultado errado, mas executa)\n# 3. Problema de estado (banco, cache, vari\u00e1vel global)\n# 4. Problema de depend\u00eancia (import falhou, m\u00f3dulo n\u00e3o encontrado)\n# 5. Problema de concorr\u00eancia (race condition)\n</code></pre>"},{"location":"flows/debug_flow/#passo-4-corrigir","title":"\ud83d\udee0\ufe0f PASSO 4: CORRIGIR","text":""},{"location":"flows/debug_flow/#objetivo-implementar-a-correcao-de-forma-limpa","title":"Objetivo: Implementar a corre\u00e7\u00e3o de forma limpa","text":""},{"location":"flows/debug_flow/#regras-de-ouro","title":"Regras de ouro:","text":"<ol> <li>NUNCA corrigir e refatorar no mesmo commit</li> <li>SEMPRE adicionar teste que pegaria o erro antes</li> <li>M\u00ednimo de c\u00f3digo poss\u00edvel para corrigir</li> </ol>"},{"location":"flows/debug_flow/#exemplo-de-correcao-segura","title":"Exemplo de corre\u00e7\u00e3o segura:","text":"<pre><code># ANTES (causava erro)\ndata_coleta = documento.data_coleta.isoformat()\n\n# DEPOIS (corre\u00e7\u00e3o)\nif isinstance(documento.data_coleta, str):\n    data_coleta = documento.data_coleta  # j\u00e1 \u00e9 string\nelse:\n    data_coleta = documento.data_coleta.isoformat()\n</code></pre>"},{"location":"flows/debug_flow/#checklist-da-correcao","title":"Checklist da corre\u00e7\u00e3o:","text":"<ul> <li>[ ] C\u00f3digo m\u00ednimo necess\u00e1rio</li> <li>[ ] N\u00e3o introduziu novas funcionalidades</li> <li>[ ] N\u00e3o removeu funcionalidades existentes</li> <li>[ ] Adicionou teste que pegaria o erro (se n\u00e3o existia)</li> </ul>"},{"location":"flows/debug_flow/#passo-5-testar-a-correcao","title":"\ud83e\uddea PASSO 5: TESTAR A CORRE\u00c7\u00c3O","text":""},{"location":"flows/debug_flow/#objetivo-garantir-que-o-problema-foi-resolvido-e-nada-mais-quebrou","title":"Objetivo: Garantir que o problema foi resolvido e nada mais quebrou","text":""},{"location":"flows/debug_flow/#testes-a-rodar","title":"Testes a rodar:","text":"<pre><code># 1. Teste espec\u00edfico que reproduzia o erro\npoetry run pytest src/tests/test_arquivo.py -k \"nome_do_teste\" -v\n\n# 2. Todos os testes do arquivo\ntask test-file --path src/tests/test_arquivo.py\n\n# 3. Testes relacionados (mesmo m\u00f3dulo)\npoetry run pytest src/tests/test_*_telemetry.py -v\n\n# 4. Todos os testes (se a mudan\u00e7a for cr\u00edtica)\ntask test\n\n# 5. Verificar cobertura (n\u00e3o deve cair)\ntask cov-file --path src/application/use_cases/arquivo.py\n</code></pre>"},{"location":"flows/debug_flow/#verificar-tambem","title":"Verificar tamb\u00e9m:","text":"<ul> <li>[ ] Lint: <code>task lint-file --path src/.../arquivo.py</code></li> <li>[ ] MyPy: <code>task type-file --path src/.../arquivo.py</code></li> </ul>"},{"location":"flows/debug_flow/#passo-6-prevenir-que-ocorra-novamente","title":"\ud83d\udee1\ufe0f PASSO 6: PREVENIR QUE OCORRA NOVAMENTE","text":""},{"location":"flows/debug_flow/#objetivo-garantir-que-o-mesmo-erro-nao-aconteca-em-outros-lugares","title":"Objetivo: Garantir que o mesmo erro n\u00e3o aconte\u00e7a em outros lugares","text":""},{"location":"flows/debug_flow/#acoes-preventivas","title":"A\u00e7\u00f5es preventivas:","text":"<pre><code># 1. Adicionar teste espec\u00edfico\ndef test_nao_deve_quebrar_com_data_string():\n    \"\"\"Garante que o m\u00e9todo lida com string no lugar de datetime.\"\"\"\n    doc = Mock()\n    doc.data_coleta = \"2026-01-01\"  # string em vez de datetime\n\n    resultado = meu_metodo(doc)\n    assert resultado is not None\n\n# 2. Melhorar type hints\ndef meu_metodo(documento: Documento) -&gt; str:\n    # Agora o tipo j\u00e1 indica o esperado\n    pass\n\n# 3. Adicionar guard clauses\ndef meu_metodo(documento):\n    if not isinstance(documento.data_coleta, (datetime, str)):\n        raise TypeError(\"data_coleta deve ser datetime ou string\")\n</code></pre>"},{"location":"flows/debug_flow/#passo-7-documentar","title":"\ud83d\udcdd PASSO 7: DOCUMENTAR","text":""},{"location":"flows/debug_flow/#objetivo-deixar-registro-para-o-futuro","title":"Objetivo: Deixar registro para o futuro","text":""},{"location":"flows/debug_flow/#o-que-documentar","title":"O que documentar:","text":"<pre><code>## \ud83d\udc1b Bug #123: Erro ao exportar documento com data string\n\n### Problema\nO m\u00e9todo `exportar_documento` quebrava quando `data_coleta` era string\nem vez de datetime (acontecia em testes com mocks).\n\n### Causa\nO mock do documento foi criado com string, mas o c\u00f3digo esperava datetime.\n\n### Solu\u00e7\u00e3o\nAdicionada verifica\u00e7\u00e3o de tipo antes de chamar `.isoformat()`.\n\n### Preven\u00e7\u00e3o\n- Adicionado teste espec\u00edfico com string\n- Atualizado type hints para aceitar Optional[str] (ver issue #124)\n</code></pre>"},{"location":"flows/debug_flow/#onde-documentar","title":"Onde documentar:","text":"<ul> <li>[ ] Na issue (coment\u00e1rio de fechamento)</li> <li>[ ] No commit message</li> <li>[ ] Em <code>CHANGELOG.md</code> (se for relevante para usu\u00e1rios)</li> <li>[ ] Em coment\u00e1rio no c\u00f3digo (se a solu\u00e7\u00e3o n\u00e3o for \u00f3bvia)</li> </ul>"},{"location":"flows/debug_flow/#ferramentas-de-debug-por-categoria","title":"\ud83d\udd27 FERRAMENTAS DE DEBUG POR CATEGORIA","text":""},{"location":"flows/debug_flow/#para-problemas-de-teste","title":"Para problemas de teste","text":"<pre><code># Ver detalhes do teste\npoetry run pytest src/tests/test_arquivo.py -v --pdb\n\n# Ver cobertura detalhada\npoetry run pytest --cov=src/application/use_cases --cov-report=html\n# Depois abrir htmlcov/index.html\n\n# Ver quais testes est\u00e3o lentos\npoetry run pytest --durations=10\n</code></pre>"},{"location":"flows/debug_flow/#para-problemas-de-tipo","title":"Para problemas de tipo","text":"<pre><code># MyPy com informa\u00e7\u00f5es extras\npoetry run mypy src/ --show-error-codes\n\n# Verificar tipo de uma express\u00e3o (com reveal_type)\nfrom typing import reveal_type\nreveal_type(minha_variavel)  # MyPy vai mostrar o tipo\n</code></pre>"},{"location":"flows/debug_flow/#para-problemas-de-banco-de-dados","title":"Para problemas de banco de dados","text":"<pre><code># Ver esquema\nsqlite3 data/showtrials.db \".schema documentos\"\n\n# Ver dados\nsqlite3 data/showtrials.db \"SELECT * FROM documentos LIMIT 5;\"\n\n# Verificar migra\u00e7\u00f5es\npython scripts/migrar_dados_existentes.py --check\n</code></pre>"},{"location":"flows/debug_flow/#para-problemas-de-redeapi","title":"Para problemas de rede/API","text":"<pre><code># Testar endpoint local\ncurl -v http://localhost:8000/documentos/1\n\n# Ver logs do servidor web\npoetry run uvicorn src.interface.web.app:app --reload --log-level debug\n</code></pre>"},{"location":"flows/debug_flow/#para-problemas-de-ci","title":"Para problemas de CI","text":"<pre><code># Ver logs da \u00faltima execu\u00e7\u00e3o\ngh run view &lt;ID&gt; --log\n\n# Re-executar um job falho\ngh run rerun &lt;ID&gt;\n\n# Simular ambiente CI local\nact -j test  # precisa do act instalado\n</code></pre>"},{"location":"flows/debug_flow/#checklist-rapido-de-debug","title":"\ud83d\udccb CHECKLIST R\u00c1PIDO DE DEBUG","text":"<pre><code>## \ud83d\udd0d Checklist de Debug\n\n### 1. REPRODUZIR\n[ ] Erro acontece localmente?\n[ ] Consigo reproduzir sempre?\n[ ] Qual o input m\u00ednimo?\n\n### 2. ISOLAR\n[ ] Linha exata do erro?\n[ ] Usei breakpoint?\n[ ] Usei logs estrat\u00e9gicos?\n\n### 3. ENTENDER\n[ ] Qual a causa raiz?\n[ ] \u00c9 erro de tipo, l\u00f3gica, estado ou depend\u00eancia?\n[ ] Por que n\u00e3o foi pego antes?\n\n### 4. CORRIGIR\n[ ] C\u00f3digo m\u00ednimo necess\u00e1rio\n[ ] N\u00e3o adicionei funcionalidade extra\n[ ] Adicionei teste que pegaria o erro\n\n### 5. TESTAR\n[ ] Teste espec\u00edfico passa\n[ ] Todos os testes do arquivo passam\n[ ] Lint e MyPy ok\n[ ] Cobertura n\u00e3o caiu\n\n### 6. PREVENIR\n[ ] Teste adicionado ao conjunto\n[ ] Type hints melhorados (se aplic\u00e1vel)\n[ ] Guard clauses adicionadas (se aplic\u00e1vel)\n\n### 7. DOCUMENTAR\n[ ] Coment\u00e1rio na issue\n[ ] Mensagem de commit clara\n[ ] CHANGELOG atualizado (se necess\u00e1rio)\n</code></pre>"},{"location":"flows/debug_flow/#exemplo-pratico-debug-de-um-teste-falho","title":"\ud83c\udfaf EXEMPLO PR\u00c1TICO: DEBUG DE UM TESTE FALHO","text":""},{"location":"flows/debug_flow/#cenario-teste-de-telemetria-falhando","title":"Cen\u00e1rio: Teste de telemetria falhando","text":"<pre><code>poetry run pytest src/tests/test_exportar_documento_telemetry.py -v\n\n# Sa\u00edda:\nFAILED test_telemetria_execucao_sucesso - AssertionError: increment('exportar_documento.erro.execucao') call not found\n</code></pre>"},{"location":"flows/debug_flow/#passo-1-reproduzir","title":"Passo 1: Reproduzir","text":"<pre><code>poetry run pytest src/tests/test_exportar_documento_telemetry.py::TestExportarDocumentoTelemetry::test_telemetria_execucao_sucesso -v\n</code></pre>"},{"location":"flows/debug_flow/#passo-2-isolar-com-breakpoint","title":"Passo 2: Isolar com breakpoint","text":"<pre><code># No c\u00f3digo, antes do erro\nbreakpoint()\n\n# No teste\nresultado = use_case.executar(...)\n</code></pre>"},{"location":"flows/debug_flow/#passo-3-entender-causa","title":"Passo 3: Entender causa","text":"<pre><code># No debugger\n(Pdb) mock_telemetry.increment.call_args_list\n# Mostra que 'erro.execucao' N\u00c3O foi chamado\n# Mas o teste esperava que fosse\n</code></pre> <p>Causa raiz: A exce\u00e7\u00e3o acontece antes de chegar no bloco que registraria o erro. O teste estava com expectativa errada.</p>"},{"location":"flows/debug_flow/#passo-4-corrigir_1","title":"Passo 4: Corrigir","text":"<pre><code># Antes\nmock_telemetry.increment.assert_any_call(\"exportar_documento.erro.execucao\")\n\n# Depois\ncalls = [call[0][0] for call in mock_telemetry.increment.call_args_list]\nassert \"exportar_documento.erro.execucao\" not in calls\n</code></pre>"},{"location":"flows/debug_flow/#passo-5-testar","title":"Passo 5: Testar","text":"<pre><code>poetry run pytest src/tests/test_exportar_documento_telemetry.py -v\n# \u2705 PASSED\n</code></pre>"},{"location":"flows/debug_flow/#passo-6-prevenir","title":"Passo 6: Prevenir","text":"<ul> <li>Adicionar coment\u00e1rio explicando por que o erro N\u00c3O deve ser registrado</li> <li>Garantir que outros testes n\u00e3o tenham a mesma expectativa errada</li> </ul>"},{"location":"flows/debug_flow/#passo-7-documentar_1","title":"Passo 7: Documentar","text":"<pre><code>git commit -m \"test: ajusta expectativa de telemetria para exce\u00e7\u00f5es n\u00e3o capturadas\n\n- O teste esperava erro.execucao, mas exce\u00e7\u00f5es n\u00e3o capturadas\n  n\u00e3o registram telemetria\n- Agora verifica que o erro N\u00c3O foi chamado\n\nCloses #123\"\n</code></pre>"},{"location":"flows/debug_flow/#comandos-uteis-para-debug","title":"\ud83d\udcca COMANDOS \u00daTEIS PARA DEBUG","text":"Comando O que faz <code>poetry run pytest -v --pdb</code> Entra no debugger ao falhar <code>poetry run pytest -vv --log-cli-level=DEBUG</code> Logs detalhados <code>poetry run pytest --durations=10</code> Mostra os 10 testes mais lentos <code>poetry run mypy src/ --show-error-codes</code> MyPy com c\u00f3digos de erro <code>python -m pdb run.py</code> Debugger na CLI <code>breakpoint()</code> Breakpoint no c\u00f3digo <code>gh run view &lt;ID&gt; --log</code> Ver logs do CI <code>git bisect start</code> Encontrar commit que introduziu bug <code>sqlite3 data/showtrials.db</code> Consultar banco direto"},{"location":"flows/debug_flow/#beneficios-deste-fluxo","title":"\ud83c\udfc6 BENEF\u00cdCIOS DESTE FLUXO","text":"Antes Depois \u274c \"Vou tentar mudar isso aqui\" \u2705 Abordagem sistem\u00e1tica \u274c Corre\u00e7\u00e3o apressada quebra outra coisa \u2705 Testes garantem \u274c Mesmo erro acontecendo v\u00e1rias vezes \u2705 Preven\u00e7\u00e3o documentada \u274c Horas perdidas em tentativa e erro \u2705 Debug estruturado \u274c Esquece o que aprendeu \u2705 Documenta\u00e7\u00e3o do problema"},{"location":"flows/debug_flow/#referencias","title":"\ud83d\udcda REFER\u00caNCIAS","text":"<ul> <li>Quality Flow</li> <li>Telemetry Flow</li> <li>Pytest Documentation</li> <li>Python Debugger (pdb)</li> </ul>"},{"location":"flows/debug_flow/#autor","title":"\ud83d\udc64 AUTOR","text":"<p>Thiago Ribeiro - Projeto de TCC</p> <sub>Debug Flow - ShowTrials</sub> <sub>Vers\u00e3o 1.0 - 20 de Fevereiro de 2026</sub> <sub>\u2705 Pronto para uso</sub>"},{"location":"flows/debug_flow/#proximo-flow","title":"\ud83d\udccb PR\u00d3XIMO FLOW","text":"<p>Documentation Flow ser\u00e1 o pr\u00f3ximo! \ud83d\ude80</p>"},{"location":"flows/dependencies_flow/","title":"Dependencies Flow","text":""},{"location":"flows/dependencies_flow/#flow-3-dependencies-flow-showtrials","title":"\ud83d\udcda FLOW 3: DEPENDENCIES FLOW - SHOWTRIALS","text":"**Guia completo para gerenciamento de depend\u00eancias com Poetry e pip**"},{"location":"flows/dependencies_flow/#informacoes-do-documento","title":"\ud83d\udcc5 Informa\u00e7\u00f5es do Documento","text":"Item Descri\u00e7\u00e3o Data 20 de Fevereiro de 2026 Autor Thiago Ribeiro Vers\u00e3o 1.0 Relacionado a FASE 8 (NLP), FASE 11 (CI), Poetry, pip"},{"location":"flows/dependencies_flow/#objetivo","title":"\ud83c\udfaf OBJETIVO","text":"<p>Padronizar o gerenciamento de depend\u00eancias do projeto, considerando:</p> <ul> <li>\u2705 Depend\u00eancias principais gerenciadas pelo Poetry</li> <li>\u2705 Depend\u00eancias de desenvolvimento (dev) isoladas</li> <li>\u2705 Situa\u00e7\u00e3o especial das bibliotecas NLP (pip)</li> <li>\u2705 CI/CD com instala\u00e7\u00e3o correta</li> <li>\u2705 Versionamento e lock file</li> </ul>"},{"location":"flows/dependencies_flow/#estrutura-atual-de-dependencias","title":"\ud83d\udcca ESTRUTURA ATUAL DE DEPEND\u00caNCIAS","text":""},{"location":"flows/dependencies_flow/#visao-geral","title":"Vis\u00e3o Geral","text":"<pre><code>graph TD\n    subgraph \"Poetry (pyproject.toml)\"\n        A[Depend\u00eancias principais] --&gt;|poetry add| P[Produ\u00e7\u00e3o]\n        B[Depend\u00eancias dev] --&gt;|poetry add --dev| D[Desenvolvimento]\n    end\n\n    subgraph \"Pip (instala\u00e7\u00e3o manual)\"\n        C[Depend\u00eancias NLP] --&gt;|pip install| N[NumPy, spaCy, etc.]\n        N --&gt;|problemas conhecidos| X[Conflitos de vers\u00e3o]\n    end\n\n    subgraph \"CI/CD\"\n        P --&gt;|poetry install| CI\n        D --&gt;|poetry install| CI\n        N --&gt;|pip install| CI\n    end\n</code></pre>"},{"location":"flows/dependencies_flow/#o-que-esta-onde","title":"O que est\u00e1 onde","text":"Tipo Gerenciador Local Exemplos Produ\u00e7\u00e3o Poetry <code>[tool.poetry.dependencies]</code> <code>requests</code>, <code>fastapi</code>, <code>rich</code> Desenvolvimento Poetry <code>[tool.poetry.group.dev.dependencies]</code> <code>pytest</code>, <code>black</code>, <code>mypy</code> NLP (especiais) pip Instala\u00e7\u00e3o manual <code>spacy</code>, <code>numpy</code>, <code>wordcloud</code>"},{"location":"flows/dependencies_flow/#comandos-basicos-do-poetry","title":"\ud83d\udce6 COMANDOS B\u00c1SICOS DO POETRY","text":""},{"location":"flows/dependencies_flow/#adicionar-dependencias","title":"Adicionar depend\u00eancias","text":"<pre><code># Depend\u00eancia principal\npoetry add requests\n\n# Com vers\u00e3o espec\u00edfica\npoetry add fastapi@^0.129.0\n\n# Depend\u00eancia de desenvolvimento\npoetry add --dev pytest\n\n# Depend\u00eancia opcional\npoetry add --optional black\n\n# A partir de uma fonte espec\u00edfica (git)\npoetry add git+https://github.com/user/repo.git\n</code></pre>"},{"location":"flows/dependencies_flow/#remover-dependencias","title":"Remover depend\u00eancias","text":"<pre><code>poetry remove requests\npoetry remove --dev pytest\n</code></pre>"},{"location":"flows/dependencies_flow/#atualizar-dependencias","title":"Atualizar depend\u00eancias","text":"<pre><code># Atualizar todas dentro das restri\u00e7\u00f5es\npoetry update\n\n# Atualizar uma espec\u00edfica\npoetry update requests\n\n# Ver o que pode ser atualizado\npoetry show --outdated\n</code></pre>"},{"location":"flows/dependencies_flow/#instalar-dependencias","title":"Instalar depend\u00eancias","text":"<pre><code># Instalar todas (produ\u00e7\u00e3o + dev)\npoetry install\n\n# Apenas produ\u00e7\u00e3o (sem dev)\npoetry install --no-dev\n\n# Apenas um grupo espec\u00edfico\npoetry install --only dev\n</code></pre>"},{"location":"flows/dependencies_flow/#ver-dependencias","title":"Ver depend\u00eancias","text":"<pre><code># Listar todas\npoetry show\n\n# \u00c1rvore de depend\u00eancias\npoetry show --tree\n\n# Depend\u00eancias principais apenas\npoetry show --no-dev\n</code></pre>"},{"location":"flows/dependencies_flow/#caso-especial-dependencias-nlp","title":"\u26a0\ufe0f CASO ESPECIAL: DEPEND\u00caNCIAS NLP","text":""},{"location":"flows/dependencies_flow/#historico-por-que-estao-no-pip","title":"Hist\u00f3rico (por que est\u00e3o no pip?)","text":"<p>Durante a FASE 8 (An\u00e1lise de Texto), enfrentamos conflitos de vers\u00e3o:</p> Problema Causa Solu\u00e7\u00e3o <code>numpy</code> incompat\u00edvel Poetry tentava vers\u00e3o errada Instalar manualmente <code>spacy</code> com depend\u00eancias conflitantes <code>thinc</code>, <code>blis</code>, etc. <code>pip install</code> Modelos grandes N\u00e3o precisam versionar Download via spacy"},{"location":"flows/dependencies_flow/#estado-atual","title":"Estado atual","text":"<pre><code># Depend\u00eancias instaladas via pip (dentro do poetry)\npoetry run pip install numpy==1.26.0\npoetry run pip install spacy==3.7.5\npoetry run pip install textblob nltk wordcloud matplotlib\n\n# Modelos (baixados, n\u00e3o versionados)\npoetry run python -m spacy download en_core_web_sm\npoetry run python -m spacy download ru_core_news_sm\n</code></pre>"},{"location":"flows/dependencies_flow/#todo-migrar-para-poetry-issue-1","title":"TODO: Migrar para Poetry (Issue #1)","text":"<pre><code>issue: #1\ntitle: Migrar depend\u00eancias NLP para Poetry\nstatus: open\nprioridade: media\nmilestone: Melhorias (Semanas 3-4)\n</code></pre>"},{"location":"flows/dependencies_flow/#fluxo-para-adicionar-uma-nova-dependencia","title":"\ud83d\udd04 FLUXO PARA ADICIONAR UMA NOVA DEPEND\u00caNCIA","text":"<pre><code>graph TD\n    A[Preciso de uma nova biblioteca] --&gt; B{\u00c9 NLP?}\n\n    B --&gt;|sim| C[Testar com pip primeiro]\n    C --&gt; D{Funcionou?}\n    D --&gt;|sim| E[Documentar no FASE 11 TODO]\n    D --&gt;|n\u00e3o| F[Buscar alternativa]\n\n    B --&gt;|n\u00e3o| G[Adicionar com poetry add]\n    G --&gt; H[Testar localmente]\n    H --&gt; I{Problemas?}\n    I --&gt;|sim| J[Ajustar vers\u00e3o]\n    I --&gt;|n\u00e3o| K[Atualizar poetry.lock]\n\n    E --&gt; L[Atualizar CI]\n    K --&gt; L\n    F --&gt; A\n    J --&gt; G\n</code></pre>"},{"location":"flows/dependencies_flow/#checklist-adicionar-nova-dependencia","title":"\u2705 CHECKLIST: ADICIONAR NOVA DEPEND\u00caNCIA","text":""},{"location":"flows/dependencies_flow/#para-dependencias-normais-nao-nlp","title":"Para depend\u00eancias normais (n\u00e3o NLP)","text":"<ul> <li>[ ] <code>poetry add nome-da-biblioteca</code></li> <li>[ ] Testar localmente: <code>poetry run python -c \"import modulo\"</code></li> <li>[ ] Verificar se n\u00e3o quebrou nada: <code>task check</code></li> <li>[ ] Atualizar <code>poetry.lock</code> (j\u00e1 foi atualizado)</li> <li>[ ] Commit: <code>git add pyproject.toml poetry.lock</code></li> <li>[ ] Mensagem: <code>chore: adiciona nome-da-biblioteca para [motivo]</code></li> </ul>"},{"location":"flows/dependencies_flow/#para-dependencias-nlp-caso-especial","title":"Para depend\u00eancias NLP (caso especial)","text":"<ul> <li>[ ] Testar com <code>poetry run pip install nome==vers\u00e3o</code></li> <li>[ ] Verificar se resolveu o problema</li> <li>[ ] N\u00c3O adicionar ao <code>pyproject.toml</code> ainda</li> <li>[ ] Documentar no arquivo <code>docs/NLP_DEPENDENCIES.md</code> (criar se n\u00e3o existir)</li> <li>[ ] Atualizar CI para instalar a nova depend\u00eancia</li> <li>[ ] Atualizar Issue #1 com o progresso</li> <li>[ ] Commit: <code>chore: adiciona [nome] \u00e0s depend\u00eancias NLP (pip)</code></li> </ul>"},{"location":"flows/dependencies_flow/#manutencao-do-ci","title":"\ud83d\udd27 MANUTEN\u00c7\u00c3O DO CI","text":""},{"location":"flows/dependencies_flow/#trecho-do-ci-que-instala-nlp","title":"Trecho do CI que instala NLP","text":"<p>No <code>.github/workflows/ci.yml</code>:</p> <pre><code>- name: Install NLP dependencies (pip)\n  run: |\n    poetry run pip install numpy==1.26.0\n    poetry run pip install spacy==3.7.5\n    poetry run pip install textblob nltk wordcloud matplotlib\n    poetry run python -m spacy download en_core_web_sm\n    poetry run python -m spacy download ru_core_news_sm\n</code></pre> <p>Quando adicionar uma nova depend\u00eancia NLP: 1. Adicione a linha no CI 2. Teste com uma execu\u00e7\u00e3o manual 3. Se funcionar, commit</p>"},{"location":"flows/dependencies_flow/#tabela-de-dependencias-atuais","title":"\ud83d\udccb TABELA DE DEPEND\u00caNCIAS ATUAIS","text":""},{"location":"flows/dependencies_flow/#producao-poetry","title":"Produ\u00e7\u00e3o (Poetry)","text":"Biblioteca Vers\u00e3o Para que serve <code>requests</code> &gt;=2.32.5 HTTP requests <code>beautifulsoup4</code> &gt;=4.14.3 Web scraping <code>lxml</code> &gt;=6.0.2 Parsing XML/HTML <code>rich</code> &gt;=13.7.0 CLI bonita <code>fastapi</code> ^0.129.0 API web <code>uvicorn</code> ^0.40.0 Servidor ASGI <code>jinja2</code> ^3.1.6 Templates <code>aiofiles</code> ^25.1.0 Arquivos ass\u00edncronos"},{"location":"flows/dependencies_flow/#desenvolvimento-poetry-dev","title":"Desenvolvimento (Poetry dev)","text":"Biblioteca Vers\u00e3o Para que serve <code>black</code> ^26.1.0 Formatador <code>isort</code> ^7.0.0 Organizador de imports <code>ruff</code> ^0.15.1 Linter r\u00e1pido <code>pytest</code> ^9.0.2 Testes <code>pytest-cov</code> ^7.0.0 Cobertura <code>mypy</code> ^1.19.1 Type checking <code>mkdocs</code> ^1.6.1 Documenta\u00e7\u00e3o <code>commitizen</code> ^4.13.7 Commits sem\u00e2nticos <code>taskipy</code> ^1.14.1 Automa\u00e7\u00e3o"},{"location":"flows/dependencies_flow/#nlp-pip-temporario","title":"NLP (pip - tempor\u00e1rio)","text":"Biblioteca Vers\u00e3o Para que serve <code>numpy</code> 1.26.0 Computa\u00e7\u00e3o num\u00e9rica <code>spacy</code> 3.7.5 NLP <code>textblob</code> latest An\u00e1lise de sentimento <code>nltk</code> latest NLP cl\u00e1ssico <code>wordcloud</code> latest Nuvens de palavras <code>matplotlib</code> latest Gr\u00e1ficos"},{"location":"flows/dependencies_flow/#arquivo-sugerido-docsnlp_dependenciesmd","title":"\ud83d\udcdd ARQUIVO SUGERIDO: <code>docs/NLP_DEPENDENCIES.md</code>","text":"<pre><code># Depend\u00eancias NLP - ShowTrials\n\n## \u26a0\ufe0f Situa\u00e7\u00e3o Especial\n\nDevido a conflitos de vers\u00e3o hist\u00f3ricos (documentados na FASE 8), as depend\u00eancias de NLP s\u00e3o instaladas via `pip` dentro do ambiente Poetry.\n\n## \ud83d\udce6 Depend\u00eancias Atuais\n\n| Biblioteca | Vers\u00e3o | Instala\u00e7\u00e3o |\n|------------|--------|------------|\n| numpy | 1.26.0 | `poetry run pip install numpy==1.26.0` |\n| spacy | 3.7.5 | `poetry run pip install spacy==3.7.5` |\n| textblob | latest | `poetry run pip install textblob` |\n| nltk | latest | `poetry run pip install nltk` |\n| wordcloud | latest | `poetry run pip install wordcloud` |\n| matplotlib | latest | `poetry run pip install matplotlib` |\n\n## \ud83e\udd16 Modelos\n\n```bash\npoetry run python -m spacy download en_core_web_sm\npoetry run python -m spacy download ru_core_news_sm\n</code></pre>"},{"location":"flows/dependencies_flow/#cicd","title":"\ud83d\udd04 CI/CD","text":"<p>No GitHub Actions, estas depend\u00eancias s\u00e3o instaladas em uma etapa separada:</p> <pre><code>- name: Install NLP dependencies (pip)\n  run: |\n    poetry run pip install numpy==1.26.0\n    poetry run pip install spacy==3.7.5\n    poetry run pip install textblob nltk wordcloud matplotlib\n    poetry run python -m spacy download en_core_web_sm\n    poetry run python -m spacy download ru_core_news_sm\n</code></pre>"},{"location":"flows/dependencies_flow/#todo-issue-1","title":"\ud83c\udfaf TODO (Issue #1)","text":"<ul> <li>[ ] Pesquisar vers\u00f5es compat\u00edveis para Poetry</li> <li>[ ] Testar migra\u00e7\u00e3o gradual</li> <li>[ ] Remover etapas de pip do CI</li> <li>[ ] Atualizar documenta\u00e7\u00e3o <pre><code>---\n\n## \ud83d\udea8 **PROBLEMAS COMUNS E SOLU\u00c7\u00d5ES**\n\n| Problema | Causa | Solu\u00e7\u00e3o |\n|----------|-------|---------|\n| `Lock file not found` | `poetry.lock` deletado ou n\u00e3o gerado | `poetry lock` |\n| `Version conflict` | Duas bibliotecas pedem vers\u00f5es diferentes | Ajustar vers\u00f5es manualmente |\n| `Package not found` | Nome errado ou fonte n\u00e3o configurada | Verificar nome e adicionar fonte |\n| `ImportError no CI` | Depend\u00eancia n\u00e3o instalada | Verificar CI, adicionar etapa |\n| `Spacy model not found` | Modelo n\u00e3o baixado | `poetry run python -m spacy download ...` |\n| `NLP quebrando local` | Vers\u00e3o diferente da do CI | Sincronizar vers\u00f5es |\n\n---\n\n## \ud83d\udccb **COMANDOS \u00daTEIS**\n\n```bash\n# Ver depend\u00eancias\npoetry show\npoetry show --tree\npoetry show --outdated\n\n# Adicionar/remover\npoetry add requests\npoetry remove requests\npoetry add --dev pytest\n\n# Atualizar\npoetry update\npoetry update requests\n\n# Instalar\npoetry install\npoetry install --no-dev\n\n# Ver ambiente\npoetry env info\npoetry run pip list\n\n# NLP (caso especial)\npoetry run pip install numpy==1.26.0\npoetry run python -m spacy download en_core_web_sm\n</code></pre></li> </ul>"},{"location":"flows/dependencies_flow/#checklist-antes-de-commitar-mudancas-de-dependencias","title":"\u2705 CHECKLIST: ANTES DE COMMITAR MUDAN\u00c7AS DE DEPEND\u00caNCIAS","text":"<ul> <li>[ ] <code>poetry lock</code> foi executado (se mudou <code>pyproject.toml</code>)</li> <li>[ ] Testou localmente com <code>poetry install --no-dev</code></li> <li>[ ] Testou localmente com <code>poetry install</code> (com dev)</li> <li>[ ] Verificou que n\u00e3o quebrou <code>task check</code></li> <li>[ ] Se for NLP, testou no CI (push para branch)</li> <li>[ ] Atualizou documenta\u00e7\u00e3o (se necess\u00e1rio)</li> <li>[ ] Commit com mensagem clara</li> </ul>"},{"location":"flows/dependencies_flow/#beneficios-deste-fluxo","title":"\ud83c\udfc6 BENEF\u00cdCIOS DESTE FLUXO","text":"Antes Depois \u274c \"Instalei aqui e funcionou\" \u2705 Procedimento documentado \u274c CI quebrava por falta de depend\u00eancia \u2705 CI atualizado junto \u274c Esquecia vers\u00f5es exatas \u2705 Tudo versionado (ou documentado) \u274c D\u00favida: Poetry ou pip? \u2705 Regra clara: NLP = pip, resto = Poetry \u274c Problemas de NLP se repetiam \u2705 Issue #1 acompanhando"},{"location":"flows/dependencies_flow/#referencias","title":"\ud83d\udcda REFER\u00caNCIAS","text":"<ul> <li>Poetry Documentation</li> <li>FASE 8 - An\u00e1lise de Texto</li> <li>Issue #1 - Migrar NLP para Poetry</li> </ul>"},{"location":"flows/dependencies_flow/#autor","title":"\ud83d\udc64 AUTOR","text":"<p>Thiago Ribeiro - Projeto de TCC</p> <sub>Dependencies Flow - ShowTrials</sub> <sub>Vers\u00e3o 1.0 - 20 de Fevereiro de 2026</sub> <sub>\u2705 Pronto para uso</sub>"},{"location":"flows/dependencies_flow/#proximo-flow","title":"\ud83d\udccb PR\u00d3XIMO FLOW","text":"<p>Debug Flow ser\u00e1 o pr\u00f3ximo! \ud83d\ude80</p>"},{"location":"flows/documentation_flow/","title":"Documentation Flow","text":""},{"location":"flows/documentation_flow/#flow-5-documentation-flow-showtrials","title":"\ud83d\udcda FLOW 5: DOCUMENTATION FLOW - SHOWTRIALS","text":"**Guia completo para cria\u00e7\u00e3o e manuten\u00e7\u00e3o da documenta\u00e7\u00e3o do projeto**"},{"location":"flows/documentation_flow/#informacoes-do-documento","title":"\ud83d\udcc5 Informa\u00e7\u00f5es do Documento","text":"Item Descri\u00e7\u00e3o Data 20 de Fevereiro de 2026 Autor Thiago Ribeiro Vers\u00e3o 1.0 Relacionado a Git Flow, Quality Flow, MkDocs, Fases do Projeto"},{"location":"flows/documentation_flow/#objetivo","title":"\ud83c\udfaf OBJETIVO","text":"<p>Padronizar a cria\u00e7\u00e3o e manuten\u00e7\u00e3o de toda a documenta\u00e7\u00e3o do projeto, garantindo:</p> <ul> <li>\u2705 Consist\u00eancia entre documentos</li> <li>\u2705 Facilidade de navega\u00e7\u00e3o</li> <li>\u2705 Atualiza\u00e7\u00e3o junto com o c\u00f3digo</li> <li>\u2705 Versionamento adequado</li> <li>\u2705 Acessibilidade para diferentes p\u00fablicos</li> </ul>"},{"location":"flows/documentation_flow/#tipos-de-documentacao","title":"\ud83d\udcca TIPOS DE DOCUMENTA\u00c7\u00c3O","text":"<pre><code>graph TD\n    subgraph \"Documenta\u00e7\u00e3o do Projeto\"\n        A[C\u00f3digo Fonte] --&gt;|Docstrings| D[API Reference]\n        B[Fases do Projeto] --&gt;|FASE*.md| E[Documenta\u00e7\u00e3o T\u00e9cnica]\n        C[Usu\u00e1rio Final] --&gt;|README.md| F[Guia de Uso]\n\n        G[MkDocs] --&gt; H[Site Est\u00e1tico]\n        D --&gt; G\n        E --&gt; G\n        F --&gt; G\n    end\n</code></pre>"},{"location":"flows/documentation_flow/#onde-cada-coisa-vive","title":"Onde cada coisa vive","text":"Tipo Local Formato P\u00fablico Docstrings No c\u00f3digo Python docstrings Desenvolvedores Fases do Projeto <code>docs/</code> Markdown (FASE*.md) Historiadores do projeto README Raiz Markdown Usu\u00e1rios/Visitantes CHANGELOG Raiz Markdown Todos Site completo <code>site/</code> (gerado) HTML Todos"},{"location":"flows/documentation_flow/#padrao-de-docstrings","title":"\ud83d\udcdd PADR\u00c3O DE DOCSTRINGS","text":""},{"location":"flows/documentation_flow/#formato-google-style","title":"Formato: Google Style","text":"<pre><code>def minha_funcao(param1: str, param2: int = 10) -&gt; Dict:\n    \"\"\"\n    Descri\u00e7\u00e3o clara do que a fun\u00e7\u00e3o faz.\n\n    Mais detalhes sobre o comportamento, efeitos colaterais,\n    e qualquer informa\u00e7\u00e3o relevante para quem for usar.\n\n    Args:\n        param1: Descri\u00e7\u00e3o do primeiro par\u00e2metro\n        param2: Descri\u00e7\u00e3o do segundo par\u00e2metro (default: 10)\n\n    Returns:\n        Dicion\u00e1rio contendo os resultados processados\n\n    Raises:\n        ValueError: Quando param1 est\u00e1 vazio\n        TypeError: Quando param2 n\u00e3o \u00e9 inteiro\n\n    Examples:\n        &gt;&gt;&gt; resultado = minha_funcao(\"teste\", 5)\n        &gt;&gt;&gt; print(resultado['status'])\n        'sucesso'\n    \"\"\"\n</code></pre>"},{"location":"flows/documentation_flow/#checklist-para-docstrings","title":"Checklist para docstrings","text":"<ul> <li>[ ] O qu\u00ea a fun\u00e7\u00e3o faz (n\u00e3o como)</li> <li>[ ] Args: todos os par\u00e2metros documentados</li> <li>[ ] Returns: tipo e significado do retorno</li> <li>[ ] Raises: exce\u00e7\u00f5es que podem ser lan\u00e7adas</li> <li>[ ] Examples: (opcional, mas \u00fatil)</li> </ul>"},{"location":"flows/documentation_flow/#exemplo-real-do-projeto","title":"Exemplo real do projeto","text":"<pre><code># src/application/use_cases/exportar_documento.py\n\ndef executar(\n    self,\n    documento_id: int,\n    formato: str = \"txt\",\n    idioma: str = \"original\",\n    diretorio: str = \"exportados\",\n    incluir_metadados: bool = True,\n) -&gt; Dict:\n    \"\"\"\n    Exporta um documento para o formato especificado.\n\n    O documento pode ser exportado no formato original ou em uma\n    das tradu\u00e7\u00f5es dispon\u00edveis. O arquivo \u00e9 salvo no diret\u00f3rio\n    especificado com nome padronizado.\n\n    Args:\n        documento_id: ID do documento a ser exportado\n        formato: Formato de sa\u00edda ('txt' ou 'pdf')\n        idioma: 'original' ou c\u00f3digo do idioma ('en', 'pt', 'es', 'fr')\n        diretorio: Pasta onde salvar o arquivo\n        incluir_metadados: Se True, inclui cabe\u00e7alho com metadados\n\n    Returns:\n        Dict com:\n            - sucesso: bool indicando se a opera\u00e7\u00e3o foi bem-sucedida\n            - caminho: str com o caminho do arquivo (se sucesso)\n            - erro: str com mensagem de erro (se falha)\n            - tamanho: int com n\u00famero de caracteres (se TXT)\n\n    Raises:\n        ValueError: Se o formato n\u00e3o for suportado\n        RuntimeError: Se houver erro na escrita do arquivo\n    \"\"\"\n</code></pre>"},{"location":"flows/documentation_flow/#documentacao-das-fases-fasemd","title":"\ud83d\udcda DOCUMENTA\u00c7\u00c3O DAS FASES (FASE*.md)","text":""},{"location":"flows/documentation_flow/#estrutura-padrao","title":"Estrutura padr\u00e3o","text":"<pre><code># FASE X - T\u00edtulo Descritivo\n\n&lt;div align=\"center\"&gt;\n\n**Breve descri\u00e7\u00e3o do que foi feito**\n\n&lt;/div&gt;\n\n## \ud83d\udcc5 **Informa\u00e7\u00f5es da Fase**\n\n| Item | Descri\u00e7\u00e3o |\n|------|-----------|\n| **Status** | \u2705 Conclu\u00edda / \u23f3 Em andamento |\n| **Data de Conclus\u00e3o** | DD/MM/AAAA |\n| **Artefatos** | Lista de arquivos principais |\n| **Depend\u00eancias** | Fases relacionadas |\n| **Branch principal** | `type/nome-do-arquivo` |\n\n---\n\n## \ud83c\udfaf **Objetivo**\n\nDescri\u00e7\u00e3o clara do que a fase implementou.\n\n---\n\n## \ud83d\udd0d **Estado Inicial**\n\n### \ud83d\udcca **M\u00e9tricas Antes da Interven\u00e7\u00e3o**\n\n| M\u00e9trica | Valor |\n|---------|-------|\n| **Cobertura** | X% |\n| **Testes existentes** | N |\n| **Telemetria** | \u274c Ausente / \u2705 Parcial |\n| **MyPy no arquivo** | \u26a0\ufe0f N erros |\n| **Linhas de c\u00f3digo** | N |\n\n---\n\n## \ud83d\udee0\ufe0f **Implementa\u00e7\u00e3o Realizada**\n\n### **1. Principais mudan\u00e7as**\n\nDescri\u00e7\u00e3o do que foi feito...\n\n### **2. Desafios Encontrados**\n\n| Desafio | Solu\u00e7\u00e3o |\n|---------|---------|\n| Problema X | Solu\u00e7\u00e3o Y |\n\n---\n\n## \ud83e\uddea **Testes Criados**\n\n| # | Teste | Descri\u00e7\u00e3o |\n|---|-------|-----------|\n| 1 | `test_exemplo` | Verifica comportamento X |\n\n---\n\n## \ud83d\udcca **Resultados Finais**\n\n| M\u00e9trica | Antes | Depois | Evolu\u00e7\u00e3o |\n|---------|-------|--------|----------|\n| **Cobertura** | X% | Y% | \ud83d\udcc8 +Z p.p. |\n| **Testes** | N | M | \u2705 +K novos |\n\n---\n\n## \ud83d\udcdd **Li\u00e7\u00f5es Aprendidas**\n\n1. Li\u00e7\u00e3o 1\n2. Li\u00e7\u00e3o 2\n\n---\n\n## \ud83d\udc64 **Autor**\n\n**Thiago Ribeiro** - Projeto de TCC\n</code></pre>"},{"location":"flows/documentation_flow/#quando-criar-uma-fasemd","title":"Quando criar uma FASE*.md","text":"<ul> <li>[ ] SEMPRE ao finalizar uma branch <code>type/*</code></li> <li>[ ] NUNCA no meio do desenvolvimento</li> <li>[ ] ATUALIZAR se houver mudan\u00e7as significativas depois</li> </ul>"},{"location":"flows/documentation_flow/#readmemd","title":"\ud83d\udcd6 README.md","text":""},{"location":"flows/documentation_flow/#estrutura-atual","title":"Estrutura atual","text":"<pre><code># ShowTrials - Sistema de Gest\u00e3o de Documentos Hist\u00f3ricos\n\n&lt;div align=\"center\"&gt;\n\n![Python](https://img.shields.io/badge/python-3.12-blue)\n![CI](https://github.com/rib-thiago/showtrials-tcc/actions/workflows/ci.yml/badge.svg)\n![Coverage](https://img.shields.io/badge/coverage-75%25-green)\n![License](https://img.shields.io/badge/license-MIT-green)\n\n**Sistema para coleta, armazenamento, tradu\u00e7\u00e3o e an\u00e1lise de documentos hist\u00f3ricos**\n\n[\ud83d\udcda Documenta\u00e7\u00e3o](docs/) | [\ud83d\ude80 Instala\u00e7\u00e3o](#instala\u00e7\u00e3o) | [\ud83d\udcca Estat\u00edsticas](#estat\u00edsticas) | [\ud83e\udd1d Contribuir](#contribuindo)\n\n&lt;/div&gt;\n</code></pre>"},{"location":"flows/documentation_flow/#checklist-de-manutencao-do-readme","title":"Checklist de manuten\u00e7\u00e3o do README","text":"<ul> <li>[ ] Badges atualizados (coverage, CI, vers\u00e3o)</li> <li>[ ] Instru\u00e7\u00f5es de instala\u00e7\u00e3o funcionam?</li> <li>[ ] Exemplos de uso est\u00e3o corretos?</li> <li>[ ] Links para documenta\u00e7\u00e3o est\u00e3o v\u00e1lidos?</li> <li>[ ] Autor e contato atualizados?</li> </ul>"},{"location":"flows/documentation_flow/#changelogmd","title":"\ud83d\udccb CHANGELOG.md","text":""},{"location":"flows/documentation_flow/#formato-keep-a-changelog","title":"Formato (Keep a Changelog)","text":"<pre><code># Changelog\n\n## [0.3.0] - 2026-02-20\n\n### Adicionado\n- Telemetria e testes em classificar_documento.py (#3)\n- Telemetria e testes em obter_documento.py (#4)\n- Telemetria e testes em estatisticas.py (#5)\n- Corre\u00e7\u00f5es de MyPy globais (#6)\n\n### Corrigido\n- Erro ao exportar documentos com data em formato string\n- Mock de context manager em testes de listar_documentos\n\n### Melhorado\n- Cobertura global de 68% para 75%\n\n## [0.2.0] - 2026-02-18\n\n### Adicionado\n- CI/CD com GitHub Actions\n- Documenta\u00e7\u00e3o autom\u00e1tica com MkDocs\n- ...\n</code></pre>"},{"location":"flows/documentation_flow/#quando-atualizar-o-changelog","title":"Quando atualizar o CHANGELOG","text":"<ul> <li>[ ] A cada release (obrigat\u00f3rio)</li> <li>[ ] A cada feature relevante (opcional, mas bom)</li> <li>[ ] Corre\u00e7\u00f5es importantes (bugs que afetavam usu\u00e1rios)</li> </ul>"},{"location":"flows/documentation_flow/#mkdocs-site-de-documentacao","title":"\ud83c\udf10 MKdocs - SITE DE DOCUMENTA\u00c7\u00c3O","text":""},{"location":"flows/documentation_flow/#arquivo-de-configuracao-mkdocsyml","title":"Arquivo de configura\u00e7\u00e3o (<code>mkdocs.yml</code>)","text":"<pre><code>site_name: ShowTrials\nsite_description: Sistema de Gest\u00e3o de Documentos Hist\u00f3ricos\nsite_author: Thiago Ribeiro\nrepo_url: https://github.com/rib-thiago/showtrials-tcc\n\ntheme:\n  name: material\n  language: pt-BR\n  features:\n    - navigation.tabs\n    - navigation.sections\n    - toc.integrate\n\nnav:\n  - In\u00edcio: index.md\n  - Vis\u00e3o Geral: overview.md\n  - Arquitetura: ARCHITECTURE.md\n  - Fases do Projeto:\n    - FASE 1 - Domain: FASE1_DOMAIN.md\n    - FASE 2 - Application: FASE2_APPLICATION.md\n    # ... todas as fases\n  - Como Contribuir: contributing.md\n  - Changelog: changelog.md\n</code></pre>"},{"location":"flows/documentation_flow/#comandos-uteis","title":"Comandos \u00fateis","text":"<pre><code># Servir localmente (com auto-reload)\ntask docs\n# ou\npoetry run mkdocs serve\n\n# Construir site est\u00e1tico\npoetry run mkdocs build\n\n# Publicar no GitHub Pages\npoetry run mkdocs gh-deploy\n</code></pre>"},{"location":"flows/documentation_flow/#checklist-de-manutencao-do-mkdocs","title":"Checklist de manuten\u00e7\u00e3o do MkDocs","text":"<ul> <li>[ ] <code>nav</code> no <code>mkdocs.yml</code> inclui todas as FASE*.md</li> <li>[ ] Links internos funcionam</li> <li>[ ] Imagens e assets est\u00e3o sendo copiados</li> <li>[ ] Vers\u00e3o do tema est\u00e1 atualizada</li> </ul>"},{"location":"flows/documentation_flow/#fluxo-completo-de-documentacao","title":"\ud83d\udd04 FLUXO COMPLETO DE DOCUMENTA\u00c7\u00c3O","text":"<pre><code>graph TD\n    subgraph \"Durante o Desenvolvimento\"\n        A[C\u00f3digo] --&gt;|docstrings| B[Documenta\u00e7\u00e3o da API]\n        C[Branch type/*] --&gt;|ao finalizar| D[Criar/atualizar FASE*.md]\n    end\n\n    subgraph \"Antes do Commit\"\n        D --&gt; E[Verificar links]\n        D --&gt; F[Verificar markdown]\n    end\n\n    subgraph \"Antes da Release\"\n        G[Revisar README.md] --&gt; H[Atualizar badges]\n        I[Revisar CHANGELOG.md] --&gt; J[Adicionar notas da release]\n        K[Verificar mkdocs.yml] --&gt; L[Incluir novas fases]\n    end\n\n    subgraph \"Publica\u00e7\u00e3o\"\n        M[poetry run mkdocs gh-deploy] --&gt; N[Site atualizado]\n        O[git tag v0.3.0] --&gt; P[Release no GitHub]\n    end\n</code></pre>"},{"location":"flows/documentation_flow/#checklist-por-tipo-de-documentacao","title":"\u2705 CHECKLIST POR TIPO DE DOCUMENTA\u00c7\u00c3O","text":""},{"location":"flows/documentation_flow/#docstrings-a-cada-funcaometodo-publico","title":"Docstrings (a cada fun\u00e7\u00e3o/m\u00e9todo p\u00fablico)","text":"<ul> <li>[ ] Descri\u00e7\u00e3o clara do que faz</li> <li>[ ] Todos os par\u00e2metros documentados</li> <li>[ ] Retorno documentado</li> <li>[ ] Exce\u00e7\u00f5es documentadas</li> <li>[ ] Exemplo de uso (opcional)</li> </ul>"},{"location":"flows/documentation_flow/#fasemd-a-cada-fase-concluida","title":"FASE*.md (a cada fase conclu\u00edda)","text":"<ul> <li>[ ] Template seguido</li> <li>[ ] M\u00e9tricas antes/depois</li> <li>[ ] Desafios e solu\u00e7\u00f5es documentados</li> <li>[ ] Links para issues relacionadas</li> <li>[ ] Adicionada ao <code>mkdocs.yml</code></li> </ul>"},{"location":"flows/documentation_flow/#readmemd-a-cada-release","title":"README.md (a cada release)","text":"<ul> <li>[ ] Badges atualizados</li> <li>[ ] Instru\u00e7\u00f5es de instala\u00e7\u00e3o testadas</li> <li>[ ] Exemplos de uso verificados</li> <li>[ ] Link para documenta\u00e7\u00e3o funcionando</li> </ul>"},{"location":"flows/documentation_flow/#changelogmd-a-cada-release","title":"CHANGELOG.md (a cada release)","text":"<ul> <li>[ ] Nova vers\u00e3o adicionada</li> <li>[ ] Mudan\u00e7as categorizadas (Adicionado, Corrigido, etc.)</li> <li>[ ] Issues relacionadas linkadas</li> <li>[ ] Data da release</li> </ul>"},{"location":"flows/documentation_flow/#mkdocs-antes-de-publicar","title":"MkDocs (antes de publicar)","text":"<ul> <li>[ ] <code>mkdocs serve</code> funciona localmente</li> <li>[ ] Todas as FASE*.md est\u00e3o no <code>nav</code></li> <li>[ ] Links internos funcionam</li> <li>[ ] <code>mkdocs build</code> n\u00e3o d\u00e1 erro</li> </ul>"},{"location":"flows/documentation_flow/#comandos-uteis_1","title":"\ud83d\udccb COMANDOS \u00daTEIS","text":"<pre><code># Documenta\u00e7\u00e3o\ntask docs                 # serve localmente\npoetry run mkdocs build   # constr\u00f3i site\npoetry run mkdocs gh-deploy  # publica\n\n# Verificar markdown (opcional)\nnpm install -g markdownlint-cli\nmarkdownlint docs/*.md\n\n# Verificar links quebrados (opcional)\npip install linkchecker\nlinkchecker http://localhost:8000\n</code></pre>"},{"location":"flows/documentation_flow/#problemas-comuns-e-solucoes","title":"\ud83d\udea8 PROBLEMAS COMUNS E SOLU\u00c7\u00d5ES","text":"Problema Causa Solu\u00e7\u00e3o Docstring desatualizada Mudou c\u00f3digo, esqueceu docstring Revisar sempre que mexer no m\u00e9todo FASE*.md n\u00e3o aparece no site Esqueceu de adicionar no <code>mkdocs.yml</code> Adicionar no <code>nav</code> Link quebrado na documenta\u00e7\u00e3o Arquivo movido ou renomeado Usar links relativos corretos Badge de cobertura desatualizado CI n\u00e3o rodou ou badge errado Verificar workflow do CI README muito longo Toda documenta\u00e7\u00e3o no README Mover para docs/ e deixar apenas essencial"},{"location":"flows/documentation_flow/#exemplo-pratico-criando-documentacao-de-uma-fase","title":"\ud83d\udcca EXEMPLO PR\u00c1TICO: CRIANDO DOCUMENTA\u00c7\u00c3O DE UMA FASE","text":""},{"location":"flows/documentation_flow/#situacao-fase-17-concluida","title":"Situa\u00e7\u00e3o: FASE 17 conclu\u00edda","text":"<pre><code># 1. Criar arquivo da fase\ncp docs/FASE16_LISTAR_DOCUMENTOS.md docs/FASE17_CLASSIFICAR_DOCUMENTO.md\n\n# 2. Editar com as informa\u00e7\u00f5es reais\nnano docs/FASE17_CLASSIFICAR_DOCUMENTO.md\n# - Atualizar t\u00edtulo, data, m\u00e9tricas\n# - Descrever implementa\u00e7\u00e3o\n# - Listar desafios\n# - Colocar resultados\n\n# 3. Adicionar ao mkdocs.yml\nnano mkdocs.yml\n# Adicionar na se\u00e7\u00e3o \"Fases do Projeto\":\n#   - FASE 17 - Classificar Documento: FASE17_CLASSIFICAR_DOCUMENTO.md\n\n# 4. Testar localmente\ntask docs\n# Acessar http://127.0.0.1:8000\n\n# 5. Commit\ngit add docs/FASE17_CLASSIFICAR_DOCUMENTO.md\ngit add mkdocs.yml\ngit commit -m \"docs: adiciona documenta\u00e7\u00e3o da FASE 17\n\n- Documenta implementa\u00e7\u00e3o de telemetria em classificar_documento.py\n- Inclui m\u00e9tricas antes/depois e desafios encontrados\n\nCloses #3\"\n</code></pre>"},{"location":"flows/documentation_flow/#beneficios-deste-fluxo","title":"\ud83c\udfc6 BENEF\u00cdCIOS DESTE FLUXO","text":"Antes Depois \u274c Documenta\u00e7\u00e3o espalhada \u2705 Centralizada no MkDocs \u274c Fases sem registro \u2705 FASE*.md para cada uma \u274c Docstrings inconsistentes \u2705 Padr\u00e3o Google Style \u274c README desatualizado \u2705 Revisado a cada release \u274c CHANGELOG esquecido \u2705 Atualizado religiosamente \u274c D\u00favida sobre o que foi feito \u2705 Hist\u00f3rico completo documentado"},{"location":"flows/documentation_flow/#referencias","title":"\ud83d\udcda REFER\u00caNCIAS","text":"<ul> <li>Google Python Style Guide (docstrings)</li> <li>MkDocs Material</li> <li>Keep a Changelog</li> <li>Semantic Versioning</li> </ul>"},{"location":"flows/documentation_flow/#autor","title":"\ud83d\udc64 AUTOR","text":"<p>Thiago Ribeiro - Projeto de TCC</p> <sub>Documentation Flow - ShowTrials</sub> <sub>Vers\u00e3o 1.0 - 20 de Fevereiro de 2026</sub> <sub>\u2705 Pronto para uso</sub>"},{"location":"flows/documentation_flow/#proximo-flow","title":"\ud83d\udccb PR\u00d3XIMO FLOW","text":"<p>Refactoring Flow ser\u00e1 o pr\u00f3ximo! \ud83d\ude80</p>"},{"location":"flows/emergency_flow/","title":"Emergency Flow","text":""},{"location":"flows/emergency_flow/#flow-7-emergency-flow-hotfix-showtrials","title":"\ud83d\udcda FLOW 7: EMERGENCY FLOW (HOTFIX) - SHOWTRIALS","text":"**Guia completo para lidar com situa\u00e7\u00f5es cr\u00edticas que exigem corre\u00e7\u00e3o imediata**"},{"location":"flows/emergency_flow/#informacoes-do-documento","title":"\ud83d\udcc5 Informa\u00e7\u00f5es do Documento","text":"Item Descri\u00e7\u00e3o Data 20 de Fevereiro de 2026 Autor Thiago Ribeiro Vers\u00e3o 1.0 Relacionado a Git Flow, CI/CD, Quality Flow, Debug Flow"},{"location":"flows/emergency_flow/#o-que-e-um-hotfix","title":"\ud83d\udea8 O QUE \u00c9 UM HOTFIX?","text":""},{"location":"flows/emergency_flow/#definicao","title":"Defini\u00e7\u00e3o","text":"<p>Um hotfix \u00e9 uma corre\u00e7\u00e3o urgente aplicada diretamente na branch principal (<code>main</code>) para resolver um problema cr\u00edtico em produ\u00e7\u00e3o, sem passar pelo fluxo normal de desenvolvimento.</p> <pre><code>graph TD\n    subgraph \"Fluxo Normal\"\n        A[main] --&gt;|branch| B[type/feature]\n        B --&gt;|desenvolvimento| C[testes]\n        C --&gt;|merge| A\n    end\n\n    subgraph \"Hotfix\"\n        D[main] --&gt;|branch urgente| E[fix/urgente]\n        E --&gt;|corre\u00e7\u00e3o m\u00ednima| F[testes r\u00e1pidos]\n        F --&gt;|merge direto| D\n        D --&gt;|nova tag| G[v0.2.1]\n    end\n</code></pre>"},{"location":"flows/emergency_flow/#quando-usar-hotfix","title":"Quando usar hotfix?","text":"Situa\u00e7\u00e3o Exemplo Hotfix? Bug cr\u00edtico em produ\u00e7\u00e3o Aplica\u00e7\u00e3o quebra ao exportar \u2705 Sim Dados corrompidos Tradu\u00e7\u00f5es sendo salvas errado \u2705 Sim Funcionalidade principal quebrada CLI n\u00e3o abre \u2705 Sim Bug menor em funcionalidade pouco usada Estat\u00edstica de m\u00eas errada \u274c N\u00e3o (vai no fluxo normal) Melhoria de performance Query lenta \u274c N\u00e3o Nova funcionalidade Modo escuro \u274c N\u00e3o"},{"location":"flows/emergency_flow/#principios-do-hotfix","title":"\u26a0\ufe0f PRINC\u00cdPIOS DO HOTFIX","text":""},{"location":"flows/emergency_flow/#1-minimo-necessario","title":"1. M\u00ednimo necess\u00e1rio","text":"<pre><code># RUIM (aproveitou para refatorar)\ndef exportar(documento_id):\n    # corrigiu bug + renomeou vari\u00e1veis + extraiu m\u00e9todo\n    # + mudou formata\u00e7\u00e3o\n    ...\n\n# BOM (s\u00f3 o necess\u00e1rio)\ndef exportar(documento_id):\n    # apenas a linha que causava o bug foi corrigida\n    if documento_id is None:  # \u2190 \u00fanica mudan\u00e7a\n        documento_id = 1\n    ...\n</code></pre>"},{"location":"flows/emergency_flow/#2-testes-obrigatorios-mesmo-urgente","title":"2. Testes obrigat\u00f3rios (mesmo urgente)","text":"<pre><code># M\u00cdNIMO: testes do arquivo afetado\npoetry run pytest src/tests/test_exportar_documento.py -v\n\n# IDEAL: todos os testes (se poss\u00edvel)\ntask test\n</code></pre>"},{"location":"flows/emergency_flow/#3-documentacao-da-emergencia","title":"3. Documenta\u00e7\u00e3o da emerg\u00eancia","text":"<pre><code># Commit deve explicar CLARAMENTE o problema e a solu\u00e7\u00e3o\ngit commit -m \"hotfix: corrige erro cr\u00edtico ao exportar documento sem ID\n\n- Quando documento_id era None, a aplica\u00e7\u00e3o quebrava\n- Agora verifica e usa fallback para ID 1\n- Adicionado teste espec\u00edfico para o caso\n\nCloses #9\"  # issue criada para o hotfix\n</code></pre>"},{"location":"flows/emergency_flow/#4-versionamento-imediato","title":"4. Versionamento imediato","text":"<pre><code># Sempre criar uma nova vers\u00e3o PATCH\ngit tag -a v0.2.1 -m \"Hotfix: corre\u00e7\u00e3o cr\u00edtica no exportar_documento\"\ngit push origin v0.2.1\ngh release create v0.2.1 --title \"v0.2.1\" --notes \"Corre\u00e7\u00e3o emergencial\"\n</code></pre>"},{"location":"flows/emergency_flow/#fluxo-completo-de-hotfix","title":"\ud83d\udd04 FLUXO COMPLETO DE HOTFIX","text":"<pre><code>graph TD\n    subgraph \"1. Detec\u00e7\u00e3o\"\n        A[Problema cr\u00edtico detectado] --&gt; B[Criar issue de emerg\u00eancia]\n        B --&gt; C[Adicionar label: prioridade:alta, tipo:hotfix]\n    end\n\n    subgraph \"2. Corre\u00e7\u00e3o\"\n        C --&gt; D[Criar branch: fix/urgente-descricao]\n        D --&gt; E[Fazer corre\u00e7\u00e3o M\u00cdNIMA necess\u00e1ria]\n        E --&gt; F[Testes focados]\n        F --&gt; G{Testes passam?}\n        G --&gt;|sim| H[Commit com 'Closes #issue']\n        G --&gt;|n\u00e3o| E\n    end\n\n    subgraph \"3. Libera\u00e7\u00e3o\"\n        H --&gt; I[Push]\n        I --&gt; J[CI deve passar]\n        J --&gt; K{Merge direto na main}\n        K --&gt; L[Criar nova tag de patch]\n        L --&gt; M[Criar release no GitHub]\n    end\n\n    subgraph \"4. P\u00f3s-corre\u00e7\u00e3o\"\n        M --&gt; N[Atualizar CHANGELOG]\n        N --&gt; O[Comunicar (se necess\u00e1rio)]\n        O --&gt; P[Mover issue para Done]\n    end\n</code></pre>"},{"location":"flows/emergency_flow/#passo-a-passo-detalhado","title":"\ud83d\udccb PASSO A PASSO DETALHADO","text":""},{"location":"flows/emergency_flow/#passo-1-detectar-e-documentar","title":"Passo 1: Detectar e documentar","text":"<pre><code># Criar issue de emerg\u00eancia\ngh issue create --title \"BUG CR\u00cdTICO: exportar_documento quebra com ID None\" \\\n  --body \"## \ud83d\udea8 Descri\u00e7\u00e3o do Problema\nAo exportar documento sem ID (caso raro), a aplica\u00e7\u00e3o quebra com AttributeError.\n\n## \ud83d\udd0d Passos para reproduzir\n1. Executar exportar_documento com documento_id=None\n2. Ver erro: 'NoneType' object has no attribute 'isoformat'\n\n## \u2705 Comportamento esperado\nDeveria retornar erro amig\u00e1vel ou usar fallback.\n\n## \ud83d\udcca Impacto\n- Afeta ~1% das exporta\u00e7\u00f5es\n- Usu\u00e1rios recebem traceback em vez de mensagem\n\n## \u23f1\ufe0f Urg\u00eancia: CR\u00cdTICA\" \\\n  --label \"prioridade:alta,tipo/hotfix\"\n</code></pre>"},{"location":"flows/emergency_flow/#passo-2-criar-branch-de-hotfix","title":"Passo 2: Criar branch de hotfix","text":"<pre><code># Sempre a partir da main\ngit checkout main\ngit pull origin main\ngit checkout -b fix/exportar-documento-id-none\n</code></pre>"},{"location":"flows/emergency_flow/#passo-3-corrigir-apenas-o-necessario","title":"Passo 3: Corrigir (apenas o necess\u00e1rio)","text":"<pre><code># ANTES (c\u00f3digo com bug)\ndef _buscar_documento(self, documento_id, idioma):\n    if idioma == \"original\":\n        doc = self.repo_doc.buscar_por_id(documento_id)\n        # ... se documento_id for None, j\u00e1 quebra aqui\n\n# DEPOIS (corre\u00e7\u00e3o m\u00ednima)\ndef _buscar_documento(self, documento_id, idioma):\n    if documento_id is None:\n        if _telemetry:\n            _telemetry.increment(\"exportar_documento.erro.id_none\")\n        return None\n\n    if idioma == \"original\":\n        doc = self.repo_doc.buscar_por_id(documento_id)\n        # ...\n</code></pre>"},{"location":"flows/emergency_flow/#passo-4-testar-focado","title":"Passo 4: Testar (focado)","text":"<pre><code># Teste espec\u00edfico para o caso\ncat &gt;&gt; src/tests/test_exportar_documento.py &lt;&lt; 'EOF'\n\ndef test_executar_com_id_none(self, repo_doc_mock):\n    \"\"\"Deve lidar com documento_id None sem quebrar.\"\"\"\n    use_case = ExportarDocumento(repo_doc_mock)\n\n    resultado = use_case.executar(documento_id=None)\n\n    assert resultado[\"sucesso\"] is False\n    assert \"n\u00e3o encontrado\" in resultado[\"erro\"].lower()\nEOF\n\n# Rodar teste\npoetry run pytest src/tests/test_exportar_documento.py -k \"id_none\" -v\n\n# Rodar testes do arquivo completo (opcional)\npoetry run pytest src/tests/test_exportar_documento.py -v\n</code></pre>"},{"location":"flows/emergency_flow/#passo-5-commit-com-fechamento-da-issue","title":"Passo 5: Commit (com fechamento da issue)","text":"<pre><code>git add src/application/use_cases/exportar_documento.py\ngit add src/tests/test_exportar_documento.py\ngit commit -m \"hotfix: corrige erro ao exportar documento com ID None\n\n- Adiciona verifica\u00e7\u00e3o de documento_id None em _buscar_documento\n- Adiciona teste espec\u00edfico para o caso\n- Adiciona contador de telemetria para monitorar ocorr\u00eancias\n\nCloses #9\"\n</code></pre>"},{"location":"flows/emergency_flow/#passo-6-push-e-ci","title":"Passo 6: Push e CI","text":"<pre><code>git push origin fix/exportar-documento-id-none\n# Acompanhar CI: gh run watch\n</code></pre>"},{"location":"flows/emergency_flow/#passo-7-merge-apos-ci-passar","title":"Passo 7: Merge (ap\u00f3s CI passar)","text":"<pre><code>git checkout main\ngit merge --ff-only fix/exportar-documento-id-none\ngit push origin main\n</code></pre>"},{"location":"flows/emergency_flow/#passo-8-criar-nova-versao-patch","title":"Passo 8: Criar nova vers\u00e3o (patch)","text":"<pre><code># Ver vers\u00e3o atual\ngit describe --tags --abbrev=0\n# v0.2.0\n\n# Criar nova vers\u00e3o patch\ngit tag -a v0.2.1 -m \"Hotfix: corre\u00e7\u00e3o cr\u00edtica no exportar_documento (ID None)\"\ngit push origin v0.2.1\n\n# Criar release no GitHub\ngh release create v0.2.1 \\\n  --title \"v0.2.1 - Hotfix\" \\\n  --notes \"## \ud83d\udea8 Corre\u00e7\u00e3o Emergencial\n\n- Corrige erro ao exportar documento com ID None (issue #9)\n- Adiciona teste espec\u00edfico\n- Adiciona telemetria para monitoramento\n\n**Impacto:** Cr\u00edtico - recomendamos atualiza\u00e7\u00e3o imediata.\"\n</code></pre>"},{"location":"flows/emergency_flow/#passo-9-documentar-no-changelog","title":"Passo 9: Documentar no CHANGELOG","text":"<pre><code>## [0.2.1] - 2026-02-20\n\n### Corrigido\n- Erro cr\u00edtico ao exportar documento com ID None (#9)\n- Adicionada verifica\u00e7\u00e3o de seguran\u00e7a e teste espec\u00edfico\n</code></pre>"},{"location":"flows/emergency_flow/#passo-10-mover-issue-no-kanban","title":"Passo 10: Mover issue no Kanban","text":"<ul> <li>[ ] Issue #9 movida para \"Done\"</li> <li>[ ] Coment\u00e1rio com link da release</li> </ul>"},{"location":"flows/emergency_flow/#checklist-de-hotfix","title":"\u2705 CHECKLIST DE HOTFIX","text":""},{"location":"flows/emergency_flow/#deteccao-e-planejamento","title":"Detec\u00e7\u00e3o e Planejamento","text":"<ul> <li>[ ] Problema \u00e9 realmente cr\u00edtico? (justifica hotfix)</li> <li>[ ] Issue criada com label <code>tipo/hotfix</code> e <code>prioridade:alta</code></li> <li>[ ] Impacto claramente documentado</li> </ul>"},{"location":"flows/emergency_flow/#correcao","title":"Corre\u00e7\u00e3o","text":"<ul> <li>[ ] Branch criada a partir da <code>main</code>: <code>fix/descricao-urgente</code></li> <li>[ ] Corre\u00e7\u00e3o \u00e9 m\u00ednima (apenas o necess\u00e1rio)</li> <li>[ ] Nenhuma refatora\u00e7\u00e3o inclu\u00edda</li> <li>[ ] Nenhuma nova funcionalidade</li> </ul>"},{"location":"flows/emergency_flow/#testes","title":"Testes","text":"<ul> <li>[ ] Teste espec\u00edfico para o caso criado (ou atualizado)</li> <li>[ ] Testes do arquivo afetado passam</li> <li>[ ] (Opcional) Todos os testes passam</li> </ul>"},{"location":"flows/emergency_flow/#commit-e-push","title":"Commit e Push","text":"<ul> <li>[ ] Mensagem de commit clara, come\u00e7ando com <code>hotfix:</code></li> <li>[ ] Inclui <code>Closes #issue</code></li> <li>[ ] CI passa no GitHub</li> </ul>"},{"location":"flows/emergency_flow/#merge-e-release","title":"Merge e Release","text":"<ul> <li>[ ] Merge direto na <code>main</code> (fast-forward)</li> <li>[ ] Nova tag de patch criada (<code>v0.2.1</code>)</li> <li>[ ] Release no GitHub com notas claras</li> <li>[ ] CHANGELOG atualizado</li> </ul>"},{"location":"flows/emergency_flow/#pos-correcao","title":"P\u00f3s-corre\u00e7\u00e3o","text":"<ul> <li>[ ] Issue movida para \"Done\" no Kanban</li> <li>[ ] (Opcional) Comunicar usu\u00e1rios afetados</li> </ul>"},{"location":"flows/emergency_flow/#exemplo-completo","title":"\ud83d\udcca EXEMPLO COMPLETO","text":""},{"location":"flows/emergency_flow/#cenario-bug-critico-no-gerar_relatorio","title":"Cen\u00e1rio: Bug cr\u00edtico no gerar_relatorio","text":"<p>Problema: Relat\u00f3rio quebra quando n\u00e3o h\u00e1 documentos no banco.</p>"},{"location":"flows/emergency_flow/#issue-10","title":"Issue #10","text":"<pre><code>## \ud83d\udea8 BUG CR\u00cdTICO: gerar_relatorio quebra com banco vazio\n\n### Descri\u00e7\u00e3o\nAo executar gerar_relatorio com banco de dados vazio (nenhum documento),\nocorre divis\u00e3o por zero ao calcular percentuais.\n\n### Passos para reproduzir\n1. Truncar tabela documentos\n2. Executar gerar_relatorio\n3. Erro: ZeroDivisionError\n\n### Impacto\n- Usu\u00e1rios novos n\u00e3o conseguem gerar primeiro relat\u00f3rio\n- Bloqueia funcionalidade principal\n</code></pre>"},{"location":"flows/emergency_flow/#correcao_1","title":"Corre\u00e7\u00e3o","text":"<pre><code># ANTES\nif dados[\"total_documentos\"] &gt; 0:\n    pct = dados[\"total_traducoes\"] / dados[\"total_documentos\"] * 100\n\n# DEPOIS\nif dados[\"total_documentos\"] &gt; 0:\n    pct = dados[\"total_traducoes\"] / dados[\"total_documentos\"] * 100\nelse:\n    pct = 0  # \u2190 corre\u00e7\u00e3o m\u00ednima\n</code></pre>"},{"location":"flows/emergency_flow/#teste-adicionado","title":"Teste adicionado","text":"<pre><code>def test_relatorio_com_banco_vazio(self, repo_mock):\n    \"\"\"Deve gerar relat\u00f3rio mesmo sem documentos.\"\"\"\n    repo_mock.listar.return_value = []\n    repo_mock.contar.return_value = 0\n\n    use_case = GerarRelatorio(repo_mock)\n    relatorio = use_case.gerar_relatorio_txt()\n\n    assert \"Total de documentos: 0\" in relatorio\n    assert \"Percentual traduzido: 0.0%\" in relatorio\n</code></pre>"},{"location":"flows/emergency_flow/#commit","title":"Commit","text":"<pre><code>git commit -m \"hotfix: corrige divis\u00e3o por zero em gerar_relatorio com banco vazio\n\n- Adiciona verifica\u00e7\u00e3o para evitar divis\u00e3o por zero\n- Adiciona teste espec\u00edfico para banco vazio\n- Percentual agora \u00e9 0 quando n\u00e3o h\u00e1 documentos\n\nCloses #10\"\n</code></pre>"},{"location":"flows/emergency_flow/#release","title":"Release","text":"<pre><code>git tag -a v0.2.2 -m \"Hotfix: corre\u00e7\u00e3o no gerar_relatorio (banco vazio)\"\ngit push origin v0.2.2\ngh release create v0.2.2 --title \"v0.2.2\" --notes \"Corre\u00e7\u00e3o: relat\u00f3rio com banco vazio\"\n</code></pre>"},{"location":"flows/emergency_flow/#comandos-uteis-para-hotfix","title":"\ud83d\udccb COMANDOS \u00daTEIS PARA HOTFIX","text":"<pre><code># Criar issue de emerg\u00eancia\ngh issue create --title \"HOTFIX: ...\" --label \"prioridade:alta,tipo/hotfix\"\n\n# Ver \u00faltima tag\ngit describe --tags --abbrev=0\n\n# Criar tag de patch\ngit tag -a v0.2.1 -m \"Hotfix: ...\"\ngit push origin v0.2.1\n\n# Criar release\ngh release create v0.2.1 --title \"v0.2.1\" --notes \"Corre\u00e7\u00e3o: ...\"\n\n# Verificar CI da branch\ngh run list -b fix/exportar-documento-id-none\n\n# Fazer merge r\u00e1pido\ngit checkout main\ngit merge --ff-only fix/exportar-documento-id-none\ngit push origin main\n</code></pre>"},{"location":"flows/emergency_flow/#o-que-nao-fazer-em-um-hotfix","title":"\ud83d\udea8 O QUE N\u00c3O FAZER EM UM HOTFIX","text":"<pre><code># \u274c N\u00c3O refatorar junto\ngit commit -m \"hotfix: corrige bug e extrai m\u00e9todos e renomeia vari\u00e1veis\"\n\n# \u274c N\u00c3O adicionar funcionalidade\ngit commit -m \"hotfix: corrige bug e adiciona modo escuro\"\n\n# \u274c N\u00c3O pular testes\n# \"est\u00e1 urgente, n\u00e3o vou testar\"\n\n# \u274c N\u00c3O esquecer de versionar\n# \"j\u00e1 mergei, mas n\u00e3o criei tag\"\n\n# \u274c N\u00c3O ignorar o CI\n# \"o CI est\u00e1 lento, vou mergear direto\"\n</code></pre>"},{"location":"flows/emergency_flow/#beneficios-deste-fluxo","title":"\ud83c\udfc6 BENEF\u00cdCIOS DESTE FLUXO","text":"Antes Depois \u274c \"Corre\u00e7\u00e3o urgente\" vira bagun\u00e7a \u2705 Processo claro \u274c Esquecia de versionar \u2705 Tag obrigat\u00f3ria \u274c Testes ignorados na pressa \u2705 M\u00ednimo de testes exigido \u274c Corre\u00e7\u00e3o virava v\u00e1rias coisas \u2705 Foco no essencial \u274c Dif\u00edcil rastrear depois \u2705 Issue e commit documentam \u274c Usu\u00e1rios sem saber da corre\u00e7\u00e3o \u2705 Release notes claras"},{"location":"flows/emergency_flow/#referencias","title":"\ud83d\udcda REFER\u00caNCIAS","text":"<ul> <li>Git Flow - Hotfix branches</li> <li>Semantic Versioning - Patch</li> <li>Quality Flow</li> <li>Debug Flow</li> </ul>"},{"location":"flows/emergency_flow/#autor","title":"\ud83d\udc64 AUTOR","text":"<p>Thiago Ribeiro - Projeto de TCC</p> <sub>Emergency Flow (Hotfix) - ShowTrials</sub> <sub>Vers\u00e3o 1.0 - 20 de Fevereiro de 2026</sub> <sub>\u2705 Pronto para uso</sub>"},{"location":"flows/git_flow/","title":"\ud83d\udcda DOCUMENTO: GIT FLOW ADAPTADO - SHOWTRIALS","text":"**Estrat\u00e9gia completa de gerenciamento de branches, vers\u00f5es e releases integrada com nosso fluxo de trabalho**"},{"location":"flows/git_flow/#informacoes-do-documento","title":"\ud83d\udcc5 Informa\u00e7\u00f5es do Documento","text":"Item Descri\u00e7\u00e3o Data 20 de Fevereiro de 2026 Autor Thiago Ribeiro Vers\u00e3o 1.0 Relacionado a Fases 1-16, Issues, Milestones, Kanban"},{"location":"flows/git_flow/#objetivo","title":"\ud83c\udfaf OBJETIVO","text":"<p>Formalizar e padronizar o fluxo de trabalho com Git, integrando: - \u2705 Nosso padr\u00e3o j\u00e1 consolidado de branches <code>type/*</code> - \u2705 Issues e Milestones (gerenciamento de tarefas) - \u2705 Kanban (visualiza\u00e7\u00e3o do fluxo) - \u2705 Versionamento sem\u00e2ntico (tags) - \u2705 Releases documentadas - \u2705 CI/CD com GitHub Actions - \u2705 Taskipy para automa\u00e7\u00e3o local</p>"},{"location":"flows/git_flow/#nosso-contexto-atual","title":"\ud83d\udcca NOSSO CONTEXTO ATUAL","text":""},{"location":"flows/git_flow/#o-que-ja-funciona","title":"O que j\u00e1 funciona","text":"Aspecto Status Como fazemos Branches de features \u2705 Consolidado <code>type/nome-arquivo</code> Branches de corre\u00e7\u00e3o \u2705 Consolidado <code>fix/descricao</code> Branches de documenta\u00e7\u00e3o \u2705 Consolidado <code>docs/descricao</code> Commits sem\u00e2nticos \u2705 Padronizado <code>feat:</code>, <code>fix:</code>, <code>docs:</code>, <code>test:</code>, <code>chore:</code> CI \u2705 Funcionando GitHub Actions Taskipy \u2705 Configurado <code>task lint</code>, <code>task test</code>, etc. Issues \u2705 Criadas #1 at\u00e9 #8 Milestones \u2705 Criados Fases Imediatas, Melhorias, Inova\u00e7\u00e3o, Documenta\u00e7\u00e3o Kanban \u2705 Configurado Backlog \u2192 Ready \u2192 In Progress \u2192 In Review \u2192 Done"},{"location":"flows/git_flow/#o-que-vamos-adicionar","title":"O que vamos adicionar","text":"Aspecto Por que Como faremos Prote\u00e7\u00e3o da branch <code>main</code> Evitar merges acidentais Regras no GitHub Versionamento sem\u00e2ntico Documentar evolu\u00e7\u00e3o Tags <code>v0.1.0</code>, <code>v0.2.0</code>, <code>v1.0.0</code> Releases no GitHub Documentar entregas <code>gh release create</code> Pol\u00edtica de merges Padronizar integra\u00e7\u00e3o CI obrigat\u00f3rio + rebase Script de release Automatizar vers\u00f5es Taskipy + script Python"},{"location":"flows/git_flow/#nosso-git-flow-adaptado","title":"\ud83d\udd04 NOSSO GIT FLOW ADAPTADO","text":"<pre><code>graph TD\n    subgraph \"Branch Principal\"\n        M[main] --&gt;|protegida| M\n    end\n\n    subgraph \"Branches de Desenvolvimento\"\n        T[type/*] --&gt;|nova funcionalidade| M\n        F[fix/*] --&gt;|corre\u00e7\u00e3o| M\n        D[docs/*] --&gt;|documenta\u00e7\u00e3o| M\n        E[feat/*] --&gt;|melhoria| M\n        C[chore/*] --&gt;|infra/CI| M\n    end\n\n    subgraph \"Fluxo de uma Issue\"\n        I[Issue #3] --&gt;|cria branch| T\n        T --&gt;|desenvolvimento| T\n        T --&gt;|CI passa?| Q{Testes OK?}\n        Q --&gt;|sim| Merge[Merge para main]\n        Q --&gt;|n\u00e3o| T\n        Merge --&gt;|commit com Closes| Fecha[Issue fecha autom\u00e1tica]\n        Fecha --&gt;|move kanban| Done[Coluna Done]\n    end\n\n    subgraph \"Versionamento\"\n        Main --&gt;|tag| V[v0.3.0]\n        V --&gt;|release| R[GitHub Release]\n        R --&gt;|notas| RN[Notas de release com issues fechadas]\n    end\n</code></pre>"},{"location":"flows/git_flow/#estrutura-de-branches","title":"\ud83c\udf3f ESTRUTURA DE BRANCHES","text":""},{"location":"flows/git_flow/#padroes-de-nomenclatura","title":"Padr\u00f5es de Nomenclatura","text":"Tipo Padr\u00e3o Exemplo Quando usar Fase do projeto <code>type/[nome-arquivo]</code> <code>type/classificar-documento</code> Implementar telemetria e testes em um arquivo Corre\u00e7\u00e3o de bug <code>fix/[descricao]</code> <code>fix/tipo-documento-keyerror</code> Corrigir um problema espec\u00edfico Documenta\u00e7\u00e3o <code>docs/[descricao]</code> <code>docs/atualizar-readme</code> Atualizar documenta\u00e7\u00e3o Melhoria <code>feat/[descricao]</code> <code>feat/modo-escuro-cli</code> Nova funcionalidade (n\u00e3o fase) Infra/CI/Chore <code>chore/[descricao]</code> <code>chore/atualizar-dependencias</code> Tarefas de manuten\u00e7\u00e3o"},{"location":"flows/git_flow/#fluxo-de-vida-de-uma-branch","title":"Fluxo de Vida de uma Branch","text":"<pre><code># 1. Criar a branch a partir da main\ngit checkout main\ngit pull origin main\ngit checkout -b type/classificar-documento\n\n# 2. Desenvolver (commits intermedi\u00e1rios)\ngit add .\ngit commit -m \"wip: adiciona estrutura b\u00e1sica de testes\"\n\n# 3. Manter sincronizada (rebase, n\u00e3o merge)\ngit fetch origin\ngit rebase origin/main\n\n# 4. Finalizar com commit sem\u00e2ntico\ngit add .\ngit commit -m \"feat: adiciona telemetria e testes em classificar_documento.py\n\n- Adiciona padr\u00e3o de telemetria\n- Cria testes de l\u00f3gica (8) e telemetria (5)\n- Cobertura: 65% \u2192 85%\n\nCloses #3\"\n\n# 5. Push e merge\ngit push origin type/classificar-documento\n# (merge via site ou CLI ap\u00f3s CI passar)\n</code></pre>"},{"location":"flows/git_flow/#protecao-da-branch-main","title":"\ud83d\udee1\ufe0f PROTE\u00c7\u00c3O DA BRANCH MAIN","text":""},{"location":"flows/git_flow/#regras-configuradas-no-github","title":"Regras configuradas no GitHub","text":"<p>Acesse: <code>https://github.com/rib-thiago/showtrials-tcc/settings/branches</code></p> <pre><code># Configura\u00e7\u00e3o ideal\nBranch name pattern: main\n\n\u2705 Require a pull request before merging\n  - [opcional, podemos mergir direto]\n\n\u2705 Require status checks to pass before merging\n  - CI / test (3.12)  # nosso workflow\n\n\u2705 Require branches to be up to date before merging\n  - [garante que n\u00e3o tem conflitos]\n\n\u2705 Include administrators\n  - [aplica as regras at\u00e9 para voc\u00ea]\n\n\u2705 Allow force pushes\n  - [\u274c desabilitado]\n\n\u2705 Allow deletions\n  - [\u274c desabilitado]\n</code></pre>"},{"location":"flows/git_flow/#comandos-para-verificar-protecao","title":"Comandos para verificar prote\u00e7\u00e3o","text":"<pre><code># Ver regras da branch\ngh api repos/rib-thiago/showtrials-tcc/branches/main/protection\n</code></pre>"},{"location":"flows/git_flow/#versionamento-semantico","title":"\ud83c\udff7\ufe0f VERSIONAMENTO SEM\u00c2NTICO","text":""},{"location":"flows/git_flow/#o-que-e-semantic-versioning","title":"O que \u00e9 Semantic Versioning","text":"<pre><code>v0.2.0\n  \u2191  \u2191  \u2191\n  \u2502  \u2502  \u2514\u2500\u2500 patch (corre\u00e7\u00f5es)\n  \u2502  \u2514\u2500\u2500\u2500\u2500\u2500 minor (novas funcionalidades)\n  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 major (mudan\u00e7as que quebram compatibilidade)\n</code></pre>"},{"location":"flows/git_flow/#nossa-estrategia-de-versoes","title":"Nossa Estrat\u00e9gia de Vers\u00f5es","text":"Vers\u00e3o Quando criar Exemplo v0.1.0 \u2705 J\u00e1 existe Vers\u00e3o inicial v0.2.0 \u2705 J\u00e1 existe Ap\u00f3s primeiras fases v0.3.0 Ap\u00f3s concluir Fases 17-20 classificar, obter, estatisticas, mypy v0.4.0 Ap\u00f3s melhorias modo escuro, gr\u00e1ficos, NLP Poetry v1.0.0 Entrega do TCC Vers\u00e3o final"},{"location":"flows/git_flow/#criando-uma-tag","title":"Criando uma tag","text":"<pre><code># Listar tags existentes\ngit tag -l\n\n# Criar tag anotada (recomendado)\ngit tag -a v0.3.0 -m \"Vers\u00e3o 0.3.0 - Telemetria em classificar_documento, obter_documento, estatisticas\"\n\n# Enviar tag para o GitHub\ngit push origin v0.3.0\n\n# Ver tags no remote\ngit ls-remote --tags origin\n</code></pre>"},{"location":"flows/git_flow/#releases-no-github","title":"\ud83d\ude80 RELEASES NO GITHUB","text":""},{"location":"flows/git_flow/#criando-uma-release-manualmente","title":"Criando uma release manualmente","text":"<pre><code># Ap\u00f3s criar a tag, criar release\ngh release create v0.3.0 \\\n  --title \"v0.3.0\" \\\n  --notes \"## \u2705 Fases conclu\u00eddas\n- FASE 17: classificar_documento.py (65% \u2192 85%)\n- FASE 18: obter_documento.py (57% \u2192 85%)\n- FASE 19: estatisticas.py (15% \u2192 80%)\n- FASE 20: Corre\u00e7\u00e3o MyPy global\n\n## \ud83d\udcca M\u00e9tricas\n- Cobertura global: 75%\n- Testes totais: ~250\n- Issues fechadas: #3, #4, #5, #6\"\n</code></pre>"},{"location":"flows/git_flow/#ver-releases","title":"Ver releases","text":"<pre><code>gh release list\ngh release view v0.3.0\n</code></pre>"},{"location":"flows/git_flow/#automacao-com-taskipy","title":"\ud83e\udd16 AUTOMA\u00c7\u00c3O COM TASKIPY","text":""},{"location":"flows/git_flow/#comandos-adicionados-ao-pyprojecttoml","title":"Comandos adicionados ao <code>pyproject.toml</code>","text":"<pre><code>[tool.taskipy.tasks]\n# ... comandos existentes ...\n\n# ===== Versionamento =====\nversion-show = \"git describe --tags --abbrev=0\"\nversion-list = \"git tag -l\"\nversion-create = \"python scripts/criar_release.py\"\n\n# ===== Releases =====\nrelease-create = \"gh release create $(git describe --tags --abbrev=0) --title $(git describe --tags --abbrev=0) --notes-file RELEASE_NOTES.md\"\nrelease-list = \"gh release list\"\n\n# ===== Status do Projeto =====\nstatus-issues = \"gh issue list --assignee @me\"\nstatus-milestone = \"gh issue list --milestone 'Fases Imediatas (Semanas 1-2)'\"\nstatus-project = \"open https://github.com/users/rib-thiago/projects/1\"\n</code></pre>"},{"location":"flows/git_flow/#script-de-release-automatico","title":"Script de release autom\u00e1tico","text":"<p>Crie <code>scripts/criar_release.py</code>:</p> <pre><code>#!/usr/bin/env python\n\"\"\"\nScript para criar vers\u00f5es e releases automaticamente.\nUso: poetry run task version-create\n\"\"\"\n\nimport subprocess\nimport re\nfrom datetime import datetime\nfrom typing import Optional, List, Tuple\n\ndef get_last_tag() -&gt; str:\n    \"\"\"Retorna a \u00faltima tag do reposit\u00f3rio.\"\"\"\n    try:\n        return subprocess.getoutput(\"git describe --tags --abbrev=0 2&gt;/dev/null || echo 'v0.0.0'\")\n    except:\n        return \"v0.0.0\"\n\ndef suggest_next_version(last_tag: str) -&gt; str:\n    \"\"\"Sugere a pr\u00f3xima vers\u00e3o baseado na \u00faltima.\"\"\"\n    match = re.match(r\"v(\\d+)\\.(\\d+)\\.(\\d+)\", last_tag)\n    if not match:\n        return \"v0.1.0\"\n\n    major, minor, patch = map(int, match.groups())\n    return f\"v{major}.{minor + 1}.0\"  # incrementa minor\n\ndef get_issues_since_last_tag(last_tag: str) -&gt; List[Tuple[str, str]]:\n    \"\"\"Lista issues fechadas desde a \u00faltima tag.\"\"\"\n    log = subprocess.getoutput(f\"git log {last_tag}..HEAD --oneline | grep -i 'closes'\")\n    issues = []\n    for line in log.split('\\n'):\n        if not line:\n            continue\n        # Procura por padr\u00e3o \"Closes #N\"\n        match = re.search(r\"closes #(\\d+)\", line.lower())\n        if match:\n            issues.append((match.group(1), line))\n    return issues\n\ndef create_release_notes(last_tag: str, new_version: str, issues: List[Tuple[str, str]]) -&gt; str:\n    \"\"\"Gera notas de release.\"\"\"\n    notes = []\n    notes.append(f\"# Release {new_version}\")\n    notes.append(f\"Data: {datetime.now().strftime('%d/%m/%Y')}\")\n    notes.append(\"\")\n\n    if issues:\n        notes.append(\"## \u2705 Issues fechadas\")\n        for issue_num, commit_msg in issues:\n            notes.append(f\"- #{issue_num}: {commit_msg}\")\n    else:\n        notes.append(\"## \u2705 Melhorias\")\n        notes.append(\"- Nenhuma issue espec\u00edfica fechada\")\n\n    notes.append(\"\")\n    notes.append(\"## \ud83d\udcca M\u00e9tricas\")\n    notes.append(\"- Cobertura global: (rode `poetry run pytest --cov=src | grep TOTAL`)\")\n    notes.append(\"- Testes totais: (rode `poetry run pytest --collect-only | grep collected`)\")\n\n    return '\\n'.join(notes)\n\ndef main():\n    print(\"\ud83d\ude80 Criador de Release - ShowTrials\")\n    print(\"=\" * 40)\n\n    # \u00daltima tag\n    last_tag = get_last_tag()\n    print(f\"\ud83d\udccc \u00daltima tag: {last_tag}\")\n\n    # Sugerir pr\u00f3xima vers\u00e3o\n    suggested = suggest_next_version(last_tag)\n    print(f\"\ud83d\udca1 Sugest\u00e3o: {suggested}\")\n\n    # Perguntar vers\u00e3o\n    new_version = input(f\"Vers\u00e3o (Enter para '{suggested}'): \").strip()\n    if not new_version:\n        new_version = suggested\n\n    # Buscar issues fechadas\n    issues = get_issues_since_last_tag(last_tag)\n    if issues:\n        print(f\"\\n\ud83d\udd0d Issues fechadas desde {last_tag}:\")\n        for issue_num, commit_msg in issues:\n            print(f\"  \u2022 #{issue_num}\")\n\n    # Perguntar notas\n    print(\"\\n\ud83d\udcdd Gerando notas de release automaticamente...\")\n    notes = create_release_notes(last_tag, new_version, issues)\n\n    # Salvar notas em arquivo\n    with open(\"RELEASE_NOTES.md\", \"w\") as f:\n        f.write(notes)\n\n    print(f\"\u2705 Notas salvas em RELEASE_NOTES.md\")\n    print(\"\\n\" + notes)\n\n    # Confirmar\n    confirm = input(f\"\\nCriar tag {new_version} e release? (s/N): \").strip().lower()\n    if confirm != 's':\n        print(\"\u274c Cancelado\")\n        return\n\n    # Criar tag\n    print(f\"\\n\ud83c\udff7\ufe0f  Criando tag {new_version}...\")\n    subprocess.run(f\"git tag -a {new_version} -F RELEASE_NOTES.md\", shell=True)\n    subprocess.run(f\"git push origin {new_version}\", shell=True)\n\n    # Criar release\n    print(f\"\ud83d\ude80 Criando release no GitHub...\")\n    subprocess.run(f\"gh release create {new_version} --title '{new_version}' --notes-file RELEASE_NOTES.md\", shell=True)\n\n    print(f\"\u2705 Release {new_version} criada com sucesso!\")\n    print(f\"\ud83d\udcce Acesse: https://github.com/rib-thiago/showtrials-tcc/releases/tag/{new_version}\")\n\nif __name__ == \"__main__\":\n    main()\n</code></pre>"},{"location":"flows/git_flow/#politica-de-merges","title":"\ud83d\udccb POL\u00cdTICA DE MERGES","text":""},{"location":"flows/git_flow/#regras-para-merge-na-main","title":"Regras para merge na <code>main</code>","text":"<pre><code># ANTES do merge, verificar:\n\u2705 Tests passam localmente (task test)\n\u2705 Lint ok (task lint)\n\u2705 MyPy ok (task type)\n\u2705 Cobertura &gt;= 45% (task test-cov)\n\u2705 Branch est\u00e1 atualizada com main\n\u2705 CI passou no GitHub\n</code></pre>"},{"location":"flows/git_flow/#fluxo-de-merge-recomendado","title":"Fluxo de merge recomendado","text":"<pre><code># 1. Atualizar branch\ngit checkout type/classificar-documento\ngit fetch origin\ngit rebase origin/main\n\n# 2. Verificar tudo\ntask check\n\n# 3. Push final\ngit push origin type/classificar-documento\n\n# 4. Merge (pelo site ou CLI)\n# Op\u00e7\u00e3o A: via GitHub (recomendado)\n#   - Acesse a branch no GitHub\n#   - Clique em \"Compare &amp; pull request\"\n#   - Se n\u00e3o houver PR, crie um\n#   - Ap\u00f3s CI passar, fa\u00e7a merge\n\n# Op\u00e7\u00e3o B: via CLI (mais r\u00e1pido)\ngit checkout main\ngit merge --ff-only type/classificar-documento  # fast-forward apenas\ngit push origin main\n</code></pre>"},{"location":"flows/git_flow/#por-que-fast-forward","title":"Por que fast-forward?","text":"<pre><code># Com fast-forward (recomendado)\nA---B---C  main\n     \\\n      D---E  type/*\n          \u2193\nA---B---C---D---E  main (hist\u00f3rico linear)\n\n# Sem fast-forward (cria merge commit)\nA---B---C-----------F  main\n     \\             /\n      D-----------E  type/*\n</code></pre> <p>Fast-forward mant\u00e9m o hist\u00f3rico limpo e linear. Como trabalhamos sozinhos, n\u00e3o precisamos de merge commits.</p>"},{"location":"flows/git_flow/#fluxo-completo-issue-branch-release","title":"\ud83d\udd04 FLUXO COMPLETO (ISSUE \u2192 BRANCH \u2192 RELEASE)","text":""},{"location":"flows/git_flow/#exemplo-pratico-fase-17","title":"Exemplo pr\u00e1tico: FASE 17","text":"<pre><code># 1. Issue #3 est\u00e1 em \"Ready\" no Kanban\n\n# 2. Mover para \"In Progress\" (no site)\n\n# 3. Criar branch\ngit checkout -b type/classificar-documento\n\n# 4. Desenvolver (commits intermedi\u00e1rios)\ngit add .\ngit commit -m \"wip: estrutura de testes\"\n\n# 5. Manter sincronizado\ngit fetch origin\ngit rebase origin/main\n\n# 6. Testar localmente\ntask test\ntask lint\ntask type\ntask test-cov\n\n# 7. Commit final com fechamento da issue\ngit add .\ngit commit -m \"feat: adiciona telemetria e testes em classificar_documento.py\n\n- Adiciona padr\u00e3o de telemetria\n- Cria testes de l\u00f3gica (8) e telemetria (5)\n- Cobertura: 65% \u2192 85%\n\nCloses #3\"\n\n# 8. Push\ngit push origin type/classificar-documento\n\n# 9. Verificar CI no GitHub\ngh run list\n\n# 10. Merge (ap\u00f3s CI passar)\ngit checkout main\ngit pull origin main\ngit merge --ff-only type/classificar-documento\ngit push origin main\n\n# 11. Issue fecha automaticamente (pelo commit)\n# 12. Mover issue para \"Done\" no Kanban\n\n# 13. Quando v\u00e1rias fases estiverem prontas, criar release\ntask version-create\n</code></pre>"},{"location":"flows/git_flow/#tabela-de-comandos-uteis","title":"\ud83d\udcca TABELA DE COMANDOS \u00daTEIS","text":"O que fazer Comando Ver branch atual <code>git branch</code> Criar nova branch <code>git checkout -b type/nome</code> Atualizar branch <code>git fetch origin &amp;&amp; git rebase origin/main</code> Ver status <code>git status</code> Commit sem\u00e2ntico <code>git commit -m \"tipo: mensagem\"</code> Commit com Closes <code>git commit -m \"feat: ... Closes #3\"</code> Push <code>git push origin type/nome</code> Merge (fast-forward) <code>git merge --ff-only type/nome</code> Deletar branch local <code>git branch -d type/nome</code> Deletar branch remota <code>git push origin --delete type/nome</code> Ver tags <code>git tag -l</code> Criar tag <code>git tag -a v0.3.0 -m \"vers\u00e3o\"</code> Push tag <code>git push origin v0.3.0</code> Ver releases <code>gh release list</code> Criar release <code>gh release create v0.3.0 --notes-file RELEASE_NOTES.md</code> Ver issues <code>gh issue list --assignee @me</code> Ver milestone <code>gh issue list --milestone \"Fases Imediatas\"</code> Ver project <code>open https://github.com/users/rib-thiago/projects/1</code>"},{"location":"flows/git_flow/#checklist-de-implementacao","title":"\u2705 CHECKLIST DE IMPLEMENTA\u00c7\u00c3O","text":""},{"location":"flows/git_flow/#configuracao-inicial-uma-vez","title":"Configura\u00e7\u00e3o Inicial (uma vez)","text":"<ul> <li>[ ] Proteger branch <code>main</code> no GitHub</li> <li>[ ] Adicionar script <code>scripts/criar_release.py</code></li> <li>[ ] Atualizar <code>pyproject.toml</code> com novos comandos taskipy</li> <li>[ ] Testar <code>task version-create</code></li> </ul>"},{"location":"flows/git_flow/#para-cada-nova-fase","title":"Para cada nova fase","text":"<ul> <li>[ ] Issue criada com template</li> <li>[ ] Label de prioridade definida</li> <li>[ ] Milestone associado</li> <li>[ ] Issue no Kanban (coluna Ready)</li> </ul>"},{"location":"flows/git_flow/#durante-o-desenvolvimento","title":"Durante o desenvolvimento","text":"<ul> <li>[ ] Branch criada no padr\u00e3o</li> <li>[ ] Commits intermedi\u00e1rios (opcionais)</li> <li>[ ] Rebase frequente com main</li> <li>[ ] Testes passando localmente</li> </ul>"},{"location":"flows/git_flow/#ao-finalizar","title":"Ao finalizar","text":"<ul> <li>[ ] Commit final com <code>Closes #N</code></li> <li>[ ] CI verde no GitHub</li> <li>[ ] Merge (fast-forward)</li> <li>[ ] Issue fecha automaticamente</li> <li>[ ] Mover no Kanban para Done</li> </ul>"},{"location":"flows/git_flow/#para-releases","title":"Para releases","text":"<ul> <li>[ ] Agrupar issues fechadas desde \u00faltima tag</li> <li>[ ] Executar <code>task version-create</code></li> <li>[ ] Verificar release no GitHub</li> <li>[ ] Atualizar documenta\u00e7\u00e3o se necess\u00e1rio</li> </ul>"},{"location":"flows/git_flow/#beneficios-deste-fluxo","title":"\ud83c\udfc6 BENEF\u00cdCIOS DESTE FLUXO","text":"Antes Depois \u274c Vers\u00f5es no \"olh\u00f4metro\" \u2705 Tags sem\u00e2nticas documentadas \u274c Hist\u00f3rico solto \u2705 Commits linkados a issues \u274c Progresso invis\u00edvel \u2705 Kanban atualizado \u274c Merges manuais sem padr\u00e3o \u2705 Pol\u00edtica clara (fast-forward) \u274c Releases manuais \u2705 Script automatizado \u274c D\u00favida sobre o que foi feito \u2705 Release notes com issues fechadas"},{"location":"flows/git_flow/#referencias","title":"\ud83d\udcda REFER\u00caNCIAS","text":"<ul> <li>GitHub Flow</li> <li>Semantic Versioning</li> <li>Conventional Commits</li> <li>Taskipy Documentation</li> <li>GitHub CLI Manual</li> </ul>"},{"location":"flows/git_flow/#autor","title":"\ud83d\udc64 AUTOR","text":"<p>Thiago Ribeiro - Projeto de TCC</p> <sub>Git Flow Adaptado - ShowTrials</sub> <sub>Vers\u00e3o 1.0 - 20 de Fevereiro de 2026</sub> <sub>\u2705 Pronto para implementa\u00e7\u00e3o</sub> <p>```</p>"},{"location":"flows/quality_flow/","title":"\ud83d\udcda DOCUMENTO: QUALITY ASSURANCE FLOW - SHOWTRIALS","text":"**Estrat\u00e9gia completa de lint, type checking, testes e cobertura integrada com nosso fluxo de desenvolvimento**"},{"location":"flows/quality_flow/#informacoes-do-documento","title":"\ud83d\udcc5 Informa\u00e7\u00f5es do Documento","text":"Item Descri\u00e7\u00e3o Data 20 de Fevereiro de 2026 Autor Thiago Ribeiro Vers\u00e3o 1.0 Relacionado a Git Flow, CI/CD, Taskipy, Fases 1-16"},{"location":"flows/quality_flow/#objetivo","title":"\ud83c\udfaf OBJETIVO","text":"<p>Formalizar e padronizar o processo de garantia de qualidade do c\u00f3digo, integrando: - \u2705 Linting com Ruff - \u2705 Type checking com MyPy - \u2705 Testes com Pytest - \u2705 Cobertura de testes - \u2705 Automa\u00e7\u00e3o com Taskipy - \u2705 CI/CD com GitHub Actions - \u2705 Nosso padr\u00e3o de commits at\u00f4micos</p>"},{"location":"flows/quality_flow/#nosso-contexto-atual","title":"\ud83d\udcca NOSSO CONTEXTO ATUAL","text":""},{"location":"flows/quality_flow/#o-que-ja-funciona","title":"O que j\u00e1 funciona","text":"Ferramenta Status O que faz Ruff \u2705 Configurado Linting e formata\u00e7\u00e3o Black \u2705 Configurado Formata\u00e7\u00e3o autom\u00e1tica isort \u2705 Configurado Organiza\u00e7\u00e3o de imports MyPy \u2705 Configurado Type checking (parcial) Pytest \u2705 Configurado Testes unit\u00e1rios Pytest-cov \u2705 Configurado Medi\u00e7\u00e3o de cobertura Taskipy \u2705 Configurado Automa\u00e7\u00e3o local GitHub Actions \u2705 Funcionando CI automatizado Pre-commit \u2705 Configurado Hooks locais"},{"location":"flows/quality_flow/#metricas-atuais","title":"M\u00e9tricas Atuais","text":"<pre><code>\ud83d\udcca COBERTURA GLOBAL: 75% (meta 45%)\n\ud83e\uddea TESTES TOTAIS: ~250\n\ud83d\udd24 ERROS MYPY: 6 (em outros arquivos)\n\u26a1 LINT: 0 erros\n</code></pre>"},{"location":"flows/quality_flow/#ferramentas-e-configuracoes","title":"\ud83d\udd27 FERRAMENTAS E CONFIGURA\u00c7\u00d5ES","text":""},{"location":"flows/quality_flow/#1-ruff-linting","title":"1. Ruff (Linting)","text":"<p>Arquivo: <code>.ruff.toml</code></p> <pre><code># .ruff.toml - Configura\u00e7\u00e3o do Ruff\n\n# Ignorar certos tipos de erro\nignore = [\n    \"E402\",  # Module level import not at top of file (sys.path.insert \u00e9 necess\u00e1rio)\n    \"F841\",  # Local variable assigned but never used (vari\u00e1veis intencionalmente n\u00e3o usadas)\n]\n\n# Linha muito longa (aumentar toler\u00e2ncia)\nline-length = 120\n\n# Excluir pastas que n\u00e3o precisam ser verificadas\nexclude = [\n    \"legacy/*\",\n    \"backup_*\",\n    \"diagnostico_*\",\n    \".git\",\n    \"__pycache__\",\n]\n</code></pre>"},{"location":"flows/quality_flow/#2-black-formatacao","title":"2. Black (Formata\u00e7\u00e3o)","text":"<p>No <code>pyproject.toml</code>: <pre><code>[tool.black]\nline-length = 100\ntarget-version = ['py312']\n</code></pre></p>"},{"location":"flows/quality_flow/#3-isort-imports","title":"3. isort (Imports)","text":"<p>No <code>pyproject.toml</code>: <pre><code>[tool.isort]\nprofile = \"black\"\nline_length = 100\n</code></pre></p>"},{"location":"flows/quality_flow/#4-mypy-type-checking","title":"4. MyPy (Type Checking)","text":"<pre><code># Configura\u00e7\u00e3o via pyproject.toml\n[tool.mypy]\npython_version = \"3.12\"\nwarn_return_any = true\nwarn_unused_configs = true\nignore_missing_imports = true  # tempor\u00e1rio\n</code></pre>"},{"location":"flows/quality_flow/#5-pytest-testes","title":"5. Pytest (Testes)","text":"<p>No <code>pyproject.toml</code>: <pre><code>[tool.pytest.ini_options]\npythonpath = [\"src\"]\naddopts = \"-v --cov=src --cov-report=term-missing\"\n</code></pre></p>"},{"location":"flows/quality_flow/#comandos-taskipy-nossa-automacao","title":"\ud83d\udccb COMANDOS TASKIPY (NOSSA AUTOMA\u00c7\u00c3O)","text":"<p>No <code>pyproject.toml</code>:</p> <pre><code>[tool.taskipy.tasks]\n# === QUALIDADE (executar sempre) ===\nlint = \"ruff check src\"\nformat = \"black src &amp;&amp; isort src\"\ntype = \"mypy src\"\nquality = \"task lint &amp;&amp; task type\"\n\n# === TESTES ===\ntest = \"pytest src/tests -v\"\ntest-cov = \"pytest src/tests --cov=src --cov-report=term-missing --cov-fail-under=45\"\ntest-html = \"pytest src/tests --cov=src --cov-report=html\"\ntest-file = \"pytest {path} -v\"  # uso: task test-file --path src/tests/test_arquivo.py\n\n# === TELEMETRIA ===\nmetrics = \"python -c 'from src.infrastructure.telemetry import telemetry; telemetry.flush()'\"\nmonitor = \"task test &amp;&amp; task metrics\"\n\n# === EXECU\u00c7\u00c3O ===\nrun-cli = \"python run.py\"\nrun-web = \"python web_run.py\"\n\n# === MANUTEN\u00c7\u00c3O ===\nclean = \"find . -type d -name __pycache__ -exec rm -rf {} + &amp;&amp; find . -name '*.pyc' -delete\"\ndocs = \"mkdocs serve\"\n\n# === TUDO JUNTO (pr\u00e9-commit) ===\ncheck = \"task lint &amp;&amp; task type &amp;&amp; task test\"\npre-push = \"task check &amp;&amp; task test-cov\"\n\n# === NOVOS COMANDOS ===\n# Qualidade focada em um arquivo\nlint-file = \"ruff check {path}\"\ntype-file = \"mypy {path}\"\ntest-file = \"pytest {path} -v\"\ncov-file = \"pytest --cov={path} --cov-report=term-missing\"\n\n# Resumo r\u00e1pido\nsummary = \"echo '\ud83d\udcca Cobertura:' &amp;&amp; pytest --cov=src --cov-report=term-missing | grep TOTAL &amp;&amp; echo '\ud83d\udd24 MyPy:' &amp;&amp; mypy src/ | grep error | wc -l | xargs echo '   Erros:'\"\n</code></pre>"},{"location":"flows/quality_flow/#fluxo-de-qualidade-por-fase","title":"\ud83d\udd04 FLUXO DE QUALIDADE POR FASE","text":""},{"location":"flows/quality_flow/#nosso-padrao-ja-consolidado","title":"Nosso Padr\u00e3o (j\u00e1 consolidado)","text":"<pre><code>graph TD\n    subgraph \"Antes de Come\u00e7ar\"\n        A[Arquivo alvo] --&gt;|cobertura atual| AC[poetry run pytest --cov=arquivo]\n        A --&gt;|myPy atual| AM[poetry run mypy arquivo]\n    end\n\n    subgraph \"Durante o Desenvolvimento\"\n        D[Editar c\u00f3digo] --&gt;|adicionar telemetria| D\n        D --&gt;|criar testes| D\n        D --&gt;|checkpoints| T{task check-file}\n        T --&gt;|falhou| D\n        T --&gt;|passou| P[Pr\u00f3ximo passo]\n    end\n\n    subgraph \"Antes do Commit\"\n        C1[task lint-file] --&gt;|ok| C2[task type-file]\n        C2 --&gt;|ok| C3[task test-file]\n        C3 --&gt;|ok| C4[task cov-file]\n        C4 --&gt;|cobertura &gt;=85%| Commit[git commit]\n    end\n\n    subgraph \"Depois do Commit\"\n        Push[git push] --&gt; CI[GitHub Actions]\n        CI --&gt;|task check| CI\n        CI --&gt;|task test-cov| CI\n        CI --&gt;|CI verde| Merge[git merge]\n    end\n</code></pre>"},{"location":"flows/quality_flow/#checklist-de-qualidade-por-arquivo","title":"\ud83d\udccb CHECKLIST DE QUALIDADE POR ARQUIVO","text":""},{"location":"flows/quality_flow/#antes-de-iniciar-uma-fase","title":"Antes de iniciar uma fase","text":"<pre><code># 1. Ver cobertura atual do arquivo\npoetry run pytest --cov=src/application/use_cases/classificar_documento.py\n\n# 2. Ver MyPy atual\npoetry run mypy src/application/use_cases/classificar_documento.py\n\n# 3. Ver lint atual\npoetry run ruff check src/application/use_cases/classificar_documento.py\n\n# 4. Registrar m\u00e9tricas iniciais na issue\n</code></pre>"},{"location":"flows/quality_flow/#durante-o-desenvolvimento","title":"Durante o desenvolvimento","text":"<pre><code># Checkpoint r\u00e1pido (lint + type)\ntask lint-file --path src/application/use_cases/classificar_documento.py\ntask type-file --path src/application/use_cases/classificar_documento.py\n\n# Rodar testes espec\u00edficos\ntask test-file --path src/tests/test_classificar_documento.py\n\n# Ver cobertura parcial\ntask cov-file --path src/application/use_cases/classificar_documento.py\n</code></pre>"},{"location":"flows/quality_flow/#antes-do-commit-final","title":"Antes do commit final","text":"<pre><code># 1. Lint (deve passar)\npoetry run ruff check src/application/use_cases/classificar_documento.py\n\n# 2. Type checking (deve passar)\npoetry run mypy src/application/use_cases/classificar_documento.py\n\n# 3. Testes do arquivo (devem passar)\npoetry run pytest src/tests/test_classificar_documento.py -v\npoetry run pytest src/tests/test_classificar_documento_telemetry.py -v\n\n# 4. Cobertura final (deve ser &gt;=85%)\npoetry run pytest --cov=src/application/use_cases/classificar_documento.py\n\n# 5. Tudo junto (opcional)\ntask check-file --path src/application/use_cases/classificar_documento.py\n</code></pre>"},{"location":"flows/quality_flow/#depois-do-commit","title":"Depois do commit","text":"<pre><code># 1. Push\ngit push origin type/classificar-documento\n\n# 2. Acompanhar CI\ngh run list\ngh run watch\n\n# 3. Verificar cobertura global\ntask summary\n</code></pre>"},{"location":"flows/quality_flow/#estrategia-de-testes","title":"\ud83e\uddea ESTRAT\u00c9GIA DE TESTES","text":""},{"location":"flows/quality_flow/#tipos-de-testes-que-escrevemos","title":"Tipos de Testes que Escrevemos","text":"Tipo Onde Exemplo Quantidade Testes de l\u00f3gica <code>test_*.py</code> <code>test_exportar_documento.py</code> 12-15 por fase Testes de telemetria <code>test_*_telemetry.py</code> <code>test_exportar_documento_telemetry.py</code> 6-8 por fase Testes de integra\u00e7\u00e3o <code>test_infrastructure/</code> <code>test_sqlite_repository.py</code> 20+ Testes de regress\u00e3o <code>test_use_cases.py</code> <code>test_classificar_documento</code> 4"},{"location":"flows/quality_flow/#padrao-para-testes-de-logica","title":"Padr\u00e3o para Testes de L\u00f3gica","text":"<pre><code># test_classificar_documento.py\nclass TestClassificarDocumento:\n    \"\"\"Testes para a l\u00f3gica de classifica\u00e7\u00e3o.\"\"\"\n\n    @pytest.fixture\n    def repo_mock(self):\n        \"\"\"Fixture para mock do reposit\u00f3rio.\"\"\"\n        return Mock()\n\n    def test_classificar_interrogatorio(self, repo_mock):\n        \"\"\"Deve classificar interrogat\u00f3rio corretamente.\"\"\"\n        # Arrange\n        doc = Documento(titulo=\"\u041f\u0440\u043e\u0442\u043e\u043a\u043e\u043b \u0434\u043e\u043f\u0440\u043e\u0441\u0430\")\n        repo_mock.buscar_por_id.return_value = doc\n        use_case = ClassificarDocumento(repo_mock)\n\n        # Act\n        resultado = use_case.executar(1)\n\n        # Assert\n        assert resultado.tipo == \"interrogatorio\"\n</code></pre>"},{"location":"flows/quality_flow/#padrao-para-testes-de-telemetria","title":"Padr\u00e3o para Testes de Telemetria","text":"<pre><code># test_classificar_documento_telemetry.py\nclass TestClassificarDocumentoTelemetry:\n    \"\"\"Testes para telemetria.\"\"\"\n\n    def setup_method(self):\n        \"\"\"Reconfigura o m\u00f3dulo antes de cada teste.\"\"\"\n        uc_module._telemetry = None\n\n    def test_telemetria_sucesso(self):\n        \"\"\"Telemetria deve registrar classifica\u00e7\u00e3o bem-sucedida.\"\"\"\n        mock_telemetry = MagicMock()\n        uc_module.configure_telemetry(telemetry_instance=mock_telemetry)\n\n        # ... teste ...\n\n        mock_telemetry.increment.assert_any_call(\"classificar_documento.sucesso\")\n</code></pre>"},{"location":"flows/quality_flow/#metricas-e-metas","title":"\ud83d\udcca M\u00c9TRICAS E METAS","text":""},{"location":"flows/quality_flow/#metas-por-fase","title":"Metas por Fase","text":"M\u00e9trica M\u00ednimo Bom Excelente Cobertura do arquivo 80% 85% 90%+ Testes de l\u00f3gica 8 12 15+ Testes de telemetria 4 6 8+ MyPy no arquivo 0 erros 0 erros 0 erros Lint 0 erros 0 erros 0 erros"},{"location":"flows/quality_flow/#metas-globais","title":"Metas Globais","text":"M\u00e9trica Atual Meta Cobertura global 75% 80% Erros MyPy 6 0 Testes totais ~250 300"},{"location":"flows/quality_flow/#cicd-github-actions","title":"\ud83e\udd16 CI/CD - GITHUB ACTIONS","text":""},{"location":"flows/quality_flow/#workflow-atual-githubworkflowsciyml","title":"Workflow Atual (<code>.github/workflows/ci.yml</code>)","text":"<pre><code>name: CI\n\non:\n  push:\n    branches: [ main, develop ]\n  pull_request:\n    branches: [ main ]\n\njobs:\n  test:\n    runs-on: ubuntu-latest\n    strategy:\n      matrix:\n        python-version: [\"3.12\"]\n\n    steps:\n    - uses: actions/checkout@v4\n    - name: Set up Python\n      uses: actions/setup-python@v5\n      with:\n        python-version: ${{ matrix.python-version }}\n\n    - name: Install Poetry\n      run: |\n        curl -sSL https://install.python-poetry.org | python3 -\n        echo \"$HOME/.local/bin\" &gt;&gt; $GITHUB_PATH\n\n    - name: Install dependencies\n      run: poetry install --no-interaction\n\n    # === NLP dependencies (pip) - Tempor\u00e1rio at\u00e9 migrar para Poetry ===\n    - name: Install NLP dependencies\n      run: |\n        poetry run pip install numpy==1.26.0\n        poetry run pip install spacy==3.7.5\n        poetry run pip install textblob nltk wordcloud matplotlib\n        poetry run python -m spacy download en_core_web_sm\n        poetry run python -m spacy download ru_core_news_sm\n\n    - name: Lint with ruff\n      run: poetry run ruff check src/\n\n    - name: Type check with mypy\n      run: poetry run mypy src/ || echo \"\u26a0\ufe0f MyPy warnings (ignorado por enquanto)\"\n\n    - name: Test with pytest\n      run: poetry run pytest src/tests/ -v --cov=src --cov-report=xml --cov-fail-under=45\n\n    - name: Upload coverage to Codecov\n      uses: codecov/codecov-action@v4\n      with:\n        file: ./coverage.xml\n        fail_ci_if_error: false\n        token: ${{ secrets.CODECOV_TOKEN }}\n</code></pre>"},{"location":"flows/quality_flow/#comandos-rapidos-cola","title":"\ud83d\udccb COMANDOS R\u00c1PIDOS (COLA)","text":"<pre><code># === QUALIDADE GERAL ===\ntask lint        # Ruff em todo src\ntask type        # MyPy em todo src\ntask test        # Todos os testes\ntask test-cov    # Testes com cobertura\ntask check       # lint + type + test\ntask pre-push    # check + test-cov\n\n# === QUALIDADE POR ARQUIVO ===\ntask lint-file --path src/application/use_cases/classificar_documento.py\ntask type-file --path src/application/use_cases/classificar_documento.py\ntask test-file --path src/tests/test_classificar_documento.py\ntask cov-file --path src/application/use_cases/classificar_documento.py\ntask check-file --path src/application/use_cases/classificar_documento.py\n\n# === M\u00c9TRICAS ===\ntask summary      # Resumo de cobertura e MyPy\n\n# === LIMPEZA ===\ntask clean        # Remove __pycache__ e .pyc\n\n# === EXECU\u00c7\u00c3O ===\ntask run-cli      # Roda CLI\ntask run-web      # Roda servidor web\n</code></pre>"},{"location":"flows/quality_flow/#fluxo-completo-qualidade-git-issues","title":"\ud83d\udd04 FLUXO COMPLETO (QUALIDADE + GIT + ISSUES)","text":"<pre><code>graph TD\n    subgraph \"Issue no Kanban\"\n        A[Issue #3 - Ready] --&gt;|Iniciar| B[Issue #3 - In Progress]\n    end\n\n    subgraph \"Desenvolvimento Local\"\n        B --&gt; C[git checkout -b type/classificar-documento]\n        C --&gt; D[Editar c\u00f3digo + testes]\n        D --&gt; E{task check-file}\n        E --&gt;|falhou| D\n        E --&gt;|passou| F[task cov-file &gt;=85%]\n    end\n\n    subgraph \"Commit e Push\"\n        F --&gt; G[git commit -m \"feat: ... Closes #3\"]\n        G --&gt; H[git push]\n    end\n\n    subgraph \"CI\"\n        H --&gt; I[GitHub Actions]\n        I --&gt; J[task lint]\n        I --&gt; K[task type (ignorando erros)]\n        I --&gt; L[task test-cov]\n        L --&gt; M{coverage &gt;=45%?}\n        M --&gt;|sim| N[CI Verde]\n        M --&gt;|n\u00e3o| O[CI Falha]\n    end\n\n    subgraph \"Finaliza\u00e7\u00e3o\"\n        N --&gt; P[git merge]\n        P --&gt; Q[Issue #3 fecha autom\u00e1tica]\n        Q --&gt; R[Mover para Done no Kanban]\n    end\n</code></pre>"},{"location":"flows/quality_flow/#checklist-de-qualidade-por-fase","title":"\u2705 CHECKLIST DE QUALIDADE POR FASE","text":""},{"location":"flows/quality_flow/#antes-de-comecar","title":"Antes de come\u00e7ar","text":"<ul> <li>[ ] Verificar cobertura atual do arquivo</li> <li>[ ] Verificar MyPy atual</li> <li>[ ] Registrar na issue</li> </ul>"},{"location":"flows/quality_flow/#durante-desenvolvimento","title":"Durante desenvolvimento","text":"<ul> <li>[ ] Checkpoints frequentes com <code>task check-file</code></li> <li>[ ] Testes passando localmente</li> <li>[ ] Lint zero</li> </ul>"},{"location":"flows/quality_flow/#antes-do-commit","title":"Antes do commit","text":"<ul> <li>[ ] <code>task lint-file</code> \u2192 0 erros</li> <li>[ ] <code>task type-file</code> \u2192 0 erros</li> <li>[ ] <code>task test-file</code> \u2192 todos passando</li> <li>[ ] <code>task cov-file</code> \u2192 cobertura \u226585%</li> <li>[ ] <code>task check-file</code> \u2192 tudo ok</li> </ul>"},{"location":"flows/quality_flow/#depois-do-commit_1","title":"Depois do commit","text":"<ul> <li>[ ] CI verde</li> <li>[ ] Cobertura global mantida</li> <li>[ ] Issue fechada</li> </ul>"},{"location":"flows/quality_flow/#tabela-de-comandos-detalhada","title":"\ud83d\udcca TABELA DE COMANDOS DETALHADA","text":"Comando O que faz Quando usar <code>task lint</code> Ruff em todo projeto Antes de push <code>task lint-file --path X</code> Ruff em um arquivo Durante desenvolvimento <code>task type</code> MyPy em todo projeto Antes de push <code>task type-file --path X</code> MyPy em um arquivo Durante desenvolvimento <code>task test</code> Todos os testes Antes de push <code>task test-file --path X</code> Testes de um arquivo Durante desenvolvimento <code>task test-cov</code> Testes com cobertura Antes de push <code>task cov-file --path X</code> Cobertura de um arquivo Antes do commit <code>task check</code> lint + type + test Antes de push <code>task check-file --path X</code> lint + type + test-file Durante desenvolvimento <code>task pre-push</code> check + test-cov Antes de push <code>task summary</code> Resumo de m\u00e9tricas Qualquer momento <code>task clean</code> Limpa caches Quando necess\u00e1rio"},{"location":"flows/quality_flow/#beneficios-deste-fluxo","title":"\ud83c\udfc6 BENEF\u00cdCIOS DESTE FLUXO","text":"Antes Depois \u274c Qualidade vari\u00e1vel por arquivo \u2705 Padr\u00e3o consistente \u274c Esquecia de rodar mypy \u2705 <code>task check-file</code> obrigat\u00f3rio \u274c Cobertura ca\u00eda sem perceber \u2705 <code>task cov-file</code> antes do commit \u274c CI quebrava por erros bobos \u2705 Verifica\u00e7\u00e3o local antes do push \u274c D\u00favida sobre o que testar \u2705 Checklist claro por fase \u274c MyPy acumulava erros \u2705 Corrigido antes do merge"},{"location":"flows/quality_flow/#referencias","title":"\ud83d\udcda REFER\u00caNCIAS","text":"<ul> <li>Ruff Documentation</li> <li>Black Documentation</li> <li>MyPy Documentation</li> <li>Pytest Documentation</li> <li>Taskipy Documentation</li> </ul>"},{"location":"flows/quality_flow/#autor","title":"\ud83d\udc64 AUTOR","text":"<p>Thiago Ribeiro - Projeto de TCC</p> <sub>Quality Assurance Flow - ShowTrials</sub> <sub>Vers\u00e3o 1.0 - 20 de Fevereiro de 2026</sub> <sub>\u2705 Pronto para uso</sub>"},{"location":"flows/refactoring_flow/","title":"Refactoring Flow","text":""},{"location":"flows/refactoring_flow/#flow-6-refactoring-flow-showtrials","title":"\ud83d\udcda FLOW 6: REFACTORING FLOW - SHOWTRIALS","text":"**Guia completo para refatora\u00e7\u00e3o segura e sistem\u00e1tica do c\u00f3digo**"},{"location":"flows/refactoring_flow/#informacoes-do-documento","title":"\ud83d\udcc5 Informa\u00e7\u00f5es do Documento","text":"Item Descri\u00e7\u00e3o Data 20 de Fevereiro de 2026 Autor Thiago Ribeiro Vers\u00e3o 1.0 Relacionado a Quality Flow, Testes, Git Flow, Code Review Flow"},{"location":"flows/refactoring_flow/#objetivo","title":"\ud83c\udfaf OBJETIVO","text":"<p>Estabelecer uma metodologia segura para refatorar c\u00f3digo, garantindo que:</p> <ul> <li>\u2705 Melhorias n\u00e3o introduzam bugs</li> <li>\u2705 Comportamento externo permane\u00e7a id\u00eantico</li> <li>\u2705 Cobertura de testes n\u00e3o diminua</li> <li>\u2705 Refatora\u00e7\u00f5es sejam at\u00f4micas e rastre\u00e1veis</li> <li>\u2705 O c\u00f3digo fique mais limpo, n\u00e3o mais complexo</li> </ul>"},{"location":"flows/refactoring_flow/#o-que-e-refatoracao","title":"\ud83d\udcca O QUE \u00c9 REFATORA\u00c7\u00c3O?","text":""},{"location":"flows/refactoring_flow/#definicao","title":"Defini\u00e7\u00e3o","text":"<p>Refatora\u00e7\u00e3o \u00e9 o processo de modificar a estrutura interna do c\u00f3digo sem alterar seu comportamento externo.</p> <pre><code>graph LR\n    A[C\u00f3digo Fonte] --&gt;|Refatora\u00e7\u00e3o| B[C\u00f3digo Fonte Melhorado]\n    A --&gt;|Comportamento| C[Sa\u00edda]\n    B --&gt;|Comportamento| C\n</code></pre>"},{"location":"flows/refactoring_flow/#o-que-e-e-o-que-nao-e-refatoracao","title":"O que \u00e9 e o que N\u00c3O \u00e9 refatora\u00e7\u00e3o","text":"\u00c9 Refatora\u00e7\u00e3o N\u00c3O \u00e9 Refatora\u00e7\u00e3o Renomear vari\u00e1veis Adicionar nova funcionalidade Extrair m\u00e9todo Corrigir bug Mover fun\u00e7\u00e3o para outro m\u00f3dulo Mudar API p\u00fablica Simplificar condicional Otimizar performance (pode mudar comportamento) Remover c\u00f3digo duplicado Mudar formato de sa\u00edda"},{"location":"flows/refactoring_flow/#quando-refatorar","title":"\ud83d\udd0d QUANDO REFATORAR","text":""},{"location":"flows/refactoring_flow/#sinais-de-que-o-codigo-precisa-de-refatoracao","title":"Sinais de que o c\u00f3digo precisa de refatora\u00e7\u00e3o","text":"<pre><code># 1. M\u00e9todo muito longo (&gt;50 linhas)\ndef processar_tudo():  # 200 linhas \ud83d\ude31\n    # faz coisa 1\n    # faz coisa 2\n    # faz coisa 3\n    # ...\n\n# 2. C\u00f3digo duplicado (DRY violado)\ndef funcao1():\n    # mesmo bloco da funcao2\n    x = a + b\n    y = x * 2\n    return y\n\ndef funcao2():\n    # mesmo bloco da funcao1\n    x = a + b\n    y = x * 2\n    return y * 3\n\n# 3. Condicionais complexas\nif (a and b) or (c and not d) or (e and f and g):\n    # dif\u00edcil de entender\n\n# 4. Nomes ruins\ndef fx(a, b):\n    return a.process(b)\n\n# 5. Classe fazendo demais (God Class)\nclass GerenciadorTudo:\n    def processar_documento(self): ...\n    def enviar_email(self): ...\n    def gerar_relatorio(self): ...\n    def conectar_banco(self): ...\n    # 30 m\u00e9todos diferentes\n</code></pre>"},{"location":"flows/refactoring_flow/#melhores-momentos-para-refatorar","title":"Melhores momentos para refatorar","text":"<ul> <li>[ ] Antes de adicionar uma nova funcionalidade</li> <li>[ ] Depois de entender um trecho de c\u00f3digo confuso</li> <li>[ ] Durante code review (se identificar problemas)</li> <li>[ ] NUNCA junto com nova funcionalidade no mesmo commit</li> </ul>"},{"location":"flows/refactoring_flow/#regras-de-ouro-da-refatoracao","title":"\u26a0\ufe0f REGRAS DE OURO DA REFATORA\u00c7\u00c3O","text":""},{"location":"flows/refactoring_flow/#regra-1-testes-primeiro-sempre","title":"Regra #1: Testes primeiro, sempre!","text":"<pre><code># Antes de qualquer refatora\u00e7\u00e3o, verifique:\ntask cov-file --path src/application/use_cases/alvo.py\n# Cobertura deve ser &gt;= 80%\n\n# Se for menor, crie testes ANTES de refatorar\n</code></pre>"},{"location":"flows/refactoring_flow/#regra-2-um-passo-de-cada-vez","title":"Regra #2: Um passo de cada vez","text":"<pre><code># RUIM (v\u00e1rias mudan\u00e7as de uma vez)\ndef calcular_total( itens):\n    # renomeou par\u00e2metro, mudou l\u00f3gica, extraiu m\u00e9todo, tudo junto\n    total = 0\n    for i in itens:\n        total += i.preco * i.quantidade\n    return total + calcular_taxa(itens)\n\n# BOM (passo a passo)\n# Passo 1: Renomear par\u00e2metro\ndef calcular_total(itens):\n\n# Passo 2: Extrair c\u00e1lculo de subtotal\ndef calcular_subtotal(itens):\n    return sum(i.preco * i.quantidade for i in itens)\n\ndef calcular_total(itens):\n    return calcular_subtotal(itens) + calcular_taxa(itens)\n</code></pre>"},{"location":"flows/refactoring_flow/#regra-3-commit-por-mudanca-atomica","title":"Regra #3: Commit por mudan\u00e7a at\u00f4mica","text":"<pre><code># Cada refatora\u00e7\u00e3o pequena = um commit\ngit commit -m \"refactor: renomeia par\u00e2metro 'x' para 'itens' em calcular_total\"\ngit commit -m \"refactor: extrai m\u00e9todo calcular_subtotal\"\ngit commit -m \"refactor: simplifica loop com sum()\"\n</code></pre>"},{"location":"flows/refactoring_flow/#regra-4-nunca-mude-comportamento-e-refatore-junto","title":"Regra #4: Nunca mude comportamento e refatore junto","text":"<pre><code># RUIM (refatorou e mudou l\u00f3gica)\ndef calcular_total(itens):\n    # ANTES: total = 0; for i in itens: total += i.preco\n    # DEPOIS: mudou para incluir desconto (comportamento diferente!)\n    return sum(i.preco * (1 - i.desconto) for i in itens)\n</code></pre>"},{"location":"flows/refactoring_flow/#tecnicas-de-refatoracao","title":"\ud83d\udee0\ufe0f T\u00c9CNICAS DE REFATORA\u00c7\u00c3O","text":""},{"location":"flows/refactoring_flow/#1-renomear-renaming","title":"1. Renomear (Renaming)","text":"<pre><code># ANTES\ndef calc(a, b):\n    return a + b\n\n# DEPOIS\ndef calcular_soma(parcela1: float, parcela2: float) -&gt; float:\n    return parcela1 + parcela2\n</code></pre>"},{"location":"flows/refactoring_flow/#2-extrair-metodo-extract-method","title":"2. Extrair M\u00e9todo (Extract Method)","text":"<pre><code># ANTES\ndef processar_pedido(pedido):\n    # 20 linhas calculando imposto\n    if pedido.pais == \"BR\":\n        imposto = pedido.total * 0.18\n    elif pedido.pais == \"US\":\n        imposto = pedido.total * 0.10\n    else:\n        imposto = pedido.total * 0.15\n\n    # 30 linhas processando pagamento\n    # ...\n\n# DEPOIS\ndef processar_pedido(pedido):\n    imposto = _calcular_imposto(pedido)\n    _processar_pagamento(pedido, imposto)\n\ndef _calcular_imposto(pedido):\n    \"\"\"Calcula imposto baseado no pa\u00eds.\"\"\"\n    if pedido.pais == \"BR\":\n        return pedido.total * 0.18\n    elif pedido.pais == \"US\":\n        return pedido.total * 0.10\n    return pedido.total * 0.15\n\ndef _processar_pagamento(pedido, imposto):\n    # l\u00f3gica do pagamento\n    pass\n</code></pre>"},{"location":"flows/refactoring_flow/#3-extrair-variavel-extract-variable","title":"3. Extrair Vari\u00e1vel (Extract Variable)","text":"<pre><code># ANTES\nif (cliente.idade &gt; 60 and cliente.renda &gt; 5000 and\n    cliente.tempo_casa &gt; 5):\n    oferecer_desconto(cliente)\n\n# DEPOIS\nelegivel_desconto = (\n    cliente.idade &gt; 60 and\n    cliente.renda &gt; 5000 and\n    cliente.tempo_casa &gt; 5\n)\nif elegivel_desconto:\n    oferecer_desconto(cliente)\n</code></pre>"},{"location":"flows/refactoring_flow/#4-simplificar-condicionais","title":"4. Simplificar Condicionais","text":"<pre><code># ANTES\nif status == \"APROVADO\":\n    return True\nelse:\n    return False\n\n# DEPOIS\nreturn status == \"APROVADO\"\n</code></pre>"},{"location":"flows/refactoring_flow/#5-introduzir-objeto-parametro","title":"5. Introduzir Objeto Par\u00e2metro","text":"<pre><code># ANTES\ndef processar_pedido(cliente_id, cliente_nome, cliente_email,\n                     endereco_rua, endereco_cidade, endereco_cep,\n                     itens):\n    # ...\n\n# DEPOIS\nclass Cliente:\n    def __init__(self, id, nome, email):\n        self.id = id\n        self.nome = nome\n        self.email = email\n\nclass Endereco:\n    def __init__(self, rua, cidade, cep):\n        self.rua = rua\n        self.cidade = cidade\n        self.cep = cep\n\ndef processar_pedido(cliente: Cliente, endereco: Endereco, itens):\n    # ...\n</code></pre>"},{"location":"flows/refactoring_flow/#fluxo-completo-de-refatoracao","title":"\ud83d\udd04 FLUXO COMPLETO DE REFATORA\u00c7\u00c3O","text":"<pre><code>graph TD\n    subgraph \"1. Prepara\u00e7\u00e3o\"\n        A[Identificar c\u00f3digo para refatorar] --&gt; B[Criar branch: refactor/descricao]\n        B --&gt; C[Verificar cobertura atual]\n        C --&gt; D{Cobertura &gt;=80%?}\n        D --&gt;|sim| E[Prosseguir]\n        D --&gt;|n\u00e3o| F[Criar testes primeiro]\n        F --&gt; C\n    end\n\n    subgraph \"2. Execu\u00e7\u00e3o\"\n        E --&gt; G[Fazer UMA mudan\u00e7a por vez]\n        G --&gt; H[Rodar testes]\n        H --&gt; I{Testes passaram?}\n        I --&gt;|sim| J[Commit da mudan\u00e7a]\n        I --&gt;|n\u00e3o| G\n        J --&gt; K[Ainda h\u00e1 mudan\u00e7as?]\n        K --&gt;|sim| G\n        K --&gt;|n\u00e3o| L[Fim da refatora\u00e7\u00e3o]\n    end\n\n    subgraph \"3. Verifica\u00e7\u00e3o\"\n        L --&gt; M[Rodar todos os testes]\n        M --&gt; N[Verificar cobertura]\n        N --&gt; O[Rodar lint e mypy]\n        O --&gt; P{Tudo ok?}\n        P --&gt;|sim| Q[Push e merge]\n        P --&gt;|n\u00e3o| G\n    end\n</code></pre>"},{"location":"flows/refactoring_flow/#checklist-de-refatoracao","title":"\u2705 CHECKLIST DE REFATORA\u00c7\u00c3O","text":""},{"location":"flows/refactoring_flow/#antes-de-comecar","title":"Antes de come\u00e7ar","text":"<ul> <li>[ ] Criei branch <code>refactor/descricao</code>?</li> <li>[ ] Cobertura do arquivo &gt;=80%?</li> <li>[ ] Se n\u00e3o, criei testes primeiro?</li> </ul>"},{"location":"flows/refactoring_flow/#durante-a-refatoracao","title":"Durante a refatora\u00e7\u00e3o","text":"<ul> <li>[ ] Estou fazendo uma mudan\u00e7a por vez?</li> <li>[ ] Testes passam ap\u00f3s cada mudan\u00e7a?</li> <li>[ ] Commit por mudan\u00e7a at\u00f4mica?</li> </ul>"},{"location":"flows/refactoring_flow/#depois-de-cada-commit","title":"Depois de cada commit","text":"<ul> <li>[ ] Mensagem de commit no padr\u00e3o <code>refactor: descri\u00e7\u00e3o</code></li> <li>[ ] Testes locais passam</li> <li>[ ] Lint e MyPy ok</li> </ul>"},{"location":"flows/refactoring_flow/#antes-do-merge","title":"Antes do merge","text":"<ul> <li>[ ] Todos os testes passam (<code>task test</code>)</li> <li>[ ] Cobertura n\u00e3o caiu (<code>task test-cov</code>)</li> <li>[ ] C\u00f3digo ficou mais limpo (n\u00e3o mais complexo)</li> <li>[ ] Branch atualizada com <code>main</code></li> </ul>"},{"location":"flows/refactoring_flow/#exemplo-pratico-refatorando-um-metodo-longo","title":"\ud83d\udccb EXEMPLO PR\u00c1TICO: REFATORANDO UM M\u00c9TODO LONGO","text":""},{"location":"flows/refactoring_flow/#codigo-original-ruim","title":"C\u00f3digo original (ruim)","text":"<pre><code># src/application/use_cases/processar_pedido.py\n\ndef executar(self, pedido):\n    # Validar pedido\n    if not pedido.itens:\n        raise ValueError(\"Pedido sem itens\")\n    if pedido.total &lt;= 0:\n        raise ValueError(\"Total inv\u00e1lido\")\n\n    # Calcular imposto\n    if pedido.pais == \"BR\":\n        imposto = pedido.total * 0.18\n    elif pedido.pais == \"US\":\n        imposto = pedido.total * 0.10\n    elif pedido.pais == \"JP\":\n        imposto = pedido.total * 0.08\n    else:\n        imposto = pedido.total * 0.15\n\n    # Aplicar desconto\n    if pedido.cliente_vip:\n        desconto = pedido.total * 0.05\n        total_com_imposto = pedido.total + imposto - desconto\n    else:\n        total_com_imposto = pedido.total + imposto\n\n    # Processar pagamento\n    if pedido.forma_pagamento == \"cartao\":\n        self._processar_cartao(pedido, total_com_imposto)\n    elif pedido.forma_pagamento == \"boleto\":\n        self._gerar_boleto(pedido, total_com_imposto)\n    else:\n        raise ValueError(\"Forma de pagamento inv\u00e1lida\")\n\n    # Registrar no banco\n    self.repo.salvar(pedido)\n\n    return {\"status\": \"sucesso\", \"total\": total_com_imposto}\n</code></pre>"},{"location":"flows/refactoring_flow/#passo-1-verificar-cobertura","title":"Passo 1: Verificar cobertura","text":"<pre><code>task cov-file --path src/application/use_cases/processar_pedido.py\n# 90% \u2705\n</code></pre>"},{"location":"flows/refactoring_flow/#passo-2-criar-branch","title":"Passo 2: Criar branch","text":"<pre><code>git checkout -b refactor/processar-pedido\n</code></pre>"},{"location":"flows/refactoring_flow/#passo-3-extrair-validacao","title":"Passo 3: Extrair valida\u00e7\u00e3o","text":"<pre><code>def _validar_pedido(self, pedido):\n    \"\"\"Valida os dados do pedido antes do processamento.\"\"\"\n    if not pedido.itens:\n        raise ValueError(\"Pedido sem itens\")\n    if pedido.total &lt;= 0:\n        raise ValueError(\"Total inv\u00e1lido\")\n</code></pre> <pre><code>git add .\ngit commit -m \"refactor: extrai m\u00e9todo _validar_pedido\"\n</code></pre>"},{"location":"flows/refactoring_flow/#passo-4-extrair-calculo-de-imposto","title":"Passo 4: Extrair c\u00e1lculo de imposto","text":"<pre><code>def _calcular_imposto(self, pedido) -&gt; float:\n    \"\"\"Calcula imposto baseado no pa\u00eds do pedido.\"\"\"\n    taxas = {\n        \"BR\": 0.18,\n        \"US\": 0.10,\n        \"JP\": 0.08,\n    }\n    taxa = taxas.get(pedido.pais, 0.15)\n    return pedido.total * taxa\n</code></pre> <pre><code>git commit -m \"refactor: extrai m\u00e9todo _calcular_imposto com dicion\u00e1rio de taxas\"\n</code></pre>"},{"location":"flows/refactoring_flow/#passo-5-extrair-calculo-de-desconto","title":"Passo 5: Extrair c\u00e1lculo de desconto","text":"<pre><code>def _aplicar_desconto(self, pedido, valor_base: float) -&gt; float:\n    \"\"\"Aplica desconto se cliente for VIP.\"\"\"\n    if pedido.cliente_vip:\n        desconto = pedido.total * 0.05\n        return valor_base - desconto\n    return valor_base\n</code></pre> <pre><code>git commit -m \"refactor: extrai m\u00e9todo _aplicar_desconto\"\n</code></pre>"},{"location":"flows/refactoring_flow/#passo-6-extrair-processamento-de-pagamento","title":"Passo 6: Extrair processamento de pagamento","text":"<pre><code>def _processar_pagamento_por_forma(self, pedido, total: float):\n    \"\"\"Processa pagamento de acordo com a forma escolhida.\"\"\"\n    processadores = {\n        \"cartao\": self._processar_cartao,\n        \"boleto\": self._gerar_boleto,\n    }\n    processador = processadores.get(pedido.forma_pagamento)\n    if not processador:\n        raise ValueError(\"Forma de pagamento inv\u00e1lida\")\n    processador(pedido, total)\n</code></pre> <pre><code>git commit -m \"refactor: extrai _processar_pagamento_por_forma com dicion\u00e1rio\"\n</code></pre>"},{"location":"flows/refactoring_flow/#passo-7-codigo-refatorado","title":"Passo 7: C\u00f3digo refatorado","text":"<pre><code>def executar(self, pedido):\n    \"\"\"Processa um pedido completo.\"\"\"\n    self._validar_pedido(pedido)\n\n    imposto = self._calcular_imposto(pedido)\n    total_com_imposto = pedido.total + imposto\n    total_final = self._aplicar_desconto(pedido, total_com_imposto)\n\n    self._processar_pagamento_por_forma(pedido, total_final)\n    self.repo.salvar(pedido)\n\n    return {\"status\": \"sucesso\", \"total\": total_final}\n</code></pre> <pre><code>git commit -m \"refactor: simplifica m\u00e9todo principal usando m\u00e9todos auxiliares\"\n</code></pre>"},{"location":"flows/refactoring_flow/#passo-8-verificar-tudo","title":"Passo 8: Verificar tudo","text":"<pre><code>task test\ntask test-cov  # cobertura deve permanecer 90%\ntask lint\ntask type\n</code></pre>"},{"location":"flows/refactoring_flow/#passo-9-push-e-merge","title":"Passo 9: Push e merge","text":"<pre><code>git push origin refactor/processar-pedido\n# CI deve passar\ngit checkout main\ngit merge --ff-only refactor/processar-pedido\ngit push origin main\n</code></pre>"},{"location":"flows/refactoring_flow/#comparacao-antes-e-depois","title":"\ud83d\udcca COMPARA\u00c7\u00c3O ANTES E DEPOIS","text":"M\u00e9trica Antes Depois Linhas do m\u00e9todo principal 35 8 M\u00e9todos auxiliares 0 4 Complexidade Alta Baixa Testabilidade Dif\u00edcil F\u00e1cil Reuso Nenhum M\u00e9todos podem ser reutilizados Legibilidade Ruim Clara"},{"location":"flows/refactoring_flow/#problemas-comuns-e-solucoes","title":"\ud83d\udea8 PROBLEMAS COMUNS E SOLU\u00c7\u00d5ES","text":"Problema Causa Solu\u00e7\u00e3o Testes quebram ap\u00f3s refatora\u00e7\u00e3o Mudou comportamento Reverter ou ajustar (se comportamento era bug) Cobertura caiu Removeu c\u00f3digo sem testes Adicionar testes antes Mudan\u00e7a muito grande V\u00e1rias refatora\u00e7\u00f5es juntas Separar em commits menores Merge conflitante Refatorou arquivo que outros mexeram Comunicar antes ou fazer em hor\u00e1rio adequado \"Melhorei\" mas c\u00f3digo ficou pior Refatora\u00e7\u00e3o inadequada Reverter e repensar abordagem"},{"location":"flows/refactoring_flow/#comandos-uteis","title":"\ud83d\udccb COMANDOS \u00daTEIS","text":"<pre><code># Verificar cobertura antes\ntask cov-file --path src/application/use_cases/alvo.py\n\n# Ver complexidade (opcional)\npoetry run radon cc src/application/use_cases/alvo.py -s\n\n# Ver m\u00e9todos longos (opcional)\npoetry run pylint --max-line-length=100 src/ | grep \"too-many-lines\"\n\n# Verificar se tudo continua funcionando\ntask check\ntask test-cov\n</code></pre>"},{"location":"flows/refactoring_flow/#beneficios-deste-fluxo","title":"\ud83c\udfc6 BENEF\u00cdCIOS DESTE FLUXO","text":"Antes Depois \u274c Refatora\u00e7\u00e3o \"achista\" \u2705 Metodologia sistem\u00e1tica \u274c Quebrava sem perceber \u2705 Testes garantem \u274c C\u00f3digo ficava pior \u00e0s vezes \u2705 Objetivo claro: melhorar \u274c Commit gigante e confuso \u2705 Commits at\u00f4micos \u274c Dif\u00edcil reverter \u2705 Cada passo \u00e9 revers\u00edvel"},{"location":"flows/refactoring_flow/#referencias","title":"\ud83d\udcda REFER\u00caNCIAS","text":"<ul> <li>Refactoring (Martin Fowler)</li> <li>Clean Code (Robert Martin)</li> <li>Source Making - Refactoring</li> </ul>"},{"location":"flows/refactoring_flow/#autor","title":"\ud83d\udc64 AUTOR","text":"<p>Thiago Ribeiro - Projeto de TCC</p> <sub>Refactoring Flow - ShowTrials</sub> <sub>Vers\u00e3o 1.0 - 20 de Fevereiro de 2026</sub> <sub>\u2705 Pronto para uso</sub>"},{"location":"flows/refactoring_flow/#proximo-flow","title":"\ud83d\udccb PR\u00d3XIMO FLOW","text":"<p>Emergency Flow (Hotfix) ser\u00e1 o pr\u00f3ximo! \ud83d\udea8</p>"},{"location":"flows/telemetry_flow/","title":"Telemetry Flow","text":""},{"location":"flows/telemetry_flow/#flow-1-telemetry-flow-showtrials","title":"\ud83d\udcda FLOW 1: TELEMETRY FLOW - SHOWTRIALS","text":"**Guia completo para instrumenta\u00e7\u00e3o de c\u00f3digo com telemetria**"},{"location":"flows/telemetry_flow/#informacoes-do-documento","title":"\ud83d\udcc5 Informa\u00e7\u00f5es do Documento","text":"Item Descri\u00e7\u00e3o Data 20 de Fevereiro de 2026 Autor Thiago Ribeiro Vers\u00e3o 1.0 Relacionado a Fases 5, 8, 12, 14, 15, 16"},{"location":"flows/telemetry_flow/#objetivo","title":"\ud83c\udfaf OBJETIVO","text":"<p>Padronizar a implementa\u00e7\u00e3o de telemetria em todos os arquivos do projeto, garantindo: - \u2705 Consist\u00eancia entre os m\u00f3dulos - \u2705 Facilidade de teste - \u2705 Rastreabilidade de uso - \u2705 Baixo acoplamento - \u2705 Fallback seguro quando desabilitada</p>"},{"location":"flows/telemetry_flow/#por-que-telemetria","title":"\ud83d\udcca POR QUE TELEMETRIA?","text":""},{"location":"flows/telemetry_flow/#o-que-ganhamos","title":"O que ganhamos","text":"Benef\u00edcio Exemplo Entender uso Quantas vezes cada caso de uso \u00e9 executado Detectar erros Frequ\u00eancia de falhas por opera\u00e7\u00e3o Otimizar performance Onde est\u00e3o os gargalos Tomar decis\u00f5es Quais funcionalidades s\u00e3o mais usadas Debug Rastrear fluxo de execu\u00e7\u00e3o"},{"location":"flows/telemetry_flow/#nossa-abordagem","title":"Nossa abordagem","text":"<pre><code># Leve, desacoplada e test\u00e1vel\nif _telemetry:\n    _telemetry.increment(\"modulo.operacao.status\")\n</code></pre>"},{"location":"flows/telemetry_flow/#arquitetura-da-telemetria","title":"\ud83c\udfd7\ufe0f ARQUITETURA DA TELEMETRIA","text":"<pre><code>graph TD\n    subgraph \"M\u00f3dulo Qualquer\"\n        A[C\u00f3digo] --&gt;|if _telemetry| B{Telemetria configurada?}\n        B --&gt;|sim| C[_telemetry.increment()]\n        B --&gt;|n\u00e3o| D[Ignora]\n    end\n\n    subgraph \"Arquivo de teste\"\n        E[MockTelemetry] --&gt;|configure_telemetry| F[M\u00f3dulo usa mock]\n        F --&gt;|verifica chamadas| G[assert_any_call]\n    end\n\n    subgraph \"Arquivo principal\"\n        H[from .telemetry import telemetry] --&gt;|configure_telemetry| I[M\u00f3dulo usa real]\n        I --&gt;|increment| J[(M\u00e9tricas)]\n    end\n</code></pre>"},{"location":"flows/telemetry_flow/#padrao-de-implementacao","title":"\ud83d\udccb PADR\u00c3O DE IMPLEMENTA\u00c7\u00c3O","text":""},{"location":"flows/telemetry_flow/#template-para-qualquer-arquivo","title":"Template para qualquer arquivo","text":"<pre><code>\"\"\"\nDescri\u00e7\u00e3o do m\u00f3dulo.\n\"\"\"\n\n# ... outros imports ...\n\n# ===== TELEMETRIA =====\n_telemetry = None\n\ndef configure_telemetry(telemetry_instance=None):\n    \"\"\"\n    Configura telemetria para este m\u00f3dulo.\n\n    Args:\n        telemetry_instance: Inst\u00e2ncia do objeto de telemetria\n                           (usado apenas em testes)\n    \"\"\"\n    global _telemetry\n    _telemetry = telemetry_instance\n# =====================\n\nclass MinhaClasse:\n    # ... c\u00f3digo ...\n</code></pre>"},{"location":"flows/telemetry_flow/#onde-colocar","title":"Onde colocar","text":"<p>Sempre no topo do arquivo, logo ap\u00f3s os imports, antes das classes.</p>"},{"location":"flows/telemetry_flow/#padrao-de-nomenclatura","title":"\ud83d\udcca PADR\u00c3O DE NOMENCLATURA","text":""},{"location":"flows/telemetry_flow/#estrutura-dos-contadores","title":"Estrutura dos contadores","text":"<pre><code>modulo.submodulo.operacao.estado\n</code></pre> Parte Descri\u00e7\u00e3o Exemplo modulo Dom\u00ednio principal <code>exportar_documento</code> submodulo (opcional) Subdivis\u00e3o <code>buscar_documento</code> operacao A\u00e7\u00e3o sendo executada <code>executar</code> estado Resultado/status <code>iniciado</code>, <code>concluido</code>, <code>erro.tipo</code>"},{"location":"flows/telemetry_flow/#exemplos-reais-do-projeto","title":"Exemplos reais do projeto","text":"<pre><code># ExportarDocumento\n_telemetry.increment(\"exportar_documento.executar.iniciado\")\n_telemetry.increment(\"exportar_documento.executar.formato.txt\")\n_telemetry.increment(\"exportar_documento.executar.sucesso_txt\")\n_telemetry.increment(\"exportar_documento.erro.formato_invalido\")\n\n# GerarRelatorio\n_telemetry.increment(\"gerar_relatorio.coletar_dados.iniciado\")\n_telemetry.increment(\"gerar_relatorio.documentos_processados\", value=len(documentos))\n_telemetry.increment(\"gerar_relatorio.salvar.sucesso_txt\")\n</code></pre>"},{"location":"flows/telemetry_flow/#checklist-por-metodo","title":"\u2705 CHECKLIST POR M\u00c9TODO","text":""},{"location":"flows/telemetry_flow/#para-cada-metodo-publico","title":"Para cada m\u00e9todo p\u00fablico","text":"<pre><code>def meu_metodo(self, parametro):\n    \"\"\"Descri\u00e7\u00e3o do m\u00e9todo.\"\"\"\n\n    # 1. IN\u00cdCIO - sempre registrar\n    if _telemetry:\n        _telemetry.increment(\"modulo.meu_metodo.iniciado\")\n        if parametro:\n            _telemetry.increment(f\"modulo.meu_metodo.parametro.{parametro}\")\n\n    try:\n        # ... l\u00f3gica ...\n\n        # 2. SUCESSO - registrar quando apropriado\n        if _telemetry:\n            _telemetry.increment(\"modulo.meu_metodo.concluido\")\n            if hasattr(resultado, 'tamanho'):\n                _telemetry.increment(\"modulo.meu_metodo.caracteres\", value=len(resultado))\n\n        return resultado\n\n    except ValueError as e:\n        # 3. ERRO ESPERADO - registrar e propagar ou tratar\n        if _telemetry:\n            _telemetry.increment(\"modulo.meu_metodo.erro.valor_invalido\")\n        raise\n\n    except Exception as e:\n        # 4. ERRO INESPERADO - registrar, mas pode propagar\n        if _telemetry:\n            _telemetry.increment(\"modulo.meu_metodo.erro.interno\")\n        raise\n</code></pre>"},{"location":"flows/telemetry_flow/#contadores-obrigatorios-por-metodo","title":"Contadores obrigat\u00f3rios por m\u00e9todo","text":"Tipo Quando Exemplo iniciado Primeira linha <code>metodo.iniciado</code> concluido Antes do return <code>metodo.concluido</code> erro.tipo No bloco except <code>metodo.erro.tipo_especifico</code> valor Quando processar dados <code>metodo.caracteres</code>, <code>metodo.itens</code>"},{"location":"flows/telemetry_flow/#testes-de-telemetria","title":"\ud83e\uddea TESTES DE TELEMETRIA","text":""},{"location":"flows/telemetry_flow/#estrutura-do-arquivo-de-teste","title":"Estrutura do arquivo de teste","text":"<p>Sempre criar <code>test_nome_do_arquivo_telemetry.py</code>:</p> <pre><code># src/tests/test_exportar_documento_telemetry.py\n\"\"\"\nTestes de telemetria para o caso de uso ExportarDocumento.\n\"\"\"\n\nfrom unittest.mock import Mock, MagicMock\nimport pytest\n\nimport src.application.use_cases.exportar_documento as uc_module\nfrom src.application.use_cases.exportar_documento import ExportarDocumento\n\n\nclass TestExportarDocumentoTelemetry:\n    \"\"\"Testes para telemetria do ExportarDocumento.\"\"\"\n\n    def setup_method(self):\n        \"\"\"Reconfigura o m\u00f3dulo antes de cada teste (CR\u00cdTICO!).\"\"\"\n        uc_module._telemetry = None\n\n    def test_telemetria_sucesso(self):\n        \"\"\"Telemetria deve registrar execu\u00e7\u00e3o bem-sucedida.\"\"\"\n        # 1. Configurar mock\n        mock_telemetry = MagicMock()\n        uc_module.configure_telemetry(telemetry_instance=mock_telemetry)\n\n        # 2. Configurar mocks das depend\u00eancias\n        mock_repo = Mock()\n        mock_repo.buscar_por_id.return_value = Mock(id=1, texto=\"teste\")\n\n        # 3. Executar\n        use_case = ExportarDocumento(mock_repo)\n        with tempfile.TemporaryDirectory() as tmpdir:\n            resultado = use_case.executar(documento_id=1, diretorio=tmpdir)\n\n        # 4. Verificar resultado\n        assert resultado[\"sucesso\"] is True\n\n        # 5. Verificar chamadas de telemetria\n        mock_telemetry.increment.assert_any_call(\"exportar_documento.executar.iniciado\")\n        mock_telemetry.increment.assert_any_call(\"exportar_documento.executar.concluido\")\n</code></pre>"},{"location":"flows/telemetry_flow/#o-que-testar-em-cada-arquivo","title":"O que testar em cada arquivo","text":"Tipo de teste O que verificar Exemplo Sucesso Contadores principais <code>iniciado</code>, <code>concluido</code> Erro esperado Contador de erro espec\u00edfico <code>erro.formato_invalido</code> Erro inesperado Contador de erro gen\u00e9rico <code>erro.execucao</code> Sem telemetria Nada quebra <code>configure_telemetry(None)</code>"},{"location":"flows/telemetry_flow/#fluxo-completo-adicionar-telemetria-em-um-novo-arquivo","title":"\ud83d\udd04 FLUXO COMPLETO (ADICIONAR TELEMETRIA EM UM NOVO ARQUIVO)","text":"<pre><code>graph TD\n    subgraph \"1. Prepara\u00e7\u00e3o\"\n        A[Arquivo alvo] --&gt; B[Criar branch: type/arquivo]\n        B --&gt; C[Adicionar template no topo]\n    end\n\n    subgraph \"2. Instrumenta\u00e7\u00e3o\"\n        C --&gt; D[Adicionar _telemetry em cada m\u00e9todo]\n        D --&gt; E[Adicionar contadores de in\u00edcio]\n        D --&gt; F[Adicionar contadores de sucesso]\n        D --&gt; G[Adicionar contadores de erro]\n    end\n\n    subgraph \"3. Testes\"\n        H[Criar test_*_telemetry.py] --&gt; I[Testar sucesso]\n        H --&gt; J[Testar erros]\n        H --&gt; K[Testar sem telemetria]\n    end\n\n    subgraph \"4. Verifica\u00e7\u00e3o\"\n        L[Rodar testes] --&gt; M{Passaram?}\n        M --&gt;|sim| N[Commit com Closes #issue]\n        M --&gt;|n\u00e3o| H\n    end\n</code></pre>"},{"location":"flows/telemetry_flow/#checklist-para-adicionar-telemetria","title":"\u2705 CHECKLIST PARA ADICIONAR TELEMETRIA","text":""},{"location":"flows/telemetry_flow/#1-no-arquivo-principal","title":"1. No arquivo principal","text":"<ul> <li>[ ] Adicionar vari\u00e1vel global <code>_telemetry = None</code></li> <li>[ ] Adicionar fun\u00e7\u00e3o <code>configure_telemetry</code></li> <li>[ ] Em cada m\u00e9todo p\u00fablico:</li> <li>[ ] <code>if _telemetry:</code> no in\u00edcio</li> <li>[ ] Contador de <code>iniciado</code></li> <li>[ ] Contador de par\u00e2metros relevantes (opcional)</li> <li>[ ] Contador de <code>concluido</code> antes do return</li> <li>[ ] Contadores de erro nos excepts</li> </ul>"},{"location":"flows/telemetry_flow/#2-no-arquivo-de-teste","title":"2. No arquivo de teste","text":"<ul> <li>[ ] Criar <code>test_nome_telemetry.py</code></li> <li>[ ] Importar o m\u00f3dulo como <code>uc_module</code></li> <li>[ ] Classe de teste com <code>setup_method</code> zerando <code>_telemetry</code></li> <li>[ ] Teste de sucesso verificando contadores principais</li> <li>[ ] Teste de cada erro esperado</li> <li>[ ] Teste de erro inesperado (se aplic\u00e1vel)</li> <li>[ ] Teste \"sem telemetria n\u00e3o quebra\"</li> </ul>"},{"location":"flows/telemetry_flow/#3-exemplo-completo-para-copiar","title":"3. Exemplo completo (para copiar)","text":"<p>No arquivo principal: <pre><code># Telemetria opcional\n_telemetry = None\n\ndef configure_telemetry(telemetry_instance=None):\n    \"\"\"Configura telemetria para este m\u00f3dulo (usado apenas em testes).\"\"\"\n    global _telemetry\n    _telemetry = telemetry_instance\n</code></pre></p> <p>No arquivo de teste: <pre><code>import src.application.use_cases.meu_modulo as uc_module\n\nclass TestMeuModuloTelemetry:\n    def setup_method(self):\n        uc_module._telemetry = None\n\n    def test_telemetria_sucesso(self):\n        mock_telemetry = MagicMock()\n        uc_module.configure_telemetry(telemetry_instance=mock_telemetry)\n\n        # ... teste ...\n\n        mock_telemetry.increment.assert_any_call(\"modulo.metodo.iniciado\")\n</code></pre></p>"},{"location":"flows/telemetry_flow/#exemplos-reais-do-projeto_1","title":"\ud83d\udcca EXEMPLOS REAIS DO PROJETO","text":""},{"location":"flows/telemetry_flow/#exportardocumento-fase-14","title":"ExportarDocumento (FASE 14)","text":"<pre><code># src/application/use_cases/exportar_documento.py\n\n_telemetry = None\n\ndef configure_telemetry(telemetry_instance=None):\n    global _telemetry\n    _telemetry = telemetry_instance\n\nclass ExportarDocumento:\n    def executar(self, documento_id, formato=\"txt\", ...):\n        if _telemetry:\n            _telemetry.increment(\"exportar_documento.executar.iniciado\")\n            _telemetry.increment(f\"exportar_documento.executar.formato.{formato}\")\n\n        # ... l\u00f3gica ...\n\n        if _telemetry:\n            _telemetry.increment(\"exportar_documento.executar.concluido\")\n</code></pre>"},{"location":"flows/telemetry_flow/#gerarrelatorio-fase-15","title":"GerarRelatorio (FASE 15)","text":"<pre><code># src/application/use_cases/gerar_relatorio.py\n\n_telemetry = None\n\ndef configure_telemetry(telemetry_instance=None):\n    global _telemetry\n    _telemetry = telemetry_instance\n\nclass GerarRelatorio:\n    def _coletar_dados(self):\n        if _telemetry:\n            _telemetry.increment(\"gerar_relatorio.coletar_dados.iniciado\")\n\n        # ... l\u00f3gica ...\n\n        if _telemetry:\n            _telemetry.increment(\"gerar_relatorio.coletar_dados.concluido\")\n            _telemetry.increment(\"gerar_relatorio.documentos_processados\", value=len(documentos))\n</code></pre>"},{"location":"flows/telemetry_flow/#erros-comuns-e-solucoes","title":"\ud83d\udea8 ERROS COMUNS E SOLU\u00c7\u00d5ES","text":"Erro Causa Solu\u00e7\u00e3o <code>AttributeError: 'NoneType' object has no attribute 'increment'</code> Esqueceu de verificar <code>if _telemetry:</code> Adicionar <code>if _telemetry:</code> antes de usar Testes de telemetria falham com chamadas n\u00e3o encontradas Mock n\u00e3o configurado ou caminho diferente Use <code>assert_any_call</code> em vez de <code>assert_called_with</code> <code>_telemetry</code> persistindo entre testes N\u00e3o zerou no <code>setup_method</code> Adicionar <code>uc_module._telemetry = None</code> Contadores com nomes inconsistentes N\u00e3o seguiu o padr\u00e3o Use <code>modulo.operacao.estado</code>"},{"location":"flows/telemetry_flow/#comandos-uteis","title":"\ud83d\udccb COMANDOS \u00daTEIS","text":"<pre><code># Ver telemetria em a\u00e7\u00e3o (se tiver visualiza\u00e7\u00e3o)\npoetry run task monitor\n\n# Testar telemetria de um arquivo espec\u00edfico\npoetry run pytest src/tests/test_*_telemetry.py -v\n\n# Ver cobertura incluindo telemetria\npoetry run pytest --cov=src/application/use_cases --cov-report=term-missing\n</code></pre>"},{"location":"flows/telemetry_flow/#resumo-o-que-nao-esquecer","title":"\u2705 RESUMO - O QUE N\u00c3O ESQUECER","text":"<pre><code># 1. Template no topo\n_telemetry = None\ndef configure_telemetry(telemetry_instance=None):\n    global _telemetry\n    _telemetry = telemetry_instance\n\n# 2. Uso em m\u00e9todos\nif _telemetry:\n    _telemetry.increment(\"modulo.metodo.iniciado\")\n\n# 3. Testes\ndef setup_method(self):\n    uc_module._telemetry = None\n</code></pre>"},{"location":"flows/telemetry_flow/#referencias","title":"\ud83d\udcda REFER\u00caNCIAS","text":"<ul> <li>FASE 14 - ExportarDocumento</li> <li>FASE 15 - GerarRelatorio</li> <li>FASE 16 - ListarDocumentos</li> </ul>"},{"location":"flows/telemetry_flow/#autor","title":"\ud83d\udc64 AUTOR","text":"<p>Thiago Ribeiro - Projeto de TCC</p> <sub>Telemetry Flow - ShowTrials</sub> <sub>Vers\u00e3o 1.0 - 20 de Fevereiro de 2026</sub> <sub>\u2705 Pronto para uso</sub>"},{"location":"flows/telemetry_flow/#proximo-flow","title":"\ud83d\udccb PR\u00d3XIMO FLOW","text":"<p>Code Review Flow ser\u00e1 o pr\u00f3ximo! \ud83d\ude80</p>"},{"location":"metricas/cobertura/","title":"Cobertura de Testes","text":""},{"location":"metricas/cobertura/#cobertura-de-testes-showtrials","title":"\ud83d\udcca COBERTURA DE TESTES - SHOWTRIALS","text":"**M\u00e9tricas atualizadas em 21/02/2026 \u2022 [Hist\u00f3rico de evolu\u00e7\u00e3o](#hist\u00f3rico-de-evolu\u00e7\u00e3o)**"},{"location":"metricas/cobertura/#metricas-atuais","title":"\ud83d\udcc8 M\u00c9TRICAS ATUAIS","text":"M\u00e9trica Valor Cobertura global 75% \ud83d\ude80 Testes totais ~250 Meta inicial 45% (\u2705 ultrapassada) Arquivos monitorados 40+"},{"location":"metricas/cobertura/#evolucao-da-cobertura","title":"\ud83d\udcca EVOLU\u00c7\u00c3O DA COBERTURA","text":"Data Cobertura \u0394 Principais Contribui\u00e7\u00f5es 21/02/2026 75% +12% FASE 14-16 (exportar, gerar, listar) 19/02/2026 63% +8% FASE 12-13 (telemetria + limpeza) 19/02/2026 55% - Diagn\u00f3stico inicial <p>Detalhes das contribui\u00e7\u00f5es est\u00e3o documentados em cada FASE*.md</p>"},{"location":"metricas/cobertura/#top-prioridades-atuais","title":"\ud83c\udfaf TOP PRIORIDADES ATUAIS","text":"# Arquivo Cobertura Impacto Issue Fase 1 <code>estatisticas.py</code> 15% \ud83d\udd34 Alto #5 FASE 19 2 <code>classificar_documento.py</code> 65% \ud83d\udfe1 M\u00e9dio #3 FASE 17 3 <code>obter_documento.py</code> 57% \ud83d\udfe1 M\u00e9dio #4 FASE 18 4 <code>spacy_analyzer.py</code> 23% \ud83d\udd34 Alto - - 5 <code>google_translator.py</code> 24% \ud83d\udd34 Alto - -"},{"location":"metricas/cobertura/#cobertura-por-camada","title":"\ud83d\udcca COBERTURA POR CAMADA","text":"Camada Cobertura Status Domain 92% \u2705 Excelente Application 40% \u26a0\ufe0f Em progresso Infrastructure 57% \ud83d\udfe1 Melhorando Interface - Testes manuais"},{"location":"metricas/cobertura/#historico-detalhado-de-mudancas","title":"\ud83d\udcdc HIST\u00d3RICO DETALHADO DE MUDAN\u00c7AS","text":""},{"location":"metricas/cobertura/#fase-16-listardocumentos-20022026","title":"FASE 16 - ListarDocumentos (20/02/2026)","text":"<pre><code>\ud83d\udcc1 src/application/use_cases/listar_documentos.py\n\ud83d\udcc8 55% \u2192 80%\n\u2728 Melhorias:\n  - Adicionada telemetria\n  - Expandidos testes de l\u00f3gica (12)\n  - Criados testes de telemetria (6)\n  - Corrigidos 3 erros de MyPy\n\ud83d\udd17 [FASE16.md](fases/FASE16.md)\n</code></pre>"},{"location":"metricas/cobertura/#fase-15-gerarrelatorio-20022026","title":"FASE 15 - GerarRelatorio (20/02/2026)","text":"<pre><code>\ud83d\udcc1 src/application/use_cases/gerar_relatorio.py\n\ud83d\udcc8 0% \u2192 86%\n\u2728 Melhorias:\n  - Adicionada telemetria completa\n  - Criados 12 testes de l\u00f3gica\n  - Criados 6 testes de telemetria\n  - Corrigidos 7 erros de MyPy\n\ud83d\udd17 [FASE15.md](fases/FASE15.md)\n</code></pre>"},{"location":"metricas/cobertura/#fase-14-exportardocumento-20022026","title":"FASE 14 - ExportarDocumento (20/02/2026)","text":"<pre><code>\ud83d\udcc1 src/application/use_cases/exportar_documento.py\n\ud83d\udcc8 0% \u2192 81%\n\u2728 Melhorias:\n  - Adicionada telemetria\n  - Criados 12 testes de l\u00f3gica\n  - Criados 8 testes de telemetria\n\ud83d\udd17 [FASE14.md](fases/FASE14.md)\n</code></pre>"},{"location":"metricas/cobertura/#fase-12-13-fundacao-19022026","title":"FASE 12-13 - Funda\u00e7\u00e3o (19/02/2026)","text":"<pre><code>\ud83d\udcc8 55% \u2192 63%\n\u2728 Melhorias:\n  - Padroniza\u00e7\u00e3o de telemetria em tipo_documento.py\n  - Limpeza de arquivos .bak e diagn\u00f3stico\n  - Organiza\u00e7\u00e3o do reposit\u00f3rio\n\ud83d\udd17 [FASE12.md](fases/FASE12.md) | [FASE13.md](fases/FASE13.md)\n</code></pre>"},{"location":"metricas/cobertura/#como-interpretar-este-documento","title":"\ud83d\udd0d COMO INTERPRETAR ESTE DOCUMENTO","text":"Se\u00e7\u00e3o Para que serve M\u00e9tricas atuais Snapshot do momento Evolu\u00e7\u00e3o Vis\u00e3o hist\u00f3rica do progresso Top prioridades Guia para pr\u00f3ximas a\u00e7\u00f5es Cobertura por camada Vis\u00e3o arquitetural Hist\u00f3rico detalhado Rastreabilidade das melhorias"},{"location":"metricas/cobertura/#links-rapidos","title":"\ud83d\udd17 LINKS R\u00c1PIDOS","text":"<ul> <li>Issues abertas relacionadas</li> <li>Milestone: Qualidade</li> <li>Documenta\u00e7\u00e3o das fases</li> <li>Como contribuir com testes</li> </ul>"},{"location":"metricas/cobertura/#comando-para-atualizar-este-documento","title":"\ud83d\udcca COMANDO PARA ATUALIZAR ESTE DOCUMENTO","text":"<pre><code># Para gerar m\u00e9tricas atualizadas\npoetry run pytest --cov=src --cov-report=term-missing | grep -E \"^src/|^TOTAL\" | cat\n\n# Ap\u00f3s executar, atualize manualmente as se\u00e7\u00f5es:\n# - M\u00e9tricas atuais\n# - Top prioridades (se mudou)\n# - Adicione nova entrada no hist\u00f3rico se houve melhoria\n</code></pre> <sub>Documento mantido vivo - \u00faltima atualiza\u00e7\u00e3o: 21/02/2026</sub> <sub>\u2705 Hist\u00f3rico completo \u2022 \u2705 M\u00e9tricas atuais \u2022 \u2705 Pr\u00f3ximos passos</sub> <p>```</p>"},{"location":"metricas/diagnostico_ci/","title":"Diagn\u00f3stico: Falhas no Pipeline de CI (FASE 11)","text":"**An\u00e1lise detalhada das falhas no GitHub Actions que motivaram a FASE 11**"},{"location":"metricas/diagnostico_ci/#informacoes-do-diagnostico","title":"\ud83d\udcc5 Informa\u00e7\u00f5es do Diagn\u00f3stico","text":"Item Descri\u00e7\u00e3o Data 19/02/2026 Autor Thiago Ribeiro Fase relacionada FASE 11 Commit do diagn\u00f3stico <code>c87fc9e</code>"},{"location":"metricas/diagnostico_ci/#problema-identificado","title":"\ud83c\udfaf Problema Identificado","text":"<p>Todos os merges das branches <code>type/*</code> estavam falhando no GitHub Actions com o erro:</p> <pre><code>ModuleNotFoundError: No module named 'spacy'\n</code></pre>"},{"location":"metricas/diagnostico_ci/#dados-coletados","title":"\ud83d\udcca Dados Coletados","text":""},{"location":"metricas/diagnostico_ci/#historico-de-falhas","title":"Hist\u00f3rico de Falhas","text":"<pre><code>STATUS  TITLE                                  BRANCH    ID\nX       Merge branch 'type/analisar-texto'     main      22207771569\nX       Merge branch 'type/analisar-acervo'    main      22206622629\nX       Merge branch 'type/traduzir-documento' main      22205046693\nX       Merge branch 'type/factories'          main      22204553138\n</code></pre> <p>\u00daltimo commit com sucesso: <code>b8b3242</code> (18/02/2026)</p>"},{"location":"metricas/diagnostico_ci/#analise-da-causa-raiz","title":"\ud83d\udd0d An\u00e1lise da Causa Raiz","text":""},{"location":"metricas/diagnostico_ci/#cadeia-de-importacao","title":"Cadeia de Importa\u00e7\u00e3o","text":"<pre><code>test_analisar_acervo.py\n  \u2192 from src.application.use_cases.analisar_acervo import AnalisarAcervo\n    \u2192 from src.infrastructure.analysis.spacy_analyzer import SpacyAnalyzer\n      \u2192 import spacy  \u2190 ERRO!\n</code></pre>"},{"location":"metricas/diagnostico_ci/#comparacao-de-ambientes","title":"Compara\u00e7\u00e3o de Ambientes","text":"Componente Local CI Status spacy \u2705 (pip) \u274c \ud83d\udd34 PROBLEMA numpy \u2705 (1.26.0) \u274c \ud83d\udd34 PROBLEMA textblob \u2705 \u274c \ud83d\udd34 PROBLEMA Modelos spaCy \u2705 \u274c \ud83d\udd34 PROBLEMA Demais depend\u00eancias \u2705 (Poetry) \u2705 \ud83d\udfe2 OK"},{"location":"metricas/diagnostico_ci/#causa-raiz","title":"\ud83d\udccb Causa Raiz","text":"<p>Durante a FASE 8, as depend\u00eancias NLP foram instaladas manualmente via pip devido a conflitos com Poetry. O CI, por\u00e9m, executava apenas <code>poetry install</code>, n\u00e3o replicando essas depend\u00eancias.</p>"},{"location":"metricas/diagnostico_ci/#opcoes-consideradas","title":"\ud83d\udcca Op\u00e7\u00f5es Consideradas","text":"Op\u00e7\u00e3o Descri\u00e7\u00e3o Vantagens Desvantagens A Poetry Solu\u00e7\u00e3o can\u00f4nica J\u00e1 tentado e falhou B pip no CI R\u00e1pida, testada Foge do padr\u00e3o C Docker Reprodut\u00edvel Complexo <p>Decis\u00e3o: Op\u00e7\u00e3o B (implementada na FASE 11)</p>"},{"location":"metricas/diagnostico_ci/#impacto","title":"\ud83d\udcc8 Impacto","text":"<ul> <li>12 merges bloqueados consecutivamente</li> <li>Time impedido de avan\u00e7ar por ~24 horas</li> <li>Solu\u00e7\u00e3o implementada em 30 minutos</li> </ul>"},{"location":"metricas/diagnostico_ci/#links-relacionados","title":"\ud83d\udd17 Links Relacionados","text":"<ul> <li>FASE 11 - Solu\u00e7\u00e3o implementada</li> <li>Issue #1 - Migrar para Poetry</li> <li>Commit da solu\u00e7\u00e3o</li> </ul> <sub>Diagn\u00f3stico mantido para refer\u00eancia hist\u00f3rica</sub> <sub>\u2705 Problema resolvido na FASE 11</sub> <p>```</p>"},{"location":"metricas/diagnostico_fase12/","title":"Diagn\u00f3stico: Problemas de Telemetria no TipoDocumento (FASE 12)","text":"**An\u00e1lise detalhada dos 4 testes falhando e inconsist\u00eancia de padr\u00f5es em `tipo_documento.py`**"},{"location":"metricas/diagnostico_fase12/#informacoes-do-diagnostico","title":"\ud83d\udcc5 Informa\u00e7\u00f5es do Diagn\u00f3stico","text":"Item Descri\u00e7\u00e3o Data 19/02/2026 Autor Thiago Ribeiro Fase relacionada FASE 12 Issue principal #3 Arquivo afetado <code>src/domain/value_objects/tipo_documento.py</code> Testes falhando 4 (test_tipo_documento_telemetry.py)"},{"location":"metricas/diagnostico_fase12/#o-que-estava-acontecendo","title":"\ud83d\udd0d O QUE ESTAVA ACONTECENDO","text":""},{"location":"metricas/diagnostico_fase12/#analise-do-problema","title":"An\u00e1lise do Problema","text":"<ol> <li><code>tipo_documento.py</code> tinha um padr\u00e3o de telemetria DIFERENTE dos outros arquivos:</li> <li>Usava <code>try/except ImportError</code> com fallback</li> <li>Tinha decorator <code>@monitor</code></li> <li> <p>N\u00c3O TINHA o padr\u00e3o <code>_telemetry</code> e <code>configure_telemetry</code></p> </li> <li> <p><code>test_tipo_documento_telemetry.py</code> esperava o padr\u00e3o consolidado:</p> </li> <li>Chamava <code>td_module.configure_telemetry()</code></li> <li>Esperava que <code>_telemetry</code> fosse uma vari\u00e1vel global</li> </ol>"},{"location":"metricas/diagnostico_fase12/#comparacao-de-padroes","title":"\ud83d\udcca Compara\u00e7\u00e3o de Padr\u00f5es","text":"Caracter\u00edstica Padr\u00e3o do Projeto <code>tipo_documento.py</code> Vari\u00e1vel <code>_telemetry</code> \u2705 Sim \u274c N\u00e3o Fun\u00e7\u00e3o <code>configure_telemetry</code> \u2705 Sim \u274c N\u00e3o Decorator <code>@monitor</code> \u274c N\u00e3o \u2705 Sim <code>if _telemetry:</code> nos m\u00e9todos \u2705 Sim \u274c N\u00e3o <pre><code># Padr\u00e3o do Projeto\n_telemetry = None\n\ndef configure_telemetry(telemetry_instance=None):\n    global _telemetry\n    _telemetry = telemetry_instance\n\n# No m\u00e9todo:\nif _telemetry:\n    _telemetry.increment(\"...\")\n</code></pre> <pre><code># tipo_documento.py\ntry:\n    from src.infrastructure.telemetry import monitor as telemetry_monitor\n    TELEMETRY_AVAILABLE = True\n    monitor = telemetry_monitor\nexcept ImportError:\n    TELEMETRY_AVAILABLE = False\n    def monitor(name: Optional[str] = None) -&gt; Callable:\n        def decorator(func: Callable) -&gt; Callable:\n            return func\n        return decorator\n</code></pre>"},{"location":"metricas/diagnostico_fase12/#consequencia","title":"\ud83d\udd34 Consequ\u00eancia","text":""},{"location":"metricas/diagnostico_fase12/#e-attributeerror-module-srcdomainvalue_objectstipo_documento-has-no-attribute-configure_telemetry","title":"<pre><code>E   AttributeError: module 'src.domain.value_objects.tipo_documento' has no attribute 'configure_telemetry'\n</code></pre>","text":""},{"location":"metricas/diagnostico_fase12/#estado-atual-do-diagnostico","title":"\ud83d\udcca Estado Atual do Diagn\u00f3stico","text":"<pre><code>\ud83d\udcc1 ARQUIVO: src/domain/value_objects/tipo_documento.py\n\ud83d\udd34 TESTES FALHANDO: 4 (todos de telemetria)\n\ud83d\udcc8 COBERTURA: 83%\n\ud83c\udfaf META: 45% (j\u00e1 ultrapassada)\n</code></pre>"},{"location":"metricas/diagnostico_fase12/#causa-raiz","title":"\ud83d\udd2c Causa Raiz","text":"<p>O arquivo <code>tipo_documento.py</code> nunca foi atualizado para seguir o padr\u00e3o de telemetria consolidado nas fases anteriores (FASE 5, FASE 8).</p>"},{"location":"metricas/diagnostico_fase12/#solucao-aplicada","title":"\u2705 Solu\u00e7\u00e3o Aplicada","text":"<p>A corre\u00e7\u00e3o foi implementada na FASE 12, substituindo o padr\u00e3o antigo pelo consolidado:</p> <ol> <li>Removido decorator <code>@monitor</code></li> <li>Adicionada vari\u00e1vel global <code>_telemetry</code></li> <li>Adicionada fun\u00e7\u00e3o <code>configure_telemetry()</code></li> <li>Adicionadas verifica\u00e7\u00f5es <code>if _telemetry:</code> nos m\u00e9todos</li> </ol>"},{"location":"metricas/diagnostico_fase12/#resultado","title":"\ud83d\udcc8 Resultado","text":"<p>Ap\u00f3s a corre\u00e7\u00e3o: - \u2705 4 testes de telemetria passando - \u2705 Cobertura mantida em 83% - \u2705 Padr\u00e3o unificado com o resto do projeto</p>"},{"location":"metricas/diagnostico_fase12/#links-relacionados","title":"\ud83d\udd17 Links Relacionados","text":"<ul> <li>FASE 12 - Implementa\u00e7\u00e3o da corre\u00e7\u00e3o</li> <li>Commit da corre\u00e7\u00e3o (exemplo - ajustar hash real)</li> <li>Issue #3 - FASE 17</li> </ul> <sub>Diagn\u00f3stico mantido para refer\u00eancia hist\u00f3rica</sub> <sub>\u2705 Problema resolvido na FASE 12</sub>"},{"location":"planejamento/TEMPLATE_FASE/","title":"TEMPLATE OFICIAL - DOCUMENTA\u00c7\u00c3O DE FASES","text":"**Este documento define a estrutura padr\u00e3o para todas as FASE*.md do projeto**"},{"location":"planejamento/TEMPLATE_FASE/#estrutura-obrigatoria","title":"\ud83d\udcc5 Estrutura Obrigat\u00f3ria","text":"<p>Toda FASE*.md DEVE conter as seguintes se\u00e7\u00f5es nesta ordem:</p>"},{"location":"planejamento/TEMPLATE_FASE/#fase-x-titulo-descritivo","title":"FASE X - T\u00edtulo Descritivo","text":"**Breve descri\u00e7\u00e3o do escopo e objetivo da fase**"},{"location":"planejamento/TEMPLATE_FASE/#informacoes-da-fase","title":"\ud83d\udcc5 Informa\u00e7\u00f5es da Fase","text":"Item Descri\u00e7\u00e3o Status \u2705 Conclu\u00edda Data de Conclus\u00e3o DD/MM/AAAA Artefatos Lista de arquivos principais Depend\u00eancias Fases relacionadas Issue principal #N Commit principal hash"},{"location":"planejamento/TEMPLATE_FASE/#objetivo","title":"\ud83c\udfaf Objetivo","text":"<p>Descri\u00e7\u00e3o clara do que a fase implementou ou resolveu.</p>"},{"location":"planejamento/TEMPLATE_FASE/#estrutura-criadamodificada","title":"\ud83d\udcc1 Estrutura Criada/Modificada","text":"<pre><code># \u00c1rvore de diret\u00f3rios relevante\n</code></pre>"},{"location":"planejamento/TEMPLATE_FASE/#componentes-implementados","title":"\ud83e\udde9 Componentes Implementados","text":""},{"location":"planejamento/TEMPLATE_FASE/#nome-do-componente","title":"[Nome do Componente]","text":"<p>Responsabilidade: O que faz</p> <pre><code># Exemplo de c\u00f3digo\n</code></pre>"},{"location":"planejamento/TEMPLATE_FASE/#testes","title":"\ud83e\uddea Testes","text":""},{"location":"planejamento/TEMPLATE_FASE/#testes-de-logica","title":"Testes de L\u00f3gica","text":"<p>Lista de testes criados/modificados</p>"},{"location":"planejamento/TEMPLATE_FASE/#testes-de-telemetria","title":"Testes de Telemetria","text":"<p>Lista de testes de telemetria</p> <p>Resultados: <pre><code># Comando e sa\u00edda esperada\n</code></pre></p>"},{"location":"planejamento/TEMPLATE_FASE/#metricas-da-fase","title":"\ud83d\udcca M\u00e9tricas da Fase","text":"M\u00e9trica Antes Depois Evolu\u00e7\u00e3o"},{"location":"planejamento/TEMPLATE_FASE/#principios-aplicados","title":"\ud83d\udcda Princ\u00edpios Aplicados","text":"Princ\u00edpio Aplica\u00e7\u00e3o"},{"location":"planejamento/TEMPLATE_FASE/#integracao-com-fases","title":"\ud83d\udd17 Integra\u00e7\u00e3o com Fases","text":"Fase Relacionamento"},{"location":"planejamento/TEMPLATE_FASE/#evolucao-do-codigo","title":"\ud83d\udd04 Evolu\u00e7\u00e3o do C\u00f3digo","text":""},{"location":"planejamento/TEMPLATE_FASE/#antes","title":"Antes","text":"<pre><code># C\u00f3digo antes da fase\n</code></pre>"},{"location":"planejamento/TEMPLATE_FASE/#depois","title":"Depois","text":"<pre><code># C\u00f3digo depois da fase\n</code></pre>"},{"location":"planejamento/TEMPLATE_FASE/#licoes-aprendidas","title":"\ud83d\udd0d Li\u00e7\u00f5es Aprendidas","text":"<p>1. 2.</p>"},{"location":"planejamento/TEMPLATE_FASE/#issues-relacionadas","title":"\ud83d\udccb Issues Relacionadas","text":"<ul> <li>#N - Descri\u00e7\u00e3o</li> </ul>"},{"location":"planejamento/TEMPLATE_FASE/#autor","title":"\ud83d\udc64 Autor","text":"<p>Thiago Ribeiro - Projeto de TCC</p> <sub>FASE X conclu\u00edda em DD/MM/AAAA</sub> <p>```</p>"},{"location":"planejamento/plano_issue2_revisao_documentacao/","title":"Plano da Issue 2","text":""},{"location":"planejamento/plano_issue2_revisao_documentacao/#plano-perfeito-vamos-seguir-o-fluxo-que-criamos-hoje","title":"\u2705 PLANO PERFEITO! Vamos seguir o fluxo que criamos hoje.","text":""},{"location":"planejamento/plano_issue2_revisao_documentacao/#1-identificar-a-issue-de-documentacao","title":"1. IDENTIFICAR A ISSUE DE DOCUMENTA\u00c7\u00c3O","text":"<p>Primeiro, vamos descobrir qual \u00e9 a issue que j\u00e1 existe:</p> <pre><code># Listar issues abertas com label de documenta\u00e7\u00e3o\ngh issue list --label \"tipo/documenta\u00e7\u00e3o\"\n\n# Ou listar todas as issues abertas\ngh issue list --state open\n\n# Ou buscar por t\u00edtulo\ngh issue list --state all | grep -i \"doc\"\n</code></pre> <p>Provavelmente \u00e9 a Issue #2 que criamos mais cedo: <pre><code>#2  Revisar documenta\u00e7\u00e3o (.md files)  tipo/documenta\u00e7\u00e3o, prioridade:media\n</code></pre></p>"},{"location":"planejamento/plano_issue2_revisao_documentacao/#2-verificar-o-estado-da-issue","title":"2. VERIFICAR O ESTADO DA ISSUE","text":"<pre><code># Ver detalhes da issue #2\ngh issue view 2\n</code></pre> <p>Deve mostrar algo como: <pre><code>Revisar documenta\u00e7\u00e3o (.md files) #2\n\nRevisar e consolidar arquivos .md em docs/:\n\n[ ] Verificar duplicatas (cobertura.md vs cobertura.md (vers\u00e3o hist\u00f3rica))\n[ ] Atualizar \u00edndices se necess\u00e1rio\n[ ] Garantir que todas as fases est\u00e3o documentadas\n[ ] Fazer merge da branch docs/organizacao ap\u00f3s revis\u00e3o\n</code></pre></p>"},{"location":"planejamento/plano_issue2_revisao_documentacao/#3-atualizar-a-issue-com-as-novas-tarefas","title":"3. ATUALIZAR A ISSUE COM AS NOVAS TAREFAS","text":"<p>Vamos editar a issue para incluir a consolida\u00e7\u00e3o dos 15 novos documentos:</p> <pre><code># Editar a issue #2 com as novas tarefas\ngh issue edit 2 --body \"$(cat &lt;&lt; 'EOF'\n## \ud83c\udfaf Objetivo\nRevisar e consolidar toda a documenta\u00e7\u00e3o do projeto.\n\n## \ud83d\udccb Tarefas\n\n### Documenta\u00e7\u00e3o Existente (docs/)\n- [ ] Verificar duplicatas (cobertura.md vs cobertura.md (vers\u00e3o hist\u00f3rica))\n- [ ] Garantir que todas as FASE*.md est\u00e3o atualizadas\n- [ ] Padronizar formata\u00e7\u00e3o entre todos os arquivos\n- [ ] Verificar links internos\n\n### Novos Documentos (15 arquivos)\nOs seguintes documentos foram criados e precisam ser revisados:\n\n#### Flows de Processo\n- [ ] git_flow.md\n- [ ] quality_flow.md\n- [ ] telemetry_flow.md\n- [ ] code_review_flow.md\n- [ ] dependencies_flow.md\n- [ ] debug_flow.md\n- [ ] documentation_flow.md\n- [ ] refactoring_flow.md\n- [ ] emergency_flow.md\n\n#### Documentos de Projeto\n- [ ] analise_arquitetural.md\n- [ ] visao_do_projeto.md\n- [ ] roadmap_arquitetural.md\n- [ ] plano_issues_documentacao.md\n- [ ] manual_gestao.md\n- [ ] questionario_levantamento_requisitos.md\n\n### Organiza\u00e7\u00e3o\n- [ ] Decidir local apropriado para cada documento\n- [ ] Atualizar mkdocs.yml para incluir novos documentos\n- [ ] Criar \u00edndice/navega\u00e7\u00e3o entre documentos\n- [ ] Fazer merge da branch docs/organizacao\n\n### Revis\u00e3o Final\n- [ ] Verificar consist\u00eancia entre documentos\n- [ ] Garantir que n\u00e3o h\u00e1 informa\u00e7\u00f5es contradit\u00f3rias\n- [ ] Atualizar README.md com links para nova documenta\u00e7\u00e3o\n\n## \ud83d\udcca Defini\u00e7\u00e3o de Pronto\n- [ ] Todos os arquivos revisados\n- [ ] Documentos organizados em local adequado\n- [ ] mkdocs.yml atualizado\n- [ ] Site de documenta\u00e7\u00e3o publicado\n- [ ] Issue fechada\n\n## \u23f1\ufe0f Estimativa: 4-6 horas\nEOF\n)\" --add-label \"prioridade:alta\"\n</code></pre>"},{"location":"planejamento/plano_issue2_revisao_documentacao/#4-mover-issue-para-em-andamento-no-kanban","title":"4. MOVER ISSUE PARA \"EM ANDAMENTO\" NO KANBAN","text":"<pre><code># Adicionar ao project se ainda n\u00e3o estiver\ngh project item-add 2 --owner rib-thiago --url https://github.com/rib-thiago/showtrials-tcc/issues/2\n\n# No site, arraste a issue #2 para \"In Progress\"\n</code></pre> <p>Acesse: <code>https://github.com/users/rib-thiago/projects/1</code></p>"},{"location":"planejamento/plano_issue2_revisao_documentacao/#5-criar-branch-para-a-documentacao","title":"5. CRIAR BRANCH PARA A DOCUMENTA\u00c7\u00c3O","text":"<pre><code># Criar branch seguindo o padr\u00e3o\ngit checkout -b docs/organizacao-final\n\n# Ou se a branch docs/organizacao j\u00e1 existe, atualize-a\ngit checkout docs/organizacao\ngit pull origin main\n</code></pre>"},{"location":"planejamento/plano_issue2_revisao_documentacao/#6-organizar-os-documentos","title":"6. ORGANIZAR OS DOCUMENTOS","text":"<p>Proponho a seguinte estrutura:</p> <pre><code># Criar subpastas para organiza\u00e7\u00e3o\nmkdir -p docs/flows\nmkdir -p docs/projeto\nmkdir -p docs/fases\n\n# Mover os flows\nmv git_flow.md quality_flow.md telemetry_flow.md code_review_flow.md \\\n   dependencies_flow.md debug_flow.md documentation_flow.md \\\n   refactoring_flow.md emergency_flow.md docs/flows/\n\n# Mover documentos de projeto\nmv analise_arquitetural.md visao_do_projeto.md roadmap_arquitetural.md \\\n   plano_issues_documentacao.md manual_gestao.md \\\n   questionario_levantamento_requisitos.md docs/projeto/\n\n# As FASE*.md j\u00e1 est\u00e3o em docs/, mas podemos deixar l\u00e1\n# ou mover para docs/fases/ se preferir\n</code></pre>"},{"location":"planejamento/plano_issue2_revisao_documentacao/#7-atualizar-o-mkdocsyml","title":"7. ATUALIZAR O MKdocs.yml","text":"<pre><code># Adicione no mkdocs.yml\nnav:\n  - In\u00edcio: index.md\n  - Vis\u00e3o Geral: overview.md\n  - Arquitetura: ARCHITECTURE.md\n\n  - Fases do Projeto:\n    - FASE 1 - Domain: fases/FASE1_DOMAIN.md\n    - FASE 2 - Application: fases/FASE2_APPLICATION.md\n    # ... todas as fases\n    - FASE 16 - ListarDocumentos: fases/FASE16_LISTAR_DOCUMENTOS.md\n\n  - Flows de Trabalho:\n    - Git Flow: flows/git_flow.md\n    - Quality Flow: flows/quality_flow.md\n    - Telemetry Flow: flows/telemetry_flow.md\n    - Code Review Flow: flows/code_review_flow.md\n    - Dependencies Flow: flows/dependencies_flow.md\n    - Debug Flow: flows/debug_flow.md\n    - Documentation Flow: flows/documentation_flow.md\n    - Refactoring Flow: flows/refactoring_flow.md\n    - Emergency Flow: flows/emergency_flow.md\n\n  - Documentos do Projeto:\n    - Vis\u00e3o do Projeto: projeto/visao_do_projeto.md\n    - An\u00e1lise Arquitetural: projeto/analise_arquitetural.md\n    - Roadmap Arquitetural: projeto/roadmap_arquitetural.md\n    - Plano de Issues: projeto/plano_issues_documentacao.md\n    - Manual de Gest\u00e3o: projeto/manual_gestao.md\n    - Question\u00e1rio: projeto/questionario_levantamento_requisitos.md\n\n  - Como Contribuir: contributing.md\n  - Changelog: changelog.md\n</code></pre>"},{"location":"planejamento/plano_issue2_revisao_documentacao/#8-testar-localmente","title":"8. TESTAR LOCALMENTE","text":"<pre><code># Verificar se tudo funciona\ntask docs\n# Acesse http://127.0.0.1:8000\n</code></pre>"},{"location":"planejamento/plano_issue2_revisao_documentacao/#9-commit-e-push","title":"9. COMMIT E PUSH","text":"<pre><code># Adicionar tudo\ngit add docs/\ngit add mkdocs.yml\n\n# Commit com refer\u00eancia \u00e0 issue\ngit commit -m \"docs: organiza documenta\u00e7\u00e3o do projeto\n\n- Move 9 flows para docs/flows/\n- Move 6 documentos de projeto para docs/projeto/\n- Atualiza mkdocs.yml com nova estrutura\n- Padroniza formata\u00e7\u00e3o dos documentos\n\nCloses #2\"\n\n# Push\ngit push origin docs/organizacao-final\n</code></pre>"},{"location":"planejamento/plano_issue2_revisao_documentacao/#10-verificar-ci-e-merge","title":"10. VERIFICAR CI E MERGE","text":"<pre><code># Acompanhar CI\ngh run watch\n\n# Ap\u00f3s CI passar, fazer merge\ngit checkout main\ngit pull origin main\ngit merge --ff-only docs/organizacao-final\ngit push origin main\n</code></pre>"},{"location":"planejamento/plano_issue2_revisao_documentacao/#11-publicar-documentacao","title":"11. PUBLICAR DOCUMENTA\u00c7\u00c3O","text":"<pre><code># Publicar site atualizado\npoetry run mkdocs gh-deploy\n</code></pre>"},{"location":"planejamento/plano_issue2_revisao_documentacao/#12-mover-issue-para-done-no-kanban","title":"12. MOVER ISSUE PARA \"DONE\" NO KANBAN","text":"<p>Acesse o project e arraste a issue #2 para \"Done\".</p>"},{"location":"planejamento/plano_issue2_revisao_documentacao/#checklist-resumido","title":"\ud83d\udccb CHECKLIST RESUMIDO","text":"<pre><code>## \u2705 Checklist da Issue #2\n\n### Prepara\u00e7\u00e3o\n[ ] Verificar issue #2 no GitHub\n[ ] Atualizar descri\u00e7\u00e3o com novas tarefas\n[ ] Mover issue para \"In Progress\" no Kanban\n[ ] Criar/atualizar branch `docs/organizacao-final`\n\n### Organiza\u00e7\u00e3o\n[ ] Mover flows para `docs/flows/`\n[ ] Mover docs de projeto para `docs/projeto/`\n[ ] Decidir sobre FASE*.md (manter em docs/ ou mover)\n[ ] Atualizar `mkdocs.yml`\n\n### Revis\u00e3o\n[ ] Verificar links internos\n[ ] Verificar formata\u00e7\u00e3o\n[ ] Testar localmente com `task docs`\n\n### Finaliza\u00e7\u00e3o\n[ ] Commit com \"Closes #2\"\n[ ] Push\n[ ] CI verde\n[ ] Merge\n[ ] Publicar documenta\u00e7\u00e3o\n[ ] Mover issue para \"Done\"\n</code></pre>"},{"location":"planejamento/plano_issue2_revisao_documentacao/#plano-da-issue-2-documentacao","title":"\ud83d\udcda PLANO DA ISSUE #2 - Documenta\u00e7\u00e3o","text":"<p>Nome do arquivo sugerido: <code>plano_issue2_revisao_documentacao.md</code></p>"},{"location":"planejamento/plano_issue2_revisao_documentacao/#etapa-1-atualizar-a-issue-com-as-novas-tarefas","title":"\ud83d\udccb ETAPA 1: ATUALIZAR A ISSUE COM AS NOVAS TAREFAS","text":"<pre><code># Editar a issue #2 com o corpo completo\ngh issue edit 2 --body \"$(cat &lt;&lt; 'EOF'\n## \ud83c\udfaf Objetivo\nRevisar e consolidar toda a documenta\u00e7\u00e3o do projeto, incluindo os 15 novos artefatos criados.\n\n## \ud83d\udccb Tarefas\n\n### 1. Documenta\u00e7\u00e3o Existente (docs/)\n- [ ] Verificar duplicatas (cobertura.md vs cobertura.md (vers\u00e3o hist\u00f3rica))\n- [ ] Garantir que todas as FASE*.md est\u00e3o atualizadas\n- [ ] Padronizar formata\u00e7\u00e3o entre todos os arquivos\n- [ ] Verificar links internos\n\n### 2. Novos Documentos (15 arquivos)\nOs seguintes documentos precisam ser revisados e integrados:\n\n#### Flows de Processo\n- [ ] git_flow.md\n- [ ] quality_flow.md\n- [ ] telemetry_flow.md\n- [ ] code_review_flow.md\n- [ ] dependencies_flow.md\n- [ ] debug_flow.md\n- [ ] documentation_flow.md\n- [ ] refactoring_flow.md\n- [ ] emergency_flow.md\n\n#### Documentos de Projeto\n- [ ] analise_arquitetural.md\n- [ ] visao_do_projeto.md\n- [ ] roadmap_arquitetural.md\n- [ ] plano_issues_documentacao.md\n- [ ] manual_gestao.md\n- [ ] questionario_levantamento_requisitos.md\n\n### 3. Organiza\u00e7\u00e3o\n- [ ] Criar estrutura de pastas: `docs/flows/` e `docs/projeto/`\n- [ ] Mover cada documento para seu local apropriado\n- [ ] Atualizar `mkdocs.yml` com nova estrutura\n- [ ] Criar \u00edndice/navega\u00e7\u00e3o entre documentos\n\n### 4. Branch e Merge\n- [ ] Criar branch `docs/organizacao-final`\n- [ ] Mover issue para \"In Progress\" no Kanban\n- [ ] Commit das altera\u00e7\u00f5es com \"Closes #2\"\n- [ ] Push e CI\n- [ ] Merge na main\n- [ ] Publicar documenta\u00e7\u00e3o com `mkdocs gh-deploy`\n\n### 5. Revis\u00e3o Final\n- [ ] Verificar consist\u00eancia entre documentos\n- [ ] Garantir que n\u00e3o h\u00e1 informa\u00e7\u00f5es contradit\u00f3rias\n- [ ] Atualizar README.md com links para nova documenta\u00e7\u00e3o\n\n## \ud83d\udcca Defini\u00e7\u00e3o de Pronto\n- [ ] Todos os 15 novos documentos revisados\n- [ ] Documentos organizados em pastas apropriadas\n- [ ] mkdocs.yml atualizado\n- [ ] Site de documenta\u00e7\u00e3o publicado\n- [ ] Issue #2 fechada\n\n## \u23f1\ufe0f Estimativa: 4-6 horas\nEOF\n)\" --add-label \"prioridade:alta\"\n</code></pre>"},{"location":"planejamento/plano_issue2_revisao_documentacao/#etapa-2-mover-issue-para-in-progress","title":"\ud83d\udccb ETAPA 2: MOVER ISSUE PARA \"IN PROGRESS\"","text":"<pre><code># 1. Primeiro, liste seus projects para pegar o ID\ngh project list --owner rib-thiago\n\n# Deve mostrar algo como:\n# NUMBER  TITLE                           STATE  ID\n# 1       @rib-thiago's untitled project  open   PVT_kwHOBE0jLc4BPrP8\n\n# 2. Adicionar a issue ao project (se j\u00e1 n\u00e3o estiver)\ngh project item-add 2 --owner rib-thiago --url https://github.com/rib-thiago/showtrials-tcc/issues/2\n\n# 3. Agora, pelo site, mova a issue para \"In Progress\"\n# Acesse: https://github.com/users/rib-thiago/projects/1\n# Arraste a issue #2 da coluna \"Backlog\" para \"In Progress\"\n</code></pre>"},{"location":"planejamento/plano_issue2_revisao_documentacao/#etapa-3-criar-branch","title":"\ud83d\udccb ETAPA 3: CRIAR BRANCH","text":"<pre><code># Criar branch seguindo o padr\u00e3o de documenta\u00e7\u00e3o\ngit checkout -b docs/organizacao-final\n\n# Verificar se est\u00e1 na branch correta\ngit branch\n# * docs/organizacao-final\n#   main\n</code></pre>"},{"location":"planejamento/plano_issue2_revisao_documentacao/#etapa-4-criar-estrutura-de-pastas","title":"\ud83d\udccb ETAPA 4: CRIAR ESTRUTURA DE PASTAS","text":"<pre><code># Criar subpastas para organiza\u00e7\u00e3o\nmkdir -p docs/flows\nmkdir -p docs/projeto\n\n# Verificar se as pastas foram criadas\nls -la docs/\n# Deve mostrar: flows/ projeto/\n</code></pre>"},{"location":"planejamento/plano_issue2_revisao_documentacao/#proximos-passos-apos-estas-etapas","title":"\ud83d\udccb PR\u00d3XIMOS PASSOS (AP\u00d3S ESTAS ETAPAS)","text":"<p>Depois de executar esses comandos, me mostre os resultados e seguiremos com:</p> <p>ETAPA 5: Upload dos 15 arquivos para voc\u00ea analisar ETAPA 6: Revis\u00e3o e organiza\u00e7\u00e3o propriamente dita ETAPA 7: Atualiza\u00e7\u00e3o do mkdocs.yml ETAPA 8: Commit e finaliza\u00e7\u00e3o</p>"},{"location":"planejamento/plano_issue2_revisao_documentacao/#resumo-do-que-vamos-fazer-agora","title":"\ud83d\udcca RESUMO DO QUE VAMOS FAZER AGORA","text":"Passo Comando Status 1 Atualizar issue #2 \u23f3 2 Mover para \"In Progress\" \u23f3 3 Criar branch <code>docs/organizacao-final</code> \u23f3 4 Criar pastas <code>docs/flows/</code> e <code>docs/projeto/</code> \u23f3 <p>Pode executar esses passos e me mostrar o resultado? \ud83d\ude80</p>"},{"location":"projeto/analise_arquitetural/","title":"An\u00e1lise Arquitetural","text":""},{"location":"projeto/analise_arquitetural/#analise-arquitetural-showtrials-como-plataforma","title":"\ud83d\udcda AN\u00c1LISE ARQUITETURAL - SHOWTRIALS COMO PLATAFORMA","text":"**Preservando os pontos fortes enquanto expandimos o escopo**"},{"location":"projeto/analise_arquitetural/#voce-esta-absolutamente-certo","title":"\ud83c\udfaf VOC\u00ca EST\u00c1 ABSOLUTAMENTE CERTO","text":"<p>O ponto mais elogiado do seu projeto \u00e9 a arquitetura limpa. N\u00e3o podemos perder isso. A pergunta certa \u00e9:</p> <p>\"Como expandir o escopo SEM violar os princ\u00edpios que tornaram o projeto excelente?\"</p>"},{"location":"projeto/analise_arquitetural/#revisao-nossa-arquitetura-atual","title":"\ud83c\udfdb\ufe0f REVIS\u00c3O: NOSSA ARQUITETURA ATUAL","text":"<pre><code>graph TD\n    subgraph \"INTERFACE LAYER\"\n        CLI[CLI]\n        WEB[Web App]\n    end\n\n    subgraph \"APPLICATION LAYER\"\n        UC1[ListarDocumentos]\n        UC2[ExportarDocumento]\n        UC3[AnalisarTexto]\n        UC[...]\n    end\n\n    subgraph \"DOMAIN LAYER\"\n        ENT[Entidades]\n        VO[Value Objects]\n        INT[Interfaces]\n    end\n\n    subgraph \"INFRASTRUCTURE LAYER\"\n        REP[Reposit\u00f3rios SQLite]\n        EXT[Servi\u00e7os Externos]\n        REG[Service Registry]\n    end\n\n    CLI --&gt; UC1\n    WEB --&gt; UC1\n    UC1 --&gt; INT\n    INT --&gt; REP\n    UC2 --&gt; EXT\n    EXT --&gt; REG\n</code></pre>"},{"location":"projeto/analise_arquitetural/#o-que-torna-essa-arquitetura-forte","title":"O que torna essa arquitetura forte:","text":"Princ\u00edpio Implementa\u00e7\u00e3o Depend\u00eancia invertida Casos de uso dependem de interfaces, n\u00e3o de implementa\u00e7\u00f5es Dom\u00ednio puro Nenhum import de frameworks no domain layer Testabilidade Cada camada pode ser testada isoladamente Service Registry Lazy loading, configura\u00e7\u00e3o centralizada Separa\u00e7\u00e3o clara Responsabilidades bem definidas"},{"location":"projeto/analise_arquitetural/#o-que-muda-com-a-visao-de-plataforma","title":"\ud83d\udd04 O QUE MUDA COM A VIS\u00c3O DE PLATAFORMA?","text":""},{"location":"projeto/analise_arquitetural/#hoje-especifico","title":"Hoje (Espec\u00edfico)","text":"<pre><code>Fonte: Fixa (showtrials.ru)\nProcessadores: Fixos (classificador espec\u00edfico)\nEntidades: Fixas (nomes russos)\nPipeline: Fixo (coleta \u2192 classifica \u2192 traduz \u2192 analisa)\n</code></pre>"},{"location":"projeto/analise_arquitetural/#amanha-plataforma","title":"Amanh\u00e3 (Plataforma)","text":"<pre><code>Fonte: Configur\u00e1vel (web, pdf, pasta, api)\nProcessadores: Selecion\u00e1veis (classificador, extrator, tradutor)\nEntidades: Gen\u00e9ricas (PERSON, ORG, LOC, DATE)\nPipeline: Customiz\u00e1vel (usu\u00e1rio escolhe ordem)\n</code></pre>"},{"location":"projeto/analise_arquitetural/#arquitetura-proposta-para-a-plataforma","title":"\ud83c\udfd7\ufe0f ARQUITETURA PROPOSTA PARA A PLATAFORMA","text":"<pre><code>graph TD\n    subgraph \"CONFIGURATION\"\n        Config[Config YAML/JSON] --&gt; PipelineDef[Pipeline Definition]\n        PipelineDef --&gt; Steps[Sequ\u00eancia de Steps]\n    end\n\n    subgraph \"INTERFACE LAYER\"\n        CLI[CLI]\n        WEB[Web App]\n        API[API REST]\n    end\n\n    subgraph \"APPLICATION LAYER\"\n        Orchestrator[Pipeline Orchestrator]\n        UC1[Step Executor]\n        UC2[Config Loader]\n        UC3[Result Aggregator]\n    end\n\n    subgraph \"DOMAIN LAYER - NOVO\"\n        Pipeline[Pipeline Entity]\n        Step[Step Entity]\n        Source[Source Interface]\n        Processor[Processor Interface]\n        Exporter[Exporter Interface]\n    end\n\n    subgraph \"INFRASTRUCTURE LAYER\"\n        SQLite[SQLite Repositories]\n        PluginManager[Plugin Manager]\n\n        subgraph \"PLUGINS\"\n            WebSource[Web Source Plugin]\n            PDFSource[PDF Source Plugin]\n            OCRSource[OCR Source Plugin]\n\n            Classifier[Classifier Plugin]\n            NER[NER Plugin]\n            Translator[Translator Plugin]\n\n            CSVExporter[CSV Exporter]\n            JSONExporter[JSON Exporter]\n        end\n    end\n\n    CLI --&gt; Orchestrator\n    WEB --&gt; Orchestrator\n    API --&gt; Orchestrator\n\n    Orchestrator --&gt; UC1\n    Orchestrator --&gt; Config\n\n    UC1 --&gt; Pipeline\n    Pipeline --&gt; Step\n    Step --&gt; Source\n    Step --&gt; Processor\n    Step --&gt; Exporter\n\n    Source --&gt; PluginManager\n    Processor --&gt; PluginManager\n    Exporter --&gt; PluginManager\n\n    PluginManager --&gt; WebSource\n    PluginManager --&gt; PDFSource\n    PluginManager --&gt; Classifier\n    PluginManager --&gt; NER\n    PluginManager --&gt; CSVExporter\n</code></pre>"},{"location":"projeto/analise_arquitetural/#novas-entidades-de-dominio","title":"\ud83d\udce6 NOVAS ENTIDADES DE DOM\u00cdNIO","text":""},{"location":"projeto/analise_arquitetural/#1-pipeline-entidade","title":"1. Pipeline (Entidade)","text":"<pre><code># src/domain/entities/pipeline.py\n@dataclass\nclass Pipeline:\n    \"\"\"Representa um pipeline de processamento configurado pelo usu\u00e1rio.\"\"\"\n\n    id: Optional[int]\n    nome: str\n    descricao: Optional[str]\n    steps: List[PipelineStep]\n    created_at: datetime\n    updated_at: datetime\n\n    def executar(self, contexto: Dict) -&gt; Dict:\n        \"\"\"Orquestra a execu\u00e7\u00e3o dos steps em ordem.\"\"\"\n        resultado = {}\n        for step in self.steps:\n            resultado = step.processar(contexto, resultado)\n        return resultado\n</code></pre>"},{"location":"projeto/analise_arquitetural/#2-pipelinestep-value-object","title":"2. PipelineStep (Value Object)","text":"<pre><code># src/domain/value_objects/pipeline_step.py\n@dataclass\nclass PipelineStep:\n    \"\"\"Um passo individual no pipeline.\"\"\"\n\n    ordem: int\n    tipo: str  # 'source', 'processor', 'exporter'\n    plugin: str  # nome do plugin a ser usado\n    config: Dict  # configura\u00e7\u00e3o espec\u00edfica do passo\n\n    def processar(self, contexto: Dict, resultado_anterior: Dict) -&gt; Dict:\n        \"\"\"Executa este passo.\"\"\"\n        # l\u00f3gica ser\u00e1 implementada pelos plugins\n        pass\n</code></pre>"},{"location":"projeto/analise_arquitetural/#3-interfaces-para-plugins","title":"3. Interfaces para Plugins","text":"<pre><code># src/domain/interfaces/plugin.py\nclass SourcePlugin(ABC):\n    \"\"\"Interface para plugins de fonte de dados.\"\"\"\n\n    @abstractmethod\n    def nome(self) -&gt; str:\n        \"\"\"Nome \u00fanico do plugin.\"\"\"\n        pass\n\n    @abstractmethod\n    def descricao(self) -&gt; str:\n        \"\"\"Descri\u00e7\u00e3o para interface do usu\u00e1rio.\"\"\"\n        pass\n\n    @abstractmethod\n    def config_schema(self) -&gt; Dict:\n        \"\"\"Schema JSON para valida\u00e7\u00e3o da configura\u00e7\u00e3o.\"\"\"\n        pass\n\n    @abstractmethod\n    def coletar(self, config: Dict) -&gt; List[Documento]:\n        \"\"\"Coleta documentos conforme configura\u00e7\u00e3o.\"\"\"\n        pass\n\nclass ProcessorPlugin(ABC):\n    \"\"\"Interface para plugins de processamento.\"\"\"\n\n    @abstractmethod\n    def processar(self, documento: Documento, config: Dict) -&gt; Documento:\n        \"\"\"Processa um documento.\"\"\"\n        pass\n\nclass ExporterPlugin(ABC):\n    \"\"\"Interface para plugins de exporta\u00e7\u00e3o.\"\"\"\n\n    @abstractmethod\n    def exportar(self, documentos: List[Documento], config: Dict) -&gt; str:\n        \"\"\"Exporta documentos para formato espec\u00edfico.\"\"\"\n        pass\n</code></pre>"},{"location":"projeto/analise_arquitetural/#como-isso-se-integra-com-nossa-arquitetura-atual","title":"\ud83d\udd27 COMO ISSO SE INTEGRA COM NOSSA ARQUITETURA ATUAL","text":""},{"location":"projeto/analise_arquitetural/#camada-de-dominio-novo","title":"Camada de Dom\u00ednio (NOVO)","text":"<pre><code># src/domain/ - NOVOS ARQUIVOS\n\u251c\u2500\u2500 entities/\n\u2502   \u251c\u2500\u2500 pipeline.py        # NOVO\n\u2502   \u2514\u2500\u2500 documento.py       # EXISTENTE (adaptado)\n\u251c\u2500\u2500 value_objects/\n\u2502   \u251c\u2500\u2500 pipeline_step.py    # NOVO\n\u2502   \u2514\u2500\u2500 tipo_documento.py   # EXISTENTE\n\u2514\u2500\u2500 interfaces/\n    \u251c\u2500\u2500 plugin.py           # NOVO\n    \u251c\u2500\u2500 repositories.py     # EXISTENTE\n    \u2514\u2500\u2500 repositorio_traducao.py  # EXISTENTE\n</code></pre>"},{"location":"projeto/analise_arquitetural/#camada-de-aplicacao-adaptada","title":"Camada de Aplica\u00e7\u00e3o (ADAPTADA)","text":"<pre><code># src/application/use_cases/\n\u251c\u2500\u2500 pipeline/\n\u2502   \u251c\u2500\u2500 executar_pipeline.py    # NOVO (orquestrador)\n\u2502   \u251c\u2500\u2500 criar_pipeline.py       # NOVO\n\u2502   \u251c\u2500\u2500 listar_pipelines.py     # NOVO\n\u2502   \u2514\u2500\u2500 ...\n\u251c\u2500\u2500 documentos/\n\u2502   \u251c\u2500\u2500 listar_documentos.py    # EXISTENTE\n\u2502   \u251c\u2500\u2500 exportar_documento.py   # EXISTENTE (vira um plugin)\n\u2502   \u2514\u2500\u2500 ...\n\u2514\u2500\u2500 analise/\n    \u251c\u2500\u2500 analisar_texto.py       # EXISTENTE (vira um plugin)\n    \u2514\u2500\u2500 ...\n</code></pre>"},{"location":"projeto/analise_arquitetural/#camada-de-infraestrutura-estendida","title":"Camada de Infraestrutura (ESTENDIDA)","text":"<pre><code># src/infrastructure/\n\u251c\u2500\u2500 plugins/                     # NOVA PASTA\n\u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u251c\u2500\u2500 manager.py              # Gerenciador de plugins\n\u2502   \u251c\u2500\u2500 sources/\n\u2502   \u2502   \u251c\u2500\u2500 web_source.py       # NOVO (baseado no scraper atual)\n\u2502   \u2502   \u251c\u2500\u2500 pdf_source.py       # NOVO\n\u2502   \u2502   \u2514\u2500\u2500 folder_source.py    # NOVO\n\u2502   \u251c\u2500\u2500 processors/\n\u2502   \u2502   \u251c\u2500\u2500 classifier.py       # ADAPTADO (classificador atual)\n\u2502   \u2502   \u251c\u2500\u2500 ner.py              # ADAPTADO (spacy)\n\u2502   \u2502   \u2514\u2500\u2500 translator.py       # ADAPTADO (google translate)\n\u2502   \u2514\u2500\u2500 exporters/\n\u2502       \u251c\u2500\u2500 csv_exporter.py     # NOVO\n\u2502       \u251c\u2500\u2500 json_exporter.py    # NOVO\n\u2502       \u2514\u2500\u2500 txt_exporter.py     # EXISTENTE (vira plugin)\n\u251c\u2500\u2500 persistence/                 # EXISTENTE\n\u2514\u2500\u2500 config/                      # EXISTENTE\n</code></pre>"},{"location":"projeto/analise_arquitetural/#exemplo-de-pipeline-configurado","title":"\ud83d\udccb EXEMPLO DE PIPELINE CONFIGURADO","text":""},{"location":"projeto/analise_arquitetural/#configuracao-yaml","title":"Configura\u00e7\u00e3o YAML","text":"<pre><code>nome: \"Processo ShowTrials\"\ndescricao: \"Pipeline original do TCC\"\n\nsteps:\n  - ordem: 1\n    tipo: source\n    plugin: web_scraper\n    config:\n      url: \"http://showtrials.ru\"\n      pagination: true\n      selector_titulo: \"h1\"\n      selector_texto: \".content\"\n\n  - ordem: 2\n    tipo: processor\n    plugin: classificador_showtrials\n    config:\n      mapping:\n        \"\u041f\u0440\u043e\u0442\u043e\u043a\u043e\u043b \u0434\u043e\u043f\u0440\u043e\u0441\u0430\": \"interrogatorio\"\n        \"\u041f\u0438\u0441\u044c\u043c\u043e\": \"carta\"\n\n  - ordem: 3\n    tipo: processor\n    plugin: extrator_pessoas\n    config:\n      modelo: \"ru_core_news_sm\"\n\n  - ordem: 4\n    tipo: processor\n    plugin: tradutor\n    config:\n      destino: \"pt\"\n      api: \"google\"\n\n  - ordem: 5\n    tipo: exporter\n    plugin: sqlite\n    config:\n      banco: \"resultados.db\"\n\n  - ordem: 6\n    tipo: exporter\n    plugin: csv\n    config:\n      arquivo: \"analise.csv\"\n      colunas: [\"id\", \"titulo\", \"tipo\", \"pessoas\"]\n</code></pre>"},{"location":"projeto/analise_arquitetural/#pipeline-customizado-para-outro-dominio","title":"Pipeline Customizado para Outro Dom\u00ednio","text":"<pre><code>nome: \"An\u00e1lise de Discursos Pol\u00edticos\"\nsteps:\n  - ordem: 1\n    plugin: pdf_source\n    config:\n      pasta: \"./discursos/\"\n\n  - ordem: 2\n    plugin: extrator_entidades\n    config:\n      tipos: [\"PERSON\", \"ORG\", \"GPE\"]\n\n  - ordem: 3\n    plugin: analise_sentimento\n    config:\n      idioma: \"pt\"\n\n  - ordem: 4\n    plugin: json_exporter\n</code></pre>"},{"location":"projeto/analise_arquitetural/#o-que-permanece-igual-nossos-pontos-fortes","title":"\ud83c\udfc6 O QUE PERMANECE IGUAL (NOSSOS PONTOS FORTES)","text":"Caracter\u00edstica Permanece Como Clean Architecture \u2705 Camadas continuam separadas Domain puro \u2705 Entidades de pipeline tamb\u00e9m s\u00e3o puras Testabilidade \u2705 Cada plugin test\u00e1vel isoladamente Service Registry \u2705 Plugins registrados via registry Inje\u00e7\u00e3o de depend\u00eancia \u2705 Plugins injetados nos casos de uso CLI existente \u2705 Continua funcionando para pipeline fixo Web existente \u2705 Continua funcionando"},{"location":"projeto/analise_arquitetural/#o-que-muda-nossas-extensoes","title":"\ud83c\udd95 O QUE MUDA (NOSSAS EXTENS\u00d5ES)","text":"Mudan\u00e7a Impacto Benef\u00edcio Plugins Arquitetura extens\u00edvel Qualquer fonte/processador pode ser adicionado Pipeline como entidade Dom\u00ednio enriquecido Usu\u00e1rio pode salvar e reutilizar configura\u00e7\u00f5es Configura\u00e7\u00e3o YAML Interface declarativa Reprodutibilidade e compartilhamento Plugin Manager Nova infraestrutura Descoberta autom\u00e1tica de plugins Casos de uso de pipeline Application layer estendida Orquestra\u00e7\u00e3o flex\u00edvel"},{"location":"projeto/analise_arquitetural/#comparacao-antes-e-depois","title":"\ud83d\udcca COMPARA\u00c7\u00c3O: ANTES E DEPOIS","text":"Aspecto Antes (Espec\u00edfico) Depois (Plataforma) Fontes Fixa (web) M\u00faltiplas (web, pdf, pasta, api) Processadores Fixos Plugins selecion\u00e1veis Pipeline Hard-coded Configur\u00e1vel via YAML Entidades Fixas (nomes russos) Gen\u00e9ricas (PERSON, ORG, etc.) Exporta\u00e7\u00e3o TXT, SQLite Qualquer plugin (CSV, JSON, etc.) Complexidade M\u00e9dia Maior, mas bem organizada Reuso Baixo Alto (plugins podem ser compartilhados)"},{"location":"projeto/analise_arquitetural/#impacto-no-codigo-existente","title":"\ud83c\udfaf IMPACTO NO C\u00d3DIGO EXISTENTE","text":""},{"location":"projeto/analise_arquitetural/#o-que-vira-plugin","title":"O que vira plugin:","text":"<pre><code># EXISTENTE: src/application/use_cases/exportar_documento.py\n# NOVO: src/infrastructure/plugins/exporters/txt_exporter.py\n\nclass TxtExporterPlugin(ExporterPlugin):\n    def nome(self):\n        return \"txt_exporter\"\n\n    def exportar(self, documentos, config):\n        # l\u00f3gica existente do ExportarDocumento\n        for doc in documentos:\n            with open(f\"{doc.id}.txt\", \"w\") as f:\n                f.write(doc.texto)\n        return \"exportados/\"\n</code></pre>"},{"location":"projeto/analise_arquitetural/#o-que-permanece-como-caso-de-uso","title":"O que permanece como caso de uso:","text":"<pre><code># NOVO: src/application/use_cases/pipeline/executar_pipeline.py\nclass ExecutarPipeline:\n    \"\"\"Caso de uso que orquestra a execu\u00e7\u00e3o de um pipeline.\"\"\"\n\n    def __init__(self, repo_pipeline, plugin_manager):\n        self.repo_pipeline = repo_pipeline\n        self.plugin_manager = plugin_manager\n\n    def executar(self, pipeline_id: int) -&gt; Dict:\n        pipeline = self.repo_pipeline.buscar_por_id(pipeline_id)\n        contexto = {\"inicio\": datetime.now()}\n\n        for step in pipeline.steps:\n            plugin = self.plugin_manager.get(step.plugin)\n            resultado = plugin.processar(contexto, step.config)\n            contexto[step.ordem] = resultado\n\n        return contexto\n</code></pre>"},{"location":"projeto/analise_arquitetural/#perguntas-para-refinarmos","title":"\ud83d\udd0d PERGUNTAS PARA REFINARMOS","text":"<ol> <li> <p>O n\u00edvel de abstra\u00e7\u00e3o atual est\u00e1 bom? (plugins vs casos de uso)</p> </li> <li> <p>Devemos manter os casos de uso espec\u00edficos (ex: ListarDocumentos) para compatibilidade?</p> </li> <li> <p>A interface de plugin est\u00e1 simples o suficiente?</p> </li> <li> <p>Como lidar com estado entre steps? (compartilhamento de dados)</p> </li> <li> <p>Precisamos de versionamento de pipelines?</p> </li> <li> <p>A configura\u00e7\u00e3o YAML \u00e9 suficiente ou precisamos de UI?</p> </li> </ol>"},{"location":"projeto/analise_arquitetural/#proximos-passos-arquiteturais","title":"\ud83d\udcdd PR\u00d3XIMOS PASSOS ARQUITETURAIS","text":"<ol> <li>\u2705 Discutir esta proposta</li> <li>\u2b1c Prototipar um plugin simples (ex: txt_exporter)</li> <li>\u2b1c Testar com pipeline de dois steps</li> <li>\u2b1c Validar se a arquitetura se mant\u00e9m limpa</li> <li>\u2b1c Refinar baseado nos testes</li> </ol>"},{"location":"projeto/analise_arquitetural/#autor","title":"\ud83d\udc64 AUTOR","text":"<p>Thiago Ribeiro - Projeto de TCC</p> <sub>An\u00e1lise Arquitetural - ShowTrials como Plataforma</sub> <sub>Vers\u00e3o 0.1 - 20 de Fevereiro de 2026</sub> <sub>\u2705 Aguardando seus coment\u00e1rios</sub>"},{"location":"projeto/manual_gestao/","title":"Manual de Gest\u00e3o","text":""},{"location":"projeto/manual_gestao/#manual-completo-gestao-do-projeto-showtrials","title":"\ud83d\udcda MANUAL COMPLETO - GEST\u00c3O DO PROJETO SHOWTRIALS","text":"**Todos os comandos para gerenciar issues, milestones, projects e branches pelo terminal**"},{"location":"projeto/manual_gestao/#indice","title":"\ud83d\udccb \u00cdNDICE","text":"<ol> <li>Filosofia do Fluxo de Trabalho</li> <li>Conceitos Fundamentais</li> <li>Issues</li> <li>Milestones</li> <li>Projects</li> <li>Labels</li> <li>Branches e Commits</li> <li>Workflows Di\u00e1rios</li> <li>Checklists R\u00e1pidos</li> </ol>"},{"location":"projeto/manual_gestao/#filosofia-do-fluxo-de-trabalho","title":"\ud83c\udfaf FILOSOFIA DO FLUXO DE TRABALHO","text":""},{"location":"projeto/manual_gestao/#por-que-usar-projects-milestones-kanban","title":"Por que usar Projects + Milestones + Kanban?","text":"<p>Antes de mergulhar nos comandos, \u00e9 importante entender por que escolhemos essa estrutura e como ela se alinha com nosso jeito de trabalhar.</p>"},{"location":"projeto/manual_gestao/#o-problema-que-resolvemos","title":"O Problema que Resolvemos","text":"Antes Depois \u274c Fases espalhadas na cabe\u00e7a \u2705 Tudo documentado em issues \u274c Sem no\u00e7\u00e3o de prioridade \u2705 Labels: alta/m\u00e9dia/baixa \u274c Prazos perdidos \u2705 Milestones com datas \u274c Progresso invis\u00edvel \u2705 Kanban visual \u274c Commits sem contexto \u2705 Commits linkados \u00e0s issues \u274c Dificuldade de planejar \u2705 Roadmap claro"},{"location":"projeto/manual_gestao/#nossa-filosofia-commits-atomicos-por-funcionalidade","title":"Nossa Filosofia: \"Commits At\u00f4micos por Funcionalidade\"","text":"<p>Como voc\u00ea j\u00e1 pratica, cada branch <code>type/*</code> representa uma unidade de trabalho completa: - \u2705 Adiciona telemetria - \u2705 Cria testes de l\u00f3gica - \u2705 Cria testes de telemetria - \u2705 Corrige MyPy - \u2705 Aumenta cobertura</p> <p>Agora, com o GitHub Projects, cada issue no Kanban representa exatamente uma dessas branches.</p>"},{"location":"projeto/manual_gestao/#conceitos-fundamentais","title":"\ud83d\udcca CONCEITOS FUNDAMENTAIS","text":""},{"location":"projeto/manual_gestao/#o-que-e-cada-coisa-e-para-que-serve","title":"O que \u00e9 cada coisa e para que serve","text":"Ferramenta O que \u00e9 Para que serve Issue Uma tarefa individual Representa uma fase do projeto (ex: FASE 17) Label Categoria/etiqueta Classifica por tipo, prioridade, \u00e1rea Milestone Um marco com prazo Agrupa issues por per\u00edodo (Semanas 1-2, 3-4, etc.) Project Um quadro Kanban Visualiza o fluxo de trabalho (Backlog \u2192 In Progress \u2192 Done) Branch Uma linha do tempo no Git Onde o c\u00f3digo \u00e9 desenvolvido"},{"location":"projeto/manual_gestao/#como-eles-se-relacionam","title":"Como eles se relacionam","text":"<pre><code>graph TD\n    A[Milestone: Fases Imediatas] --&gt; B[Issue #3: FASE 17]\n    A --&gt; C[Issue #4: FASE 18]\n    A --&gt; D[Issue #5: FASE 19]\n\n    B --&gt; E[Branch: type/classificar-documento]\n    B --&gt; F[Labels: fase, prioridade:alta]\n    B --&gt; G[Project: Kanban - Coluna: Ready]\n</code></pre>"},{"location":"projeto/manual_gestao/#nosso-fluxo-o-ciclo-de-vida-de-uma-fase","title":"Nosso Fluxo (O Ciclo de Vida de uma Fase)","text":"<pre><code>\ud83d\udccb BACKLOG \u2192 \u2705 READY \u2192 \u23f3 IN PROGRESS \u2192 \ud83d\udc40 IN REVIEW \u2192 \u2705 DONE\n     \u2193            \u2193              \u2193               \u2193             \u2193\n   Planejado   Pronto para   Desenvolvendo    Aguardando    Conclu\u00eddo\n                come\u00e7ar                       merge\n</code></pre>"},{"location":"projeto/manual_gestao/#issues","title":"1\ufe0f\u20e3 ISSUES","text":""},{"location":"projeto/manual_gestao/#criar-uma-nova-issue-fase","title":"Criar uma nova issue (fase)","text":"<pre><code># Template completo - use sempre este padr\u00e3o\ngh issue create --title \"FASE 17: classificar_documento.py\" \\\n  --body \"## \ud83c\udfaf Objetivo\nAumentar cobertura de 65% para 85%\n\n## \ud83d\udcca M\u00e9tricas Atuais\n- **Cobertura:** 65%\n- **Linhas n\u00e3o cobertas:** 18\n- **Telemetria:** \u274c Ausente\n- **MyPy:** \u2705 OK\n\n## \ud83d\udccb Tarefas\n- [ ] Adicionar padr\u00e3o de telemetria\n- [ ] Expandir testes existentes\n- [ ] Criar testes de telemetria\n- [ ] Verificar cobertura final\n\n## \u23f1\ufe0f Estimativa: 2-3 horas\" \\\n  --label \"fase,tipo/testes,prioridade:alta\" \\\n  --milestone \"Fases Imediatas (Semanas 1-2)\"\n</code></pre>"},{"location":"projeto/manual_gestao/#listar-issues","title":"Listar issues","text":"<pre><code># Todas as issues abertas\ngh issue list\n\n# Todas (abertas e fechadas)\ngh issue list --state all\n\n# Filtrar por milestone\ngh issue list --milestone \"Fases Imediatas (Semanas 1-2)\"\n\n# Filtrar por label\ngh issue list --label \"prioridade:alta\"\ngh issue list --label \"fase\"\n\n# Filtrar por quem est\u00e1 trabalhando\ngh issue list --assignee \"rib-thiago\"\n\n# Limitar quantidade (padr\u00e3o 30)\ngh issue list --limit 50\n</code></pre>"},{"location":"projeto/manual_gestao/#ver-detalhes-de-uma-issue","title":"Ver detalhes de uma issue","text":"<pre><code># Vis\u00e3o b\u00e1sica\ngh issue view 3\n\n# Com coment\u00e1rios\ngh issue view 3 --comments\n\n# Em formato JSON (para scripts)\ngh issue view 3 --json number,title,labels,milestone\n</code></pre>"},{"location":"projeto/manual_gestao/#editar-uma-issue","title":"Editar uma issue","text":"<pre><code># Adicionar labels\ngh issue edit 3 --add-label \"prioridade:alta\"\n\n# Remover labels\ngh issue edit 3 --remove-label \"prioridade:media\"\n\n# Mudar milestone\ngh issue edit 3 --milestone \"Fases Imediatas (Semanas 1-2)\"\n\n# Mudar t\u00edtulo\ngh issue edit 3 --title \"FASE 17: classificar_documento.py (atualizado)\"\n\n# Atribuir a algu\u00e9m\ngh issue edit 3 --add-assignee \"rib-thiago\"\n\n# M\u00faltiplas altera\u00e7\u00f5es de uma vez\ngh issue edit 3 --add-label \"urgente\" --milestone \"Fases Imediatas\"\n</code></pre>"},{"location":"projeto/manual_gestao/#fechar-e-reabrir-issues","title":"Fechar e reabrir issues","text":"<pre><code># Fechar manualmente\ngh issue close 3\n\n# Fechar com coment\u00e1rio\ngh issue close 3 --comment \"Resolvido, cobertura atingiu 85%\"\n\n# Reabrir (se necess\u00e1rio)\ngh issue reopen 3\n</code></pre>"},{"location":"projeto/manual_gestao/#comentar-em-issues","title":"Comentar em issues","text":"<pre><code># Adicionar coment\u00e1rio\ngh issue comment 3 --body \"Iniciando desenvolvimento hoje\"\n\n# Comentar e fechar (combina\u00e7\u00e3o \u00fatil)\ngh issue comment 3 --body \"Finalizado!\" &amp;&amp; gh issue close 3\n</code></pre>"},{"location":"projeto/manual_gestao/#milestones","title":"2\ufe0f\u20e3 MILESTONES","text":""},{"location":"projeto/manual_gestao/#por-que-usamos-milestones","title":"Por que usamos milestones?","text":"<p>Milestones agrupam issues por per\u00edodo de entrega. Isso nos ajuda a: - \ud83d\udcc5 Manter o foco no que precisa ser feito agora - \ud83c\udfaf Visualizar o progresso em dire\u00e7\u00e3o a um objetivo - \u23f1\ufe0f Estimar se estamos no prazo</p> <p>Nossos milestones: - Fases Imediatas (Semanas 1-2) - O que estamos fazendo AGORA - Melhorias (Semanas 3-4) - Pr\u00f3ximo bloco - Inova\u00e7\u00e3o (Semanas 5-6) - Futuro - Documenta\u00e7\u00e3o (Cont\u00ednuo) - Tarefas cont\u00ednuas</p>"},{"location":"projeto/manual_gestao/#ver-milestones-via-site","title":"Ver milestones (via site)","text":"<pre><code># Abrir no navegador (milestones n\u00e3o t\u00eam CLI)\nopen https://github.com/rib-thiago/showtrials-tcc/milestones\n</code></pre>"},{"location":"projeto/manual_gestao/#listar-issues-de-um-milestone","title":"Listar issues de um milestone","text":"<pre><code>gh issue list --milestone \"Fases Imediatas (Semanas 1-2)\"\n</code></pre>"},{"location":"projeto/manual_gestao/#ver-progresso-do-milestone","title":"Ver progresso do milestone","text":"<pre><code># Pelo site\nopen https://github.com/rib-thiago/showtrials-tcc/milestones\n\n# Percentual de conclus\u00e3o aparece como barra de progresso\n</code></pre>"},{"location":"projeto/manual_gestao/#projects","title":"3\ufe0f\u20e3 PROJECTS","text":""},{"location":"projeto/manual_gestao/#por-que-usamos-kanban","title":"Por que usamos Kanban?","text":"<p>O Kanban nos d\u00e1 visibilidade do fluxo: - \ud83d\udccb Backlog: Ideias que n\u00e3o vamos fazer agora - \u2705 Ready: Pr\u00f3ximas tarefas priorizadas - \u23f3 In Progress: O que est\u00e1 sendo feito - \ud83d\udc40 In Review: Aguardando valida\u00e7\u00e3o - \u2705 Done: Conclu\u00eddo</p> <p>Isso responde a perguntas como: - \"O que est\u00e1 travado?\" \u2192 olhe In Progress h\u00e1 muito tempo - \"O que vem depois?\" \u2192 olhe Ready - \"O que j\u00e1 fizemos?\" \u2192 olhe Done</p>"},{"location":"projeto/manual_gestao/#comandos-para-projects","title":"Comandos para Projects","text":"<pre><code># Listar seus projects\ngh project list --owner rib-thiago\n# Sa\u00edda esperada: ID e t\u00edtulo do project\n\n# Ver detalhes do project (vis\u00e3o geral)\ngh project view 1 --owner rib-thiago\n\n# Ver itens do project (issues)\ngh project item-list 1 --owner rib-thiago\n</code></pre>"},{"location":"projeto/manual_gestao/#adicionar-issue-ao-project","title":"Adicionar issue ao project","text":"<pre><code># Formato: gh project item-add &lt;issue-number&gt; --owner &lt;owner&gt; --url &lt;issue-url&gt;\ngh project item-add 3 --owner rib-thiago --url https://github.com/rib-thiago/showtrials-tcc/issues/3\n</code></pre>"},{"location":"projeto/manual_gestao/#mover-issue-entre-colunas-recomendo-fazer-pelo-site","title":"Mover issue entre colunas (recomendo fazer pelo site)","text":"<pre><code># Se voc\u00ea INSISTIR em fazer pelo terminal (mais complexo):\n\n# PASSO 1: Pegar o ID do item (dif\u00edcil de achar)\ngh project item-list 1 --owner rib-thiago --format json\n\n# PASSO 2: Usar o ID para mover\ngh project item-edit --id &lt;ITEM-ID&gt; --field \"Status\" --value \"In Progress\"\n</code></pre>"},{"location":"projeto/manual_gestao/#abrir-project-no-navegador-recomendado","title":"Abrir project no navegador (recomendado)","text":"<pre><code>open https://github.com/users/rib-thiago/projects/1\n</code></pre>"},{"location":"projeto/manual_gestao/#labels","title":"4\ufe0f\u20e3 LABELS","text":""},{"location":"projeto/manual_gestao/#por-que-usamos-labels","title":"Por que usamos labels?","text":"<p>Labels categorizam as issues para: - \ud83d\udd34 prioridade:alta \u2192 O que fazer primeiro - \ud83d\udfe1 prioridade:media \u2192 Importante, mas n\u00e3o urgente - \ud83d\udfe2 prioridade:baixa \u2192 Quando sobrar tempo - \ud83c\udff7\ufe0f fase \u2192 \u00c9 uma fase do projeto - \ud83e\uddea tipo/testes \u2192 Relacionado a testes - \ud83d\udd27 tipo/qualidade \u2192 Melhoria de c\u00f3digo - \ud83d\udcda tipo/documenta\u00e7\u00e3o \u2192 Documenta\u00e7\u00e3o - \u2699\ufe0f tipo/infra \u2192 Infraestrutura/CI - \u2728 melhoria \u2192 Melhoria de funcionalidade - \ud83c\udfa8 ux \u2192 Experi\u00eancia do usu\u00e1rio</p>"},{"location":"projeto/manual_gestao/#listar-todas-as-labels","title":"Listar todas as labels","text":"<pre><code>gh label list\n</code></pre>"},{"location":"projeto/manual_gestao/#criar-nova-label","title":"Criar nova label","text":"<pre><code># Formato: gh label create &lt;nome&gt; --color &lt;cor-hex&gt; --description &lt;descri\u00e7\u00e3o&gt;\ngh label create \"tipo/performance\" --color \"1d76db\" --description \"Melhorias de performance\"\n</code></pre>"},{"location":"projeto/manual_gestao/#editar-label","title":"Editar label","text":"<pre><code>gh label edit \"prioridade:alta\" --color \"b60205\" --description \"Urgente - fazer agora\"\n</code></pre>"},{"location":"projeto/manual_gestao/#deletar-label","title":"Deletar label","text":"<pre><code>gh label delete \"tipo/performance\"\n</code></pre>"},{"location":"projeto/manual_gestao/#branches-e-commits","title":"5\ufe0f\u20e3 BRANCHES E COMMITS","text":""},{"location":"projeto/manual_gestao/#por-que-o-padrao-type","title":"Por que o padr\u00e3o type/*?","text":"<p>Seguimos o padr\u00e3o <code>type/*</code> porque: - \ud83c\udf3f Identifica claramente o tipo de trabalho - \ud83d\udd17 Relaciona diretamente com a issue correspondente - \ud83d\udcda Hist\u00f3rico organizado e pesquis\u00e1vel - \ud83e\udd1d Facilita revis\u00e3o de c\u00f3digo</p>"},{"location":"projeto/manual_gestao/#criar-branch-para-uma-fase","title":"Criar branch para uma fase","text":"<pre><code># Sempre seguir o padr\u00e3o: type/nome-do-arquivo\ngit checkout -b type/classificar-documento   # para FASE 17\ngit checkout -b type/obter-documento         # para FASE 18\ngit checkout -b type/estatisticas            # para FASE 19\n</code></pre>"},{"location":"projeto/manual_gestao/#commits-atomicos-seu-padrao","title":"Commits at\u00f4micos (seu padr\u00e3o)","text":"<pre><code># Commits intermedi\u00e1rios (opcionais)\ngit add .\ngit commit -m \"wip: adiciona estrutura b\u00e1sica de testes para classificar_documento\"\n\n# IMPORTANTE: Commit final com fechamento da issue\ngit add src/application/use_cases/classificar_documento.py\ngit add src/tests/test_classificar_documento.py\ngit add src/tests/test_classificar_documento_telemetry.py\n\ngit commit -m \"feat: adiciona telemetria e testes em classificar_documento.py\n\n- Adiciona padr\u00e3o de telemetria\n- Cria testes de l\u00f3gica (8) e telemetria (5)\n- Cobertura: 65% \u2192 85%\n\nCloses #3\"\n</code></pre>"},{"location":"projeto/manual_gestao/#push-e-merge","title":"Push e merge","text":"<pre><code># Enviar branch\ngit push origin type/classificar-documento\n\n# Criar Pull Request (opcional, pode mergear direto)\ngh pr create --title \"FASE 17: classificar_documento.py\" \\\n  --body \"Closes #3\" \\\n  --base main\n\n# Ver PRs abertos\ngh pr list\n\n# Fazer merge (ap\u00f3s aprova\u00e7\u00e3o)\ngh pr merge 3 --merge\n</code></pre>"},{"location":"projeto/manual_gestao/#ver-branches","title":"Ver branches","text":"<pre><code>git branch          # locais\ngit branch -a       # todas (incluindo remotas)\ngit branch -d type/classificar-documento  # deletar branch local ap\u00f3s merge\n</code></pre>"},{"location":"projeto/manual_gestao/#workflows-di\u00e1rios","title":"6\ufe0f\u20e3 WORKFLOWS DI\u00c1RIOS","text":""},{"location":"projeto/manual_gestao/#fluxo-completo-de-uma-fase-do-inicio-ao-fim","title":"Fluxo Completo de uma Fase (do in\u00edcio ao fim)","text":"<pre><code>graph TD\n    A[Issue no Backlog] --&gt;|Priorizar| B[Issue movida para Ready]\n    B --&gt;|Iniciar trabalho| C[Mover para In Progress]\n    C --&gt;|Criar branch| D[git checkout -b type/xxx]\n    D --&gt;|Desenvolver| E[Commits]\n    E --&gt;|Testar| F{Testes passam?}\n    F --&gt;|Sim| G[Commit final com 'Closes #N']\n    F --&gt;|N\u00e3o| E\n    G --&gt;|Push| H[git push]\n    H --&gt;|Merge| I[Issue fecha automaticamente]\n    I --&gt;|Mover| J[Issue para Done]\n</code></pre>"},{"location":"projeto/manual_gestao/#checklist-iniciar-o-dia","title":"Checklist: Iniciar o dia","text":"<pre><code># 1. Ver o que est\u00e1 em andamento\ngh issue list --assignee \"@me\"\n\n# 2. Ver o que \u00e9 prioridade\ngh issue list --label \"prioridade:alta\"\n\n# 3. Ver project status\nopen https://github.com/users/rib-thiago/projects/1\n\n# 4. Ver branch atual\ngit branch\n</code></pre>"},{"location":"projeto/manual_gestao/#checklist-iniciar-uma-nova-fase","title":"Checklist: Iniciar uma nova fase","text":"<pre><code># 1. No site, mover issue de \"Ready\" para \"In Progress\"\n\n# 2. Criar branch\ngit checkout -b type/classificar-documento\n\n# 3. Verificar estado atual do arquivo\nls -la src/application/use_cases/classificar_documento.py\npoetry run pytest --cov=src/application/use_cases/classificar_documento.py\npoetry run mypy src/application/use_cases/classificar_documento.py\n</code></pre>"},{"location":"projeto/manual_gestao/#checklist-durante-o-desenvolvimento","title":"Checklist: Durante o desenvolvimento","text":"<pre><code># Rodar testes do arquivo espec\u00edfico\npoetry run pytest src/tests/test_classificar_documento.py -v\n\n# Rodar MyPy no arquivo\npoetry run mypy src/application/use_cases/classificar_documento.py\n\n# Ver cobertura atual\npoetry run pytest --cov=src/application/use_cases/classificar_documento.py\n</code></pre>"},{"location":"projeto/manual_gestao/#checklist-finalizar-uma-fase","title":"Checklist: Finalizar uma fase","text":"<pre><code># 1. Verificar se tudo est\u00e1 verde\npoetry run pytest src/tests/test_classificar_documento.py -v\npoetry run mypy src/application/use_cases/classificar_documento.py\n\n# 2. Ver cobertura final\npoetry run pytest --cov=src/application/use_cases/classificar_documento.py\n\n# 3. Commit final com \"Closes\"\ngit add .\ngit commit -m \"feat: adiciona telemetria e testes em classificar_documento.py\n\n- Adiciona padr\u00e3o de telemetria\n- Cria testes de l\u00f3gica (8) e telemetria (5)\n- Cobertura: 65% \u2192 85%\n\nCloses #3\"\n\n# 4. Push\ngit push origin type/classificar-documento\n\n# 5. Fazer merge (via site ou CLI)\ngh pr create --title \"FASE 17\" --body \"Closes #3\"\ngh pr merge 3 --merge\n\n# 6. No site, mover issue para \"Done\"\n\n# 7. Deletar branch local (opcional)\ngit branch -d type/classificar-documento\n</code></pre>"},{"location":"projeto/manual_gestao/#checklists-r\u00e1pidos","title":"7\ufe0f\u20e3 CHECKLISTS R\u00c1PIDOS","text":""},{"location":"projeto/manual_gestao/#comandos-mais-uteis-cola-rapida","title":"Comandos mais \u00fateis (cola r\u00e1pida)","text":"<pre><code># Issues\ngh issue list                          # listar abertas\ngh issue list --state all               # todas\ngh issue view 3                         # ver detalhes\ngh issue create                          # criar nova\ngh issue edit 3 --add-label \"fase\"       # adicionar label\ngh issue close 3                          # fechar\n\n# Projects\ngh project list                          # listar\ngh project view 1 --owner rib-thiago     # ver\ngh project item-add 3 --owner rib-thiago --url https://github.com/.../issues/3\n\n# Labels\ngh label list                            # listar\ngh label create \"tipo/ux\" --color \"1d76db\"\n\n# Milestones (consulta apenas)\ngh issue list --milestone \"Fases Imediatas\"\n\n# Git\ngit checkout -b type/classificar-documento\ngit commit -m \"feat: ... Closes #3\"\ngit push origin type/classificar-documento\n</code></pre>"},{"location":"projeto/manual_gestao/#labels-que-usamos","title":"Labels que usamos","text":"Label Cor Significado <code>fase</code> \ud83d\udfe3 \u00c9 uma fase do projeto <code>tipo/testes</code> \ud83d\udfe2 Relacionado a testes <code>tipo/qualidade</code> \ud83d\udd35 Melhoria de c\u00f3digo <code>tipo/documenta\u00e7\u00e3o</code> \ud83d\udfe4 Documenta\u00e7\u00e3o <code>tipo/infra</code> \ud83d\udd35 Infraestrutura/CI <code>melhoria</code> \ud83d\udfe1 Melhoria de funcionalidade <code>ux</code> \u26aa Experi\u00eancia do usu\u00e1rio <code>prioridade:alta</code> \ud83d\udd34 Fazer agora <code>prioridade:media</code> \ud83d\udfe1 Fazer em breve <code>prioridade:baixa</code> \ud83d\udfe2 Quando sobrar tempo"},{"location":"projeto/manual_gestao/#exemplo-pratico-fase-17-classificar_documentopy","title":"\ud83c\udfaf EXEMPLO PR\u00c1TICO: FASE 17 (classificar_documento.py)","text":"<pre><code># 1. Ver issue #3\ngh issue view 3\n\n# 2. No site: mover issue #3 de \"Ready\" para \"In Progress\"\n\n# 3. Criar branch\ngit checkout -b type/classificar-documento\n\n# 4. Desenvolver (editar arquivos, criar testes)...\n\n# 5. Testar\npoetry run pytest src/tests/test_classificar_documento.py -v\n\n# 6. Verificar MyPy\npoetry run mypy src/application/use_cases/classificar_documento.py\n\n# 7. Ver cobertura\npoetry run pytest --cov=src/application/use_cases/classificar_documento.py\n\n# 8. Commit final\ngit add src/application/use_cases/classificar_documento.py\ngit add src/tests/test_classificar_documento.py\ngit add src/tests/test_classificar_documento_telemetry.py\n\ngit commit -m \"feat: adiciona telemetria e testes em classificar_documento.py\n\n- Adiciona padr\u00e3o de telemetria\n- Cria testes de l\u00f3gica (8) e telemetria (5)\n- Cobertura: 65% \u2192 85%\n\nCloses #3\"\n\n# 9. Push\ngit push origin type/classificar-documento\n\n# 10. Fazer merge (via site)\n\n# 11. No site: mover issue #3 para \"Done\"\n\n# 12. Ver progresso\ngh issue list --milestone \"Fases Imediatas (Semanas 1-2)\"\n</code></pre>"},{"location":"projeto/manual_gestao/#resumo-do-fluxo-visual","title":"\ud83d\udcca RESUMO DO FLUXO (VISUAL)","text":"<pre><code>\ud83d\udccb BACKLOG \u2192 \u2705 READY \u2192 \u23f3 IN PROGRESS \u2192 \ud83d\udc40 IN REVIEW \u2192 \u2705 DONE\n     \u2502           \u2502            \u2502               \u2502             \u2502\n     \u2502           \u2502            \u2502               \u2502             \u2502\n     \u25bc           \u25bc            \u25bc               \u25bc             \u25bc\n  Planejado   Pronto para   git checkout   gh pr create   Merge +\n              come\u00e7ar       desenvolvimento                Close issue\n</code></pre>"},{"location":"projeto/manual_gestao/#por-que-esse-fluxo-funciona-para-nos","title":"\ud83c\udfc6 POR QUE ESSE FLUXO FUNCIONA PARA N\u00d3S","text":"<ol> <li>Alinhado com seu padr\u00e3o: Cada issue = uma branch <code>type/*</code></li> <li>Visibilidade: Sabemos exatamente o que est\u00e1 acontecendo</li> <li>Prioriza\u00e7\u00e3o: Labels e milestones mostram o que \u00e9 importante</li> <li>Rastreabilidade: Commits linkados \u00e0s issues</li> <li>Progresso mensur\u00e1vel: Cobertura sobe, issues fecham</li> <li>Documenta\u00e7\u00e3o viva: O hist\u00f3rico do projeto est\u00e1 todo documentado</li> </ol> <p>Agora sim, manual completo! \ud83d\ude80</p>"},{"location":"projeto/manual_gestao/#analise-git-flow-para-o-showtrials","title":"\ud83c\udfaf AN\u00c1LISE: GIT FLOW PARA O SHOWTRIALS","text":"<p>Thiago, excelente pergunta! Com base em tudo que constru\u00edmos, vamos analisar se faz sentido e qual modelo se adequaria.</p>"},{"location":"projeto/manual_gestao/#nosso-cenario-atual","title":"\ud83d\udcca NOSSO CEN\u00c1RIO ATUAL","text":""},{"location":"projeto/manual_gestao/#o-que-ja-temos-funcionando","title":"O que j\u00e1 temos funcionando:","text":"Aspecto Como fazemos hoje Branches de features <code>type/*</code> (ex: <code>type/analisar-texto</code>) Branches de corre\u00e7\u00e3o <code>fix/*</code> (ex: <code>fix/tipo-documento-keyerror</code>) Branches de documenta\u00e7\u00e3o <code>docs/*</code> (ex: <code>docs/organizacao</code>) Branch principal <code>main</code> (protegida, CI obrigat\u00f3rio) CI GitHub Actions rodando em cada push Taskipy Automa\u00e7\u00e3o local (<code>task test</code>, <code>task lint</code>, etc.) Issues Cada fase vira uma issue Milestones Agrupam issues por per\u00edodo Kanban Visualiza o fluxo"},{"location":"projeto/manual_gestao/#o-que-falta","title":"O que falta:","text":"<ul> <li>\u274c Padr\u00e3o para vers\u00f5es (tags, releases)</li> <li>\u274c Branch de desenvolvimento (develop) - usamos main direto</li> <li>\u274c Pol\u00edtica de merges (quem, quando, como)</li> <li>\u274c Estrat\u00e9gia para hotfixes (corre\u00e7\u00f5es urgentes em produ\u00e7\u00e3o)</li> <li>\u274c Versionamento sem\u00e2ntico (v0.2.0, v1.0.0, etc.)</li> </ul>"},{"location":"projeto/manual_gestao/#opcoes-de-git-flow","title":"\ud83d\udd04 OP\u00c7\u00d5ES DE GIT FLOW","text":""},{"location":"projeto/manual_gestao/#opcao-1-git-flow-classico","title":"Op\u00e7\u00e3o 1: Git Flow Cl\u00e1ssico","text":"<pre><code>main (produ\u00e7\u00e3o)\n  \u2191\n  \u2514\u2500\u2500 develop (integra\u00e7\u00e3o)\n        \u2191\n        \u251c\u2500\u2500 feature/type-*   (novas funcionalidades)\n        \u251c\u2500\u2500 fix/*            (corre\u00e7\u00f5es)\n        \u251c\u2500\u2500 release/*        (prepara\u00e7\u00e3o para vers\u00e3o)\n        \u2514\u2500\u2500 hotfix/*         (corre\u00e7\u00f5es urgentes na main)\n</code></pre> <p>Pr\u00f3s: - \u2705 Muito organizado - \u2705 Separa desenvolvimento de produ\u00e7\u00e3o - \u2705 Ideal para equipes grandes - \u2705 Hotfixes isolados</p> <p>Contras: - \u274c Complexo para um projeto solo - \u274c Muitos branches para gerenciar - \u274c Overhead de merges constantes</p> <p>Para n\u00f3s: Provavelmente exagerado para um TCC.</p>"},{"location":"projeto/manual_gestao/#opcao-2-github-flow-simplificado","title":"Op\u00e7\u00e3o 2: GitHub Flow (simplificado)","text":"<pre><code>main (sempre pronta para deploy)\n  \u2191\n  \u2514\u2500\u2500 type/* (features)\n  \u2514\u2500\u2500 fix/*  (corre\u00e7\u00f5es)\n  \u2514\u2500\u2500 docs/* (documenta\u00e7\u00e3o)\n</code></pre> <p>Pr\u00f3s: - \u2705 Simples e direto - \u2705 J\u00e1 usamos 90% disso - \u2705 CI obrigat\u00f3rio protege a main - \u2705 Ideal para projetos com deploy cont\u00ednuo</p> <p>Contras: - \u274c Sem branch de desenvolvimento separada - \u274c Menos controle sobre vers\u00f5es</p> <p>Para n\u00f3s: J\u00e1 usamos! S\u00f3 falta formalizar.</p>"},{"location":"projeto/manual_gestao/#opcao-3-trunk-based-development","title":"Op\u00e7\u00e3o 3: Trunk-based Development","text":"<pre><code>main (todos commitam direto)\n  \u2191\n  \u2514\u2500\u2500 branches curtas (horas/dias)\n</code></pre> <p>Pr\u00f3s: - \u2705 M\u00e1xima simplicidade - \u2705 Ideal para times muito maduros - \u2705 CI extremamente rigoroso</p> <p>Contras: - \u274c Perigoso para projetos acad\u00eamicos - \u274c Exige testes impec\u00e1veis - \u274c Sem hist\u00f3rico de features</p> <p>Para n\u00f3s: Arriscado demais.</p>"},{"location":"projeto/manual_gestao/#recomendacao-github-flow-adaptado","title":"\ud83c\udfc6 RECOMENDA\u00c7\u00c3O: GitHub Flow Adaptado","text":"<pre><code>graph TD\n    A[main] --&gt;|git checkout -b| B[type/classificar-documento]\n    B --&gt;|desenvolvimento + testes| C{CI passa?}\n    C --&gt;|Sim| D[git push + merge]\n    C --&gt;|N\u00e3o| B\n    D --&gt;|automaticamente| E[issue fecha]\n    E --&gt;|tag opcional| F[vX.X.X]\n\n    G[fix/urgente] --&gt;|hotfix| C\n    H[docs/*] --&gt;|merge direto| A\n</code></pre>"},{"location":"projeto/manual_gestao/#nossa-adaptacao","title":"Nossa adapta\u00e7\u00e3o:","text":"Branch Origem Destino CI obrigat\u00f3rio? Quando usar <code>type/*</code> <code>main</code> <code>main</code> \u2705 Novas funcionalidades (fases) <code>fix/*</code> <code>main</code> <code>main</code> \u2705 Corre\u00e7\u00f5es de bugs <code>docs/*</code> <code>main</code> <code>main</code> \u26a0\ufe0f (s\u00f3 lint) Documenta\u00e7\u00e3o pura"},{"location":"projeto/manual_gestao/#proposta-de-git-flow-completo-para-o-projeto","title":"\ud83d\udccb PROPOSTA DE GIT FLOW COMPLETO PARA O PROJETO","text":""},{"location":"projeto/manual_gestao/#1-estrutura-de-branches","title":"1. Estrutura de Branches","text":"<pre><code>main\n\u251c\u2500\u2500 type/analisar-texto\n\u251c\u2500\u2500 type/exportar-documento\n\u251c\u2500\u2500 type/gerar-relatorio\n\u251c\u2500\u2500 fix/tipo-documento-keyerror\n\u251c\u2500\u2500 docs/atualizar-readme\n\u2514\u2500\u2500 [tags] v0.1.0, v0.2.0, v1.0.0\n</code></pre>"},{"location":"projeto/manual_gestao/#2-nomenclatura-padronizada","title":"2. Nomenclatura Padronizada","text":"Tipo Padr\u00e3o Exemplo Nova fase <code>type/[nome-arquivo]</code> <code>type/classificar-documento</code> Corre\u00e7\u00e3o <code>fix/[descricao]</code> <code>fix/tipo-documento-keyerror</code> Documenta\u00e7\u00e3o <code>docs/[descricao]</code> <code>docs/atualizar-readme</code> Melhoria <code>feat/[descricao]</code> <code>feat/modo-escuro-cli</code> Infra/CI <code>chore/[descricao]</code> <code>chore/atualizar-dependencias</code>"},{"location":"projeto/manual_gestao/#3-politica-de-merges","title":"3. Pol\u00edtica de Merges","text":"<pre><code># 1. Branch deve estar atualizada com main\ngit checkout main\ngit pull origin main\ngit checkout type/classificar-documento\ngit rebase main  # ou git merge main\n\n# 2. Rodar tudo localmente\ntask check  # lint + mypy + testes\ntask test-cov  # cobertura\n\n# 3. Push\ngit push origin type/classificar-documento\n\n# 4. CI deve passar (obrigat\u00f3rio)\n# 5. Merge (pode ser direto, sem PR se quiser)\n</code></pre>"},{"location":"projeto/manual_gestao/#4-versionamento-semantico","title":"4. Versionamento Sem\u00e2ntico","text":"<pre><code># Vers\u00e3o atual: v0.2.0\n# v0.3.0: quando concluir mais algumas fases\n# v1.0.0: quando TCC for entregue\n\n# Criar tag\ngit tag -a v0.3.0 -m \"Vers\u00e3o 0.3.0 - Adiciona telemetria em 3 casos de uso\"\ngit push origin v0.3.0\n\n# Criar release no GitHub\ngh release create v0.3.0 --title \"v0.3.0\" --notes \"### Adicionado\\n- Telemetria em exportar_documento\\n- Telemetria em gerar_relatorio\\n- Telemetria em listar_documentos\"\n</code></pre>"},{"location":"projeto/manual_gestao/#5-fluxo-para-hotfix-correcao-urgente","title":"5. Fluxo para Hotfix (corre\u00e7\u00e3o urgente)","text":"<pre><code># Se algo quebrar na main\ngit checkout -b fix/urgente\n# corrige\ngit commit -m \"fix: corrige erro cr\u00edtico no exportar_documento\n\nCloses #9\"\ngit push origin fix/urgente\n# merge direto (CI obrigat\u00f3rio)\ngit tag -a v0.2.1 -m \"Hotfix: corre\u00e7\u00e3o cr\u00edtica\"\n</code></pre>"},{"location":"projeto/manual_gestao/#tarefas-para-implementar","title":"\u2705 TAREFAS PARA IMPLEMENTAR","text":""},{"location":"projeto/manual_gestao/#1-proteger-a-branch-main-no-github","title":"1. Proteger a branch <code>main</code> no GitHub","text":"<ul> <li>[ ] Settings \u2192 Branches \u2192 Add rule</li> <li>[ ] Require status checks to pass before merging</li> <li>[ ] Require branches to be up to date</li> </ul>"},{"location":"projeto/manual_gestao/#2-adicionar-script-de-release-no-taskipy","title":"2. Adicionar script de release no Taskipy","text":"<p>No <code>pyproject.toml</code>: <pre><code>[tool.taskipy.tasks]\n# ... existentes ...\n\nrelease = \"python scripts/criar_release.py\"\ntag = \"git tag -a v${VERSION} -m 'Vers\u00e3o ${VERSION}' &amp;&amp; git push origin v${VERSION}\"\n</code></pre></p> <p>Criar <code>scripts/criar_release.py</code>: <pre><code>#!/usr/bin/env python\n\"\"\"Script para criar release automaticamente.\"\"\"\nimport subprocess\nfrom datetime import datetime\n\n# Pega \u00faltima tag\nlast_tag = subprocess.getoutput(\"git describe --tags --abbrev=0 2&gt;/dev/null || echo 'v0.0.0'\")\nprint(f\"\u00daltima tag: {last_tag}\")\n\n# Sugere pr\u00f3xima vers\u00e3o (v0.2.0 \u2192 v0.3.0)\nmajor, minor, patch = last_tag[1:].split('.')\nnext_version = f\"v{major}.{int(minor)+1}.0\"\n\nprint(f\"Sugest\u00e3o: {next_version}\")\nversion = input(\"Vers\u00e3o (ou Enter para sugest\u00e3o): \") or next_version\n\n# Coleta notas de release\nprint(\"\\nIssues fechadas desde a \u00faltima tag:\")\nsubprocess.run(f\"git log {last_tag}..HEAD --oneline | grep -i 'closes'\", shell=True)\n\nnotes = input(\"\\nNotas da release (descri\u00e7\u00e3o): \")\n\n# Cria tag\nsubprocess.run(f\"git tag -a {version} -m '{notes}'\", shell=True)\nsubprocess.run(f\"git push origin {version}\", shell=True)\n\n# Cria release no GitHub\nsubprocess.run(f\"gh release create {version} --title '{version}' --notes '{notes}'\", shell=True)\n</code></pre></p>"},{"location":"projeto/manual_gestao/#3-atualizar-template-de-issue","title":"3. Atualizar template de issue","text":"<p>Adicionar campo de vers\u00e3o: <pre><code>## \ud83d\udce6 Vers\u00e3o\nQuando conclu\u00edda, esta fase far\u00e1 parte da vers\u00e3o: **v0.3.0**\n</code></pre></p>"},{"location":"projeto/manual_gestao/#resumo-nosso-git-flow","title":"\ud83d\udcca RESUMO: NOSSO GIT FLOW","text":"Aspecto Como ser\u00e1 Branch principal <code>main</code> (protegida) Branches de desenvolvimento <code>type/*</code>, <code>fix/*</code>, <code>feat/*</code>, <code>docs/*</code>, <code>chore/*</code> CI obrigat\u00f3rio \u2705 Sempre Merges Diretos (ap\u00f3s CI passar) Vers\u00f5es Tags sem\u00e2nticas (<code>v0.3.0</code>, <code>v1.0.0</code>) Releases GitHub Releases com notas Hotfixes <code>fix/urgente</code> \u2192 main \u2192 nova tag"},{"location":"projeto/manual_gestao/#vale-a-pena-discutir","title":"\ud83c\udfaf VALE A PENA DISCUTIR?","text":"<p>Sim, absolutamente! Pelos seguintes motivos:</p> <ol> <li>J\u00e1 fazemos 80% disso, s\u00f3 falta formalizar</li> <li>Versionamento ajuda no TCC (mostra evolu\u00e7\u00e3o)</li> <li>Releases documentam o que foi entregue</li> <li>Protege a main de merges acidentais</li> <li>Profissionaliza o projeto (diferencial no TCC)</li> </ol>"},{"location":"projeto/manual_gestao/#analise-completa-flows-do-projeto","title":"\ud83d\udcda AN\u00c1LISE COMPLETA - FLOWS DO PROJETO","text":"<p>Thiago, excelente pergunta! Vamos mapear todos os flows que temos e identificar o que ainda falta documentar.</p>"},{"location":"projeto/manual_gestao/#flows-ja-documentados","title":"\ud83d\udcca FLOWS J\u00c1 DOCUMENTADOS","text":"Flow Documento Status Git Flow <code>GIT_FLOW.md</code> \u2705 Documentado Quality Flow <code>QUALITY_FLOW.md</code> \u2705 Documentado Issue/Project Flow <code>MANUAL_GESTAO.md</code> \u2705 Documentado CI/CD Flow Embutido no Git Flow \u26a0\ufe0f Parcial Release Flow Embutido no Git Flow \u26a0\ufe0f Parcial"},{"location":"projeto/manual_gestao/#flows-ainda-nao-documentados-mas-importantes","title":"\ud83d\udd0d FLOWS AINDA N\u00c3O DOCUMENTADOS (MAS IMPORTANTES)","text":""},{"location":"projeto/manual_gestao/#1-dependencies-flow-gestao-de-dependencias","title":"1. \ud83d\udce6 Dependencies Flow (Gest\u00e3o de Depend\u00eancias)","text":"<p>Como adicionar, atualizar e remover depend\u00eancias com Poetry + pip.</p>"},{"location":"projeto/manual_gestao/#2-debug-flow-como-depurar-problemas","title":"2. \ud83d\udc1b Debug Flow (Como depurar problemas)","text":"<p>Estrat\u00e9gia sistem\u00e1tica para identificar e corrigir bugs.</p>"},{"location":"projeto/manual_gestao/#3-documentation-flow-como-documentar","title":"3. \ud83d\udcdd Documentation Flow (Como documentar)","text":"<p>Padr\u00e3o para documentar c\u00f3digo, criar FASEs, atualizar mkdocs.</p>"},{"location":"projeto/manual_gestao/#4-telemetry-flow-como-instrumentar","title":"4. \ud83d\udd04 Telemetry Flow (Como instrumentar)","text":"<p>Guia para adicionar telemetria em novos arquivos.</p>"},{"location":"projeto/manual_gestao/#5-refactoring-flow-como-refatorar-com-seguranca","title":"5. \ud83e\uddf9 Refactoring Flow (Como refatorar com seguran\u00e7a)","text":"<p>Estrat\u00e9gia para melhorar c\u00f3digo sem quebrar nada.</p>"},{"location":"projeto/manual_gestao/#6-emergency-flow-hotfix-em-producao","title":"6. \ud83d\udea8 Emergency Flow (Hotfix em produ\u00e7\u00e3o)","text":"<p>Como corrigir algo urgente sem atrapalhar o desenvolvimento.</p>"},{"location":"projeto/manual_gestao/#7-code-review-flow-como-revisar-codigo","title":"7. \ud83d\udccb Code Review Flow (Como revisar c\u00f3digo)","text":"<p>Checklist para revis\u00e3o de PRs (mesmo trabalhando sozinho).</p>"},{"location":"projeto/manual_gestao/#sugestao-7-novos-documentos","title":"\ud83d\udccb SUGEST\u00c3O: 7 NOVOS DOCUMENTOS","text":"<p>Vou detalhar cada um para voc\u00ea escolher por onde quer come\u00e7ar:</p>"},{"location":"projeto/manual_gestao/#flow-1-dependencias","title":"\ud83d\udce6 FLOW 1: DEPEND\u00caNCIAS","text":""},{"location":"projeto/manual_gestao/#por-que-documentar","title":"Por que documentar?","text":"<ul> <li>Temos uma situa\u00e7\u00e3o h\u00edbrida (Poetry + pip)</li> <li>Precisamos lembrar do TODO da FASE 11 (migrar NLP para Poetry)</li> <li>Evitar esquecer de atualizar o CI quando adicionar depend\u00eancias</li> </ul>"},{"location":"projeto/manual_gestao/#estrutura-proposta","title":"Estrutura proposta:","text":"<pre><code># Dependencies Flow - ShowTrials\n\n## \ud83d\udce6 Gerenciamento com Poetry\n- Adicionar depend\u00eancia: `poetry add requests`\n- Adicionar dev dependency: `poetry add --dev pytest`\n- Atualizar: `poetry update`\n- Remover: `poetry remove requests`\n\n## \u26a0\ufe0f Depend\u00eancias Especiais (NLP)\nAtualmente instaladas via pip (TODO: migrar para Poetry):\n- numpy==1.26.0\n- spacy==3.7.5\n- textblob, nltk, wordcloud, matplotlib\n\n## \ud83d\udd04 Quando adicionar uma nova depend\u00eancia\n1. Verificar se pode ser via Poetry\n2. Se for NLP, testar antes (hist\u00f3rico de conflitos)\n3. Atualizar `pyproject.toml` e `poetry.lock`\n4. Atualizar CI se necess\u00e1rio\n5. Documentar no CHANGELOG\n</code></pre>"},{"location":"projeto/manual_gestao/#flow-2-debug","title":"\ud83d\udc1b FLOW 2: DEBUG","text":""},{"location":"projeto/manual_gestao/#por-que-documentar_1","title":"Por que documentar?","text":"<ul> <li>Quando algo quebra, temos um m\u00e9todo sistem\u00e1tico</li> <li>Evita \"tentativa e erro\" aleat\u00f3rio</li> <li>Acelera a resolu\u00e7\u00e3o de problemas</li> </ul>"},{"location":"projeto/manual_gestao/#estrutura-proposta_1","title":"Estrutura proposta:","text":"<pre><code># Debug Flow - ShowTrials\n\n## \ud83d\udd0d Estrat\u00e9gia de Debug\n\n### 1. Reproduzir o erro\n```bash\n# Isolar o problema\npoetry run pytest src/tests/test_arquivo.py -v -k \"nome_do_teste\"\n</code></pre>"},{"location":"projeto/manual_gestao/#2-verificar-logs","title":"2. Verificar logs","text":"<pre><code># Aumentar verbosidade\npoetry run pytest -vv --log-cli-level=DEBUG\n</code></pre>"},{"location":"projeto/manual_gestao/#3-usar-pdb-debugger-interativo","title":"3. Usar pdb (debugger interativo)","text":"<pre><code>import pdb; pdb.set_trace()  # Python &lt; 3.7\nbreakpoint()  # Python 3.7+\n</code></pre>"},{"location":"projeto/manual_gestao/#4-verificar-estado-do-banco","title":"4. Verificar estado do banco","text":"<pre><code>sqlite3 data/showtrials.db \"SELECT * FROM documentos LIMIT 5;\"\n</code></pre>"},{"location":"projeto/manual_gestao/#5-verificar-telemetria","title":"5. Verificar telemetria","text":"<pre><code>from src.infrastructure.telemetry import telemetry\nprint(telemetry._counters)  # Ver contadores atuais\n</code></pre>"},{"location":"projeto/manual_gestao/#6-checklist-de-causas-comuns","title":"6. Checklist de causas comuns","text":"<ul> <li>[ ] Mock incompleto (faltou atributo <code>texto</code>?)</li> <li>[ ] Tipo errado (string vs datetime?)</li> <li>[ ] Import circular</li> <li>[ ] Banco n\u00e3o migrado <pre><code>---\n\n## \ud83d\udcdd **FLOW 3: DOCUMENTA\u00c7\u00c3O**\n\n### **Por que documentar?**\n- Temos um padr\u00e3o rico (FASE*.md)\n- Precisamos garantir consist\u00eancia\n- Evitar documenta\u00e7\u00e3o duplicada\n\n### **Estrutura proposta:**\n```markdown\n# Documentation Flow - ShowTrials\n\n## \ud83d\udcda Tipos de Documenta\u00e7\u00e3o\n\n### 1. Fases do Projeto (FASE*.md)\n- Local: `docs/`\n- Template: seguir FASE 16 como exemplo\n- Quando criar: ao finalizar cada branch `type/*`\n\n### 2. Docstrings no c\u00f3digo\n```python\ndef funcao(param: str) -&gt; int:\n    \"\"\"\n    Descri\u00e7\u00e3o clara do que faz.\n\n    Args:\n        param: Descri\u00e7\u00e3o do par\u00e2metro\n\n    Returns:\n        Descri\u00e7\u00e3o do retorno\n\n    Raises:\n        ValueError: quando algo d\u00e1 errado\n    \"\"\"\n</code></pre></li> </ul>"},{"location":"projeto/manual_gestao/#3-readmemd","title":"3. README.md","text":"<ul> <li>Mantenha badges atualizados</li> <li>Exemplo de instala\u00e7\u00e3o/uso</li> <li>Links para docs</li> </ul>"},{"location":"projeto/manual_gestao/#4-mkdocs-site","title":"4. MkDocs (site)","text":"<pre><code>task docs  # serve localmente\nmkdocs gh-deploy  # publica no GitHub Pages\n</code></pre>"},{"location":"projeto/manual_gestao/#5-changelogmd","title":"5. CHANGELOG.md","text":"<ul> <li>Atualize a cada release</li> <li>Siga Keep a Changelog <pre><code>---\n\n## \ud83d\udd04 **FLOW 4: TELEMETRIA**\n\n### **Por que documentar?**\n- \u00c9 nosso padr\u00e3o mais repetido\n- Precisamos garantir que novos arquivos sigam o mesmo padr\u00e3o\n- Evitar esquecer contadores importantes\n\n### **Estrutura proposta:**\n```markdown\n# Telemetry Flow - ShowTrials\n\n## \ud83c\udfaf Padr\u00e3o de Telemetria\n\n### 1. No in\u00edcio do arquivo\n```python\n# Telemetria opcional\n_telemetry = None\n\ndef configure_telemetry(telemetry_instance=None):\n    \"\"\"Configura telemetria para este m\u00f3dulo (usado apenas em testes).\"\"\"\n    global _telemetry\n    _telemetry = telemetry_instance\n</code></pre></li> </ul>"},{"location":"projeto/manual_gestao/#2-em-cada-metodo-publico","title":"2. Em cada m\u00e9todo p\u00fablico","text":"<pre><code>def executar(self, ...):\n    if _telemetry:\n        _telemetry.increment(\"modulo.metodo.iniciado\")\n\n    # ... l\u00f3gica ...\n\n    if _telemetry:\n        _telemetry.increment(\"modulo.metodo.concluido\")\n</code></pre>"},{"location":"projeto/manual_gestao/#3-contadores-obrigatorios","title":"3. Contadores obrigat\u00f3rios","text":"<ul> <li>[ ] <code>iniciado</code> - no come\u00e7o do m\u00e9todo</li> <li>[ ] <code>concluido</code> - no final bem-sucedido</li> <li>[ ] <code>erro.tipo</code> - para cada erro tratado</li> <li>[ ] <code>caracteres</code> - quando processar texto (opcional)</li> </ul>"},{"location":"projeto/manual_gestao/#4-testes-de-telemetria","title":"4. Testes de telemetria","text":"<p>Sempre criar <code>test_*_telemetry.py</code> com: - [ ] Teste de sucesso (verifica contadores) - [ ] Teste de erro (verifica contadores de erro) - [ ] Teste sem telemetria (garante fallback) <pre><code>---\n\n## \ud83e\uddf9 **FLOW 5: REFATORA\u00c7\u00c3O**\n\n### **Por que documentar?**\n- Refatorar sem quebrar \u00e9 uma arte\n- Precisamos de seguran\u00e7a (testes)\n- Evitar \"refatorar e esquecer de testar\"\n\n### **Estrutura proposta:**\n```markdown\n# Refactoring Flow - ShowTrials\n\n## \ud83c\udfaf Quando refatorar\n- C\u00f3digo duplicado (DRY)\n- M\u00e9todo muito longo (&gt;50 linhas)\n- Complexidade ciclom\u00e1tica alta\n- Antes de adicionar nova funcionalidade\n\n## \ud83d\udd12 Regra de Ouro\n**NUNCA refatore e adicione funcionalidade no mesmo commit.**\n\n## \ud83d\udccb Passo a Passo Seguro\n\n### 1. Verificar cobertura atual\n```bash\ntask cov-file --path src/application/use_cases/alvo.py\n</code></pre> Se &lt;80%, crie testes ANTES de refatorar.</p>"},{"location":"projeto/manual_gestao/#2-criar-branch","title":"2. Criar branch","text":"<pre><code>git checkout -b refactor/descricao\n</code></pre>"},{"location":"projeto/manual_gestao/#3-fazer-uma-mudanca-por-vez","title":"3. Fazer uma mudan\u00e7a por vez","text":"<ul> <li>Renomear vari\u00e1vel</li> <li>Extrair m\u00e9todo</li> <li>Mover fun\u00e7\u00e3o</li> </ul>"},{"location":"projeto/manual_gestao/#4-testar-a-cada-mudanca","title":"4. Testar a cada mudan\u00e7a","text":"<pre><code>task test-file --path src/tests/test_alvo.py\n</code></pre>"},{"location":"projeto/manual_gestao/#5-commit-por-mudanca-atomica","title":"5. Commit por mudan\u00e7a at\u00f4mica","text":"<pre><code>git commit -m \"refactor: extrai m\u00e9todo _calcular_total em classificar_documento\"\n</code></pre>"},{"location":"projeto/manual_gestao/#6-ao-final-verificar-se-tudo-passou","title":"6. Ao final, verificar se tudo passou","text":"<pre><code>task check\ntask test-cov  # cobertura n\u00e3o deve cair\n</code></pre>"},{"location":"projeto/manual_gestao/#7-ci-e-merge","title":"7. CI e merge","text":"<p><pre><code>git push origin refactor/descricao\n# (CI deve passar)\n</code></pre> <pre><code>---\n\n## \ud83d\udea8 **FLOW 6: EMERG\u00caNCIA (HOTFIX)**\n\n### **Por que documentar?**\n- Situa\u00e7\u00f5es de estresse exigem procedimentos claros\n- Evitar piorar o problema\n- Garantir que a corre\u00e7\u00e3o n\u00e3o introduza novos bugs\n\n### **Estrutura proposta:**\n```markdown\n# Emergency Flow - ShowTrials\n\n## \ud83d\udea8 Quando usar\n- Bug cr\u00edtico em produ\u00e7\u00e3o (main)\n- Funcionalidade principal quebrada\n- Dados corrompidos\n\n## \ud83d\udccb Procedimento de Hotfix\n\n### 1. Criar branch de hotfix\n```bash\ngit checkout main\ngit pull origin main\ngit checkout -b fix/urgente-descricao\n</code></pre></p>"},{"location":"projeto/manual_gestao/#2-corrigir-o-minimo-necessario","title":"2. Corrigir o m\u00ednimo necess\u00e1rio","text":"<ul> <li>Apenas o necess\u00e1rio para resolver o problema</li> <li>NADA de refatora\u00e7\u00e3o</li> <li>NADA de novas funcionalidades</li> </ul>"},{"location":"projeto/manual_gestao/#3-testar-exaustivamente","title":"3. Testar exaustivamente","text":"<pre><code>task test-file --path src/tests/test_afetado.py\ntask test  # todos os testes (se poss\u00edvel)\n</code></pre>"},{"location":"projeto/manual_gestao/#4-commit-e-push","title":"4. Commit e push","text":"<pre><code>git add .\ngit commit -m \"fix: corrige erro cr\u00edtico no exportar_documento\n\n- [descri\u00e7\u00e3o t\u00e9cnica do problema]\n- [solu\u00e7\u00e3o aplicada]\n\nCloses #NUMERO_DA_ISSUE\"\ngit push origin fix/urgente-descricao\n</code></pre>"},{"location":"projeto/manual_gestao/#5-merge-direto-ci-obrigatorio","title":"5. Merge direto (CI obrigat\u00f3rio)","text":"<pre><code>git checkout main\ngit merge --ff-only fix/urgente-descricao\ngit push origin main\n</code></pre>"},{"location":"projeto/manual_gestao/#6-criar-nova-versao-patch","title":"6. Criar nova vers\u00e3o (patch)","text":"<pre><code>git tag -a v0.2.1 -m \"Hotfix: corre\u00e7\u00e3o cr\u00edtica\"\ngit push origin v0.2.1\ngh release create v0.2.1 --title \"v0.2.1\" --notes \"Corre\u00e7\u00e3o emergencial\"\n</code></pre>"},{"location":"projeto/manual_gestao/#7-comunicar","title":"7. Comunicar","text":"<ul> <li>Atualizar issue</li> <li>Comentar no Kanban</li> <li>(Opcional) atualizar documenta\u00e7\u00e3o <pre><code>---\n\n## \ud83d\udccb **FLOW 7: CODE REVIEW (AUTO-REVIEW)**\n\n### **Por que documentar?**\n- Mesmo trabalhando sozinho, revisar \u00e9 importante\n- Checklist evita esquecimentos\n- Garante consist\u00eancia\n\n### **Estrutura proposta:**\n```markdown\n# Code Review Flow - ShowTrials\n\n## \u2705 Checklist de Auto-Review\n\n### Antes de abrir o PR (ou fazer merge)\n\n#### \ud83d\udcc1 C\u00f3digo\n- [ ] Seguiu o padr\u00e3o de nomenclatura (`type/*`)\n- [ ] Adicionou telemetria nos m\u00e9todos p\u00fablicos\n- [ ] Removeu c\u00f3digo comentado\n- [ ] Removeu prints de debug\n- [ ] Nomes de vari\u00e1veis s\u00e3o claros\n- [ ] Fun\u00e7\u00f5es/m\u00e9todos s\u00e3o pequenos (&lt;50 linhas)\n\n#### \ud83e\uddea Testes\n- [ ] Criou `test_*.py` para l\u00f3gica\n- [ ] Criou `test_*_telemetry.py` para telemetria\n- [ ] Testes passam localmente\n- [ ] Cobertura do arquivo &gt;=85%\n- [ ] Testou casos de erro (except)\n\n#### \ud83d\udd24 Type Hints\n- [ ] Todos os par\u00e2metros t\u00eam tipo\n- [ ] Retornos t\u00eam tipo\n- [ ] MyPy passa no arquivo (0 erros)\n\n#### \ud83d\udcda Documenta\u00e7\u00e3o\n- [ ] Docstrings em m\u00e9todos p\u00fablicos\n- [ ] Atualizou CHANGELOG.md (se relevante)\n- [ ] Atualizou FASE*.md (se nova fase)\n\n#### \ud83d\udd27 Qualidade\n- [ ] `task lint` passa (0 erros)\n- [ ] `task check` passa\n- [ ] CI verde\n\n### Depois do merge\n- [ ] Issue fechou automaticamente?\n- [ ] Moveu no Kanban para \"Done\"\n- [ ] Verificou cobertura global n\u00e3o caiu\n</code></pre></li> </ul>"},{"location":"projeto/manual_gestao/#resumo-dos-flows","title":"\ud83d\udcca RESUMO DOS FLOWS","text":"Flow Prioridade Complexidade Status Git Flow Alta M\u00e9dia \u2705 Documentado Quality Flow Alta M\u00e9dia \u2705 Documentado Dependencies Flow M\u00e9dia Baixa \u23f3 Pendente Debug Flow M\u00e9dia M\u00e9dia \u23f3 Pendente Documentation Flow M\u00e9dia Baixa \u23f3 Pendente Telemetry Flow Alta Baixa \u23f3 Pendente Refactoring Flow Baixa M\u00e9dia \u23f3 Pendente Emergency Flow Baixa Baixa \u23f3 Pendente Code Review Flow Alta Baixa \u23f3 Pendente"},{"location":"projeto/manual_gestao/#recomendacao-de-prioridade","title":"\ud83c\udfaf RECOMENDA\u00c7\u00c3O DE PRIORIDADE","text":""},{"location":"projeto/manual_gestao/#fazer-agora-prioridade-alta","title":"Fazer agora (prioridade alta)","text":"<ol> <li>Telemetry Flow - \u00c9 nosso padr\u00e3o mais usado</li> <li>Code Review Flow - Garante consist\u00eancia</li> <li>Dependencies Flow - Evita problemas com NLP</li> </ol>"},{"location":"projeto/manual_gestao/#fazer-em-breve-prioridade-media","title":"Fazer em breve (prioridade m\u00e9dia)","text":"<ol> <li>Debug Flow - \u00datil quando algo quebra</li> <li>Documentation Flow - Mant\u00e9m docs organizados</li> </ol>"},{"location":"projeto/manual_gestao/#fazer-quando-sobrar-tempo-prioridade-baixa","title":"Fazer quando sobrar tempo (prioridade baixa)","text":"<ol> <li>Refactoring Flow - Para melhorias futuras</li> <li>Emergency Flow - Espero nunca precisar</li> </ol>"},{"location":"projeto/manual_gestao/#proximo-passo","title":"\ud83d\udccb PR\u00d3XIMO PASSO","text":"<p>Qual desses flows voc\u00ea quer que eu documente primeiro? \ud83c\udfaf</p>"},{"location":"projeto/plano_issues_documentacao/","title":"Plano de Issues","text":""},{"location":"projeto/plano_issues_documentacao/#plano-completo-de-issues-e-milestones","title":"\ud83d\udccb PLANO COMPLETO DE ISSUES E MILESTONES","text":"<p>Com base em todos os flows documentados e no estado atual do projeto, aqui est\u00e3o as issues organizadas por milestones:</p>"},{"location":"projeto/plano_issues_documentacao/#milestone-1-fundacao-semanas-1-2","title":"\ud83c\udfaf MILESTONE 1: FUNDA\u00c7\u00c3O (Semanas 1-2)","text":"<p>Objetivo: Estabilizar e documentar os processos fundamentais</p> # T\u00edtulo Tipo Prioridade Estimativa F1 Criar documenta\u00e7\u00e3o dos 9 flows do projeto <code>docs</code> Alta 4h F2 Integrar flows ao MkDocs <code>docs</code> M\u00e9dia 1h F3 Criar script de inicializa\u00e7\u00e3o do projeto (onboarding) <code>chore</code> M\u00e9dia 2h F4 Revisar e atualizar README.md com badges e instru\u00e7\u00f5es <code>docs</code> Baixa 1h F5 Configurar branch protection rules no GitHub <code>chore</code> Alta 30min F6 Padronizar mensagens de commit com commitizen <code>chore</code> M\u00e9dia 1h"},{"location":"projeto/plano_issues_documentacao/#milestone-2-qualidade-e-testes-semanas-3-4","title":"\ud83d\udd27 MILESTONE 2: QUALIDADE E TESTES (Semanas 3-4)","text":"<p>Objetivo: Garantir qualidade consistente em todo o c\u00f3digo</p> # T\u00edtulo Tipo Prioridade Estimativa Q1 FASE 17: Telemetria e testes em <code>classificar_documento.py</code> <code>type</code> Alta 3h Q2 FASE 18: Telemetria e testes em <code>obter_documento.py</code> <code>type</code> Alta 2h Q3 FASE 19: Telemetria e testes em <code>estatisticas.py</code> (15% \u2192 85%) <code>type</code> Urgente 4h Q4 FASE 20: Corrigir MyPy global (6 erros) <code>type/qualidade</code> Alta 2h Q5 Adicionar testes de integra\u00e7\u00e3o para reposit\u00f3rios SQLite <code>test</code> M\u00e9dia 3h Q6 Aumentar cobertura para 80%+ nos arquivos restantes <code>test</code> M\u00e9dia 4h Q7 Adicionar property-based testing com Hypothesis <code>test</code> Baixa 3h"},{"location":"projeto/plano_issues_documentacao/#milestone-3-dependencias-e-infra-semanas-5-6","title":"\ud83d\udce6 MILESTONE 3: DEPEND\u00caNCIAS E INFRA (Semanas 5-6)","text":"<p>Objetivo: Resolver d\u00edvidas t\u00e9cnicas e melhorar infraestrutura</p> # T\u00edtulo Tipo Prioridade Estimativa D1 Migrar depend\u00eancias NLP para Poetry (Issue #1) <code>tipo/infra</code> Alta 4h D2 Instalar stubs para m\u00f3dulos externos (types-PyYAML) <code>chore</code> M\u00e9dia 30min D3 Atualizar CI para usar Poetry completamente <code>chore</code> M\u00e9dia 2h D4 Adicionar cache mais eficiente no CI <code>chore</code> Baixa 1h D5 Dockerizar aplica\u00e7\u00e3o (CLI + Web) <code>feat</code> Baixa 4h"},{"location":"projeto/plano_issues_documentacao/#milestone-4-novas-funcionalidades-semanas-7-8","title":"\ud83d\ude80 MILESTONE 4: NOVAS FUNCIONALIDADES (Semanas 7-8)","text":"<p>Objetivo: Expandir capacidades do sistema</p> # T\u00edtulo Tipo Prioridade Estimativa N1 Melhoria: Modo escuro no CLI <code>feat</code> Baixa 2h N2 Melhoria: Gr\u00e1ficos no terminal com plotext <code>feat</code> M\u00e9dia 3h N3 API REST documentada com OpenAPI/Swagger <code>feat</code> M\u00e9dia 4h N4 Exporta\u00e7\u00e3o para PDF (usando ReportLab) <code>feat</code> M\u00e9dia 4h N5 Busca global no acervo <code>feat</code> Baixa 3h N6 Cache com Redis para an\u00e1lises frequentes <code>feat</code> Baixa 4h"},{"location":"projeto/plano_issues_documentacao/#milestone-5-documentacao-e-finalizacao-continuo","title":"\ud83d\udcda MILESTONE 5: DOCUMENTA\u00c7\u00c3O E FINALIZA\u00c7\u00c3O (Cont\u00ednuo)","text":"<p>Objetivo: Preparar para entrega do TCC</p> # T\u00edtulo Tipo Prioridade Estimativa R1 Revisar documenta\u00e7\u00e3o (.md files) - Issue #2 <code>tipo/documenta\u00e7\u00e3o</code> Alta 3h R2 Atualizar todas as FASE*.md com resultados finais <code>docs</code> Alta 4h R3 Criar apresenta\u00e7\u00e3o do TCC (slides) <code>docs</code> Alta 6h R4 Preparar v\u00eddeo de demonstra\u00e7\u00e3o <code>docs</code> M\u00e9dia 3h R5 Revisar e publicar vers\u00e3o final (v1.0.0) <code>release</code> Alta 2h"},{"location":"projeto/plano_issues_documentacao/#todas-as-labels-necessarias","title":"\ud83c\udff7\ufe0f TODAS AS LABELS NECESS\u00c1RIAS","text":"<pre><code># Labels j\u00e1 existentes\n- fase\n- tipo/testes\n- tipo/qualidade\n- tipo/documenta\u00e7\u00e3o\n- tipo/infra\n- melhoria\n- ux\n- prioridade:alta\n- prioridade:media\n- prioridade:baixa\n\n# Novas labels sugeridas\n- tipo/hotfix\n- tipo/security\n- tipo/performance\n- tipo/release\n- tipo/onboarding\n- status:bloqueado\n- status:em-andamento\n- status:revisao\n</code></pre>"},{"location":"projeto/plano_issues_documentacao/#resumo-das-issues-por-milestone","title":"\ud83d\udcca RESUMO DAS ISSUES POR MILESTONE","text":"Milestone Issues Estimativa total FUNDA\u00c7\u00c3O 6 ~9h QUALIDADE 7 ~21h DEPEND\u00caNCIAS 5 ~11h NOVAS FUNCIONALIDADES 6 ~20h DOCUMENTA\u00c7\u00c3O 5 ~18h TOTAL 29 issues ~79h"},{"location":"projeto/plano_issues_documentacao/#script-para-criar-todas-as-issues","title":"\ud83d\ude80 SCRIPT PARA CRIAR TODAS AS ISSUES","text":"<pre><code>#!/bin/bash\n# criar_todas_issues.sh\n# Script para criar todas as issues do projeto\n\necho \"\ud83d\ude80 Criando todas as issues do ShowTrials...\"\necho \"===========================================\"\n\n# =============================================\n# MILESTONE 1: FUNDA\u00c7\u00c3O\n# =============================================\necho \"\"\necho \"\ud83d\udccc MILESTONE 1: FUNDA\u00c7\u00c3O\"\n\ngh issue create --title \"F1: Criar documenta\u00e7\u00e3o dos 9 flows do projeto\" \\\n  --body \"## \ud83c\udfaf Objetivo\nDocumentar todos os flows do projeto em arquivos separados.\n\n## \ud83d\udccb Tarefas\n- [ ] Git Flow\n- [ ] Quality Flow\n- [ ] Telemetry Flow\n- [ ] Code Review Flow\n- [ ] Dependencies Flow\n- [ ] Debug Flow\n- [ ] Documentation Flow\n- [ ] Refactoring Flow\n- [ ] Emergency Flow\n\n## \ud83d\udcc1 Local\n`docs/flows/`\n\n## \u23f1\ufe0f Estimativa: 4h\" \\\n  --label \"docs,prioridade:alta\" \\\n  --milestone \"FUNDA\u00c7\u00c3O (Semanas 1-2)\"\n\ngh issue create --title \"F2: Integrar flows ao MkDocs\" \\\n  --body \"## \ud83c\udfaf Objetivo\nAdicionar os flows documentados ao site do MkDocs.\n\n## \ud83d\udccb Tarefas\n- [ ] Criar se\u00e7\u00e3o 'Flows' no mkdocs.yml\n- [ ] Adicionar links para cada flow\n- [ ] Verificar navega\u00e7\u00e3o\n\n## \u23f1\ufe0f Estimativa: 1h\" \\\n  --label \"docs,prioridade:media\" \\\n  --milestone \"FUNDA\u00c7\u00c3O (Semanas 1-2)\"\n\ngh issue create --title \"F3: Criar script de inicializa\u00e7\u00e3o do projeto\" \\\n  --body \"## \ud83c\udfaf Objetivo\nCriar script que configura todo o ambiente do zero.\n\n## \ud83d\udccb Tarefas\n- [ ] Clonar reposit\u00f3rio\n- [ ] Instalar Poetry\n- [ ] Instalar depend\u00eancias\n- [ ] Instalar NLP via pip\n- [ ] Baixar modelos\n- [ ] Verificar instala\u00e7\u00e3o\n\n## \u23f1\ufe0f Estimativa: 2h\" \\\n  --label \"chore,prioridade:media\" \\\n  --milestone \"FUNDA\u00c7\u00c3O (Semanas 1-2)\"\n\n# =============================================\n# MILESTONE 2: QUALIDADE\n# =============================================\necho \"\"\necho \"\ud83d\udccc MILESTONE 2: QUALIDADE\"\n\ngh issue create --title \"Q1: FASE 17 - classificar_documento.py\" \\\n  --body \"## \ud83c\udfaf Objetivo\nAumentar cobertura de 65% para 85% em classificar_documento.py\n\n## \ud83d\udcca M\u00e9tricas Atuais\n- **Cobertura:** 65%\n- **Linhas n\u00e3o cobertas:** 18\n- **Telemetria:** \u274c Ausente\n- **MyPy:** \u2705 OK\n\n## \ud83d\udccb Tarefas\n- [ ] Adicionar padr\u00e3o de telemetria\n- [ ] Expandir testes existentes\n- [ ] Criar testes de telemetria\n- [ ] Verificar cobertura final\n\n## \u23f1\ufe0f Estimativa: 3h\" \\\n  --label \"fase,tipo/testes,prioridade:alta\" \\\n  --milestone \"QUALIDADE E TESTES (Semanas 3-4)\"\n\ngh issue create --title \"Q2: FASE 18 - obter_documento.py\" \\\n  --body \"## \ud83c\udfaf Objetivo\nAumentar cobertura de 57% para 85% em obter_documento.py\n\n## \ud83d\udcca M\u00e9tricas Atuais\n- **Cobertura:** 57%\n- **Linhas n\u00e3o cobertas:** 15\n- **Telemetria:** \u274c Ausente\n- **MyPy:** \u26a0\ufe0f 2 erros\n\n## \ud83d\udccb Tarefas\n- [ ] Adicionar padr\u00e3o de telemetria\n- [ ] Expandir testes existentes\n- [ ] Criar testes de telemetria\n- [ ] Corrigir MyPy\n- [ ] Verificar cobertura final\n\n## \u23f1\ufe0f Estimativa: 2h\" \\\n  --label \"fase,tipo/testes,prioridade:alta\" \\\n  --milestone \"QUALIDADE E TESTES (Semanas 3-4)\"\n\ngh issue create --title \"Q3: FASE 19 - estatisticas.py (URGENTE)\" \\\n  --body \"## \ud83c\udfaf Objetivo\nAumentar cobertura de 15% para 85% em estatisticas.py\n\n## \ud83d\udcca M\u00e9tricas Atuais\n- **Cobertura:** 15% (\u26a0\ufe0f URGENTE!)\n- **Linhas n\u00e3o cobertas:** 41\n- **Telemetria:** \u274c Ausente\n- **MyPy:** \u26a0\ufe0f 3 erros\n\n## \ud83d\udccb Tarefas\n- [ ] Adicionar padr\u00e3o de telemetria\n- [ ] Criar testes de l\u00f3gica\n- [ ] Criar testes de telemetria\n- [ ] Corrigir MyPy\n- [ ] Verificar cobertura final\n\n## \u23f1\ufe0f Estimativa: 4h\" \\\n  --label \"fase,tipo/testes,prioridade:alta\" \\\n  --milestone \"QUALIDADE E TESTES (Semanas 3-4)\"\n\n# =============================================\n# CONTINUAR PARA TODAS AS ISSUES...\n# =============================================\n\necho \"\"\necho \"\u2705 Script conclu\u00eddo! Foram criadas:\"\necho \"- 6 issues para FUNDA\u00c7\u00c3O\"\necho \"- 7 issues para QUALIDADE\"\necho \"- 5 issues para DEPEND\u00caNCIAS\"\necho \"- 6 issues para NOVAS FUNCIONALIDADES\"\necho \"- 5 issues para DOCUMENTA\u00c7\u00c3O\"\necho \"\"\necho \"\ud83d\udcca TOTAL: 29 issues\"\n</code></pre>"},{"location":"projeto/plano_issues_documentacao/#proximos-passos","title":"\u2705 PR\u00d3XIMOS PASSOS","text":"<ol> <li>Criar os milestones no GitHub:</li> <li>FUNDA\u00c7\u00c3O (Semanas 1-2) - due date: +14 dias</li> <li>QUALIDADE E TESTES (Semanas 3-4) - due date: +28 dias</li> <li>DEPEND\u00caNCIAS E INFRA (Semanas 5-6) - due date: +42 dias</li> <li>NOVAS FUNCIONALIDADES (Semanas 7-8) - due date: +56 dias</li> <li> <p>DOCUMENTA\u00c7\u00c3O E FINALIZA\u00c7\u00c3O (Cont\u00ednuo) - due date: TCC</p> </li> <li> <p>Criar as issues (pode usar o script acima como base)</p> </li> <li> <p>Adicionar ao Project Kanban</p> </li> </ol> <p>Quer que eu gere o script completo com todas as 29 issues? \ud83d\ude80</p>"},{"location":"projeto/plano_issues_documentacao/#script-completo-29-issues-instrucoes","title":"\ud83d\udcdc SCRIPT COMPLETO - 29 ISSUES + INSTRU\u00c7\u00d5ES","text":"<pre><code>#!/bin/bash\n# criar_todas_issues.sh\n# Script COMPLETO para criar todas as issues do projeto ShowTrials\n# Uso: chmod +x criar_todas_issues.sh &amp;&amp; ./criar_todas_issues.sh\n\necho \"\ud83d\ude80 ShowTrials - Criando todas as 29 issues do projeto\"\necho \"=====================================================\"\necho \"\"\n\n# =============================================\n# VERIFICAR AUTENTICA\u00c7\u00c3O\n# =============================================\necho \"\ud83d\udd0d Verificando autentica\u00e7\u00e3o no GitHub...\"\nif ! gh auth status &amp;&gt;/dev/null; then\n    echo \"\u274c Voc\u00ea n\u00e3o est\u00e1 logado no GitHub CLI\"\n    echo \"   Execute: gh auth login\"\n    exit 1\nfi\necho \"   \u2705 Autenticado\"\necho \"\"\n\n# =============================================\n# CRIAR MILESTONES\n# =============================================\necho \"\ud83d\udcc5 Criando milestones (pelo site)...\"\necho \"\"\necho \"\u26a0\ufe0f  ATEN\u00c7\u00c3O: Milestones precisam ser criados manualmente pelo site:\"\necho \"   https://github.com/rib-thiago/showtrials-tcc/milestones/new\"\necho \"\"\necho \"   Crie os seguintes milestones:\"\necho \"   ------------------------------\"\necho \"   1. FUNDA\u00c7\u00c3O (Semanas 1-2)\"\necho \"      - Due date: $(date -d \"+14 days\" +%Y-%m-%d)\"\necho \"      - Description: Documenta\u00e7\u00e3o e configura\u00e7\u00e3o inicial\"\necho \"\"\necho \"   2. QUALIDADE E TESTES (Semanas 3-4)\"\necho \"      - Due date: $(date -d \"+28 days\" +%Y-%m-%d)\"\necho \"      - Description: Aumentar cobertura, corrigir MyPy\"\necho \"\"\necho \"   3. DEPEND\u00caNCIAS E INFRA (Semanas 5-6)\"\necho \"      - Due date: $(date -d \"+42 days\" +%Y-%m-%d)\"\necho \"      - Description: Migrar NLP, stubs, Docker\"\necho \"\"\necho \"   4. NOVAS FUNCIONALIDADES (Semanas 7-8)\"\necho \"      - Due date: $(date -d \"+56 days\" +%Y-%m-%d)\"\necho \"      - Description: Modo escuro, gr\u00e1ficos, API, PDF\"\necho \"\"\necho \"   5. DOCUMENTA\u00c7\u00c3O E FINALIZA\u00c7\u00c3O (Cont\u00ednuo)\"\necho \"      - Due date: $(date -d \"+90 days\" +%Y-%m-%d)\"\necho \"      - Description: Revis\u00e3o de docs, prepara\u00e7\u00e3o TCC\"\necho \"\"\nread -p \"Pressione Enter ap\u00f3s criar os milestones para continuar...\"\necho \"\"\n\n# =============================================\n# FUN\u00c7\u00c3O PARA CRIAR ISSUE\n# =============================================\ncreate_issue() {\n    local title=\"$1\"\n    local body=\"$2\"\n    local labels=\"$3\"\n    local milestone=\"$4\"\n\n    echo \"   Criando: $title\"\n    gh issue create --title \"$title\" --body \"$body\" --label \"$labels\" --milestone \"$milestone\"\n    echo \"   \u2705 Criada\"\n    echo \"\"\n}\n\n# =============================================\n# MILESTONE 1: FUNDA\u00c7\u00c3O (Semanas 1-2)\n# =============================================\necho \"\ud83d\udccc MILESTONE 1: FUNDA\u00c7\u00c3O (6 issues)\"\necho \"-------------------------------------\"\n\ncreate_issue \"F1: Criar documenta\u00e7\u00e3o dos 9 flows do projeto\" \\\n\"## \ud83c\udfaf Objetivo\nDocumentar todos os flows do projeto em arquivos separados na pasta `docs/flows/`.\n\n## \ud83d\udccb Tarefas\n- [ ] Git Flow\n- [ ] Quality Flow (lint, testes, cobertura)\n- [ ] Telemetry Flow\n- [ ] Code Review Flow\n- [ ] Dependencies Flow\n- [ ] Debug Flow\n- [ ] Documentation Flow\n- [ ] Refactoring Flow\n- [ ] Emergency Flow (Hotfix)\n\n## \ud83d\udcc1 Local\n`docs/flows/` (criar pasta)\n\n## \ud83d\udcca Defini\u00e7\u00e3o de Pronto\n- [ ] 9 arquivos .md criados\n- [ ] Cada um com template padr\u00e3o\n- [ ] Revisados e consistentes\n\n## \u23f1\ufe0f Estimativa: 4h\n## Prioridade: Alta\" \\\n  \"docs,prioridade:alta\" \\\n  \"FUNDA\u00c7\u00c3O (Semanas 1-2)\"\n\ncreate_issue \"F2: Integrar flows ao MkDocs\" \\\n\"## \ud83c\udfaf Objetivo\nAdicionar os flows documentados ao site do MkDocs para f\u00e1cil navega\u00e7\u00e3o.\n\n## \ud83d\udccb Tarefas\n- [ ] Adicionar se\u00e7\u00e3o 'Flows' no `mkdocs.yml`\n- [ ] Incluir links para cada flow\n- [ ] Verificar navega\u00e7\u00e3o localmente\n- [ ] Publicar com `mkdocs gh-deploy`\n\n## \ud83d\udcca Defini\u00e7\u00e3o de Pronto\n- [ ] Se\u00e7\u00e3o Flows aparece no menu\n- [ ] Todos os links funcionam\n- [ ] Site atualizado no GitHub Pages\n\n## \u23f1\ufe0f Estimativa: 1h\n## Prioridade: M\u00e9dia\" \\\n  \"docs,prioridade:media\" \\\n  \"FUNDA\u00c7\u00c3O (Semanas 1-2)\"\n\ncreate_issue \"F3: Criar script de inicializa\u00e7\u00e3o do projeto (onboarding)\" \\\n\"## \ud83c\udfaf Objetivo\nCriar script que configura todo o ambiente do zero para novos desenvolvedores.\n\n## \ud83d\udccb Tarefas\n- [ ] Clonar reposit\u00f3rio\n- [ ] Verificar/instalar Poetry\n- [ ] Instalar depend\u00eancias (poetry install)\n- [ ] Instalar NLP via pip (numpy, spacy, etc.)\n- [ ] Baixar modelos spaCy\n- [ ] Verificar instala\u00e7\u00e3o com testes r\u00e1pidos\n\n## \ud83d\udcc1 Local\n`scripts/setup.sh`\n\n## \ud83d\udcca Defini\u00e7\u00e3o de Pronto\n- [ ] Script funciona em ambiente limpo\n- [ ] Documentado no README\n- [ ] Testado em Ubuntu (ou seu SO)\n\n## \u23f1\ufe0f Estimativa: 2h\n## Prioridade: M\u00e9dia\" \\\n  \"chore,prioridade:media\" \\\n  \"FUNDA\u00c7\u00c3O (Semanas 1-2)\"\n\ncreate_issue \"F4: Revisar e atualizar README.md\" \\\n\"## \ud83c\udfaf Objetivo\nGarantir que o README esteja completo e profissional.\n\n## \ud83d\udccb Tarefas\n- [ ] Atualizar badges (coverage, CI, vers\u00e3o)\n- [ ] Verificar instru\u00e7\u00f5es de instala\u00e7\u00e3o\n- [ ] Adicionar se\u00e7\u00e3o de 'Primeiros passos'\n- [ ] Incluir exemplos de uso\n- [ ] Links para documenta\u00e7\u00e3o\n- [ ] Contato e autor\n\n## \ud83d\udcca Defini\u00e7\u00e3o de Pronto\n- [ ] README revisado e aprovado\n- [ ] Todos os links funcionam\n- [ ] Badges refletem estado atual\n\n## \u23f1\ufe0f Estimativa: 1h\n## Prioridade: Baixa\" \\\n  \"docs,prioridade:baixa\" \\\n  \"FUNDA\u00c7\u00c3O (Semanas 1-2)\"\n\ncreate_issue \"F5: Configurar branch protection rules no GitHub\" \\\n\"## \ud83c\udfaf Objetivo\nProteger a branch main contra merges acidentais.\n\n## \ud83d\udccb Tarefas\n- [ ] Acessar Settings &gt; Branches\n- [ ] Adicionar regra para 'main'\n- [ ] Requerer status checks (CI)\n- [ ] Requerer branches atualizadas\n- [ ] Incluir administradores\n\n## \ud83d\udcca Defini\u00e7\u00e3o de Pronto\n- [ ] Regras aplicadas e testadas\n- [ ] CI \u00e9 obrigat\u00f3rio para merge\n\n## \u23f1\ufe0f Estimativa: 30min\n## Prioridade: Alta\" \\\n  \"chore,prioridade:alta\" \\\n  \"FUNDA\u00c7\u00c3O (Semanas 1-2)\"\n\ncreate_issue \"F6: Padronizar mensagens de commit com commitizen\" \\\n\"## \ud83c\udfaf Objetivo\nGarantir que todas as mensagens de commit sigam o padr\u00e3o Conventional Commits.\n\n## \ud83d\udccb Tarefas\n- [ ] Verificar configura\u00e7\u00e3o do commitizen\n- [ ] Atualizar pre-commit hook se necess\u00e1rio\n- [ ] Documentar padr\u00e3o no CONTRIBUTING.md\n- [ ] Adicionar exemplo no README\n\n## \ud83d\udcca Defini\u00e7\u00e3o de Pronto\n- [ ] commitizen funcionando\n- [ ] Documenta\u00e7\u00e3o atualizada\n\n## \u23f1\ufe0f Estimativa: 1h\n## Prioridade: M\u00e9dia\" \\\n  \"chore,prioridade:media\" \\\n  \"FUNDA\u00c7\u00c3O (Semanas 1-2)\"\n\n# =============================================\n# MILESTONE 2: QUALIDADE E TESTES (Semanas 3-4)\n# =============================================\necho \"\ud83d\udccc MILESTONE 2: QUALIDADE E TESTES (7 issues)\"\necho \"-----------------------------------------------\"\n\ncreate_issue \"Q1: FASE 17 - classificar_documento.py\" \\\n\"## \ud83c\udfaf Objetivo\nAumentar cobertura de 65% para 85% em classificar_documento.py\n\n## \ud83d\udcca M\u00e9tricas Atuais\n- **Cobertura:** 65%\n- **Linhas n\u00e3o cobertas:** 18\n- **Telemetria:** \u274c Ausente\n- **MyPy:** \u2705 OK\n\n## \ud83d\udccb Tarefas\n- [ ] Adicionar padr\u00e3o de telemetria\n- [ ] Expandir testes existentes\n- [ ] Criar testes de telemetria\n- [ ] Verificar cobertura final\n\n## \ud83d\udd17 Links\n- [Arquivo alvo](src/application/use_cases/classificar_documento.py)\n\n## \ud83d\udcca Defini\u00e7\u00e3o de Pronto\n- [ ] Cobertura &gt;= 85%\n- [ ] Testes de l\u00f3gica (8+)\n- [ ] Testes de telemetria (4+)\n- [ ] MyPy 0 erros\n\n## \u23f1\ufe0f Estimativa: 3h\n## Prioridade: Alta\" \\\n  \"fase,tipo/testes,prioridade:alta\" \\\n  \"QUALIDADE E TESTES (Semanas 3-4)\"\n\ncreate_issue \"Q2: FASE 18 - obter_documento.py\" \\\n\"## \ud83c\udfaf Objetivo\nAumentar cobertura de 57% para 85% em obter_documento.py\n\n## \ud83d\udcca M\u00e9tricas Atuais\n- **Cobertura:** 57%\n- **Linhas n\u00e3o cobertas:** 15\n- **Telemetria:** \u274c Ausente\n- **MyPy:** \u26a0\ufe0f 2 erros\n\n## \ud83d\udccb Tarefas\n- [ ] Adicionar padr\u00e3o de telemetria\n- [ ] Expandir testes existentes\n- [ ] Criar testes de telemetria\n- [ ] Corrigir MyPy\n- [ ] Verificar cobertura final\n\n## \ud83d\udd17 Links\n- [Arquivo alvo](src/application/use_cases/obter_documento.py)\n\n## \ud83d\udcca Defini\u00e7\u00e3o de Pronto\n- [ ] Cobertura &gt;= 85%\n- [ ] Testes de l\u00f3gica (8+)\n- [ ] Testes de telemetria (4+)\n- [ ] MyPy 0 erros\n\n## \u23f1\ufe0f Estimativa: 2h\n## Prioridade: Alta\" \\\n  \"fase,tipo/testes,prioridade:alta\" \\\n  \"QUALIDADE E TESTES (Semanas 3-4)\"\n\ncreate_issue \"Q3: FASE 19 - estatisticas.py (URGENTE)\" \\\n\"## \ud83c\udfaf Objetivo\nAumentar cobertura de 15% para 85% em estatisticas.py\n\n## \ud83d\udcca M\u00e9tricas Atuais\n- **Cobertura:** 15% (\u26a0\ufe0f URGENTE!)\n- **Linhas n\u00e3o cobertas:** 41\n- **Telemetria:** \u274c Ausente\n- **MyPy:** \u26a0\ufe0f 3 erros\n\n## \ud83d\udccb Tarefas\n- [ ] Adicionar padr\u00e3o de telemetria\n- [ ] Criar testes de l\u00f3gica\n- [ ] Criar testes de telemetria\n- [ ] Corrigir MyPy\n- [ ] Verificar cobertura final\n\n## \ud83d\udd17 Links\n- [Arquivo alvo](src/application/use_cases/estatisticas.py)\n\n## \ud83d\udcca Defini\u00e7\u00e3o de Pronto\n- [ ] Cobertura &gt;= 85%\n- [ ] Testes de l\u00f3gica (12+)\n- [ ] Testes de telemetria (6+)\n- [ ] MyPy 0 erros\n\n## \u23f1\ufe0f Estimativa: 4h\n## Prioridade: Alta\" \\\n  \"fase,tipo/testes,prioridade:alta\" \\\n  \"QUALIDADE E TESTES (Semanas 3-4)\"\n\ncreate_issue \"Q4: FASE 20 - Corrigir MyPy global\" \\\n\"## \ud83c\udfaf Objetivo\nEliminar todos os erros de MyPy do projeto\n\n## \ud83d\udcca M\u00e9tricas Atuais\n- **Total de erros:** 6\n- **Arquivos afetados:**\n  - `estatisticas.py` (3 erros)\n  - `config/__init__.py` (1 erro - yaml)\n  - `sqlite_repository.py` (2 erros)\n\n## \ud83d\udccb Tarefas\n- [ ] Adicionar type hints nos Counters de `estatisticas.py`\n- [ ] Instalar stubs: `poetry add --dev types-PyYAML`\n- [ ] Corrigir tipos em `sqlite_repository.py`\n- [ ] Verificar com `poetry run mypy src/`\n\n## \ud83d\udcca Defini\u00e7\u00e3o de Pronto\n- [ ] `poetry run mypy src/` retorna 0 erros\n\n## \u23f1\ufe0f Estimativa: 2h\n## Prioridade: Alta\" \\\n  \"fase,tipo/qualidade,prioridade:alta\" \\\n  \"QUALIDADE E TESTES (Semanas 3-4)\"\n\ncreate_issue \"Q5: Adicionar testes de integra\u00e7\u00e3o para reposit\u00f3rios SQLite\" \\\n\"## \ud83c\udfaf Objetivo\nGarantir que as queries SQL funcionem com banco real.\n\n## \ud83d\udccb Tarefas\n- [ ] Criar testes com banco tempor\u00e1rio\n- [ ] Testar `sqlite_repository.py` com dados reais\n- [ ] Testar `sqlite_traducao_repository.py`\n- [ ] Testar migrations\n\n## \ud83d\udcca Defini\u00e7\u00e3o de Pronto\n- [ ] Testes passando\n- [ ] Cobertura dos reposit\u00f3rios &gt;= 80%\n\n## \u23f1\ufe0f Estimativa: 3h\n## Prioridade: M\u00e9dia\" \\\n  \"test,prioridade:media\" \\\n  \"QUALIDADE E TESTES (Semanas 3-4)\"\n\ncreate_issue \"Q6: Aumentar cobertura global para 80%+\" \\\n\"## \ud83c\udfaf Objetivo\nGarantir que todo o c\u00f3digo tenha cobertura m\u00ednima.\n\n## \ud83d\udccb Tarefas\n- [ ] Mapear arquivos com cobertura &lt;80%\n- [ ] Priorizar por impacto\n- [ ] Criar testes faltantes\n- [ ] Verificar cobertura final\n\n## \ud83d\udcca Defini\u00e7\u00e3o de Pronto\n- [ ] Cobertura global &gt;= 80%\n\n## \u23f1\ufe0f Estimativa: 4h\n## Prioridade: M\u00e9dia\" \\\n  \"test,prioridade:media\" \\\n  \"QUALIDADE E TESTES (Semanas 3-4)\"\n\ncreate_issue \"Q7: Adicionar property-based testing com Hypothesis\" \\\n\"## \ud83c\udfaf Objetivo\nTestar propriedades invariantes com gera\u00e7\u00e3o autom\u00e1tica de dados.\n\n## \ud83d\udccb Tarefas\n- [ ] Adicionar Hypothesis: `poetry add --dev hypothesis`\n- [ ] Identificar fun\u00e7\u00f5es com propriedades test\u00e1veis\n- [ ] Escrever testes para `NomeRusso`\n- [ ] Escrever testes para `TipoDocumento`\n- [ ] Escrever testes para c\u00e1lculos estat\u00edsticos\n\n## \ud83d\udcca Defini\u00e7\u00e3o de Pronto\n- [ ] Testes com Hypothesis passando\n- [ ] Documenta\u00e7\u00e3o de exemplos\n\n## \u23f1\ufe0f Estimativa: 3h\n## Prioridade: Baixa\" \\\n  \"test,prioridade:baixa\" \\\n  \"QUALIDADE E TESTES (Semanas 3-4)\"\n\n# =============================================\n# MILESTONE 3: DEPEND\u00caNCIAS E INFRA (Semanas 5-6)\n# =============================================\necho \"\ud83d\udccc MILESTONE 3: DEPEND\u00caNCIAS E INFRA (5 issues)\"\necho \"------------------------------------------------\"\n\ncreate_issue \"D1: Migrar depend\u00eancias NLP para Poetry\" \\\n\"## \ud83c\udfaf Objetivo\nSubstituir instala\u00e7\u00e3o via pip por depend\u00eancias gerenciadas pelo Poetry.\n\n## \ud83d\udd17 Refer\u00eancia\nIssue #1 - Migrar depend\u00eancias NLP para Poetry\n\n## \ud83d\udccb Tarefas\n- [ ] Pesquisar vers\u00f5es compat\u00edveis\n- [ ] Testar combina\u00e7\u00f5es em branch separada\n- [ ] Atualizar `pyproject.toml`\n- [ ] Atualizar `poetry.lock`\n- [ ] Remover etapas de pip do CI\n- [ ] Atualizar documenta\u00e7\u00e3o\n\n## \ud83d\udcca Defini\u00e7\u00e3o de Pronto\n- [ ] `poetry install` instala tudo\n- [ ] CI sem etapas de pip\n- [ ] Testes passam\n\n## \u23f1\ufe0f Estimativa: 4h\n## Prioridade: Alta\" \\\n  \"tipo/infra,prioridade:alta\" \\\n  \"DEPEND\u00caNCIAS E INFRA (Semanas 5-6)\"\n\ncreate_issue \"D2: Instalar stubs para m\u00f3dulos externos\" \\\n\"## \ud83c\udfaf Objetivo\nEliminar erros de MyPy relacionados a m\u00f3dulos sem stubs.\n\n## \ud83d\udccb Tarefas\n- [ ] `poetry add --dev types-PyYAML`\n- [ ] `poetry add --dev types-requests`\n- [ ] Verificar outros m\u00f3dulos\n- [ ] Atualizar CI se necess\u00e1rio\n\n## \ud83d\udcca Defini\u00e7\u00e3o de Pronto\n- [ ] Erros de import resolvidos\n\n## \u23f1\ufe0f Estimativa: 30min\n## Prioridade: M\u00e9dia\" \\\n  \"tipo/qualidade,prioridade:media\" \\\n  \"DEPEND\u00caNCIAS E INFRA (Semanas 5-6)\"\n\ncreate_issue \"D3: Atualizar CI para usar Poetry completamente\" \\\n\"## \ud83c\udfaf Objetivo\nSimplificar o workflow do GitHub Actions.\n\n## \ud83d\udccb Tarefas\n- [ ] Remover etapas manuais de pip (ap\u00f3s D1)\n- [ ] Otimizar cache\n- [ ] Adicionar step de verifica\u00e7\u00e3o\n- [ ] Testar execu\u00e7\u00e3o\n\n## \ud83d\udcca Defini\u00e7\u00e3o de Pronto\n- [ ] CI mais r\u00e1pido e limpo\n\n## \u23f1\ufe0f Estimativa: 2h\n## Prioridade: M\u00e9dia\" \\\n  \"tipo/infra,prioridade:media\" \\\n  \"DEPEND\u00caNCIAS E INFRA (Semanas 5-6)\"\n\ncreate_issue \"D4: Adicionar cache mais eficiente no CI\" \\\n\"## \ud83c\udfaf Objetivo\nAcelerar as execu\u00e7\u00f5es do GitHub Actions.\n\n## \ud83d\udccb Tarefas\n- [ ] Cache do Poetry mais granular\n- [ ] Cache dos modelos spaCy\n- [ ] Cache do pip (se ainda usado)\n- [ ] Medir tempo antes/depois\n\n## \ud83d\udcca Defini\u00e7\u00e3o de Pronto\n- [ ] Redu\u00e7\u00e3o de tempo &gt;= 30%\n\n## \u23f1\ufe0f Estimativa: 1h\n## Prioridade: Baixa\" \\\n  \"tipo/infra,prioridade:baixa\" \\\n  \"DEPEND\u00caNCIAS E INFRA (Semanas 5-6)\"\n\ncreate_issue \"D5: Dockerizar aplica\u00e7\u00e3o (CLI + Web)\" \\\n\"## \ud83c\udfaf Objetivo\nFacilitar deploy e execu\u00e7\u00e3o em qualquer ambiente.\n\n## \ud83d\udccb Tarefas\n- [ ] Criar Dockerfile para CLI\n- [ ] Criar Dockerfile para Web (com uvicorn)\n- [ ] Criar docker-compose.yml\n- [ ] Documentar uso\n\n## \ud83d\udcca Defini\u00e7\u00e3o de Pronto\n- [ ] `docker-compose up` funciona\n- [ ] Documenta\u00e7\u00e3o atualizada\n\n## \u23f1\ufe0f Estimativa: 4h\n## Prioridade: Baixa\" \\\n  \"feat,prioridade:baixa\" \\\n  \"DEPEND\u00caNCIAS E INFRA (Semanas 5-6)\"\n\n# =============================================\n# MILESTONE 4: NOVAS FUNCIONALIDADES (Semanas 7-8)\n# =============================================\necho \"\ud83d\udccc MILESTONE 4: NOVAS FUNCIONALIDADES (6 issues)\"\necho \"-------------------------------------------------\"\n\ncreate_issue \"N1: Melhoria - Modo escuro no CLI\" \\\n\"## \ud83c\udfaf Objetivo\nAdicionar suporte a modo escuro na interface CLI.\n\n## \ud83d\udccb Tarefas\n- [ ] Criar tema escuro no `console.py`\n- [ ] Adicionar flag `--dark-mode`\n- [ ] Permitir altern\u00e2ncia durante execu\u00e7\u00e3o\n- [ ] Documentar no help\n\n## \ud83d\udd17 Refer\u00eancia\n- [Rich Themes](https://rich.readthedocs.io/en/stable/appendix/colors.html)\n\n## \u23f1\ufe0f Estimativa: 2h\n## Prioridade: Baixa\" \\\n  \"melhoria,ux,prioridade:baixa\" \\\n  \"NOVAS FUNCIONALIDADES (Semanas 7-8)\"\n\ncreate_issue \"N2: Melhoria - Gr\u00e1ficos no terminal\" \\\n\"## \ud83c\udfaf Objetivo\nAdicionar gr\u00e1ficos de barras no CLI usando plotext.\n\n## \ud83d\udccb Tarefas\n- [ ] Adicionar `plotext` como depend\u00eancia\n- [ ] Criar presenter para gr\u00e1ficos\n- [ ] Integrar com estat\u00edsticas\n- [ ] Adicionar comando `--grafico`\n\n## \ud83d\udd17 Refer\u00eancia\n- [plotext](https://github.com/piccolomo/plotext)\n\n## \u23f1\ufe0f Estimativa: 3h\n## Prioridade: M\u00e9dia\" \\\n  \"melhoria,ux,prioridade:media\" \\\n  \"NOVAS FUNCIONALIDADES (Semanas 7-8)\"\n\ncreate_issue \"N3: API REST documentada com OpenAPI/Swagger\" \\\n\"## \ud83c\udfaf Objetivo\nDisponibilizar API p\u00fablica para integra\u00e7\u00f5es.\n\n## \ud83d\udccb Tarefas\n- [ ] Revisar endpoints existentes\n- [ ] Adicionar docstrings OpenAPI\n- [ ] Configurar Swagger UI\n- [ ] Testar com curl/Postman\n\n## \u23f1\ufe0f Estimativa: 4h\n## Prioridade: M\u00e9dia\" \\\n  \"feat,prioridade:media\" \\\n  \"NOVAS FUNCIONALIDADES (Semanas 7-8)\"\n\ncreate_issue \"N4: Exporta\u00e7\u00e3o para PDF\" \\\n\"## \ud83c\udfaf Objetivo\nImplementar exporta\u00e7\u00e3o de documentos para PDF.\n\n## \ud83d\udccb Tarefas\n- [ ] Pesquisar bibliotecas (ReportLab, WeasyPrint)\n- [ ] Criar caso de uso `exportar_pdf`\n- [ ] Adicionar template de PDF\n- [ ] Integrar com CLI e Web\n\n## \u23f1\ufe0f Estimativa: 4h\n## Prioridade: M\u00e9dia\" \\\n  \"feat,prioridade:media\" \\\n  \"NOVAS FUNCIONALIDADES (Semanas 7-8)\"\n\ncreate_issue \"N5: Busca global no acervo\" \\\n\"## \ud83c\udfaf Objetivo\nPermitir busca textual em todos os documentos.\n\n## \ud83d\udccb Tarefas\n- [ ] Adicionar \u00edndice FTS no SQLite\n- [ ] Criar caso de uso `buscar_documentos`\n- [ ] Adicionar comando CLI `buscar`\n- [ ] Adicionar endpoint REST `/busca`\n\n## \u23f1\ufe0f Estimativa: 3h\n## Prioridade: Baixa\" \\\n  \"feat,prioridade:baixa\" \\\n  \"NOVAS FUNCIONALIDADES (Semanas 7-8)\"\n\ncreate_issue \"N6: Cache com Redis para an\u00e1lises frequentes\" \\\n\"## \ud83c\udfaf Objetivo\nMelhorar performance de an\u00e1lises repetidas.\n\n## \ud83d\udccb Tarefas\n- [ ] Adicionar Redis como depend\u00eancia opcional\n- [ ] Criar decorator de cache\n- [ ] Aplicar em `analisar_acervo`\n- [ ] Configurar TTL\n\n## \u23f1\ufe0f Estimativa: 4h\n## Prioridade: Baixa\" \\\n  \"feat,prioridade:baixa\" \\\n  \"NOVAS FUNCIONALIDADES (Semanas 7-8)\"\n\n# =============================================\n# MILESTONE 5: DOCUMENTA\u00c7\u00c3O E FINALIZA\u00c7\u00c3O (Cont\u00ednuo)\n# =============================================\necho \"\ud83d\udccc MILESTONE 5: DOCUMENTA\u00c7\u00c3O E FINALIZA\u00c7\u00c3O (5 issues)\"\necho \"-----------------------------------------------------\"\n\ncreate_issue \"R1: Revisar documenta\u00e7\u00e3o (.md files)\" \\\n\"## \ud83c\udfaf Objetivo\nConsolidar e revisar todos os arquivos de documenta\u00e7\u00e3o.\n\n## \ud83d\udd17 Refer\u00eancia\nIssue #2 - Revisar documenta\u00e7\u00e3o (.md files)\n\n## \ud83d\udccb Tarefas\n- [ ] Verificar duplicatas (cobertura.md vs cobertura.md (vers\u00e3o hist\u00f3rica))\n- [ ] Atualizar \u00edndices\n- [ ] Garantir que todas as fases est\u00e3o documentadas\n- [ ] Fazer merge da branch `docs/organizacao`\n\n## \u23f1\ufe0f Estimativa: 3h\n## Prioridade: Alta\" \\\n  \"tipo/documenta\u00e7\u00e3o,prioridade:alta\" \\\n  \"DOCUMENTA\u00c7\u00c3O E FINALIZA\u00c7\u00c3O (Cont\u00ednuo)\"\n\ncreate_issue \"R2: Atualizar todas as FASE*.md com resultados finais\" \\\n\"## \ud83c\udfaf Objetivo\nGarantir que cada fase tenha sua documenta\u00e7\u00e3o completa.\n\n## \ud83d\udccb Tarefas\n- [ ] Revisar FASE 1-16\n- [ ] Adicionar m\u00e9tricas finais\n- [ ] Verificar links\n- [ ] Padronizar formata\u00e7\u00e3o\n\n## \u23f1\ufe0f Estimativa: 4h\n## Prioridade: Alta\" \\\n  \"docs,prioridade:alta\" \\\n  \"DOCUMENTA\u00c7\u00c3O E FINALIZA\u00c7\u00c3O (Cont\u00ednuo)\"\n\ncreate_issue \"R3: Criar apresenta\u00e7\u00e3o do TCC (slides)\" \\\n\"## \ud83c\udfaf Objetivo\nPreparar slides para apresenta\u00e7\u00e3o final.\n\n## \ud83d\udccb Tarefas\n- [ ] Definir estrutura\n- [ ] Criar slides de introdu\u00e7\u00e3o\n- [ ] Mostrar arquitetura\n- [ ] Demonstrar funcionalidades\n- [ ] Resultados e m\u00e9tricas\n- [ ] Conclus\u00e3o\n\n## \u23f1\ufe0f Estimativa: 6h\n## Prioridade: Alta\" \\\n  \"docs,prioridade:alta\" \\\n  \"DOCUMENTA\u00c7\u00c3O E FINALIZA\u00c7\u00c3O (Cont\u00ednuo)\"\n\ncreate_issue \"R4: Preparar v\u00eddeo de demonstra\u00e7\u00e3o\" \\\n\"## \ud83c\udfaf Objetivo\nGravar v\u00eddeo mostrando o sistema em funcionamento.\n\n## \ud83d\udccb Tarefas\n- [ ] Roteiro\n- [ ] Gravar CLI\n- [ ] Gravar Web\n- [ ] Editar\n- [ ] Adicionar narra\u00e7\u00e3o\n\n## \u23f1\ufe0f Estimativa: 3h\n## Prioridade: M\u00e9dia\" \\\n  \"docs,prioridade:media\" \\\n  \"DOCUMENTA\u00c7\u00c3O E FINALIZA\u00c7\u00c3O (Cont\u00ednuo)\"\n\ncreate_issue \"R5: Revisar e publicar vers\u00e3o final (v1.0.0)\" \\\n\"## \ud83c\udfaf Objetivo\nPreparar release final para entrega do TCC.\n\n## \ud83d\udccb Tarefas\n- [ ] Verificar CHANGELOG\n- [ ] Atualizar vers\u00e3o no pyproject.toml\n- [ ] Criar tag v1.0.0\n- [ ] Criar release no GitHub\n- [ ] Publicar documenta\u00e7\u00e3o final\n\n## \u23f1\ufe0f Estimativa: 2h\n## Prioridade: Alta\" \\\n  \"tipo/release,prioridade:alta\" \\\n  \"DOCUMENTA\u00c7\u00c3O E FINALIZA\u00c7\u00c3O (Cont\u00ednuo)\"\n\n# =============================================\n# RESUMO FINAL\n# =============================================\necho \"\"\necho \"=====================================================\"\necho \"\u2705 SCRIPT CONCLU\u00cdDO!\"\necho \"=====================================================\"\necho \"\"\necho \"\ud83d\udcca RESUMO DAS ISSUES CRIADAS:\"\necho \"\"\necho \"   Milestone 1: FUNDA\u00c7\u00c3O ................ 6 issues\"\necho \"   Milestone 2: QUALIDADE ................ 7 issues\"\necho \"   Milestone 3: DEPEND\u00caNCIAS ............. 5 issues\"\necho \"   Milestone 4: NOVAS FUNCIONALIDADES .... 6 issues\"\necho \"   Milestone 5: DOCUMENTA\u00c7\u00c3O ............. 5 issues\"\necho \"   -----------------------------------------\"\necho \"   TOTAL ................................. 29 issues\"\necho \"\"\necho \"=====================================================\"\necho \"\ud83d\udccb PR\u00d3XIMOS PASSOS:\"\necho \"\"\necho \"1\ufe0f\u20e3  Verifique os milestones no site:\"\necho \"   https://github.com/rib-thiago/showtrials-tcc/milestones\"\necho \"\"\necho \"2\ufe0f\u20e3  Acesse o Project Kanban:\"\necho \"   https://github.com/users/rib-thiago/projects/1\"\necho \"\"\necho \"3\ufe0f\u20e3  Adicione as issues ao Project:\"\necho \"   gh project item-add &lt;NUMERO&gt; --owner rib-thiago --url https://github.com/rib-thiago/showtrials-tcc/issues/&lt;NUMERO&gt;\"\necho \"\"\necho \"4\ufe0f\u20e3  Comece pela F1 (flows) ou Q3 (estatisticas.py urgente)\"\necho \"\"\necho \"=====================================================\"\n</code></pre>"},{"location":"projeto/plano_issues_documentacao/#instrucoes-para-gerir-o-backlog","title":"\ud83d\udccb INSTRU\u00c7\u00d5ES PARA GERIR O BACKLOG","text":""},{"location":"projeto/plano_issues_documentacao/#1-apos-rodar-o-script","title":"1. Ap\u00f3s rodar o script","text":"<pre><code># Ver todas as issues criadas\ngh issue list --state all\n\n# Ver issues por milestone\ngh issue list --milestone \"FUNDA\u00c7\u00c3O (Semanas 1-2)\"\ngh issue list --milestone \"QUALIDADE E TESTES (Semanas 3-4)\"\n# ... etc\n</code></pre>"},{"location":"projeto/plano_issues_documentacao/#2-adicionar-issues-ao-project-kanban","title":"2. Adicionar issues ao Project Kanban","text":"<pre><code># Primeiro, liste os projects para pegar o ID\ngh project list --owner rib-thiago\n\n# Para cada issue, adicione ao project (substitua NUMERO e PROJECT_ID)\ngh project item-add 1 --owner rib-thiago --url https://github.com/rib-thiago/showtrials-tcc/issues/1\ngh project item-add 2 --owner rib-thiago --url https://github.com/rib-thiago/showtrials-tcc/issues/2\n# ... repita para todas as 29 issues\n\n# Ou crie um loop (depois de pegar o PROJECT_ID)\nfor issue in {1..29}; do\n    gh project item-add $issue --owner rib-thiago --url https://github.com/rib-thiago/showtrials-tcc/issues/$issue\ndone\n</code></pre>"},{"location":"projeto/plano_issues_documentacao/#3-organizar-o-kanban","title":"3. Organizar o Kanban","text":"<p>No site do Project, arraste as issues para as colunas corretas:</p> Coluna Quais issues \ud83d\udccb Backlog Todas as 29 issues (inicialmente) \u2705 Ready As que voc\u00ea vai come\u00e7ar agora (ex: F1, Q3) \u23f3 In Progress Quando come\u00e7ar a trabalhar \ud83d\udc40 In Review Se fizer PR (opcional) \u2705 Done Quando conclu\u00eddas"},{"location":"projeto/plano_issues_documentacao/#4-prioridades-iniciais-sugeridas","title":"4. Prioridades iniciais sugeridas","text":"<pre><code># Mover para \"Ready\" primeiro:\n- Q3: estatisticas.py (URGENTE - 15% cobertura)\n- F1: Documentar flows\n- F5: Branch protection\n- Q1: classificar_documento.py\n</code></pre>"},{"location":"projeto/plano_issues_documentacao/#5-fluxo-diario-de-trabalho","title":"5. Fluxo di\u00e1rio de trabalho","text":"<pre><code># 1. Ver o que est\u00e1 em Ready\ngh issue list --label \"prioridade:alta\" --state open\n\n# 2. Pegar uma issue\ngit checkout -b type/classificar-documento  # ou fix/, docs/, etc.\n\n# 3. Desenvolver\n# ...\n\n# 4. Commit com fechamento\ngit commit -m \"feat: ... Closes #NUMERO\"\n\n# 5. Push e merge\ngit push origin type/classificar-documento\n# (merge ap\u00f3s CI passar)\n\n# 6. No Kanban, mover issue para \"Done\"\n</code></pre>"},{"location":"projeto/plano_issues_documentacao/#resumo-o-que-voce-tem-agora","title":"\ud83c\udfaf RESUMO - O QUE VOC\u00ca TEM AGORA","text":"Recurso Status 29 issues \u2705 Prontas para criar 5 milestones \u2705 Com datas sugeridas Project Kanban \u2705 J\u00e1 configurado Labels \u2705 10+ dispon\u00edveis Fluxo de trabalho \u2705 Documentado <p>Quer que eu execute o script para voc\u00ea ou prefere criar manualmente? \ud83d\ude80</p>"},{"location":"projeto/questionario_levantamento_requisitos/","title":"Question\u00e1rio","text":""},{"location":"projeto/questionario_levantamento_requisitos/#documento-2-questionario-de-levantamento-de-requisitos","title":"\ud83d\udccb DOCUMENTO 2: QUESTION\u00c1RIO DE LEVANTAMENTO DE REQUISITOS","text":"<p>Para eu entender melhor sua vis\u00e3o e objetivos, por favor responda \u00e0s perguntas abaixo:</p>"},{"location":"projeto/questionario_levantamento_requisitos/#parte-1-visao-geral","title":"\ud83c\udfaf PARTE 1: VIS\u00c3O GERAL","text":""},{"location":"projeto/questionario_levantamento_requisitos/#11-proposito-do-projeto","title":"1.1 Prop\u00f3sito do Projeto","text":"<ol> <li> <p>Qual \u00e9 o objetivo principal do seu TCC? (responda com suas palavras)</p> </li> <li> <p>Este projeto \u00e9:</p> </li> <li>[ ] Acad\u00eamico (apenas para o TCC)</li> <li>[ ] Acad\u00eamico com potencial de uso real</li> <li>[ ] Ferramenta que voc\u00ea pretende usar depois</li> <li> <p>[ ] Plataforma para disponibilizar para outros pesquisadores</p> </li> <li> <p>Quem \u00e9 o usu\u00e1rio-alvo ideal?</p> </li> <li>[ ] Eu mesmo (uso pessoal)</li> <li>[ ] Meu orientador</li> <li>[ ] Historiadores/pesquisadores em geral</li> <li>[ ] Jornalistas</li> <li>[ ] P\u00fablico em geral</li> <li>[ ] Outro: _____</li> </ol>"},{"location":"projeto/questionario_levantamento_requisitos/#12-escopo-e-abrangencia","title":"1.2 Escopo e Abrang\u00eancia","text":"<ol> <li> <p>A aplica\u00e7\u00e3o deve ser espec\u00edfica para os processos de Moscou/Leningrado ou gen\u00e9rica para qualquer cole\u00e7\u00e3o documental?</p> </li> <li> <p>Voc\u00ea imagina outros pesquisadores usando sua ferramenta para outros conjuntos de documentos? Se sim, quais?</p> </li> <li> <p>O nome \"ShowTrials\" deve permanecer ou voc\u00ea prefere um nome mais gen\u00e9rico (ex: \"DocPipeline\", \"Historiograph\")?</p> </li> </ol>"},{"location":"projeto/questionario_levantamento_requisitos/#parte-2-funcionalidades","title":"\ud83d\udd27 PARTE 2: FUNCIONALIDADES","text":""},{"location":"projeto/questionario_levantamento_requisitos/#21-fontes-de-dados","title":"2.1 Fontes de Dados","text":"<ol> <li>Quais fontes voc\u00ea quer suportar? (m\u00faltipla escolha)</li> <li>[ ] Sites web (como showtrials.ru) - j\u00e1 temos</li> <li>[ ] PDFs locais</li> <li>[ ] Imagens (com OCR)</li> <li>[ ] Arquivos de texto (.txt, .docx)</li> <li>[ ] APIs (ex: Arquivo Nacional)</li> <li>[ ] Pastas locais com arquivos</li> <li> <p>[ ] Outro: _____</p> </li> <li> <p>Para sites web, como lidar com:</p> </li> <li>[ ] Sites com pagina\u00e7\u00e3o (j\u00e1 temos)</li> <li>[ ] Sites com login/autentica\u00e7\u00e3o</li> <li>[ ] Sites com JavaScript pesado</li> <li>[ ] Sites com rate limiting</li> </ol>"},{"location":"projeto/questionario_levantamento_requisitos/#22-processamento","title":"2.2 Processamento","text":"<ol> <li> <p>Al\u00e9m dos tipos de documento atuais (interrogat\u00f3rio, carta, etc.), que outras classifica\u00e7\u00f5es podem ser necess\u00e1rias?</p> </li> <li> <p>Quais entidades al\u00e9m de pessoas s\u00e3o importantes?</p> <ul> <li>[ ] Locais (cidades, pa\u00edses)</li> <li>[ ] Organiza\u00e7\u00f5es (NKVD, Partido, etc.)</li> <li>[ ] Datas</li> <li>[ ] Eventos</li> <li>[ ] Leis/decretos</li> <li>[ ] Outro: _____</li> </ul> </li> <li> <p>A tradu\u00e7\u00e3o deve ser:</p> <ul> <li>[ ] Apenas para ingl\u00eas/portugu\u00eas (como hoje)</li> <li>[ ] Para qualquer idioma (configur\u00e1vel)</li> <li>[ ] H\u00edbrido (detecta idioma e traduz)</li> </ul> </li> <li> <p>Que an\u00e1lises al\u00e9m das atuais seriam \u00fateis?</p> <ul> <li>[ ] Nuvem de palavras (j\u00e1 temos)</li> <li>[ ] Rede de relacionamentos (grafos)</li> <li>[ ] Linha do tempo interativa</li> <li>[ ] Estat\u00edsticas avan\u00e7adas</li> <li>[ ] Detec\u00e7\u00e3o de emo\u00e7\u00f5es</li> <li>[ ] Similaridade entre documentos</li> <li>[ ] Outro: _____</li> </ul> </li> </ol>"},{"location":"projeto/questionario_levantamento_requisitos/#23-pipeline-customizavel","title":"2.3 Pipeline Customiz\u00e1vel","text":"<ol> <li> <p>O quanto o pipeline deve ser customiz\u00e1vel?</p> <ul> <li>[ ] Fixo (como hoje)</li> <li>[ ] Poucas op\u00e7\u00f5es (escolher ordem de etapas)</li> <li>[ ] Totalmente configur\u00e1vel (usu\u00e1rio define etapas)</li> <li>[ ] Extens\u00edvel com plugins</li> </ul> </li> <li> <p>Voc\u00ea prefere configurar o pipeline via:</p> <ul> <li>[ ] Arquivo de configura\u00e7\u00e3o (YAML/JSON)</li> <li>[ ] Interface gr\u00e1fica (web)</li> <li>[ ] CLI com perguntas interativas</li> <li>[ ] Todas as op\u00e7\u00f5es</li> </ul> </li> </ol>"},{"location":"projeto/questionario_levantamento_requisitos/#24-exportacao-e-resultados","title":"2.4 Exporta\u00e7\u00e3o e Resultados","text":"<ol> <li> <p>Quais formatos de exporta\u00e7\u00e3o s\u00e3o importantes?</p> <ul> <li>[ ] TXT (j\u00e1 temos)</li> <li>[ ] CSV (planilhas)</li> <li>[ ] JSON (dados estruturados)</li> <li>[ ] PDF (formatado)</li> <li>[ ] HTML (p\u00e1gina web)</li> <li>[ ] Banco de dados SQL</li> <li>[ ] API (para outras ferramentas consumirem)</li> </ul> </li> <li> <p>Que tipo de relat\u00f3rios/visualiza\u00e7\u00f5es voc\u00ea imagina?</p> <ul> <li>[ ] Tabelas e gr\u00e1ficos est\u00e1ticos (j\u00e1 temos)</li> <li>[ ] Gr\u00e1ficos interativos</li> <li>[ ] Dashboards web</li> <li>[ ] Mapas (para localiza\u00e7\u00f5es)</li> <li>[ ] Linhas do tempo</li> </ul> </li> </ol>"},{"location":"projeto/questionario_levantamento_requisitos/#parte-3-usuarios-e-experiencia","title":"\ud83d\udc65 PARTE 3: USU\u00c1RIOS E EXPERI\u00caNCIA","text":""},{"location":"projeto/questionario_levantamento_requisitos/#31-perfil-do-usuario","title":"3.1 Perfil do Usu\u00e1rio","text":"<ol> <li> <p>O usu\u00e1rio t\u00edpico tem conhecimento t\u00e9cnico?</p> <ul> <li>[ ] N\u00e3o (pesquisador de humanas, pouca t\u00e9cnica)</li> <li>[ ] M\u00e9dio (sabe usar computador, mas n\u00e3o programa)</li> <li>[ ] Alto (programador/pesquisador t\u00e9cnico)</li> </ul> </li> <li> <p>A aplica\u00e7\u00e3o deve ter m\u00faltiplos usu\u00e1rios ou \u00e9 mono-usu\u00e1rio?</p> </li> <li> <p>Precisa de autentica\u00e7\u00e3o (login/senha)?</p> </li> </ol>"},{"location":"projeto/questionario_levantamento_requisitos/#32-interfaces","title":"3.2 Interfaces","text":"<ol> <li> <p>Qual interface voc\u00ea acha mais importante?</p> <ul> <li>[ ] CLI (como hoje)</li> <li>[ ] Web (como hoje)</li> <li>[ ] API (para integra\u00e7\u00f5es)</li> <li>[ ] Desktop (aplicativo instal\u00e1vel)</li> <li>[ ] Todas</li> </ul> </li> <li> <p>Para a CLI, que comandos seriam \u00fateis al\u00e9m dos atuais?</p> <ul> <li>[ ] <code>pipeline run</code> (executar pipeline configurado)</li> <li>[ ] <code>pipeline create</code> (criar novo pipeline)</li> <li>[ ] <code>pipeline list</code> (listar pipelines)</li> <li>[ ] <code>source add</code> (adicionar nova fonte)</li> <li>[ ] Outro: _____</li> </ul> </li> <li> <p>Para a Web, que telas seriam importantes?</p> <ul> <li>[ ] Dashboard de vis\u00e3o geral</li> <li>[ ] Configura\u00e7\u00e3o visual do pipeline</li> <li>[ ] Visualiza\u00e7\u00e3o de documentos</li> <li>[ ] Gr\u00e1ficos interativos</li> <li>[ ] \u00c1rea administrativa</li> </ul> </li> </ol>"},{"location":"projeto/questionario_levantamento_requisitos/#parte-4-arquitetura-e-tecnologias","title":"\ud83c\udfd7\ufe0f PARTE 4: ARQUITETURA E TECNOLOGIAS","text":""},{"location":"projeto/questionario_levantamento_requisitos/#41-escalabilidade-e-performance","title":"4.1 Escalabilidade e Performance","text":"<ol> <li> <p>Qual o volume esperado de documentos?</p> <ul> <li>[ ] Centenas (como hoje)</li> <li>[ ] Milhares</li> <li>[ ] Dezenas de milhares</li> <li>[ ] Centenas de milhares</li> </ul> </li> <li> <p>Precisa de processamento em lote (batch) ou em tempo real?</p> </li> <li> <p>A aplica\u00e7\u00e3o deve ser multi-threaded/paralela para processar muitos documentos?</p> </li> </ol>"},{"location":"projeto/questionario_levantamento_requisitos/#42-implantacao","title":"4.2 Implanta\u00e7\u00e3o","text":"<ol> <li> <p>Como voc\u00ea imagina a distribui\u00e7\u00e3o da aplica\u00e7\u00e3o?</p> <ul> <li>[ ] Local (usu\u00e1rio instala no computador)</li> <li>[ ] Servidor web (acesso remoto)</li> <li>[ ] Docker container</li> <li>[ ] Pacote pip (biblioteca Python)</li> <li>[ ] Tudo isso</li> </ul> </li> <li> <p>Precisa de instalador para Windows/Mac?</p> </li> </ol>"},{"location":"projeto/questionario_levantamento_requisitos/#43-dados","title":"4.3 Dados","text":"<ol> <li> <p>O banco de dados deve ser:</p> <ul> <li>[ ] SQLite (como hoje) - simples</li> <li>[ ] PostgreSQL - mais robusto</li> <li>[ ] MySQL</li> <li>[ ] MongoDB (NoSQL)</li> <li>[ ] V\u00e1rios (configur\u00e1vel)</li> </ul> </li> <li> <p>Precisa de migra\u00e7\u00f5es autom\u00e1ticas quando o schema muda?</p> </li> </ol>"},{"location":"projeto/questionario_levantamento_requisitos/#parte-5-tcc-e-entrega","title":"\ud83c\udf93 PARTE 5: TCC E ENTREGA","text":""},{"location":"projeto/questionario_levantamento_requisitos/#51-objetivos-academicos","title":"5.1 Objetivos Acad\u00eamicos","text":"<ol> <li> <p>Qual o diferencial do seu TCC em rela\u00e7\u00e3o a outros?</p> <ul> <li>[ ] Arquitetura limpa bem aplicada</li> <li>[ ] Pipeline customiz\u00e1vel</li> <li>[ ] Integra\u00e7\u00e3o com NLP</li> <li>[ ] Interface amig\u00e1vel para humanas</li> <li>[ ] Outro: _____</li> </ul> </li> <li> <p>Voc\u00ea pretende comparar com outras ferramentas existentes?</p> <ul> <li>[ ] NVivo</li> <li>[ ] MAXQDA</li> <li>[ ] ATLAS.ti</li> <li>[ ] Zotero</li> <li>[ ] Scripts manuais em Python</li> <li>[ ] Outro: _____</li> </ul> </li> </ol>"},{"location":"projeto/questionario_levantamento_requisitos/#52-prazos-e-expectativas","title":"5.2 Prazos e Expectativas","text":"<ol> <li> <p>Qual o prazo para entrega do TCC? (ex: Dezembro/2026)</p> </li> <li> <p>Quantas horas por semana voc\u00ea pretende dedicar ao projeto?</p> </li> <li> <p>Voc\u00ea prefere:</p> <ul> <li>[ ] Entregar algo s\u00f3lido e bem feito, mesmo que menor</li> <li>[ ] Entregar o m\u00e1ximo de funcionalidades poss\u00edvel</li> </ul> </li> </ol>"},{"location":"projeto/questionario_levantamento_requisitos/#parte-6-ideias-abertas","title":"\ud83d\udca1 PARTE 6: IDEIAS ABERTAS","text":"<ol> <li> <p>Que funcionalidade dos sonhos voc\u00ea gostaria de ter, mesmo que pare\u00e7a dif\u00edcil?</p> </li> <li> <p>Tem algum projeto similar que voc\u00ea admira e gostaria de se inspirar?</p> </li> <li> <p>Algo mais que voc\u00ea gostaria de compartilhar sobre sua vis\u00e3o?</p> </li> </ol>"},{"location":"projeto/questionario_levantamento_requisitos/#como-responder","title":"\ud83d\udccb COMO RESPONDER","text":"<p>Voc\u00ea pode: 1. Copiar as perguntas e responder diretamente aqui 2. Responder em um arquivo <code>.md</code> e enviar 3. Responder em t\u00f3picos, de forma livre</p> <p>O importante \u00e9 eu entender SUA vis\u00e3o para poder ajudar a refinar os requisitos. \ud83c\udfaf</p>"},{"location":"projeto/roadmap_arquitetural/","title":"Roadmap Arquitetural","text":""},{"location":"projeto/roadmap_arquitetural/#documento-roadmap-arquitetural-showtrials-como-plataforma","title":"\ud83d\udcda DOCUMENTO: ROADMAP ARQUITETURAL - SHOWTRIALS COMO PLATAFORMA","text":"**Milestones, Issues e Backlog para a evolu\u00e7\u00e3o da arquitetura**"},{"location":"projeto/roadmap_arquitetural/#informacoes-do-documento","title":"\ud83d\udcc5 Informa\u00e7\u00f5es do Documento","text":"Item Descri\u00e7\u00e3o Data 20 de Fevereiro de 2026 Autor Thiago Ribeiro Vers\u00e3o 1.0 Baseado em An\u00e1lise arquitetural e vis\u00e3o de plataforma"},{"location":"projeto/roadmap_arquitetural/#visao-geral-da-evolucao-arquitetural","title":"\ud83c\udfaf VIS\u00c3O GERAL DA EVOLU\u00c7\u00c3O ARQUITETURAL","text":"<pre><code>graph LR\n    subgraph \"Fase A: Funda\u00e7\u00e3o\"\n        A1[Domain: Pipeline Entities]\n        A2[Application: Orchestrator]\n        A3[Infra: Plugin Manager]\n    end\n\n    subgraph \"Fase B: Plugins Core\"\n        B1[Source Plugins]\n        B2[Processor Plugins]\n        B3[Exporter Plugins]\n    end\n\n    subgraph \"Fase C: Configura\u00e7\u00e3o\"\n        C1[YAML Config]\n        C2[Pipeline Repository]\n        C3[CLI Commands]\n    end\n\n    subgraph \"Fase D: Web &amp; UX\"\n        D1[UI Configurador]\n        D2[Dashboard]\n        D3[Visualiza\u00e7\u00f5es]\n    end\n\n    subgraph \"Fase E: Avan\u00e7ado\"\n        E1[API P\u00fablica]\n        E2[Autentica\u00e7\u00e3o]\n        E3[Agendamento]\n    end\n\n    A1 --&gt; A2 --&gt; A3 --&gt; B1\n    B1 --&gt; B2 --&gt; B3 --&gt; C1\n    C1 --&gt; C2 --&gt; C3 --&gt; D1\n    D1 --&gt; D2 --&gt; D3 --&gt; E1\n</code></pre>"},{"location":"projeto/roadmap_arquitetural/#milestone-a-fundacao-da-arquitetura-de-plugins","title":"\ud83d\udcca MILESTONE A: FUNDA\u00c7\u00c3O DA ARQUITETURA DE PLUGINS","text":"<p>Objetivo: Estabelecer as bases para tornar a aplica\u00e7\u00e3o extens\u00edvel</p> <p>Dura\u00e7\u00e3o estimada: 4 semanas Depend\u00eancias: Nenhuma (come\u00e7a do zero)</p> # Issue Tipo Descri\u00e7\u00e3o Estimativa A1 Criar entidades de dom\u00ednio para Pipeline <code>feat</code> Implementar <code>Pipeline</code> (entidade) e <code>PipelineStep</code> (value object) 8h A2 Definir interfaces de plugins <code>feat</code> Criar <code>SourcePlugin</code>, <code>ProcessorPlugin</code>, <code>ExporterPlugin</code> no domain 6h A3 Implementar Plugin Manager <code>feat</code> Service registry especializado para plugins (carregamento, cache) 10h A4 Criar caso de uso <code>ExecutarPipeline</code> <code>feat</code> Orquestrador que executa steps em ordem 8h A5 Adaptar Service Registry existente <code>refactor</code> Estender registry para suportar plugins 4h A6 Testes de integra\u00e7\u00e3o do pipeline <code>test</code> Testar pipeline com steps mockados 6h <p>Total: ~42h</p>"},{"location":"projeto/roadmap_arquitetural/#milestone-b-plugins-core-adaptacao-do-existente","title":"\ud83d\udd27 MILESTONE B: PLUGINS CORE (ADAPTA\u00c7\u00c3O DO EXISTENTE)","text":"<p>Objetivo: Transformar funcionalidades existentes em plugins</p> <p>Dura\u00e7\u00e3o estimada: 6 semanas Depend\u00eancias: Milestone A</p>"},{"location":"projeto/roadmap_arquitetural/#b1-source-plugins","title":"B.1 - Source Plugins","text":"# Issue Tipo Descri\u00e7\u00e3o Estimativa B1 Adaptar Web Scraper existente como plugin <code>refactor</code> Mover l\u00f3gica de <code>coleta.py</code> para <code>WebSourcePlugin</code> 6h B2 Criar Source Plugin para PDF <code>feat</code> Extrair texto de PDFs (PyPDF2) 8h B3 Criar Source Plugin para pasta local <code>feat</code> Ler arquivos .txt, .md de diret\u00f3rio 4h B4 Testes para Source Plugins <code>test</code> Garantir funcionamento de cada fonte 6h <p>Total B.1: ~24h</p>"},{"location":"projeto/roadmap_arquitetural/#b2-processor-plugins","title":"B.2 - Processor Plugins","text":"# Issue Tipo Descri\u00e7\u00e3o Estimativa B5 Adaptar Classificador como plugin <code>refactor</code> Mover <code>classificar_documento.py</code> para <code>ClassifierPlugin</code> 6h B6 Adaptar Extrator de Entidades como plugin <code>refactor</code> Mover <code>spacy_analyzer.py</code> para <code>NERPlugin</code> 6h B7 Adaptar Tradutor como plugin <code>refactor</code> Mover <code>google_translator.py</code> para <code>TranslatorPlugin</code> 6h B8 Criar Extrator de Entidades gen\u00e9rico <code>feat</code> Suporte a PERSON, ORG, LOC, DATE (modelos spaCy) 8h B9 Criar plugin de An\u00e1lise de Sentimento <code>feat</code> Usar TextBlob para an\u00e1lise 4h B10 Testes para Processor Plugins <code>test</code> Validar cada processador 8h <p>Total B.2: ~38h</p>"},{"location":"projeto/roadmap_arquitetural/#b3-exporter-plugins","title":"B.3 - Exporter Plugins","text":"# Issue Tipo Descri\u00e7\u00e3o Estimativa B11 Adaptar TXT Exporter como plugin <code>refactor</code> Mover <code>exportar_documento.py</code> para <code>TxtExporterPlugin</code> 4h B12 Criar CSV Exporter <code>feat</code> Exportar documentos para planilha 6h B13 Criar JSON Exporter <code>feat</code> Exportar dados estruturados 4h B14 Adaptar SQLite Repository como plugin <code>refactor</code> Persist\u00eancia como plugin de sa\u00edda 8h B15 Testes para Exporter Plugins <code>test</code> Validar cada formato 6h <p>Total B.3: ~28h</p> <p>Total Milestone B: ~90h</p>"},{"location":"projeto/roadmap_arquitetural/#milestone-c-configuracao-e-pipelines","title":"\u2699\ufe0f MILESTONE C: CONFIGURA\u00c7\u00c3O E PIPELINES","text":"<p>Objetivo: Permitir que usu\u00e1rios definam seus pr\u00f3prios pipelines</p> <p>Dura\u00e7\u00e3o estimada: 4 semanas Depend\u00eancias: Milestone B</p> # Issue Tipo Descri\u00e7\u00e3o Estimativa C1 Criar loader de configura\u00e7\u00e3o YAML <code>feat</code> Parse de YAML para objeto Pipeline 8h C2 Criar reposit\u00f3rio de pipelines <code>feat</code> Salvar/carregar pipelines no banco 6h C3 Caso de uso <code>CriarPipeline</code> <code>feat</code> Criar pipeline a partir de config 4h C4 Caso de uso <code>ListarPipelines</code> <code>feat</code> Listar pipelines salvos 2h C5 Caso de uso <code>ExecutarPipelinePorID</code> <code>feat</code> Executar pipeline salvo 4h C6 Comandos CLI para pipelines <code>feat</code> <code>pipeline run</code>, <code>pipeline list</code>, <code>pipeline create</code> 8h C7 Valida\u00e7\u00e3o de configura\u00e7\u00e3o <code>feat</code> Validar steps e plugins existentes 4h C8 Documenta\u00e7\u00e3o de configura\u00e7\u00e3o YAML <code>docs</code> Exemplos e schema 4h <p>Total: ~40h</p>"},{"location":"projeto/roadmap_arquitetural/#milestone-d-interface-web-e-ux","title":"\ud83c\udf10 MILESTONE D: INTERFACE WEB E UX","text":"<p>Objetivo: Facilitar a cria\u00e7\u00e3o visual de pipelines</p> <p>Dura\u00e7\u00e3o estimada: 6 semanas Depend\u00eancias: Milestone C</p> # Issue Tipo Descri\u00e7\u00e3o Estimativa D1 API endpoints para pipelines <code>feat</code> CRUD de pipelines via REST 10h D2 UI - Lista de pipelines <code>feat</code> Visualizar pipelines salvos 6h D3 UI - Criar pipeline (formul\u00e1rio) <code>feat</code> Interface para configurar steps 12h D4 UI - Editor visual drag-and-drop <code>feat</code> Montar pipeline arrastando blocos 20h D5 UI - Execu\u00e7\u00e3o e logs <code>feat</code> Acompanhar execu\u00e7\u00e3o em tempo real 8h D6 Dashboard de resultados <code>feat</code> Visualizar estat\u00edsticas das execu\u00e7\u00f5es 10h D7 Exportar configura\u00e7\u00e3o YAML <code>feat</code> Gerar YAML a partir da UI 4h D8 Importar configura\u00e7\u00e3o YAML <code>feat</code> Carregar YAML na UI 4h <p>Total: ~74h</p>"},{"location":"projeto/roadmap_arquitetural/#milestone-e-recursos-avancados","title":"\ud83d\ude80 MILESTONE E: RECURSOS AVAN\u00c7ADOS","text":"<p>Objetivo: Expandir capacidades para pesquisadores avan\u00e7ados</p> <p>Dura\u00e7\u00e3o estimada: 8 semanas Depend\u00eancias: Milestone D</p> # Issue Tipo Descri\u00e7\u00e3o Estimativa E1 OCR para imagens (Tesseract) <code>feat</code> Plugin para extrair texto de imagens 12h E2 Plugin de sumariza\u00e7\u00e3o <code>feat</code> Resumir documentos longos 8h E3 Plugin de rede de relacionamentos <code>feat</code> Gerar grafos de co-ocorr\u00eancia 12h E4 Linha do tempo interativa <code>feat</code> Visualiza\u00e7\u00e3o temporal dos documentos 10h E5 API p\u00fablica documentada <code>feat</code> Swagger/OpenAPI para integra\u00e7\u00e3o 8h E6 Autentica\u00e7\u00e3o e m\u00faltiplos usu\u00e1rios <code>feat</code> Login, perfis, pipelines por usu\u00e1rio 12h E7 Agendamento de execu\u00e7\u00f5es <code>feat</code> Cron jobs para pipelines 8h E8 Notifica\u00e7\u00f5es (email/webhook) <code>feat</code> Alertas sobre execu\u00e7\u00f5es 6h <p>Total: ~76h</p>"},{"location":"projeto/roadmap_arquitetural/#milestone-t-testes-e-qualidade-continuo","title":"\ud83e\uddea MILESTONE T: TESTES E QUALIDADE (CONT\u00cdNUO)","text":"<p>Objetivo: Garantir qualidade em todas as camadas</p> <p>Dura\u00e7\u00e3o: Paralelo aos outros milestones</p> # Issue Tipo Descri\u00e7\u00e3o Estimativa T1 Testes unit\u00e1rios para entidades de pipeline <code>test</code> Pipeline, PipelineStep 4h T2 Testes de integra\u00e7\u00e3o para Plugin Manager <code>test</code> Carregamento e execu\u00e7\u00e3o de plugins mock 6h T3 Testes para cada plugin implementado <code>test</code> Cobertura m\u00ednima 85% 20h T4 Testes de configura\u00e7\u00e3o YAML <code>test</code> Valida\u00e7\u00e3o de diferentes formatos 4h T5 Testes de API <code>test</code> Endpoints de pipeline 6h T6 Testes de UI (se aplic\u00e1vel) <code>test</code> Playwright/Cypress 12h <p>Total: ~52h</p>"},{"location":"projeto/roadmap_arquitetural/#backlog-completo-todas-as-issues","title":"\ud83d\udccb BACKLOG COMPLETO (TODAS AS ISSUES)","text":"Milestone # Issues Estimativa total A - Funda\u00e7\u00e3o 6 42h B - Plugins Core 15 90h C - Configura\u00e7\u00e3o 8 40h D - Web/UX 8 74h E - Avan\u00e7ado 8 76h T - Testes 6 52h TOTAL 51 issues ~374h"},{"location":"projeto/roadmap_arquitetural/#distribuicao-por-tipo-de-tarefa","title":"\ud83d\udcca DISTRIBUI\u00c7\u00c3O POR TIPO DE TAREFA","text":"<pre><code>pie\n    title Distribui\u00e7\u00e3o do Esfor\u00e7o\n    \"Novas Funcionalidades\" : 45\n    \"Refatora\u00e7\u00e3o (existente)\" : 25\n    \"Testes\" : 15\n    \"Documenta\u00e7\u00e3o\" : 10\n    \"UI/UX\" : 5\n</code></pre>"},{"location":"projeto/roadmap_arquitetural/#priorizacao-sugerida","title":"\ud83c\udfaf PRIORIZA\u00c7\u00c3O SUGERIDA","text":""},{"location":"projeto/roadmap_arquitetural/#fase-1-mvp-da-plataforma-3-meses","title":"Fase 1 (MVP da Plataforma) - 3 meses","text":"<ul> <li>[ ] Milestone A completo (funda\u00e7\u00e3o)</li> <li>[ ] Milestone B.1 (source plugins b\u00e1sicos)</li> <li>[ ] Milestone B.3 (exporter plugins b\u00e1sicos)</li> <li>[ ] Milestone C.1-C.3 (configura\u00e7\u00e3o b\u00e1sica)</li> <li>[ ] Testes essenciais</li> </ul> <p>Entreg\u00e1vel: Plataforma funcional com pipeline configur\u00e1vel via YAML, fontes web/pasta, exporta\u00e7\u00e3o TXT/CSV.</p>"},{"location":"projeto/roadmap_arquitetural/#fase-2-expansao-3-meses","title":"Fase 2 (Expans\u00e3o) - 3 meses","text":"<ul> <li>[ ] Restante do Milestone B (todos os plugins)</li> <li>[ ] Milestone C completo (todos os casos de uso)</li> <li>[ ] CLI avan\u00e7ada</li> <li>[ ] Testes completos</li> </ul> <p>Entreg\u00e1vel: Todos os plugins funcionando, m\u00faltiplos pipelines, CLI completa.</p>"},{"location":"projeto/roadmap_arquitetural/#fase-3-web-e-ux-2-meses","title":"Fase 3 (Web e UX) - 2 meses","text":"<ul> <li>[ ] Milestone D (web interface)</li> <li>[ ] Integra\u00e7\u00e3o com API</li> <li>[ ] Testes de UI</li> </ul> <p>Entreg\u00e1vel: Interface web para criar/executar pipelines.</p>"},{"location":"projeto/roadmap_arquitetural/#fase-4-avancado-2-meses","title":"Fase 4 (Avan\u00e7ado) - 2 meses","text":"<ul> <li>[ ] Milestone E (recursos avan\u00e7ados)</li> <li>[ ] Otimiza\u00e7\u00f5es</li> <li>[ ] Documenta\u00e7\u00e3o final</li> </ul> <p>Entreg\u00e1vel: Plataforma completa para TCC.</p>"},{"location":"projeto/roadmap_arquitetural/#proximos-passos","title":"\ud83d\udcdd PR\u00d3XIMOS PASSOS","text":"<ol> <li>\u2705 Discutir esta proposta</li> <li>\u2b1c Ajustar baseado em suas respostas ao question\u00e1rio</li> <li>\u2b1c Criar issues no GitHub (podemos usar o script adaptado)</li> <li>\u2b1c Come\u00e7ar pelo Milestone A</li> </ol>"},{"location":"projeto/roadmap_arquitetural/#autor","title":"\ud83d\udc64 AUTOR","text":"<p>Thiago Ribeiro - Projeto de TCC</p> <sub>Roadmap Arquitetural - ShowTrials como Plataforma</sub> <sub>Vers\u00e3o 1.0 - 20 de Fevereiro de 2026</sub> <sub>\u2705 Aguardando sua valida\u00e7\u00e3o</sub>"},{"location":"projeto/visao_do_projeto/","title":"Vis\u00e3o do Projeto","text":""},{"location":"projeto/visao_do_projeto/#documento-1-visao-do-projeto-showtrials-como-plataforma","title":"\ud83d\udcda DOCUMENTO 1: VIS\u00c3O DO PROJETO - SHOWTRIALS COMO PLATAFORMA","text":"**Evoluindo de uma aplica\u00e7\u00e3o espec\u00edfica para uma plataforma customiz\u00e1vel de pesquisa documental**"},{"location":"projeto/visao_do_projeto/#informacoes-do-documento","title":"\ud83d\udcc5 Informa\u00e7\u00f5es do Documento","text":"Item Descri\u00e7\u00e3o Data 20 de Fevereiro de 2026 Autor Thiago Ribeiro Vers\u00e3o 0.1 (Rascunho inicial) Prop\u00f3sito Explorar a vis\u00e3o do projeto como plataforma customiz\u00e1vel"},{"location":"projeto/visao_do_projeto/#visao-geral","title":"\ud83c\udfaf VIS\u00c3O GERAL","text":""},{"location":"projeto/visao_do_projeto/#o-problema","title":"O Problema","text":"<p>Pesquisadores (historiadores, jornalistas, cientistas sociais) frequentemente precisam:</p> <ol> <li>Coletar documentos de diversas fontes (sites, PDFs, digitaliza\u00e7\u00f5es)</li> <li>Organizar e estruturar esses documentos</li> <li>Enriquecer com metadados (classifica\u00e7\u00e3o, extra\u00e7\u00e3o de entidades)</li> <li>Traduzir para idiomas de trabalho</li> <li>Analisar conte\u00fado (estat\u00edsticas, entidades, sentimentos)</li> <li>Exportar resultados para uso em artigos/pesquisas</li> </ol> <p>Atualmente, isso \u00e9 feito com ferramentas desconexas ou scripts ad-hoc.</p>"},{"location":"projeto/visao_do_projeto/#nossa-proposta","title":"Nossa Proposta","text":"<p>Uma plataforma configur\u00e1vel onde o pesquisador pode definir seu pr\u00f3prio pipeline de a\u00e7\u00f5es, e a aplica\u00e7\u00e3o executa de forma consistente e reproduz\u00edvel.</p> <pre><code>graph LR\n    subgraph \"Fontes\"\n        A[Sites Web]\n        B[PDFs]\n        C[Digitaliza\u00e7\u00f5es]\n        D[APIs]\n    end\n\n    subgraph \"Pipeline Customiz\u00e1vel\"\n        E[Coleta]\n        F[Extra\u00e7\u00e3o]\n        G[Classifica\u00e7\u00e3o]\n        H[Tradu\u00e7\u00e3o]\n        I[An\u00e1lise]\n    end\n\n    subgraph \"Sa\u00eddas\"\n        J[Banco Estruturado]\n        K[Relat\u00f3rios]\n        L[Exporta\u00e7\u00e3o]\n        M[Visualiza\u00e7\u00f5es]\n    end\n\n    A --&gt; E\n    B --&gt; E\n    C --&gt; E\n    D --&gt; E\n\n    E --&gt; F --&gt; G --&gt; H --&gt; I\n\n    I --&gt; J\n    I --&gt; K\n    I --&gt; L\n    I --&gt; M\n</code></pre>"},{"location":"projeto/visao_do_projeto/#estado-atual-vs-visao-futura","title":"\ud83d\udcca ESTADO ATUAL VS VIS\u00c3O FUTURA","text":""},{"location":"projeto/visao_do_projeto/#hoje-showtrials-especifico","title":"Hoje (ShowTrials espec\u00edfico)","text":"Aspecto Implementa\u00e7\u00e3o Fonte Fixa: showtrials.ru Documentos Processos de Moscou/Leningrado Idiomas Russo (original) + 4 tradu\u00e7\u00f5es Classifica\u00e7\u00e3o 9 tipos pr\u00e9-definidos Entidades Pessoas (nomes russos) Pipeline Fixo: coleta \u2192 classifica \u2192 traduz \u2192 analisa"},{"location":"projeto/visao_do_projeto/#amanha-plataforma-generica","title":"Amanh\u00e3 (Plataforma gen\u00e9rica)","text":"Aspecto Customiz\u00e1vel pelo usu\u00e1rio Fonte URLs, PDFs, digitaliza\u00e7\u00f5es, APIs Documentos Qualquer dom\u00ednio (hist\u00f3rico, jur\u00eddico, jornal\u00edstico) Idiomas Configur\u00e1veis por fonte Classifica\u00e7\u00e3o Regras definidas pelo usu\u00e1rio Entidades PESSOA, ORG, LOC, DATA, etc. Pipeline Ordem e etapas configur\u00e1veis"},{"location":"projeto/visao_do_projeto/#arquitetura-proposta","title":"\ud83c\udfd7\ufe0f ARQUITETURA PROPOSTA","text":"<pre><code>graph TD\n    subgraph \"Configura\u00e7\u00e3o\"\n        A[Arquivo YAML/UI] --&gt;|Define| B[Pipeline]\n        B --&gt; C[Etapa 1: Coleta]\n        B --&gt; D[Etapa 2: Extra\u00e7\u00e3o]\n        B --&gt; E[Etapa 3: Classifica\u00e7\u00e3o]\n        B --&gt; F[...]\n    end\n\n    subgraph \"Execu\u00e7\u00e3o\"\n        G[Orquestrador] --&gt;|Executa| B\n        G --&gt;|Gerencia| H[Filas]\n        G --&gt;|Persiste| I[(Banco)]\n    end\n\n    subgraph \"Adaptadores\"\n        J[Fontes] --&gt;|Plugin| G\n        K[Processadores] --&gt;|Plugin| G\n        L[Exportadores] --&gt;|Plugin| G\n    end\n\n    subgraph \"Interface\"\n        M[CLI] --&gt; G\n        N[Web] --&gt; G\n        O[API] --&gt; G\n    end\n</code></pre>"},{"location":"projeto/visao_do_projeto/#componentes-da-plataforma","title":"\ud83d\udd27 COMPONENTES DA PLATAFORMA","text":""},{"location":"projeto/visao_do_projeto/#1-fontes-sources","title":"1. Fontes (Sources)","text":"Tipo Descri\u00e7\u00e3o Exemplo de uso Web Scraper Coleta de sites estruturados showtrials.ru, arquivos p\u00fablicos PDF Processor Extra\u00e7\u00e3o de texto de PDFs Documentos digitalizados OCR Engine Reconhecimento de texto em imagens Fotos de documentos hist\u00f3ricos API Connector Integra\u00e7\u00e3o com APIs p\u00fablicas Arquivos nacionais, bibliotecas Local Folder Leitura de arquivos locais Backups, cole\u00e7\u00f5es pessoais"},{"location":"projeto/visao_do_projeto/#2-processadores-processors","title":"2. Processadores (Processors)","text":"Tipo Descri\u00e7\u00e3o Configur\u00e1vel Extrator de metadados T\u00edtulo, data, autor, etc. Regras regex, XPath Classificador Categoriza\u00e7\u00e3o autom\u00e1tica Palavras-chave, modelos ML Extrator de entidades Pessoas, locais, organiza\u00e7\u00f5es Modelos spaCy customizados Tradutor Convers\u00e3o entre idiomas API keys, modelos locais Analisador de sentimento Polaridade e subjetividade Modelos pr\u00e9-treinados Sumarizador Resumo autom\u00e1tico Tamanho configur\u00e1vel"},{"location":"projeto/visao_do_projeto/#3-exportadores-exporters","title":"3. Exportadores (Exporters)","text":"Tipo Formato Uso Banco de dados SQLite, PostgreSQL An\u00e1lise posterior CSV/Excel Planilhas Importa\u00e7\u00e3o em outras ferramentas JSON Dados estruturados APIs, integra\u00e7\u00f5es PDF Documentos formatados Publica\u00e7\u00e3o Gr\u00e1ficos PNG, SVG Visualiza\u00e7\u00e3o"},{"location":"projeto/visao_do_projeto/#4-interfaces","title":"4. Interfaces","text":"Interface Funcionalidades CLI Avan\u00e7ada Comandos para pipeline completo, debugging Web App Configura\u00e7\u00e3o visual, execu\u00e7\u00e3o, resultados API REST Integra\u00e7\u00e3o com outras ferramentas Notebooks Jupyter An\u00e1lise explorat\u00f3ria dos dados coletados"},{"location":"projeto/visao_do_projeto/#exemplo-de-pipeline-configuravel","title":"\ud83d\udccb EXEMPLO DE PIPELINE CONFIGUR\u00c1VEL","text":""},{"location":"projeto/visao_do_projeto/#configuracao-em-yaml","title":"Configura\u00e7\u00e3o em YAML","text":"<pre><code># pipeline_config.yaml\nnome: \"Processo ShowTrials\"\ndescricao: \"Pipeline para an\u00e1lise dos processos de Moscou\"\n\nfontes:\n  - tipo: web_scraper\n    url: \"http://showtrials.ru\"\n    paginacao:\n      tipo: \"sequencial\"\n      start: 1\n      end: 500\n    extracao:\n      titulo: \"h1.document-title\"\n      texto: \".document-content\"\n      data: \".document-date\"\n\nprocessadores:\n  - etapa: 1\n    tipo: classificador\n    regras:\n      - \"\u041f\u0440\u043e\u0442\u043e\u043a\u043e\u043b \u0434\u043e\u043f\u0440\u043e\u0441\u0430\" -&gt; \"interrogatorio\"\n      - \"\u041f\u0438\u0441\u044c\u043c\u043e\" -&gt; \"carta\"\n      - \"\u0421\u043f\u0435\u0446\u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435\" -&gt; \"relatorio\"\n\n  - etapa: 2\n    tipo: extrator_entidades\n    modelo: \"ru_core_news_sm\"\n    tipos: [\"PERSON\", \"ORG\", \"DATE\"]\n\n  - etapa: 3\n    tipo: tradutor\n    idioma_destino: \"pt\"\n    api: \"google\"\n\n  - etapa: 4\n    tipo: analise_sentimento\n    idioma: \"pt\"\n\nexportacao:\n  - tipo: banco\n    formato: \"sqlite\"\n    destino: \"resultados.db\"\n\n  - tipo: relatorio\n    formato: \"csv\"\n    destino: \"analises/\"\n    agregacoes:\n      - \"contagem_por_tipo\"\n      - \"pessoas_mais_frequentes\"\n</code></pre>"},{"location":"projeto/visao_do_projeto/#uso-na-cli","title":"Uso na CLI","text":"<pre><code># Executar pipeline configurado\npython run.py pipeline --config pipeline_config.yaml\n\n# Listar pipelines dispon\u00edveis\npython run.py pipeline list\n\n# Criar novo pipeline interativamente\npython run.py pipeline create --interactive\n</code></pre>"},{"location":"projeto/visao_do_projeto/#casos-de-uso-expandidos","title":"\ud83c\udfaf CASOS DE USO EXPANDIDOS","text":""},{"location":"projeto/visao_do_projeto/#pesquisador-a-historia-contemporanea","title":"Pesquisador A: Hist\u00f3ria Contempor\u00e2nea","text":"<pre><code>nome: \"An\u00e1lise de Discursos Pol\u00edticos\"\nfontes:\n  - tipo: web_scraper\n    url: \"http://arquivo.gov.br/discursos\"\n\nprocessadores:\n  - classificador: [\"discurso\", \"entrevista\", \"nota\"]\n  - extrator: [\"PERSON\", \"ORG\", \"GPE\"]\n  - sentimento\n  - sumarizador (5 frases)\n</code></pre>"},{"location":"projeto/visao_do_projeto/#pesquisador-b-jornalismo-investigativo","title":"Pesquisador B: Jornalismo Investigativo","text":"<pre><code>nome: \"Investiga\u00e7\u00e3o de Documentos Vazados\"\nfontes:\n  - tipo: pasta_local\n    caminho: \"./documentos/\"\n    formato: [\"pdf\", \"jpg\"]\n\nprocessadores:\n  - ocr (para imagens)\n  - extrator_entidades\n  - tradutor (en \u2192 pt)\n  - analise_sentimento\n  - rede_relacoes (quem cita quem)\n</code></pre>"},{"location":"projeto/visao_do_projeto/#pesquisador-c-linguistica","title":"Pesquisador C: Lingu\u00edstica","text":"<pre><code>nome: \"An\u00e1lise de Corpus Textual\"\nfontes:\n  - tipo: api\n    endpoint: \"https://api.corpus.ufsc.br\"\n\nprocessadores:\n  - tokenizador\n  - pos_tagger\n  - ner\n  - analise_frequencia\n</code></pre>"},{"location":"projeto/visao_do_projeto/#funcionalidades-propostas-por-prioridade","title":"\ud83d\udcca FUNCIONALIDADES PROPOSTAS POR PRIORIDADE","text":""},{"location":"projeto/visao_do_projeto/#prioridade-1-core-ja-temos","title":"Prioridade 1 (Core - j\u00e1 temos)","text":"<ul> <li>[x] Coleta de p\u00e1ginas web</li> <li>[x] Armazenamento estruturado</li> <li>[x] Classifica\u00e7\u00e3o por regras</li> <li>[x] Extra\u00e7\u00e3o de entidades (nomes)</li> <li>[x] Tradu\u00e7\u00e3o autom\u00e1tica</li> <li>[x] Interface CLI</li> <li>[x] Interface Web b\u00e1sica</li> <li>[x] Exporta\u00e7\u00e3o TXT</li> </ul>"},{"location":"projeto/visao_do_projeto/#prioridade-2-expansao-da-plataforma","title":"Prioridade 2 (Expans\u00e3o da plataforma)","text":"<ul> <li>[ ] Configura\u00e7\u00e3o via YAML de pipelines</li> <li>[ ] M\u00faltiplas fontes (PDF, pasta local)</li> <li>[ ] OCR para imagens (Tesseract)</li> <li>[ ] Extra\u00e7\u00e3o de entidades gen\u00e9rica (LOC, ORG, DATE)</li> <li>[ ] Classifica\u00e7\u00e3o customiz\u00e1vel (regras do usu\u00e1rio)</li> <li>[ ] Exporta\u00e7\u00e3o CSV/JSON</li> <li>[ ] Dashboard web interativo</li> </ul>"},{"location":"projeto/visao_do_projeto/#prioridade-3-recursos-avancados","title":"Prioridade 3 (Recursos avan\u00e7ados)","text":"<ul> <li>[ ] Interface gr\u00e1fica para configurar pipeline (drag-and-drop)</li> <li>[ ] Modelos de ML customizados (treinar com dados do usu\u00e1rio)</li> <li>[ ] API p\u00fablica para integra\u00e7\u00f5es</li> <li>[ ] Autentica\u00e7\u00e3o e m\u00faltiplos usu\u00e1rios</li> <li>[ ] Versionamento de pipelines (git-like)</li> <li>[ ] Agendamento de execu\u00e7\u00f5es (cron)</li> <li>[ ] Notifica\u00e7\u00f5es (email, webhook)</li> </ul>"},{"location":"projeto/visao_do_projeto/#prioridade-4-pesquisa-e-experimentacao","title":"Prioridade 4 (Pesquisa e experimenta\u00e7\u00e3o)","text":"<ul> <li>[ ] An\u00e1lise de redes sociais (grafos de relacionamentos)</li> <li>[ ] Linha do tempo interativa</li> <li>[ ] Detec\u00e7\u00e3o de emo\u00e7\u00f5es (al\u00e9m de sentimento)</li> <li>[ ] Similaridade entre documentos</li> <li>[ ] Topic modeling (LDA)</li> <li>[ ] Visualiza\u00e7\u00f5es 3D de dados</li> </ul>"},{"location":"projeto/visao_do_projeto/#arquitetura-de-plugins","title":"\ud83c\udfd7\ufe0f ARQUITETURA DE PLUGINS","text":"<pre><code># plugin_interface.py\nfrom abc import ABC, abstractmethod\n\nclass FontePlugin(ABC):\n    \"\"\"Interface para fontes de dados.\"\"\"\n\n    @abstractmethod\n    def coletar(self, config: dict) -&gt; list[Documento]:\n        pass\n\n    @abstractmethod\n    def nome(self) -&gt; str:\n        pass\n\nclass ProcessadorPlugin(ABC):\n    \"\"\"Interface para processadores.\"\"\"\n\n    @abstractmethod\n    def processar(self, documento: Documento, config: dict) -&gt; Documento:\n        pass\n\n    @abstractmethod\n    def nome(self) -&gt; str:\n        pass\n\nclass ExportadorPlugin(ABC):\n    \"\"\"Interface para exportadores.\"\"\"\n\n    @abstractmethod\n    def exportar(self, documentos: list[Documento], config: dict) -&gt; str:\n        pass\n</code></pre> <pre><code># exemplo_plugin.py\nclass MeuProcessadorCustomizado(ProcessadorPlugin):\n    def nome(self):\n        return \"meu_processador\"\n\n    def processar(self, documento, config):\n        # l\u00f3gica customizada\n        documento.metadados[\"custom\"] = \"valor\"\n        return documento\n</code></pre>"},{"location":"projeto/visao_do_projeto/#roadmap-sugerido","title":"\ud83d\udcc8 ROADMAP SUGERIDO","text":"<pre><code>graph TD\n    subgraph \"Fase A - Funda\u00e7\u00e3o (3 meses)\"\n        A1[Arquitetura de plugins]\n        A2[Configura\u00e7\u00e3o YAML]\n        A3[M\u00faltiplas fontes]\n    end\n\n    subgraph \"Fase B - Expans\u00e3o (3 meses)\"\n        B1[OCR]\n        B2[Entidades gen\u00e9ricas]\n        B3[Exporta\u00e7\u00e3o CSV/JSON]\n        B4[Dashboard avan\u00e7ado]\n    end\n\n    subgraph \"Fase C - Avan\u00e7ado (3 meses)\"\n        C1[UI drag-and-drop]\n        C2[API p\u00fablica]\n        C3[Autentica\u00e7\u00e3o]\n        C4[Agendamento]\n    end\n\n    subgraph \"Fase D - Pesquisa (6 meses)\"\n        D1[Redes sociais]\n        D2[Timeline]\n        D3[Topic modeling]\n        D4[Visualiza\u00e7\u00f5es 3D]\n    end\n\n    A1 --&gt; A2 --&gt; A3 --&gt; B1\n    B1 --&gt; B2 --&gt; B3 --&gt; B4 --&gt; C1\n    C1 --&gt; C2 --&gt; C3 --&gt; C4 --&gt; D1\n</code></pre>"},{"location":"projeto/visao_do_projeto/#questoes-em-aberto","title":"\ud83e\udd14 QUEST\u00d5ES EM ABERTO","text":"<ol> <li>Qu\u00e3o gen\u00e9rico deve ser? (trade-off flexibilidade vs complexidade)</li> <li>Quem \u00e9 o usu\u00e1rio-alvo? (pesquisador t\u00e9cnico ou usu\u00e1rio final?)</li> <li>Modelo de neg\u00f3cio? (acad\u00eamico, open source, comercial?)</li> <li>Escalabilidade? (milhares de documentos, m\u00faltiplos usu\u00e1rios)</li> <li>Integra\u00e7\u00e3o com outras ferramentas? (Zotero, Mendeley, NVivo)</li> </ol>"},{"location":"projeto/visao_do_projeto/#proximos-passos","title":"\ud83d\udcdd PR\u00d3XIMOS PASSOS","text":"<ol> <li>\u2705 Entender melhor suas ideias (question\u00e1rio)</li> <li>\u2b1c Documento de requisitos detalhado</li> <li>\u2b1c Prot\u00f3tipo de arquitetura de plugins</li> <li>\u2b1c MVP da plataforma (uma fonte configur\u00e1vel)</li> <li>\u2b1c Teste com pesquisadores reais</li> </ol>"},{"location":"projeto/visao_do_projeto/#autor","title":"\ud83d\udc64 AUTOR","text":"<p>Thiago Ribeiro - Projeto de TCC</p> <sub>Documento de Vis\u00e3o - ShowTrials como Plataforma</sub> <sub>Vers\u00e3o 0.1 - 20 de Fevereiro de 2026</sub> <sub>\u2705 Aguardando seus inputs para refinar</sub>"}]}